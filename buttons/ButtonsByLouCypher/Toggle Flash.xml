<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/"
              xmlns:html="http://www.w3.org/1999/xhtml">
  <html:head>
    <html:title><![CDATA[Toggle Flash]]></html:title>
    <html:link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAANkE3LLaAgAAAxxJREFUeJxdk1tom3UYxn//75DDl0PTL22zZa7b1KK9kaE4uoidOJriRLqBs5bmQucmCBsNqIgXMkdBpzCwtrCbXawQL1aLJ0Tp6sWKUtiYKMiM0umytkubHpK0TROS70v+XljD6nv18vI+z3t8BP+zrv54VArRLRARoH0rnJTIaSHlxORnn1y9P1/85xzqHdjr0NXTDT7vG7t2NBnhlib2tbYCcGd2lvTSCvcWV4prG4WLFas6MnVlKFUnONQ7sFfX1cHWcCgW7Yyws6mRHc1+VFVBSlgvbDJzd4m19RzXf00ym84kLKv63tSVoZQG4NDV07vDodjrfT0EA14MtwunQ0dVFWbuzHHgpTcBMJ88SOLk84x//0NsLp3JAG+J/jNno2Vbfhl/7WVjZ1MDfp8Hj+HG6dDY2CzR1vUqucYQ/mALADcHTzC3lGd4dKzo1MQxRQrR3RxsNEy/gcfjxuc1cLscKIrC5fFvWVVd+IMt9O3fw83BE9RqNVoCHpqDjYYUoltBiEhfTxSXy4Hb6cSha/UNx8+PEtjXhm8zS9f+h1nO5QHQNZUXDneCEBFFQLvP5UTXNHRdRYh/DzP54w0AyvMp0ovLvPjup+xpDdfJAz4DAe0agKYIqhWbWk3WE6In38cRNCmXSsiqDba97V+26qBJSFrVWkd2fRPbttE0jYXlFQBqtk3v4Q4SH8YBmJ9frBNUrCoSkhpSTm8Uyx0+w8l6sUy5nOdg/zuoXgNZqdDz9ONkVnIU1gp1sJSSzGoepJxWhJQTw6NjxXK5xOXxr3nqlbdRDRfYFqeOPsvxI52kF1a3tV8oVfhm8hpCygn1txtTf+169AkzGAxEFjJL/Hw7A1WLU8e6+CAe44/b9/AbzjrYNL0MjX5Ban7hwleXzl/UtuYZ+fy7a6HjR56J/XT0OR556AFyuRzZbKEONk0vAOeGE9yaSSUsqzoCoALcvXU9v7v9wC9//j1bzWTzkcfaHsQ0GwiHQ5hmA0LUyGYLfHxpjN9nUhcsq/rRNjHdb2fODkWFkN1ABMSWnGUSmJZSTAyfG9gm538AsQ82lFnZfcgAAAAASUVORK5CYII="/>
    <html:style type="text/css"><![CDATA[
body { font-size: medium; margin: 0; }
body, code:before, help:before, initcode:before {
  font-family: "Verdana", sans-serif;
}
#wrapper { position: fixed; top: 1em; right: 1em; text-align: center; }
p { font-size: small; text-align: center; }
#button {
  background-color: rgb(85, 168, 2);
  background-image: linear-gradient(to bottom, rgb(147, 200, 94), rgb(85, 168, 2));
  background-image: -moz-linear-gradient(top, rgb(147, 200, 94), rgb(85, 168, 2));
  background-image: -o-linear-gradient(top, rgb(147, 200, 94), rgb(85, 168, 2));
  background-image: -webkit-linear-gradient(top, rgb(147, 200, 94), rgb(85, 168, 2));
  border: 1px solid rgb(58, 116, 4);
  border-radius: .5em;
  -moz-border-radius: .5em;
  -webkit-border-radius: .5em;
  padding: 0;
  margin-bottom: 1em;
  box-shadow: 1px 2px 3px rgba(0, 0, 0, .25);
  -moz-box-shadow: 1px 2px 3px rgba(0, 0, 0, .25);
  -o-box-shadow: 1px 2px 3px rgba(0, 0, 0, .25);
  -webkit-box-shadow: 1px 2px 3px rgba(0, 0, 0, .25);
}
#button a {
  color: #000;
  text-shadow: -1pt -1px 0pt rgba(255, 255, 255, .5);
  padding: 1em;
  text-decoration: none;
}
:-moz-any-link:focus {
  color: white;
  outline-color: transparent;
  text-decoration: none;
}
#button a, code, code:before, initcode, initcode:before, help, help:before {
  display: block;
}
#credits { position: fixed; bottom: 1em; right: 1em; font-size: small; }
custombutton { background-color: rgb(171, 171, 171); margin: 1em; }
date, image, mode, accelkey { display: none; }
name { font-weight: bold; font-size: x-large; }
code:before, help:before, initcode:before {
  font-weight: bold;
  font-size: large;
  margin: 0 0 1em;
  padding: .5em;
}
code:before { content: "CODE"; }
help:before { content: "Help"; }
initcode:before { content: "Initialization Code"; }
code, initcode, help {
  background-color: rgb(255, 255, 255);
  border: 1px inset rgb(170, 170, 170);
  font: medium monospace;
  margin: 1em 1em 2em 0;
  padding: 1em;
  text-align: left;
  width: 840px;
  white-space: pre-wrap;
  word-wrap: break-word;
}
.clear { clear: both; }
]]></html:style>
  </html:head>
  <html:body>
    <html:div id="wrapper">
      <html:div id="button">
        <html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EToggle%20Flash%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAANkE3LLaAgAAAxxJREFUeJxdk1tom3UYxn//75DDl0PTL22zZa7b1KK9kaE4uoidOJriRLqBs5bmQucmCBsNqIgXMkdBpzCwtrCbXawQL1aLJ0Tp6sWKUtiYKMiM0umytkubHpK0TROS70v+XljD6nv18vI+z3t8BP+zrv54VArRLRARoH0rnJTIaSHlxORnn1y9P1/85xzqHdjr0NXTDT7vG7t2NBnhlib2tbYCcGd2lvTSCvcWV4prG4WLFas6MnVlKFUnONQ7sFfX1cHWcCgW7Yyws6mRHc1+VFVBSlgvbDJzd4m19RzXf00ym84kLKv63tSVoZQG4NDV07vDodjrfT0EA14MtwunQ0dVFWbuzHHgpTcBMJ88SOLk84x//0NsLp3JAG+J/jNno2Vbfhl/7WVjZ1MDfp8Hj+HG6dDY2CzR1vUqucYQ/mALADcHTzC3lGd4dKzo1MQxRQrR3RxsNEy/gcfjxuc1cLscKIrC5fFvWVVd+IMt9O3fw83BE9RqNVoCHpqDjYYUoltBiEhfTxSXy4Hb6cSha/UNx8+PEtjXhm8zS9f+h1nO5QHQNZUXDneCEBFFQLvP5UTXNHRdRYh/DzP54w0AyvMp0ovLvPjup+xpDdfJAz4DAe0agKYIqhWbWk3WE6In38cRNCmXSsiqDba97V+26qBJSFrVWkd2fRPbttE0jYXlFQBqtk3v4Q4SH8YBmJ9frBNUrCoSkhpSTm8Uyx0+w8l6sUy5nOdg/zuoXgNZqdDz9ONkVnIU1gp1sJSSzGoepJxWhJQTw6NjxXK5xOXxr3nqlbdRDRfYFqeOPsvxI52kF1a3tV8oVfhm8hpCygn1txtTf+169AkzGAxEFjJL/Hw7A1WLU8e6+CAe44/b9/AbzjrYNL0MjX5Ban7hwleXzl/UtuYZ+fy7a6HjR56J/XT0OR556AFyuRzZbKEONk0vAOeGE9yaSSUsqzoCoALcvXU9v7v9wC9//j1bzWTzkcfaHsQ0GwiHQ5hmA0LUyGYLfHxpjN9nUhcsq/rRNjHdb2fODkWFkN1ABMSWnGUSmJZSTAyfG9gm538AsQ82lFnZfcgAAAAASUVORK5CYII%3D%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5Bif%20%28%21%22AddonManager%22%20in%20window%29%20%7B%0A%20%20this.tooltipText%20%3D%20%22This%20button%20is%20not%20compatible%20with%20your%20browser%22%3B%0A%20%20this.style.opacity%20%3D%20%22.25%22%3B%0A%20%20this.disabled%20%3D%20true%3B%0A%20%20return%3B%0A%7D%0A%0Afunction%20setButtonAttributes%28aButton%2C%20aAddon%29%20%7B%0A%20%20aButton.style.opacity%20%3D%20aAddon.userDisabled%20%3F%20%22.25%22%20%3A%20%221%22%3B%0A%20%20aButton.tooltipText%20%3D%20%22Flash%20is%20%22%20+%20%28aAddon.userDisabled%20%3F%20%22disabled%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20%22enabled%22%29%3B%0A%7D%0A%0Athis.getFlash%20%3D%20function%20getFlash%28aButton%2C%20aCallback%29%20%7B%0A%20%20AddonManager.getAddonsByTypes%28%5B%22plugin%22%5D%2C%0A%20%20%20%20function%28aAddons%29%20%7B%0A%20%20%20%20%20%20for%20%28var%20i%20in%20aAddons%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28aAddons%5Bi%5D.name%20%3D%3D%20%22Shockwave%20Flash%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20aCallback%28aButton%2C%20aAddons%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20Application.console.log%28aAddons%5Bi%5D.name%29%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20alert%28%22Flash%20is%20not%20installed%21%22%29%3B%0A%20%20%20%20%7D%0A%20%20%29%0A%7D%0A%0Athis.toggleAddon%20%3D%20function%20toggleAddon%28aButton%2C%20aAddon%29%20%7B%0A%20%20aAddon.userDisabled%20%3D%20%21aAddon.userDisabled%3B%0A%20%20setButtonAttributes%28aButton%2C%20aAddon%29%3B%0A%20%20//if%20%28aAddon.userDisabled%20%3D%3D%20false%29%20content.location.reload%28%29%3B%0A%7D%0A%0Athis.getFlash%28this%2C%20setButtonAttributes%29%3B%0A%0A//https%3A//plus.google.com/101088441440269967746@gplusURL%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5Bthis.getFlash%28this%2C%20this.toggleAddon%29%3B%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" rel="nofollow" title="Install Toggle Flash">
        <![CDATA[Install this button]]>
        </html:a>
      </html:div>
      <html:a href="https://addons.mozilla.org/addon/custom-buttons/?src=external-custombuttons-xml">
        <![CDATA[What's this?]]>
      </html:a>
      <html:div id="credits">
        <html:a href="http://custombuttons.sourceforge.net/forum/viewtopic.php?t=78#p197">
          <![CDATA[Custom Buttons XML]]><html:br/><![CDATA[Exporter/Importer]]>
        </html:a>
      </html:div>
    </html:div>
  </html:body>
  <name>Toggle Flash</name>
  <image><![CDATA[data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAANkE3LLaAgAAAxxJREFUeJxdk1tom3UYxn//75DDl0PTL22zZa7b1KK9kaE4uoidOJriRLqBs5bmQucmCBsNqIgXMkdBpzCwtrCbXawQL1aLJ0Tp6sWKUtiYKMiM0umytkubHpK0TROS70v+XljD6nv18vI+z3t8BP+zrv54VArRLRARoH0rnJTIaSHlxORnn1y9P1/85xzqHdjr0NXTDT7vG7t2NBnhlib2tbYCcGd2lvTSCvcWV4prG4WLFas6MnVlKFUnONQ7sFfX1cHWcCgW7Yyws6mRHc1+VFVBSlgvbDJzd4m19RzXf00ym84kLKv63tSVoZQG4NDV07vDodjrfT0EA14MtwunQ0dVFWbuzHHgpTcBMJ88SOLk84x//0NsLp3JAG+J/jNno2Vbfhl/7WVjZ1MDfp8Hj+HG6dDY2CzR1vUqucYQ/mALADcHTzC3lGd4dKzo1MQxRQrR3RxsNEy/gcfjxuc1cLscKIrC5fFvWVVd+IMt9O3fw83BE9RqNVoCHpqDjYYUoltBiEhfTxSXy4Hb6cSha/UNx8+PEtjXhm8zS9f+h1nO5QHQNZUXDneCEBFFQLvP5UTXNHRdRYh/DzP54w0AyvMp0ovLvPjup+xpDdfJAz4DAe0agKYIqhWbWk3WE6In38cRNCmXSsiqDba97V+26qBJSFrVWkd2fRPbttE0jYXlFQBqtk3v4Q4SH8YBmJ9frBNUrCoSkhpSTm8Uyx0+w8l6sUy5nOdg/zuoXgNZqdDz9ONkVnIU1gp1sJSSzGoepJxWhJQTw6NjxXK5xOXxr3nqlbdRDRfYFqeOPsvxI52kF1a3tV8oVfhm8hpCygn1txtTf+169AkzGAxEFjJL/Hw7A1WLU8e6+CAe44/b9/AbzjrYNL0MjX5Ban7hwleXzl/UtuYZ+fy7a6HjR56J/XT0OR556AFyuRzZbKEONk0vAOeGE9yaSSUsqzoCoALcvXU9v7v9wC9//j1bzWTzkcfaHsQ0GwiHQ5hmA0LUyGYLfHxpjN9nUhcsq/rRNjHdb2fODkWFkN1ABMSWnGUSmJZSTAyfG9gm538AsQ82lFnZfcgAAAAASUVORK5CYII=]]></image>
  <mode>0</mode>
  <initcode><![CDATA[if (!"AddonManager" in window) {
  this.tooltipText = "This button is not compatible with your browser";
  this.style.opacity = ".25";
  this.disabled = true;
  return;
}

function setButtonAttributes(aButton, aAddon) {
  aButton.style.opacity = aAddon.userDisabled ? ".25" : "1";
  aButton.tooltipText = "Flash is " + (aAddon.userDisabled ? "disabled"
                                                           : "enabled");
}

this.getFlash = function getFlash(aButton, aCallback) {
  AddonManager.getAddonsByTypes(["plugin"],
    function(aAddons) {
      for (var i in aAddons) {
        if (aAddons[i].name == "Shockwave Flash") {
          aCallback(aButton, aAddons[i]);
          Application.console.log(aAddons[i].name);
          return;
        }
      }
      alert("Flash is not installed!");
    }
  )
}

this.toggleAddon = function toggleAddon(aButton, aAddon) {
  aAddon.userDisabled = !aAddon.userDisabled;
  setButtonAttributes(aButton, aAddon);
  //if (aAddon.userDisabled == false) content.location.reload();
}

this.getFlash(this, setButtonAttributes);

//https://plus.google.com/101088441440269967746@gplusURL]]></initcode>
  <code><![CDATA[this.getFlash(this, this.toggleAddon);]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help><![CDATA[]]></help>
  <attributes/>
</custombutton>