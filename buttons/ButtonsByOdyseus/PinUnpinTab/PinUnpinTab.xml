<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/" xmlns:html="http://www.w3.org/1999/xhtml">
<html:head>
	<html:title><![CDATA[Pin/Unpin Tab]]></html:title>
	<html:link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABTUlEQVQ4jb2Rv07CUByF73thECqYNEIDpGlroyHyxwiDxBluuelOGJkIGwnBBZz7CA4dHH0GbEu9LbQ5DkYSo2B18JvucL9zTvIjJCGhptOkf78lUFT4ssz+JHNFo2GtDq5o8KXS75ZwRaNho4mYUsTdLnhFhi+eJQvxFYVtmteIez34pRKCavX9LZXh5E5ZMplSrItFuIKAtSQhZgxc1eFl83AywucQrutmoJ0jrDewue0gMgy4ooiXdBpeoYCIMXD9Al42bx5s5qqGiBrg7TZWqRRcUdzJjvDDdEIIee7c3b9WZERGH7zVwtY0wfXLZPJsNmOWZeFpPF75UhnbPkNw00omz+dzalkWbNvGcrnE41XtYS0W4MsqEjfbto3FYoHBYMAIIcTJ5Jh3fHI4YJ/8gXOUOTx/Op3uZg+Hw/0n2sdkMsFoNPrS/C+8AY8W8RU9HpTEAAAAAElFTkSuQmCC"/>
	<html:style type="text/css"><![CDATA[body{font-size:medium;margin:0}body,code:before,help:before,initcode:before{font-family:"Verdana",sans-serif}#wrapper{position:fixed;top:1em;right:1em;max-width:15%;text-align:center}#button{background-color:#299a0b;border:1px solid #3a7404;border-radius:.5em;padding:0;margin-bottom:1em;box-shadow:1px 2px 3px rgba(0,0,0,.25)}#button a{color:#f0f0f0;font-weight:700;text-shadow:-.5pt -.5px .5pt rgba(0,0,0,1);padding:.8em;text-decoration:none}:-moz-any-link:focus{color:grey;outline-color:transparent;text-decoration:none}#button a,code,code:before,initcode,initcode:before,help,help:before{display:block}#credits{position:fixed;bottom:1em;right:1em;font-size:small}#about{font-size:small}custombutton{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABAElEQVQ4jW2TQXLFMAhDff+b2vEHYw5AF38eVTNdZAIxCEkmw31VptU5T7mvOuepc56K2B2f85TZrEwr99VxptUwm2U2695PZVrH937KfZX76txsVsTus0yrEbEr0/4F4AyQc56eDMiI2F0IbYoj9h9ZSCV2XzXUA1BVL8BvBvSMiN20zWY38VZ5gDEkYtfAYTRToA3qiQJk2hcA7W8gpaxG0nPvp4aiQ5UCzOV2GKAgLUEfpsGCfaBR92TonapmdCoAjHTIgLa6/14gbgow8oj9uwe6SMQ0qTz9P9oDZOgCkfMNJnqWaV8P3ouDRorUXEA4H1wbtMmVjcrQ7TSb9QMtXcwa4wpbXgAAAABJRU5ErkJggg==) fixed #f6f6f1;margin:1em}date,image,mode,accelkey{display:none}name{font-weight:700;font-size:x-large}code:before,help:before,initcode:before{font-weight:700;font-size:large;margin:0 0 1em;padding:.5em}code:before{content:"Code Tab"}help:before{content:"Help Tab"}initcode:before{content:"Initialization Code Tab"}code,initcode,help{background-color:#fcfcfc;font-size:.875em;font-family:Consolas,"Bitstream Vera Sans Mono","Courier New",Courier,monospace!important;margin:1em 2em 1em 0 !important;padding:1em;text-align:left;box-shadow:2px 2px 0 rgba(170,160,130,0.5),4px 4px 0 rgba(200,190,165,0.5);max-width:80%;min-width:80%;white-space:pre-wrap;word-wrap:break-word}]]></html:style>
</html:head>
<html:body>
	<html:div id="wrapper">
		<html:div id="button">
			<html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EPin/Unpin%20Tab%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABTUlEQVQ4jb2Rv07CUByF73thECqYNEIDpGlroyHyxwiDxBluuelOGJkIGwnBBZz7CA4dHH0GbEu9LbQ5DkYSo2B18JvucL9zTvIjJCGhptOkf78lUFT4ssz+JHNFo2GtDq5o8KXS75ZwRaNho4mYUsTdLnhFhi+eJQvxFYVtmteIez34pRKCavX9LZXh5E5ZMplSrItFuIKAtSQhZgxc1eFl83AywucQrutmoJ0jrDewue0gMgy4ooiXdBpeoYCIMXD9Al42bx5s5qqGiBrg7TZWqRRcUdzJjvDDdEIIee7c3b9WZERGH7zVwtY0wfXLZPJsNmOWZeFpPF75UhnbPkNw00omz+dzalkWbNvGcrnE41XtYS0W4MsqEjfbto3FYoHBYMAIIcTJ5Jh3fHI4YJ/8gXOUOTx/Op3uZg+Hw/0n2sdkMsFoNPrS/C+8AY8W8RU9HpTEAAAAAElFTkSuQmCC%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B//%20To%20avoid%20initialization%20while%20moving%20the%20button%20in%20%22Australis%20customize%20mode%22.%20%AC%AC%0Aif%20%28self.parentNode%20%26%26%20/%5Ewrapper-/.test%28self.parentNode.id%29%29%0A%09return%3B%0A%0A//%20Change%20button%20image%20by%20editing%20the%20two%20variables%20bellow.%0Avar%20pinnedTabImage%20%3D%20%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABXklEQVQ4jb2RS0sCYRiFv/8VZGUbpYugaNkiIgyqRbRv9EtpETVZgo2WoWljyCQ6Y7uYVVguUhrofxjePm/DaREFUQ5Ti571+5xz4CXEJIWalzN7+yMC86BQddE/yYWam0v1VhFnHuSf5n63pFBzc+meD7LuR1HfwWnHCaliMxeSr7ppureGos4h0nYg0V2GPOQQbTkgPk5T0/Jxcxb7DStOWvNQdIpztoDD5iQy5YmvIfKzNxhji0j1fLjub0EeBsA37Nh7teCoMQN5SJFgSxAfrEHD5jjzoDj0I8M2EaqPgW/YoAx2kWBeiOUp4+mEEJKrbN8IHSeUQQDpzgZKg9B7syk5l6OqquL25aIebTug9CmuuuvmZEmSOFVVoWkaFEXB2d1KKdKyI9Z2wXSzpmmQZRk8z1NCCBHLU/SgaTEOGCV/cHk/bjw/m81+zg6Hw6NfNIpkMglBEL41/wtv37oAkWZ0MmIAAAAASUVORK5CYII%3D%22%3B%0Avar%20unpinnedTabImage%20%3D%20%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABTUlEQVQ4jb2Rv07CUByF73thECqYNEIDpGlroyHyxwiDxBluuelOGJkIGwnBBZz7CA4dHH0GbEu9LbQ5DkYSo2B18JvucL9zTvIjJCGhptOkf78lUFT4ssz+JHNFo2GtDq5o8KXS75ZwRaNho4mYUsTdLnhFhi+eJQvxFYVtmteIez34pRKCavX9LZXh5E5ZMplSrItFuIKAtSQhZgxc1eFl83AywucQrutmoJ0jrDewue0gMgy4ooiXdBpeoYCIMXD9Al42bx5s5qqGiBrg7TZWqRRcUdzJjvDDdEIIee7c3b9WZERGH7zVwtY0wfXLZPJsNmOWZeFpPF75UhnbPkNw00omz+dzalkWbNvGcrnE41XtYS0W4MsqEjfbto3FYoHBYMAIIcTJ5Jh3fHI4YJ/8gXOUOTx/Op3uZg+Hw/0n2sdkMsFoNPrS/C+8AY8W8RU9HpTEAAAAAElFTkSuQmCC%22%3B%0A%0Avar%20_UID%20%3D%20%22__pin_unpin_tab_%22%20+%20self.id.slice%2820%29%3B%0A%0Athis.tabContainerListener%20%3D%20function%28aE%29%20%7B%0A%09var%20tab%20%3D%20aE.target%3B%0A%09switch%20%28aE.type%29%20%7B%0A%09%09case%20%22TabAttrModified%22%3A%0A%09%09case%20%22TabClose%22%3A%0A%09%09case%20%22TabOpen%22%3A%0A%09%09case%20%22TabPinned%22%3A%0A%09%09case%20%22TabUnpinned%22%3A%0A%09%09%09setButtonState%28%29%3B%0A%09%09%09break%3B%0A%09%7D%0A%7D%3B%0A%0Aif%20%28%21%28_UID%20in%20window%29%29%20%7B%0A%09window%5B_UID%5D%20%3D%20%7B%0A%09%09CustomizableUI%3A%20false%2C%0A%09%7D%3B%0A%7D%0A%0Aif%20%28%22CustomizableUI%22%20in%20window%29%20%7B%0A%09if%20%28%21window%5B_UID%5D%5B%22CustomizableUI%22%5D%29%20%7B%0A%09%09window%5B_UID%5D%5B%22CustomizableUI%22%5D%20%3D%20true%3B%0A%09%09CustomizableUI.addListener%28%7B%0A%09%09%09onCustomizeEnd%3A%20function%28aWindow%29%20%7B%0A%09%09%09%09var%20thisBtn%20%3D%20aWindow.document.getElementById%28self.id%29%3B%0A%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09aWindow%5B_UID%5D%5B%22CustomizableUI%22%5D%20%26%26%20thisBtn.selfDestroy%28%29%3B%0A%09%09%09%09%7D%2C%20Math.floor%28Math.random%28%29%20*%20%281%20+%202000%20-%20200%29%29%20+%20200%29%3B%0A%09%09%09%7D%0A%09%09%7D%29%3B%0A%09%7D%0A%7D%0A%0Athis.tooltipText%20%3D%20self.name%20+%20%22%20%20%3D%3D%20ID%3A%20%22%20+%20self.id.slice%2820%29%20+%20%22%5Cn%5Cn%22%20+%0A%09%22%uD835%uDDDF%uD835%uDDF2%uD835%uDDF3%uD835%uDE01%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%3A%20Toggle%20tab%20pinned%20state%5Cn%5Cn%22%20+%0A%09%22%uD835%uDDE5%uD835%uDDF2%uD835%uDDEE%uD835%uDDF1%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDF5%uD835%uDDF2%uD835%uDDF9%uD835%uDDFD%20%uD835%uDDF3%uD835%uDDFC%uD835%uDDFF%20%uD835%uDE03%uD835%uDDF2%uD835%uDDFF%uD835%uDE06%20%uD835%uDDF6%uD835%uDDFA%uD835%uDDFD%uD835%uDDFC%uD835%uDDFF%uD835%uDE01%uD835%uDDEE%uD835%uDDFB%uD835%uDE01%20%uD835%uDE02%uD835%uDE00%uD835%uDDEE%uD835%uDDF4%uD835%uDDF2%20%uD835%uDDFB%uD835%uDDFC%uD835%uDE01%uD835%uDDF2%uD835%uDE00.%5Cn%22%20+%0A%09%22%uD835%uDDE5%uD835%uDDF6%uD835%uDDF4%uD835%uDDF5%uD835%uDE01%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%20%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%2C%20%5C%22%uD835%uDDD5%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDDB%uD835%uDDF2%uD835%uDDF9%uD835%uDDFD%5C%22%20%uD835%uDDF6%uD835%uDE01%uD835%uDDF2%uD835%uDDFA.%22%3B%0A%0Alet%20tC%20%3D%20gBrowser.tabContainer%3B%0AtC.addEventListener%28%22TabAttrModified%22%2C%20this.tabContainerListener%2C%20false%29%3B%0AtC.addEventListener%28%22TabClose%22%2C%20this.tabContainerListener%2C%20false%29%3B%0AtC.addEventListener%28%22TabOpen%22%2C%20this.tabContainerListener%2C%20false%29%3B%0AtC.addEventListener%28%22TabPinned%22%2C%20this.tabContainerListener%2C%20false%29%3B%0AtC.addEventListener%28%22TabUnpinned%22%2C%20this.tabContainerListener%2C%20false%29%3B%0A%0Afunction%20setButtonState%28%29%20%7B%0A%09if%20%28gBrowser.selectedTab.getAttribute%28%22pinned%22%29%20%3D%3D%20%22true%22%29%20%7B%0A%09%09self.image%20%3D%20pinnedTabImage%3B%0A%09%7D%20else%20%7B%0A%09%09self.image%20%3D%20unpinnedTabImage%3B%0A%09%7D%0A%7D%0A%0Afunction%20togglePinTab%28aE%29%20%7B%0A%09var%20win%20%3D%20aE.target.ownerDocument.defaultView%3B%0A%09if%20%28win.gBrowser.selectedTab.getAttribute%28%22pinned%22%29%20%3D%3D%20%22true%22%29%20%7B%0A%09%09win.gBrowser.unpinTab%28win.gBrowser.selectedTab%29%3B%0A%09%7D%20else%20%7B%0A%09%09win.gBrowser.pinTab%28win.gBrowser.selectedTab%29%3B%0A%09%7D%0A%09setButtonState%28%29%3B%0A%7D%0A%0Athis.selfDestroy%20%3D%20function%28aE%29%20%7B%0A%09self.destroy%28%22update%22%29%3B%0A%09setTimeout%28function%28%29%20%7B%0A%09%09self.init%28%29%3B%0A%09%7D%2C%20100%29%3B%0A%7D%3B%0A%0Athis.onclick%20%3D%20function%28aE%29%20%7B%0A%09if%20%28aE.button%20%3D%3D%3D%200%29%0A%09%09togglePinTab%28aE%29%3B%0A%7D%3B%0A%0AaddDestructor%28function%28aReason%29%20%7B%0A%09if%20%28aReason%20%3D%3D%3D%20%22update%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09let%20tC%20%3D%20gBrowser.tabContainer%3B%0A%09%09tC.removeEventListener%28%22TabAttrModified%22%2C%20this.tabContainerListener%2C%20false%29%3B%0A%09%09tC.removeEventListener%28%22TabClose%22%2C%20this.tabContainerListener%2C%20false%29%3B%0A%09%09tC.removeEventListener%28%22TabOpen%22%2C%20this.tabContainerListener%2C%20false%29%3B%0A%09%09tC.removeEventListener%28%22TabPinned%22%2C%20this.tabContainerListener%2C%20false%29%3B%0A%09%09tC.removeEventListener%28%22TabUnpinned%22%2C%20this.tabContainerListener%2C%20false%29%3B%0A%09%7D%0A%7D%29%3B%0A%0AsetButtonState%28%29%3B%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*Code*/%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5B%uD835%uDDDC%uD835%uDDFA%uD835%uDDFD%uD835%uDDFC%uD835%uDDFF%uD835%uDE01%uD835%uDDEE%uD835%uDDFB%uD835%uDE01%20%uD835%uDDFB%uD835%uDDFC%uD835%uDE01%uD835%uDDF2%uD835%uDE00%0A%u26AB%20%uD835%uDDD7%uD835%uDDE2%20%uD835%uDDE1%uD835%uDDE2%uD835%uDDE7%20%uD835%uDDF6%uD835%uDDFB%uD835%uDE00%uD835%uDE01%uD835%uDDEE%uD835%uDDF9%uD835%uDDF9%20%uD835%uDDFA%uD835%uDDFC%uD835%uDDFF%uD835%uDDF2%20%uD835%uDE01%uD835%uDDF5%uD835%uDDEE%uD835%uDDFB%20%uD835%uDDFC%uD835%uDDFB%uD835%uDDF2%20%uD835%uDE03%uD835%uDDF2%uD835%uDDFF%uD835%uDE00%uD835%uDDF6%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDFC%uD835%uDDF3%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDEE%uD835%uDE01%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF2%20%uD835%uDE00%uD835%uDDEE%uD835%uDDFA%uD835%uDDF2%20%uD835%uDE01%uD835%uDDF6%uD835%uDDFA%uD835%uDDF2%u2757%u2757%u2757%0A%u26AB%20%uD835%uDDD7%uD835%uDDE2%20%uD835%uDDE1%uD835%uDDE2%uD835%uDDE7%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDFC%uD835%uDDFB%uD835%uDDF2%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%u2757%u2757%u2757%0A%u26AB%20If%20you%20did%20any%20of%20the%20previous%20actions%2C%20delete%20all%20extra%20buttons%20leaving%20only%20one%20version%20of%20%uD835%uDDE3%uD835%uDDF6%uD835%uDDFB/%uD835%uDDE8%uD835%uDDFB%uD835%uDDFD%uD835%uDDF6%uD835%uDDFB%20%uD835%uDDE7%uD835%uDDEE%uD835%uDDEF%20and%20restart%20your%20application.%0A%u26AB%20The%20image/s%20for%20this%20button%20can%20be%20changed%20by%20editing%20the%20variables%20called%20%uD835%uDDFD%uD835%uDDF6%uD835%uDDFB%uD835%uDDFB%uD835%uDDF2%uD835%uDDF1%uD835%uDDE7%uD835%uDDEE%uD835%uDDEF%uD835%uDDDC%uD835%uDDFA%uD835%uDDEE%uD835%uDDF4%uD835%uDDF2%20and%20%uD835%uDE02%uD835%uDDFB%uD835%uDDFD%uD835%uDDF6%uD835%uDDFB%uD835%uDDFB%uD835%uDDF2%uD835%uDDF1%uD835%uDDE7%uD835%uDDEE%uD835%uDDEF%uD835%uDDDC%uD835%uDDFA%uD835%uDDEE%uD835%uDDF4%uD835%uDDF2%2C%20found%20inside%20the%20Initialization%20tab%20of%20this%20button.%0A%0A%5D%5D%3E%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" rel="nofollow" title="Install Pin/Unpin Tab">
				<![CDATA[Install this button]]>
			</html:a>
		</html:div>
		<html:a id="about" href="https://addons.mozilla.org/addon/custom-buttons/">
			<![CDATA[About CustomButtons]]>
		</html:a>
		<html:div id="credits">
			<html:a href="http://custombuttons.sourceforge.net/forum/viewtopic.php?t=3599">
				<![CDATA[XML created with]]>
				<html:br/>
				<![CDATA[CB Context Menu Extended]]>
			</html:a>
		</html:div>
	</html:div>
</html:body>
  <name>Pin/Unpin Tab</name>
  <image><![CDATA[data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABTUlEQVQ4jb2Rv07CUByF73thECqYNEIDpGlroyHyxwiDxBluuelOGJkIGwnBBZz7CA4dHH0GbEu9LbQ5DkYSo2B18JvucL9zTvIjJCGhptOkf78lUFT4ssz+JHNFo2GtDq5o8KXS75ZwRaNho4mYUsTdLnhFhi+eJQvxFYVtmteIez34pRKCavX9LZXh5E5ZMplSrItFuIKAtSQhZgxc1eFl83AywucQrutmoJ0jrDewue0gMgy4ooiXdBpeoYCIMXD9Al42bx5s5qqGiBrg7TZWqRRcUdzJjvDDdEIIee7c3b9WZERGH7zVwtY0wfXLZPJsNmOWZeFpPF75UhnbPkNw00omz+dzalkWbNvGcrnE41XtYS0W4MsqEjfbto3FYoHBYMAIIcTJ5Jh3fHI4YJ/8gXOUOTx/Op3uZg+Hw/0n2sdkMsFoNPrS/C+8AY8W8RU9HpTEAAAAAElFTkSuQmCC]]></image>
  <mode>0</mode>
  <initcode><![CDATA[// To avoid initialization while moving the button in "Australis customize mode". ¬¬
if (self.parentNode && /^wrapper-/.test(self.parentNode.id))
	return;

// Change button image by editing the two variables bellow.
var pinnedTabImage = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABXklEQVQ4jb2RS0sCYRiFv/8VZGUbpYugaNkiIgyqRbRv9EtpETVZgo2WoWljyCQ6Y7uYVVguUhrofxjePm/DaREFUQ5Ti571+5xz4CXEJIWalzN7+yMC86BQddE/yYWam0v1VhFnHuSf5n63pFBzc+meD7LuR1HfwWnHCaliMxeSr7ppureGos4h0nYg0V2GPOQQbTkgPk5T0/Jxcxb7DStOWvNQdIpztoDD5iQy5YmvIfKzNxhji0j1fLjub0EeBsA37Nh7teCoMQN5SJFgSxAfrEHD5jjzoDj0I8M2EaqPgW/YoAx2kWBeiOUp4+mEEJKrbN8IHSeUQQDpzgZKg9B7syk5l6OqquL25aIebTug9CmuuuvmZEmSOFVVoWkaFEXB2d1KKdKyI9Z2wXSzpmmQZRk8z1NCCBHLU/SgaTEOGCV/cHk/bjw/m81+zg6Hw6NfNIpkMglBEL41/wtv37oAkWZ0MmIAAAAASUVORK5CYII=";
var unpinnedTabImage = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABTUlEQVQ4jb2Rv07CUByF73thECqYNEIDpGlroyHyxwiDxBluuelOGJkIGwnBBZz7CA4dHH0GbEu9LbQ5DkYSo2B18JvucL9zTvIjJCGhptOkf78lUFT4ssz+JHNFo2GtDq5o8KXS75ZwRaNho4mYUsTdLnhFhi+eJQvxFYVtmteIez34pRKCavX9LZXh5E5ZMplSrItFuIKAtSQhZgxc1eFl83AywucQrutmoJ0jrDewue0gMgy4ooiXdBpeoYCIMXD9Al42bx5s5qqGiBrg7TZWqRRcUdzJjvDDdEIIee7c3b9WZERGH7zVwtY0wfXLZPJsNmOWZeFpPF75UhnbPkNw00omz+dzalkWbNvGcrnE41XtYS0W4MsqEjfbto3FYoHBYMAIIcTJ5Jh3fHI4YJ/8gXOUOTx/Op3uZg+Hw/0n2sdkMsFoNPrS/C+8AY8W8RU9HpTEAAAAAElFTkSuQmCC";

var _UID = "__pin_unpin_tab_" + self.id.slice(20);

this.tabContainerListener = function(aE) {
	var tab = aE.target;
	switch (aE.type) {
		case "TabAttrModified":
		case "TabClose":
		case "TabOpen":
		case "TabPinned":
		case "TabUnpinned":
			setButtonState();
			break;
	}
};

if (!(_UID in window)) {
	window[_UID] = {
		CustomizableUI: false,
	};
}

if ("CustomizableUI" in window) {
	if (!window[_UID]["CustomizableUI"]) {
		window[_UID]["CustomizableUI"] = true;
		CustomizableUI.addListener({
			onCustomizeEnd: function(aWindow) {
				var thisBtn = aWindow.document.getElementById(self.id);
				setTimeout(function() {
					aWindow[_UID]["CustomizableUI"] && thisBtn.selfDestroy();
				}, Math.floor(Math.random() * (1 + 2000 - 200)) + 200);
			}
		});
	}
}

this.tooltipText = self.name + "  == ID: " + self.id.slice(20) + "\n\n" +
	"𝗟𝗲𝗳𝘁 𝗰𝗹𝗶𝗰𝗸: Toggle tab pinned state\n\n" +
	"𝗥𝗲𝗮𝗱 𝘁𝗵𝗶𝘀 𝗯𝘂𝘁𝘁𝗼𝗻 𝗵𝗲𝗹𝗽 𝗳𝗼𝗿 𝘃𝗲𝗿𝘆 𝗶𝗺𝗽𝗼𝗿𝘁𝗮𝗻𝘁 𝘂𝘀𝗮𝗴𝗲 𝗻𝗼𝘁𝗲𝘀.\n" +
	"𝗥𝗶𝗴𝗵𝘁 𝗰𝗹𝗶𝗰𝗸 𝗼𝗻 𝗯𝘂𝘁𝘁𝗼𝗻, \"𝗕𝘂𝘁𝘁𝗼𝗻 𝗛𝗲𝗹𝗽\" 𝗶𝘁𝗲𝗺.";

let tC = gBrowser.tabContainer;
tC.addEventListener("TabAttrModified", this.tabContainerListener, false);
tC.addEventListener("TabClose", this.tabContainerListener, false);
tC.addEventListener("TabOpen", this.tabContainerListener, false);
tC.addEventListener("TabPinned", this.tabContainerListener, false);
tC.addEventListener("TabUnpinned", this.tabContainerListener, false);

function setButtonState() {
	if (gBrowser.selectedTab.getAttribute("pinned") == "true") {
		self.image = pinnedTabImage;
	} else {
		self.image = unpinnedTabImage;
	}
}

function togglePinTab(aE) {
	var win = aE.target.ownerDocument.defaultView;
	if (win.gBrowser.selectedTab.getAttribute("pinned") == "true") {
		win.gBrowser.unpinTab(win.gBrowser.selectedTab);
	} else {
		win.gBrowser.pinTab(win.gBrowser.selectedTab);
	}
	setButtonState();
}

this.selfDestroy = function(aE) {
	self.destroy("update");
	setTimeout(function() {
		self.init();
	}, 100);
};

this.onclick = function(aE) {
	if (aE.button === 0)
		togglePinTab(aE);
};

addDestructor(function(aReason) {
	if (aReason === "update" || aReason === "delete") {
		let tC = gBrowser.tabContainer;
		tC.removeEventListener("TabAttrModified", this.tabContainerListener, false);
		tC.removeEventListener("TabClose", this.tabContainerListener, false);
		tC.removeEventListener("TabOpen", this.tabContainerListener, false);
		tC.removeEventListener("TabPinned", this.tabContainerListener, false);
		tC.removeEventListener("TabUnpinned", this.tabContainerListener, false);
	}
});

setButtonState();]]></initcode>
  <code><![CDATA[/*Code*/]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help><![CDATA[𝗜𝗺𝗽𝗼𝗿𝘁𝗮𝗻𝘁 𝗻𝗼𝘁𝗲𝘀
⚫ 𝗗𝗢 𝗡𝗢𝗧 𝗶𝗻𝘀𝘁𝗮𝗹𝗹 𝗺𝗼𝗿𝗲 𝘁𝗵𝗮𝗻 𝗼𝗻𝗲 𝘃𝗲𝗿𝘀𝗶𝗼𝗻 𝗼𝗳 𝘁𝗵𝗶𝘀 𝗯𝘂𝘁𝘁𝗼𝗻 𝗮𝘁 𝘁𝗵𝗲 𝘀𝗮𝗺𝗲 𝘁𝗶𝗺𝗲❗❗❗
⚫ 𝗗𝗢 𝗡𝗢𝗧 𝗰𝗹𝗼𝗻𝗲 𝘁𝗵𝗶𝘀 𝗯𝘂𝘁𝘁𝗼𝗻❗❗❗
⚫ If you did any of the previous actions, delete all extra buttons leaving only one version of 𝗣𝗶𝗻/𝗨𝗻𝗽𝗶𝗻 𝗧𝗮𝗯 and restart your application.
⚫ The image/s for this button can be changed by editing the variables called 𝗽𝗶𝗻𝗻𝗲𝗱𝗧𝗮𝗯𝗜𝗺𝗮𝗴𝗲 and 𝘂𝗻𝗽𝗶𝗻𝗻𝗲𝗱𝗧𝗮𝗯𝗜𝗺𝗮𝗴𝗲, found inside the Initialization tab of this button.

]]></help>
  <attributes/>
</custombutton>