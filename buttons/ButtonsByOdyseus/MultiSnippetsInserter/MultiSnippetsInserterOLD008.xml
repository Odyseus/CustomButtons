<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/" xmlns:html="http://www.w3.org/1999/xhtml">
<html:head>
	<html:title><![CDATA[Multi Snippets Inserter]]></html:title>
	<html:link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB/0lEQVQ4ja2SQUtUUQCFz8y8N1ODMzLD04lM34zV6xEYDi1q0ULsF7jKIkjKEDJazax6kAtdDrjUhYILBS0xrZWRSEVM7qba+AekRTvFuxG+NndEJK2gCwcuB87HuZcj/c8DxK1iv/P/FG4BLgMBcAlosX6n9QKgcBqgy3GcdUk/HcfZBHwgBgSSfsRisa/ARSALnD0edufn569LajiOsyXpW61WuwmcsYCtRCLxanx8/FYYhk9XV1fLwIXDZwF53/crkr4MDw+/kFTv6OiIgDYL+Cjpveu63yVtS9oul8uPgLYmoJhMJufS6fQbY8ztfD7/0nXdRaDbAt5J2mw0Gs/q9fqopA/JZHIW6BaQmpycvCFpI5fLLWYymel8Pr8gaaNSqfRZwFo2m10ArgLXUqnUSjweXwQCAZ6t/9r3/ZlSqbRULBZnJK0UCoXnFrAk6W1vb+9QEARPJK319PREQElA0XXdqXQ6Pbu/v38XGDg4OBhsbW2dTiQSsxYwl8vlptrb29clfQrDsLa8vDwA5ASc393dHTTGPGx+CnDOGDO0t7d3HwiMMY+NMQ+Aezs7OyPAHaB0ODjABdxm2I7mChDae2jVaQd38iqBTs/zxiR9PirP88aArlPnfKRNf7VaHZU0IWmiWq2OAv3Nln8NiaJoJIqikX8KH4P0WZ0Y/gX5M2qRPU0WMgAAAABJRU5ErkJggg=="/>
	<html:style type="text/css"><![CDATA[body{font-size:medium;margin:0}body,code:before,help:before,initcode:before{font-family:"Verdana",sans-serif}#wrapper{position:fixed;top:1em;right:1em;max-width:15%;text-align:center}#button{background-color:#299a0b;border:1px solid #3a7404;border-radius:.5em;padding:0;margin-bottom:1em;box-shadow:1px 2px 3px rgba(0,0,0,.25)}#button a{color:#f0f0f0;font-weight:700;text-shadow:-.5pt -.5px .5pt rgba(0,0,0,1);padding:.8em;text-decoration:none}:-moz-any-link:focus{color:grey;outline-color:transparent;text-decoration:none}#button a,code,code:before,initcode,initcode:before,help,help:before{display:block}#credits{position:fixed;bottom:1em;right:1em;font-size:small}#about{font-size:small}custombutton{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABAElEQVQ4jW2TQXLFMAhDff+b2vEHYw5AF38eVTNdZAIxCEkmw31VptU5T7mvOuepc56K2B2f85TZrEwr99VxptUwm2U2695PZVrH937KfZX76txsVsTus0yrEbEr0/4F4AyQc56eDMiI2F0IbYoj9h9ZSCV2XzXUA1BVL8BvBvSMiN20zWY38VZ5gDEkYtfAYTRToA3qiQJk2hcA7W8gpaxG0nPvp4aiQ5UCzOV2GKAgLUEfpsGCfaBR92TonapmdCoAjHTIgLa6/14gbgow8oj9uwe6SMQ0qTz9P9oDZOgCkfMNJnqWaV8P3ouDRorUXEA4H1wbtMmVjcrQ7TSb9QMtXcwa4wpbXgAAAABJRU5ErkJggg==) fixed #f6f6f1;margin:1em}date,image,mode,accelkey{display:none}name{font-weight:700;font-size:x-large}code:before,help:before,initcode:before{font-weight:700;font-size:large;margin:0 0 1em;padding:.5em}code:before{content:"Code Tab"}help:before{content:"Help Tab"}initcode:before{content:"Initialization Code Tab"}code,initcode,help{background-color:#fcfcfc;font-size:.875em;font-family:Consolas,"Bitstream Vera Sans Mono","Courier New",Courier,monospace!important;margin:1em 2em 1em 0 !important;padding:1em;text-align:left;box-shadow:2px 2px 0 rgba(170,160,130,0.5),4px 4px 0 rgba(200,190,165,0.5);max-width:80%;min-width:80%;white-space:pre-wrap;word-wrap:break-word}]]></html:style>
</html:head>
<html:body>
	<html:div id="wrapper">
		<html:div id="button">
			<html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EMulti%20Snippets%20Inserter%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB/0lEQVQ4ja2SQUtUUQCFz8y8N1ODMzLD04lM34zV6xEYDi1q0ULsF7jKIkjKEDJazax6kAtdDrjUhYILBS0xrZWRSEVM7qba+AekRTvFuxG+NndEJK2gCwcuB87HuZcj/c8DxK1iv/P/FG4BLgMBcAlosX6n9QKgcBqgy3GcdUk/HcfZBHwgBgSSfsRisa/ARSALnD0edufn569LajiOsyXpW61WuwmcsYCtRCLxanx8/FYYhk9XV1fLwIXDZwF53/crkr4MDw+/kFTv6OiIgDYL+Cjpveu63yVtS9oul8uPgLYmoJhMJufS6fQbY8ztfD7/0nXdRaDbAt5J2mw0Gs/q9fqopA/JZHIW6BaQmpycvCFpI5fLLWYymel8Pr8gaaNSqfRZwFo2m10ArgLXUqnUSjweXwQCAZ6t/9r3/ZlSqbRULBZnJK0UCoXnFrAk6W1vb+9QEARPJK319PREQElA0XXdqXQ6Pbu/v38XGDg4OBhsbW2dTiQSsxYwl8vlptrb29clfQrDsLa8vDwA5ASc393dHTTGPGx+CnDOGDO0t7d3HwiMMY+NMQ+Aezs7OyPAHaB0ODjABdxm2I7mChDae2jVaQd38iqBTs/zxiR9PirP88aArlPnfKRNf7VaHZU0IWmiWq2OAv3Nln8NiaJoJIqikX8KH4P0WZ0Y/gX5M2qRPU0WMgAAAABJRU5ErkJggg%3D%3D%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B//%20To%20avoid%20initialization%20while%20moving%20the%20button%20in%20%22Australis%20customize%20mode%22.%20%AC%AC%0Aif%20%28self.parentNode%20%26%26%20/%5Ewrapper-/.test%28self.parentNode.id%29%29%0A%09return%3B%0A%0Avar%20buttonImage%20%3D%20%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB/0lEQVQ4ja2SQUtUUQCFz8y8N1ODMzLD04lM34zV6xEYDi1q0ULsF7jKIkjKEDJazax6kAtdDrjUhYILBS0xrZWRSEVM7qba+AekRTvFuxG+NndEJK2gCwcuB87HuZcj/c8DxK1iv/P/FG4BLgMBcAlosX6n9QKgcBqgy3GcdUk/HcfZBHwgBgSSfsRisa/ARSALnD0edufn569LajiOsyXpW61WuwmcsYCtRCLxanx8/FYYhk9XV1fLwIXDZwF53/crkr4MDw+/kFTv6OiIgDYL+Cjpveu63yVtS9oul8uPgLYmoJhMJufS6fQbY8ztfD7/0nXdRaDbAt5J2mw0Gs/q9fqopA/JZHIW6BaQmpycvCFpI5fLLWYymel8Pr8gaaNSqfRZwFo2m10ArgLXUqnUSjweXwQCAZ6t/9r3/ZlSqbRULBZnJK0UCoXnFrAk6W1vb+9QEARPJK319PREQElA0XXdqXQ6Pbu/v38XGDg4OBhsbW2dTiQSsxYwl8vlptrb29clfQrDsLa8vDwA5ASc393dHTTGPGx+CnDOGDO0t7d3HwiMMY+NMQ+Aezs7OyPAHaB0ODjABdxm2I7mChDae2jVaQd38iqBTs/zxiR9PirP88aArlPnfKRNf7VaHZU0IWmiWq2OAv3Nln8NiaJoJIqikX8KH4P0WZ0Y/gX5M2qRPU0WMgAAAABJRU5ErkJggg%3D%3D%22%3B%0A%0Avar%20%24%20%3D%20this.MultiSnippetsInserter%20%3D%20%7B%0A%09Init%3A%20function%28%29%20%7B%0A%09%09//%20I%20had%20to%20put%20this%20right%20here%20because%20of%20that%20aberration%20called%20Palemoon.%20%AC%AC%0A%09%09self.orient%20%3D%20%22horizontal%22%3B%0A%0A%09%09//%20To%20diminish%20%22damage%22%20caused%20by%20double%20initialization.%0A%09%09//%20Thanks%20sdavidg%21%21%21%20I%20would%20never%20have%20thought%20of%20this%21%21%21%0A%09%09//%20Problems%20in%20Thunderbird%27s%20main%20window%20with%20this.%20The%20message%20composer%20window%20is%20fine.%20%AC%AC%0A%09%09if%20%28%21self.type%20%7C%7C%20self.type%20%21%3D%3D%20%22menu%22%29%20%7B%0A%09%09%09self.type%20%3D%20%22menu%22%3B%0A%09%09%09if%20%28%21%24.%24%28%22messengerWindow%22%29%29%20//%20If%20it%20isn%27t%20Thunderbird%27s%20main%20window.%0A%09%09%09%09return%20true%3B%0A%09%09%7D%0A%0A%09%09if%20%28%21%28%22OS%22%20in%20window%29%29%0A%09%09%09Cu.import%28%22resource%3A//gre/modules/osfile.jsm%22%29%3B%0A%09%09if%20%28%21%28%22Services%22%20in%20window%29%29%0A%09%09%09Cu.import%28%22resource%3A//gre/modules/Services.jsm%22%29%3B%0A%0A%09%09%24.InitPrefs%28%29%3B%0A%0A%09%09if%20%28%21%28%24._UID%20in%20window%29%29%20%7B%0A%09%09%09window%5B%24._UID%5D%20%3D%20%7B%0A%09%09%09%09Initialized%3A%20false%2C%0A%09%09%09%09StyleSheet%3A%20false%2C%0A%09%09%09%09FrameScriptLoaded%3A%20false%2C%0A%09%09%09%7D%3B%0A%09%09%7D%0A%0A%09%09self.tooltipText%20%3D%20%22%22%3B%20//%20Set%20to%20blank.%20Otherwise%20the%20tooltip%20attribute%20doesn%27t%20work.%0A%09%09self.setAttribute%28%22tooltip%22%2C%20%24._UID%20+%20%22_dynamic_tooltip%22%29%3B%0A%09%09self.onclick%20%3D%20function%28aE%29%20%7B%0A%09%09%09//%20Not%20needed%20since%20its%20a%20%22menu%22%20type%20button.%20Duh%21%21%21%21%0A%09%09%09//%20if%20%28aE.button%20%3D%3D%3D%200%20%26%26%20%21aE.shiftKey%20%26%26%20%21aE.ctrlKey%20%26%26%20%21aE.altKey%29%20%7B%0A%09%09%09//%20%09aE.preventDefault%28%29%3B%0A%09%09%09//%20%09%24.handleMainPopup%28%29%3B%0A%09%09%09//%20%7D%0A%09%09%09if%20%28%28aE.button%20%3D%3D%3D%200%20%26%26%20%21aE.shiftKey%20%26%26%20aE.ctrlKey%20%26%26%20%21aE.altKey%29%20%7C%7C%0A%09%09%09%09%28aE.button%20%3D%3D%3D%201%20%26%26%20%21aE.shiftKey%20%26%26%20%21aE.ctrlKey%20%26%26%20%21aE.altKey%29%29%20%7B%0A%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%09%24.optionsPop%20%26%26%20%24.optionsPop.openPopup%28self%2C%20%22after_start%22%2C%200%2C%200%2C%20false%2C%20null%2C%20null%29%3B%0A%09%09%09%7D%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%3B%0A%0A%09%09//%20For%20loading%20frame%20scripts.%20What%20a%20%28%25%B7%24%28%26%25%24%26%25%24%29%29%20stupidity%21%21%21%21%21%0A%09%09%24._randomID%20%3D%20parseInt%28Math.random%28%29%20*%2010000%2C%2010%29%3B%0A%09%09window%5B%24._UID%5D%5B%22RandomID%22%5D%20%3D%20%24._randomID%3B%0A%0A%09%09if%20%28%21%28window%5B%24._UID%5D%5B%22FrameScriptLoaded%22%5D%29%29%20%7B%0A%09%09%09window%5B%24._UID%5D%5B%22FrameScriptLoaded%22%5D%20%3D%20true%3B%0A%09%09%09let%20fS%20%3D%20%24.getHelp%28%22FrameScript%22%29%0A%09%09%09%09.replace%28/_Tag_Inserter__ID_/g%2C%20%24._tagInserterMsgID%29%0A%09%09%09%09.replace%28/_Insert_Text_ID_/g%2C%20%24._insertTextMsgID%29%0A%09%09%09%09.replace%28/_Create_From_Selection_ID_/g%2C%20%24._createFromSelectionMsgID%29%0A%09%09%09%09.replace%28/_Response_ID_/g%2C%20%24._responseMsgID%20+%20%24._randomID%29%3B%0A%09%09%09%24._frameScript%20%3D%20%22data%3Aapplication/javascript%2C%22%20+%20encodeURIComponent%28fS%29%3B%0A%09%09%09//%20Load%20frame%20script%20to%20send%20messages%20TO%20content.%0A%09%09%09%24._globalMM.loadFrameScript%28%24._frameScript%2C%20true%29%3B%0A%09%09%09//%20Add%20listener%20to%20receive%20messages%20FROM%20content.%0A%09%09%09%24._globalMM.addMessageListener%28%24._responseMsgID%20+%20%24._randomID%2C%20%24._messageResponse%29%3B%0A%09%09%7D%0A%0A%09%09//%20%22Convert%22%20preferences%20to%20properties%20of%20main%20object.%0A%09%09//%20So%20I%20don%27t%20have%20to%20call%20gPref%28%22prefname%22%29%20which%20is%20slower.%0A%09%09//%20Just%20have%20to%20be%20carefull%20not%20to%20create%20a%20preference%20with%20the%20same%20name%20as%20a%20property.%20Duh%21%0A%09%09for%20%28let%20p%20in%20%24.DefPrefs%29%20%7B%0A%09%09%09if%20%28%24.DefPrefs.hasOwnProperty%28p%29%29%0A%09%09%09%09%24%5B%22_%22%20+%20p%5D%20%3D%20%24.gPref%28p%29%3B%0A%09%09%7D%0A%0A%09%09if%20%28%21%28window%5B%24._UID%5D%5B%22Initialized%22%5D%29%29%20%7B%0A%09%09%09window%5B%24._UID%5D%5B%22Initialized%22%5D%20%3D%20true%3B%0A%09%09%09%24.HandlePrefListener%28%29%3B%0A%09%09%7D%0A%0A%09%09%24.CreateElements%28%29%3B%0A%09%09%24.CSSLoader%28%29%3B%0A%0A%09%09if%20%28%24._OpenOnHover%29%20%7B%0A%09%09%09//%20DO%20NOT%20USE%20%24.handleMainPopup%28%29%20here%21%21%21%21%21%0A%09%09%09self.onmouseover%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%09%09clearTimeout%28%24.openOnHoverTimer%29%3B%0A%09%09%09%09%24.openOnHoverTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%24.selfPop%20%26%26%20%24.selfPop.openPopup%28self%2C%20%22after_start%22%2C%200%2C%200%2C%20false%2C%20null%2C%20null%29%3B%0A%09%09%09%09%7D%2C%20%24._OpenOnHoverDelayOpen%29%3B%0A%09%09%09%7D%3B%0A%09%09%09self.onmouseout%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%09%09clearTimeout%28%24.openOnHoverTimer%29%3B%0A%09%09%09%09%24.openOnHoverTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09if%20%28%24.ctxPop.state%20%21%3D%3D%20%22open%22%29%0A%09%09%09%09%09%09%24.selfPop%20%26%26%20%24.selfPop.hidePopup%28%29%3B%0A%09%09%09%09%7D%2C%20%24._OpenOnHoverDelayClose%29%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09self.onmouseover%20%3D%20null%3B%0A%09%09%09self.onmouseout%20%3D%20null%3B%0A%09%09%7D%0A%0A%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22update%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09if%20%28self.menuModified%29%20%7B%0A%09%09%09%09%09self.image%20%3D%20buttonImage%3B%0A%09%09%09%09%09self.menuModified%20%3D%20false%3B%0A%09%09%09%09%7D%0A%09%09%09%09%24.HandlePrefListener%28true%29%3B%0A%09%09%09%09//%20Delete%20all%20elements%20created%20by%20this%20button.%0A%09%09%09%09let%20selfEls%20%3D%20document.getElementsByAttribute%28%22cb_id%22%2C%20%24._UID%29%3B%0A%09%09%09%09Array.prototype.slice.call%28selfEls%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09%09aEl.parentNode.removeChild%28aEl%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09window%5B%24._UID%5D%5B%22FrameScriptLoaded%22%5D%20%3D%20false%3B%0A%09%09%09%09%24._globalMM.removeDelayedFrameScript%28%24._frameScript%29%3B%0A%09%09%09%09%24._globalMM.removeMessageListener%28%24._responseMsgID%20+%20window%5B%24._UID%5D%5B%22RandomID%22%5D%2C%20%24._messageResponse%29%3B%0A%09%09%09%7D%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09%28Services.prefs.getBranch%28%24.Branch%29%29.deleteBranch%28%22%22%29%3B%0A%09%09%09%09Services.prefs.savePrefFile%28null%29%3B%0A%09%09%09%09delete%20window%5B%24._UID%5D%3B%0A%09%09%09%7D%0A%09%09%7D%29%3B%0A%09%09//%20Do%20this%20right%20here%20at%20the%20end%20just%20to%20be%20sure.%0A%09%09%24.loadFromXULFile%28%24.XULFile.path%2C%20false%29%3B%0A%09%7D%2C%0A%0A%09populateDynamicTooltip%3A%20function%28aE%2C%20aN%29%20%7B%0A%09%09aN.textContent%20%3D%20%22%22%3B%0A%0A%09%09if%20%28aE.target.triggerNode.nodeName%20%3D%3D%3D%20%22menu%22%29%20%7B%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09return%20false%3B%0A%09%09%7D%0A%0A%09%09if%20%28aE.target.triggerNode.id%20%3D%3D%3D%20self.id%29%20%7B%0A%09%09%09var%20grid%20%3D%20aN.appendChild%28%24.%24CNS%28%22grid%22%29%29%3B%0A%09%09%09var%20cols%20%3D%20grid.appendChild%28%24.%24CNS%28%22columns%22%29%29%3B%0A%09%09%09cols.appendChild%28%24.%24CNS%28%22column%22%2C%20%7B%0A%09%09%09%09flex%3A%202%0A%09%09%09%7D%29%29%3B%0A%09%09%09cols.appendChild%28%24.%24CNS%28%22column%22%2C%20%7B%0A%09%09%09%09flex%3A%203%0A%09%09%09%7D%29%29%3B%0A%09%09%09cols.appendChild%28%24.%24CNS%28%22column%22%2C%20%7B%0A%09%09%09%09flex%3A%201%0A%09%09%09%7D%29%29%3B%0A%09%09%09var%20rows%20%3D%20grid.appendChild%28%24.%24CNS%28%22rows%22%29%29%3B%0A%09%09%09//%20AppendRow%0A%09%09%09let%20AR%20%3D%20function%28aRowsNode%2C%20aLabel1%2C%20aLabel2%2C%20aLabel3%2C%20aEmpty%29%20%7B%0A%09%09%09%09let%20row%20%3D%20%24.%24CNS%28%22row%22%29%3B%0A%09%09%09%09if%20%28aEmpty%29%20%7B%0A%09%09%09%09%09row.appendChild%28%24.%24CNS%28%22label%22%2C%20%7B%0A%09%09%09%09%09%09value%3A%20%22%20%22%2C%0A%09%09%09%09%09%09width%3A%200%2C%0A%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09row.appendChild%28%24.%24CNS%28%22label%22%2C%20%7B%0A%09%09%09%09%09%09value%3A%20aLabel1%2C%0A%09%09%09%09%09%09style%3A%20%22font-weight%3A%20bold%3B%22%2C%0A%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%09row.appendChild%28%24.%24CNS%28%22label%22%2C%20%7B%0A%09%09%09%09%09%09value%3A%20aLabel2%2C%0A%09%09%09%09%09%09style%3A%20%22font-weight%3A%20bold%3B%22%2C%0A%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%09let%20desc%20%3D%20%24.%24CNS%28%22description%22%2C%20%7B%0A%09%09%09%09%09%09maxwidth%3A%20250%2C%0A%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09desc.textContent%20%3D%20aLabel3%3B%20//%20Use%20of%20%22textContent%22%20to%20achieve%20word%20wrap.%20%AC%AC%0A%09%09%09%09%09row.appendChild%28desc%29%3B%0A%09%09%09%09%7D%0A%09%09%09%09aRowsNode.appendChild%28row%29%3B%0A%09%09%09%7D%3B%0A%0A%09%09%09let%20btn%20%3D%20aE.target.triggerNode%3B%0A%09%09%09AR%28rows%2C%20btn.name%2C%20%22%u2192%22%2C%20%22ID%20%3D%20%22%20+%20btn.id.slice%2820%29%29%3B%0A%09%09%09AR%28rows%2C%20null%2C%20null%2C%20null%2C%20true%29%3B%0A%09%09%09AR%28rows%2C%20%22Clicks%20on%20button%22%2C%20%22%22%2C%20%22%22%29%3B%0A%09%09%09AR%28rows%2C%20%22Left%20click%22%2C%20%22%u2192%22%2C%20%22Open/Close%20main%20menu%22%29%3B%0A%09%09%09AR%28rows%2C%20%22Middle%20click%20or%20Ctrl%20+%20Left%20click%22%2C%20%22%u2192%22%2C%20%22Open%20Options%20menu%22%29%3B%0A%09%09%09AR%28rows%2C%20null%2C%20null%2C%20null%2C%20true%29%3B%0A%09%09%09AR%28rows%2C%20%22Drag%26Drop%20on%20menu%22%2C%20%22%22%2C%20%22%22%29%3B%0A%09%09%09AR%28rows%2C%20%22Shift%20+%20Drag%20item%22%2C%20%22%u2192%22%2C%20%22Reorder%20items%22%29%3B%0A%09%09%09AR%28rows%2C%20%22Shift%20+%20Ctrl%20+%20Drag%20item%22%2C%20%22%u2192%22%2C%20%22Move%20item%20inside%20a%20menu%22%29%3B%0A%09%09%09aN.appendChild%28%24.%24CNS%28%22separator%22%29%29%3B%20//%20Empty%20space%0A%09%09%09let%20desc2%20%3D%20%24.%24CNS%28%22description%22%2C%20%7B%0A%09%09%09%09style%3A%20%22font-weight%3Abold%3B%22%2C%0A%09%09%09%7D%29%3B%0A%09%09%09//%20Use%20of%20%22textContent%22%20to%20achieve%20word%20wrap.%20%AC%AC%0A%09%09%09desc2.textContent%20%3D%20%22Read%20this%20button%20help%20for%20very%20important%20usage%20notes.%5Cn%22%20+%0A%09%09%09%09%22Right%20click%20on%20button%2C%20%5C%22Button%20Help%5C%22%20item.%22%3B%0A%09%09%09aN.appendChild%28desc2%29%3B%0A%09%09%09if%20%28self.menuModified%20%26%26%20self.image%20%3D%3D%3D%20%24.getHelp%28%22Siren%22%29%29%20%7B%0A%09%09%09%09aN.appendChild%28%24.%24CNS%28%22separator%22%29%29%3B%20//%20Empty%20space%0A%09%09%09%09let%20desc1%20%3D%20%24.%24CNS%28%22description%22%2C%20%7B%0A%09%09%09%09%09style%3A%20%22color%3Ared%3Bfont-weight%3Abold%3B%22%2C%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09//%20Use%20of%20%22textContent%22%20to%20achieve%20word%20wrap.%20%AC%AC%0A%09%09%09%09desc1.textContent%20%3D%20%22Remember%20to%20save%20the%20changes%20to%20the%20modified%20menu.%5Cn%22%20+%0A%09%09%09%09%09%22Open%20the%20%5C%22Options%5C%22%20menu%20and%20select%20the%20%5C%22Save%20to%20main%20file%5C%22%20item.%22%3B%0A%09%09%09%09aN.appendChild%28desc1%29%3B%0A%09%09%09%7D%0A%09%09%09return%20true%3B%0A%09%09%7D%0A%0A%09%09if%20%28aE.target.triggerNode.nodeName%20%3D%3D%3D%20%22menuitem%22%29%20%7B%0A%09%09%09//%20Using%20encode/decodeURIComponent%20makes%20it%20easy%20to%20edit%20the%20items%20file%20in%20a%20text%20editor.%0A%09%09%09//%20Because%20almost%20all%20text%20editors%20%22for%20developers%22%20have%20an%20encode/decodeURIComponent%20function%20integrated.%0A%09%09%09let%20snippet%20%3D%20decodeURIComponent%28aE.target.triggerNode.getAttribute%28%22_snippet%22%29%29%3B%0A%09%09%09aN.appendChild%28%24.%24CNS%28%22description%22%2C%20%7B%0A%09%09%09%09%22value%22%3A%20%22Snippet%22%2C%0A%09%09%09%09%22style%22%3A%20%22font-weight%3Abold%3B%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09let%20desc%20%3D%20%24.%24CNS%28%22description%22%29%3B%0A%09%09%09desc.textContent%20%3D%20snippet%3B%20//%20Use%20of%20%22textContent%22%20to%20achieve%20word%20wrap.%20%AC%AC%0A%09%09%09aN.appendChild%28desc%29%3B%0A%09%09%09return%20true%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09InitPrefs%3A%20function%28%29%20%7B%0A%09%09let%20branch%20%3D%20Services.prefs.getDefaultBranch%28self.MultiSnippetsInserter.Branch%29%2C%0A%09%09%09defaults%20%3D%20self.MultiSnippetsInserter.DefPrefs%3B%0A%09%09for%20%28let%20key%20in%20defaults%29%20%7B%0A%09%09%09if%20%28defaults.hasOwnProperty%28key%29%29%20%7B%0A%09%09%09%09let%20val%20%3D%20defaults%5Bkey%5D%3B%0A%09%09%09%09switch%20%28typeof%20val%29%20%7B%0A%09%09%09%09%09case%20%22boolean%22%3A%0A%09%09%09%09%09%09branch.setBoolPref%28key%2C%20val%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22number%22%3A%0A%09%09%09%09%09%09branch.setIntPref%28key%2C%20val%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22string%22%3A%0A%09%09%09%09%09%09let%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%09%09%09%09%09%09str.data%20%3D%20val%3B%0A%09%09%09%09%09%09branch.setComplexValue%28%28key%29%2C%0A%09%09%09%09%09%09%09Ci.nsISupportsString%2C%20str%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09createHotkeys%3A%20function%28aArr%29%20%7B%0A%09%09if%20%28%24._InstantHotkeys%20%26%26%20%24.canCreateHotKeys%29%20%7B%0A%09%09%09var%20%7B%0A%09%09%09%09Hotkey%0A%09%09%09%7D%20%3D%20self.require%28%22sdk/hotkeys%22%29%3B%0A%09%09%09self.hotkeys%20%3D%20%7B%7D%3B%0A%09%09%09Array.prototype.slice.call%28aArr%29.forEach%28function%28aObj%2C%20aIndex%29%20%7B%0A%09%09%09%09let%20combo%20%3D%20%24.getCombo%28aObj%5B%22combo%22%5D%29%3B%0A%09%09%09%09self.hotkeys%5BaIndex%5D%20%3D%20Hotkey%28%7B%0A%09%09%09%09%09combo%3A%20combo%2C%0A%09%09%09%09%09onPress%3A%20function%28%29%20%7B%0A%09%09%09%09%09%09%24.TextInserter%28aObj%5B%22snippet%22%5D%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09%09%09if%20%28aReason%20%3D%3D%3D%20%22delete%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22update%22%29%20%7B%0A%09%09%09%09%09%09self.hotkeys%5BaIndex%5D.destroy%28%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09var%20keyset%20%3D%20%24.keySet%3B%0A%09%09%09Array.prototype.slice.call%28aArr%29.forEach%28function%28aObj%2C%20aIndex%29%20%7B%0A%09%09%09%09let%20combo%20%3D%20%24.getCombo%28aObj%5B%22combo%22%5D%29%3B%0A%09%09%09%09let%20key%20%3D%20combo.substring%28combo.lastIndexOf%28%22-%22%29%20+%201%2C%20combo.length%29%3B%0A%09%09%09%09let%20modifiers%20%3D%20combo.slice%280%2C%20-%28key.length%20+%201%29%29.split%28%22-%22%29.join%28%22%2C%22%29%3B%0A%09%09%09%09if%20%28key%20%26%26%20modifiers%20%26%26%20keyset%29%20%7B%0A%09%09%09%09%09let%20attr%20%3D%20key.length%20%3D%3D%3D%201%20%3F%20%22key%22%20%3A%20%22keycode%22%3B%0A%09%09%09%09%09let%20hk%20%3D%20keyset.appendChild%28%24.%24CNS%28%22key%22%2C%20%7B%0A%09%09%09%09%09%09modifiers%3A%20modifiers%2C%0A%09%09%09%09%09%09oncommand%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%09%09%22%27%29.MultiSnippetsInserter.TextInserter%28%27%22%20+%20aObj%5B%22snippet%22%5D%20+%0A%09%09%09%09%09%09%09%22%27%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%09hk.setAttribute%28attr%2C%20key.length%20%3D%3D%3D%201%20%3F%20key%20%3A%20%22VK_%22%20+%20key%29%3B%20//%20Set%20%22keycode%22%20or%20%22key%22%20attribute.%0A%09%09%09%09%7D%0A%09%09%09%7D%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09getCombo%3A%20function%28aHKStr%29%20%7B%0A%09%09var%20prefix%20%3D%20%22%22%3B%0A%09%09if%20%28aHKStr.search%28%22Alt+%22%29%20%21%3D%3D%20-1%29%0A%09%09%09prefix%20+%3D%20%22alt-%22%3B%0A%09%09if%20%28aHKStr.search%28%22Ctrl+%22%29%20%21%3D%3D%20-1%29%0A%09%09%09prefix%20+%3D%20%22control-%22%3B%0A%09%09if%20%28aHKStr.search%28%22Shift+%22%29%20%21%3D%3D%20-1%29%0A%09%09%09prefix%20+%3D%20%22shift-%22%3B%0A%09%09if%20%28aHKStr.search%28%22Meta+%22%29%20%21%3D%3D%20-1%29%0A%09%09%09prefix%20+%3D%20%22meta-%22%3B%0A%09%09return%20prefix%20+%20aHKStr.substring%28aHKStr.lastIndexOf%28%22+%22%29%20+%201%2C%20aHKStr.length%29%3B%0A%09%7D%2C%0A%0A%09TagInserter%3A%20function%28%29%20%7B%0A%09%09//%20Just%20send%20to%20frame%20script%20to%20obtain%20selection%20anchors%20and%20send%20them%20back%20to%20main%20code%20here.%20Can%20you%20believe%20this%20SHEET%21%3F%21%3F%3F%21%20%AC%AC%0A%09%09%24._mm.sendAsyncMessage%28%24._tagInserterMsgID%29%3B%0A%09%7D%2C%0A%0A%09setBtnImage%3A%20function%28aType%29%20%7B%0A%09%09let%20mMod%20%3D%20self.menuModified%3B%20//%20Stored%20so%20I%20can%20use%20the%20original%20value%20twice.%0A%09%09if%20%28%21mMod%29%0A%09%09%09self.menuModified%20%3D%20true%3B%0A%09%09if%20%28aType%29%0A%09%09%09self.image%20%3D%20%24.getHelp%28%22Loading%22%29%3B%0A%09%09else%20%7B%0A%09%09%09if%20%28%21mMod%29%20%7B%0A%09%09%09%09%24.notifyme%28self.name%2C%0A%09%09%09%09%09%22Remember%20to%20save%20the%20changes%20made%20to%20the%20main%20menu.%22%2C%0A%09%09%09%09%09%24.getHelp%28%22Siren%22%29%2C%0A%09%09%09%09%09%24.alertCallback%29%3B%0A%09%09%09%7D%0A%09%09%09self.image%20%3D%20%24.getHelp%28%22Siren%22%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09//%20http%3A//stackoverflow.com/questions/7365575/how-to-get-text-between-two-characters%0A%09//%20Answer%20by%20BarryTheHatchet.%0A%09getSubStr%3A%20function%28aStr%2C%20aDelim%29%20%7B%0A%09%09var%20a%20%3D%20aStr.indexOf%28aDelim%29%3B%0A%09%09if%20%28a%20%3D%3D%3D%20-1%29%0A%09%09%09return%20%22%22%3B%0A%09%09var%20b%20%3D%20aStr.indexOf%28aDelim%2C%20a%20+%201%29%3B%0A%09%09if%20%28b%20%3D%3D%3D%20-1%29%0A%09%09%09return%20%22%22%3B%0A%09%09return%20aStr.substr%28a%20+%201%2C%20b%20-%20a%20-%201%29%3B%0A%09%7D%2C%0A%0A%09TextInserter%3A%20function%28aSnippet%29%20%7B%0A%09%09//%20Using%20encode/decodeURIComponent%20makes%20it%20easy%20to%20edit%20the%20items%20file%20in%20a%20text%20editor.%0A%09%09//%20Because%20almost%20all%20text%20editors%20%22for%20developers%22%20has%20an%20encode/decodeURIComponent%20function%20integrated.%0A%09%09let%20snippet%20%3D%20decodeURIComponent%28aSnippet%29%3B%0A%09%09if%20%28snippet.indexOf%28%24._Evaluator%29%20%21%3D%3D%20-1%20%26%26%20%24._EvaluatorEnabled%29%20%7B%0A%09%09%09let%20regExp%20%3D%20new%20RegExp%28%24._Evaluator%20+%20%22.*%3F%22%20+%20%24._Evaluator%29%2C%0A%09%09%09%09arr%20%3D%20snippet.split%28%24._Evaluator%29%3B%0A%09%09%09let%20count%20%3D%20%28arr.length%20-%201%29%20/%202%2C%0A%09%09%09%09strToEval%3B%0A%09%09%09//%20If%20count%20is%20a%20float%20%28not%20an%20integer%29%2C%20the%20ammount%20of%20%22Evaluator%20characters%22%20in%20the%20snippet%20is%20wrong.%0A%09%09%09if%20%28count%20%21%3D%3D%20%28count%20%7C%200%29%29%20%7B%0A%09%09%09%09Services.prompt.alert%28null%2C%20%22Multi%20Snippets%20Inserter%22%2C%20%22Something%20is%20wrong%20with%20the%20%22%20+%0A%09%09%09%09%09%22snippet%20text%20in%20this%20item.%20The%20amount%20of%20%5C%22Evaluator%20characters%5C%22%20might%20be%20wrong.%22%29%3B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%09%09%09while%20%28count--%29%20%7B%0A%09%09%09%09strToEval%20%3D%20%24.getSubStr%28snippet%2C%20%24._Evaluator%29%3B%0A%09%09%09%09snippet%20%3D%20snippet.replace%28regExp%2C%20eval%28strToEval%20+%20%22%22%29%20+%20%22%22%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09snippet%20%3D%20snippet.split%28%24._SelectionAnchor%29%3B%0A%09%09//%20Get%20the%20%22before%20selection%22%20and%20%22after%20selection%22%20parts%20of%20the%20snippet.%0A%09%09let%20firstPart%20%3D%20snippet%5B0%5D%2C%0A%09%09%09secondPart%20%3D%20snippet%5B1%5D%2C%0A%09%09%09caretIndex%3B%0A%09%09snippet%20%3D%20snippet.join%28%22%22%29%3B%0A%09%09caretIndex%20%3D%20snippet.indexOf%28%24._CaretAnchor%29%3B%0A%09%09firstPart%20%3D%20firstPart.split%28%24._CaretAnchor%29.join%28%22%22%29%3B%0A%09%09secondPart%20%26%26%20%28secondPart%20%3D%20secondPart.split%28%24._CaretAnchor%29.join%28%22%22%29%29%3B%0A%09%09let%20mm%20%3D%20%24._mm%3B%0A%09%09if%20%28mm%29%20%7B%0A%09%09%09mm.sendAsyncMessage%28%24._insertTextMsgID%2C%20%7B%0A%09%09%09%09firstPart%3A%20firstPart%2C%20//%20The%20part%20before%20the%20SelectionAnchor%20or%20the%20full%20snippet.%0A%09%09%09%09secondPart%3A%20secondPart%2C%20//%20If%20%22undefined%22%2C%20there%20is%20no%20SelectionAnchor.%0A%09%09%09%09caretIndex%3A%20caretIndex%2C%20//%20If%20-1%2C%20there%20is%20no%20%22CaretAnchor%22.%0A%09%09%09%09keepSelection%3A%20%24._KeepSelection%2C%0A%09%09%09%7D%29%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09snippet%20%3D%20snippet.split%28%24._CaretAnchor%29.join%28%22%22%29%3B%0A%09%09%09%24.TextInserterFailSafe%28snippet%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09TextInserterFailSafe%3A%20function%28aSnippet%29%20%7B%0A%09%09if%20%28aSnippet%20%21%3D%3D%20%22%22%29%20%7B%0A%09%09%09try%20%7B%0A%09%09%09%09let%20command%20%3D%20%22cmd_insertText%22%3B%0A%09%09%09%09let%20controller%20%3D%20document.commandDispatcher.getControllerForCommand%28command%29%3B%0A%0A%09%09%09%09if%20%28controller%20%26%26%20controller.isCommandEnabled%28command%29%29%20%7B%0A%09%09%09%09%09controller%20%3D%20controller.QueryInterface%28Ci.nsICommandController%29%3B%0A%09%09%09%09%09let%20params%20%3D%20Cc%5B%22@mozilla.org/embedcomp/command-params%3B1%22%5D%3B%0A%09%09%09%09%09params%20%3D%20params.createInstance%28Ci.nsICommandParams%29%3B%0A%09%09%09%09%09params.setStringValue%28%22state_data%22%2C%20aSnippet%29%3B%0A%09%09%09%09%09controller.doCommandWithParams%28command%2C%20params%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%20catch%20%28e%29%20%7B%0A%09%09%09%09let%20tmp%20%3D%20gClipboard.read%28%29%3B%0A%09%09%09%09gClipboard.write%28aSnippet%29%3B%0A%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09goDoCommand%28%22cmd_paste%22%29%3B%0A%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09gClipboard.write%28tmp%29%3B%0A%09%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09return%20false%3B%0A%09%7D%2C%0A%0A%09CreateElements%3A%20function%28aInit%29%20%7B%0A%09%09var%20mPop%20%3D%20%24.%24%28%22mainPopupSet%22%29%20%7C%7C%20%24.%24%28%24._UID%20+%20%22_popupset%22%29%3B%0A%09%09if%20%28%21mPop%29%20%7B%0A%09%09%09try%20%7B%0A%09%09%09%09mPop%20%3D%20%24.%24%28%22msgcomposeWindow%22%29.appendChild%28%24.%24CNS%28%22popupset%22%2C%20%7B%0A%09%09%09%09%09id%3A%20%24._UID%20+%20%22_popupset%22%2C%0A%09%09%09%09%09cb_id%3A%20%24._UID%0A%09%09%09%09%7D%29%29%3B%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%7D%0A%09%09%7D%0A%0A%09%09if%20%28mPop%20%26%26%20%21%24.optionsPop%29%20%7B%0A%09%09%09let%20opt%20%3D%20mPop.appendChild%28%24.%24CNS%28%22menupopup%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22_options_popup%22%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09orient%3A%20%22vertical%22%2C%0A%09%09%09%09onpopupshowing%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.MultiSnippetsInserter.populateOptionsMenu%28this%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopuphiding%3A%20%22this.textContent%3D%27%27%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09menugenerated%3A%20true%2C%0A%09%09%09%09oncommand%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.MultiSnippetsInserter.handleOptionsPopup%28event%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onclick%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%0A%09%09if%20%28mPop%20%26%26%20%21%24.ctxPop%29%20%7B%0A%09%09%09let%20ctx%20%3D%20mPop.appendChild%28%24.%24CNS%28%22menupopup%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22_context_popup%22%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09orient%3A%20%22vertical%22%2C%0A%09%09%09%09onpopupshowing%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.MultiSnippetsInserter.handleMainMenuContextMenu%28event%2C%20this%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopuphidden%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09oncommand%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.MultiSnippetsInserter.mainMenuContextMenuFunctions%28event%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onclick%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09ctx.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20%22Edit%22%2C%0A%09%09%09%09_value%3A%20%22edit%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09ctx.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20%22Delete%22%2C%0A%09%09%09%09_value%3A%20%22delete%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09ctx.appendChild%28%24.%24CNS%28%22menuseparator%22%29%29%3B%0A%09%09%09ctx.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20%22Add%20new%20menuitem%22%2C%0A%09%09%09%09_value%3A%20%22add-item%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09ctx.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20%22Add%20new%20menu%22%2C%0A%09%09%09%09_value%3A%20%22add-menu%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09ctx.appendChild%28%24.%24CNS%28%22menuseparator%22%29%29%3B%0A%09%09%09ctx.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20%22Import%20items%20into%20current%20menu%22%2C%0A%09%09%09%09_value%3A%20%22import%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09ctx.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20%22Export%20menu%20to%20file%22%2C%0A%09%09%09%09_value%3A%20%22export-menu%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%0A%09%09if%20%28mPop%20%26%26%20%21%24.dynamicTT%29%20%7B%0A%09%09%09mPop.appendChild%28%24.%24CNS%28%22tooltip%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22_dynamic_tooltip%22%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09onpopupshowing%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.MultiSnippetsInserter.populateDynamicTooltip%28event%2C%20this%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopuphiding%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09flex%3A%201%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%0A%09%09if%20%28mPop%20%26%26%20%21%24.keySet%29%20%7B%20//%20Using%20%22my%20own%22%20keyset%20seems%20to%20minimize%20hotkeys%20erratic%20behaivor.%0A%09%09%09mPop.parentNode.appendChild%28%24.%24CNS%28%22keyset%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22_keyset%22%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%0A%09%09let%20ctxM%20%3D%20%24.ctxM%3B%0A%09%09let%20insertPoint%20%3D%20%24.%24%28%22mailContext-selectall%22%29%20%7C%7C%0A%09%09%09%24.%24%28%22context-selectall%22%29%20%7C%7C%0A%09%09%09%24.%24%28%22spellCheckSuggestionsSeparator%22%29%3B%0A%09%09if%20%28ctxM%20%26%26%20%21%24.createFromSelCtx%20%26%26%20%24._ContextMenuEnabled%29%20%7B%0A%09%09%09let%20createFromSelMI%20%3D%20%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20%22Create%20snippet%20item%20-%20ID%3A%20%22%20+%20self.id.slice%2820%29%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09id%3A%20%24._UID%20+%20%22_page_context%22%2C%0A%09%09%09%09image%3A%20buttonImage%2C%0A%09%09%09%09onclick%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09oncommand%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29%22%20+%0A%09%09%09%09%09%22.MultiSnippetsInserter.createFromSelection%28%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%3B%0A%09%09%09ctxM.insertBefore%28createFromSelMI%2C%20insertPoint.nextSibling%29%3B%0A%09%09%09let%20createFromSelectionListener%20%3D%20function%28%29%20%7B%0A%09%09%09%09%24.createFromSelCtx%20%26%26%20%28%24.createFromSelCtx.hidden%20%3D%20%21%28gContextMenu.isTextSelected%29%29%3B%0A%09%09%09%7D%3B%0A%09%09%09ctxM.addEventListener%28%22popupshowing%22%2C%20createFromSelectionListener%2C%20false%29%3B%0A%09%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09%09if%20%28aReason%20%3D%3D%3D%20%22update%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09%09ctxM.removeEventListener%28%22popupshowing%22%2C%20createFromSelectionListener%2C%20false%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09createFromSelection%3A%20function%28%29%20%7B%0A%09%09%24._mm.sendAsyncMessage%28%24._createFromSelectionMsgID%29%3B%0A%09%7D%2C%0A%0A%09populateOptionsMenu%3A%20function%28aNode%29%20%7B%0A%09%09aNode.appendChild%28%24.%24CNS%28%22dialogheader%22%2C%20%7B%0A%09%09%09title%3A%20%22Options%20popup%22%2C%0A%09%09%09tooltiptext%3A%20%22Multi%20Snippets%20Inserter%20options%20popup.%22%2C%0A%09%09%09style%3A%20%22margin%3A%200%200%207px%200%3Bpadding%3A%202px%200%202px%205px%3Bborder%3Anone%3Bfont-size%3Asmaller%3B%22%2C%0A%09%09%7D%29%29%3B%0A%09%09aNode.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09label%3A%20%22Save%20to%20main%20file%22%2C%0A%09%09%09style%3A%20self.menuModified%20%3F%20%22color%3Ared%3Bfont-weight%3Abold%3B%22%20%3A%20%22%22%2C%0A%09%09%09tooltiptext%3A%20%22Save%20all%20changes%20made%20to%20the%20main%20menu%20into%20the%20items%20file.%22%2C%0A%09%09%09_value%3A%20%22saveToXULFile%22%2C%0A%09%09%7D%29%29%3B%0A%09%09aNode.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09label%3A%20%22Reload%20main%20file%22%2C%0A%09%09%09tooltiptext%3A%20%22Reload%20the%20items%20file.%5Cn%5CnThis%20will%20discard%20any%20modification%20made%20to%20the%20main%20menu%21%21%21%22%2C%0A%09%09%09_value%3A%20%22reloadMainMenu%22%2C%0A%09%09%7D%29%29%3B%0A%09%09aNode.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09label%3A%20%22Edit%20items%20file%22%2C%0A%09%09%09tooltiptext%3A%20%22Edit%20the%20current%20items%20file%20in%20any%20text%20editor.%22%2C%0A%09%09%09_value%3A%20%22editXULFile%22%2C%0A%09%09%7D%29%29%3B%0A%09%09aNode.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09label%3A%20%22Backup%20items%20file%22%2C%0A%09%09%09tooltiptext%3A%20%22Make%20a%20backup%20of%20the%20current%20loaded%20items%20file.%22%2C%0A%09%09%09_value%3A%20%22backup%22%2C%0A%09%09%7D%29%29%3B%0A%09%09aNode.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09label%3A%20%22Open%20storage%20folder%22%2C%0A%09%09%09tooltiptext%3A%20%22Open%20the%20folder%20where%20all%20items%20files%20are%20stored.%22%2C%0A%09%09%09_value%3A%20%22open-storage%22%2C%0A%09%09%7D%29%29%3B%0A%09%09aNode.appendChild%28%24.%24CNS%28%22menuseparator%22%29%29%3B%0A%09%09aNode.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09label%3A%20%22More%20options%22%2C%0A%09%09%09tooltiptext%3A%20%22Open%20%22%20+%20self.name%20+%20%22%20options%20window.%22%2C%0A%09%09%09_value%3A%20%22open-options%22%2C%0A%09%09%7D%29%29%3B%0A%09%7D%2C%0A%0A%09handleOptionsPopup%3A%20function%28aE%29%20%7B%0A%09%09switch%20%28aE.target.getAttribute%28%22_value%22%29%29%20%7B%0A%09%09%09case%20%22saveToXULFile%22%3A%0A%09%09%09%09%24.saveToXULFile%28%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22reloadMainMenu%22%3A%0A%09%09%09%09let%20cBox%20%3D%20custombuttons.confirmBox%28self.name%2C%20%22Are%20you%20sure%20that%20you%20want%20to%20%22%20+%0A%09%09%09%09%09%22reload%20the%20main%20menu%3F%5Cn%22%20+%0A%09%09%09%09%09%22You%20will%20loose%20all%20changes%20made%20to%20the%20menu%21%21%21%5CnOn%20the%20other%20hand%2C%20if%20you%20edited%20the%20%22%20+%0A%09%09%09%09%09%22items%20file%20manually%2C%20the%20menu%20will%20be%20updated%20with%20those%20changes%20aplied.%5Cn%22%20+%0A%09%09%09%09%09%22This%20process%20is%20immediate%20and%20irreversible.%5Cn%5Cn%22%20+%0A%09%09%09%09%09%22Click%20%27Yes%27%20to%20proceed.%5Cn%22%20+%0A%09%09%09%09%09%22Click%20%27Cancel%27%20to%20abort.%5Cn%22%2C%20%22Yes%22%2C%20%22Cancel%22%29%3B%0A%09%09%09%09if%20%28cBox%29%20%7B%0A%09%09%09%09%09%24.loadFromXULFile%28%24.XULFile.path%2C%20false%29%3B%0A%09%09%09%09%7D%20else%0A%09%09%09%09%09return%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22editXULFile%22%3A%0A%09%09%09%09%24.XULFile.launch%28%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22backup%22%3A%0A%09%09%09%09let%20dest%20%3D%20OS.Path.join%28%24.storagePath%2C%20%24.XULFileName%20+%20%22-%22%20+%0A%09%09%09%09%09%24._getTimeStamp%28new%20Date%28%29.getTime%28%29%29%20+%20%22.xul%22%29%3B%0A%09%09%09%09OS.File.copy%28%24.XULFile.path%2C%20dest%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22import%22%3A%0A%09%09%09%09%24.importNewItems%28%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22open-storage%22%3A%0A%09%09%09%09new%20%24._nsIFile%28%24.storagePath%29.reveal%28%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22open-options%22%3A%0A%09%09%09%09%24.openOptions%28%29%3B%0A%09%09%09%09break%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09loadFromXULFile%3A%20function%28aPath%2C%20aFromImportAction%29%20%7B%0A%09%09OS.File.read%28aPath%29.then%28function%20onSuccess%28aReadData%29%20%7B%0A%09%09%09let%20xulStr%20%3D%20%28new%20TextDecoder%28%29.decode%28aReadData%29%29.replace%28/%3E%5Cs+%3C/g%2C%20%22%3E%3C%22%29%3B%0A%09%09%09let%20xulDoc%20%3D%20%28new%20DOMParser%29.parseFromString%28xulStr%2C%20%22application/xml%22%29.documentElement%3B%0A%09%09%09let%20hotKeys%20%3D%20%5B%5D%3B%0A%09%09%09if%20%28aFromImportAction%29%20%7B%0A%09%09%09%09let%20mPop%20%3D%20%24.importAnchor.parentNode%3B%0A%09%09%09%09%24.setBtnImage%28%29%3B%0A%09%09%09%09try%20%7B%0A%09%09%09%09%09Array.prototype.slice.call%28xulDoc.childNodes%29.forEach%28function%28aEl2%29%20%7B%0A%09%09%09%09%09%09%28mPop%20%26%26%20mPop.nodeName%20%3D%3D%3D%20%22menupopup%22%20%26%26%20aEl2%29%20%26%26%20mPop.appendChild%28aEl2%29%3B%0A%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%7D%20finally%20%7B%0A%09%09%09%09%09%24.importAnchor%20%3D%20null%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09%24.setBtnImage%28true%29%3B%0A%09%09%09%09try%20%7B%0A%09%09%09%09%09let%20allMIs%20%3D%20xulDoc.getElementsByTagName%28%22menuitem%22%29%2C%0A%09%09%09%09%09%09allMPops%20%3D%20xulDoc.getElementsByTagName%28%22menupopup%22%29%3B%0A%09%09%09%09%09xulDoc.setAttribute%28%22id%22%2C%20%24._UID%20+%20%22_self_popup%22%29%3B%0A%09%09%09%09%09xulDoc.setAttribute%28%22cb_id%22%2C%20%24._UID%29%3B%0A%09%09%09%09%09xulDoc.setAttribute%28%22position%22%2C%20%22after_start%22%29%3B%0A%09%09%09%09%09xulDoc.setAttribute%28%22orient%22%2C%20%22vertical%22%29%3B%0A%09%09%09%09%09xulDoc.setAttribute%28%22tooltip%22%2C%20%24._UID%20+%20%22_dynamic_tooltip%22%29%3B%0A%09%09%09%09%09xulDoc.setAttribute%28%22context%22%2C%20%24._UID%20+%20%22_context_popup%22%29%3B%0A%09%09%09%09%09xulDoc.setAttribute%28%22onpopupshowing%22%2C%20%22event.stopPropagation%28%29%3B%22%29%3B%0A%09%09%09%09%09xulDoc.setAttribute%28%22onpopuphidden%22%2C%20%22event.stopPropagation%28%29%3B%22%29%3B%0A%09%09%09%09%09xulDoc.setAttribute%28%22oncontextmenu%22%2C%20%22event.stopPropagation%28%29%3B%22%29%3B%0A%09%09%09%09%09xulDoc.setAttribute%28%22oncommand%22%2C%20%24.cmdStr%29%3B%0A%09%09%09%09%09xulDoc.setAttribute%28%22onclick%22%2C%20%22event.stopPropagation%28%29%3B%22%29%3B%0A%09%09%09%09%09if%20%28allMIs.length%20%3E%200%29%20%7B%0A%09%09%09%09%09%09Array.prototype.slice.call%28allMIs%29.forEach%28function%28aMI%29%20%7B%0A%09%09%09%09%09%09%09let%20hk%20%3D%20aMI.getAttribute%28%22_hotkey%22%29%20%7C%7C%20%22%22%3B%0A%09%09%09%09%09%09%09if%20%28hk%29%20%7B%0A%09%09%09%09%09%09%09%09hotKeys.push%28%7B%0A%09%09%09%09%09%09%09%09%09combo%3A%20hk%2C%0A%09%09%09%09%09%09%09%09%09snippet%3A%20aMI.getAttribute%28%22_snippet%22%29%0A%09%09%09%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09if%20%28%24._ShowAccelText%20%26%26%20%24._HotkeysEnabled%20%26%26%20hk%20%21%3D%3D%20%22%22%29%0A%09%09%09%09%09%09%09%09aMI%20%26%26%20aMI.setAttribute%28%22acceltext%22%2C%20hk%29%3B%0A%09%09%09%09%09%09%09else%0A%09%09%09%09%09%09%09%09aMI%20%26%26%20aMI.removeAttribute%28%22acceltext%22%29%3B%0A%09%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20%28allMPops.length%20%3E%200%29%20%7B%0A%09%09%09%09%09%09Array.prototype.slice.call%28allMPops%29.forEach%28function%28aMPop%29%20%7B%0A%09%09%09%09%09%09%09if%20%28aMPop%29%20%7B%0A%09%09%09%09%09%09%09%09aMPop.setAttribute%28%22tooltip%22%2C%20%24._UID%20+%20%22_dynamic_tooltip%22%29%3B%0A%09%09%09%09%09%09%09%09aMPop.setAttribute%28%22context%22%2C%20%24._UID%20+%20%22_context_popup%22%29%3B%0A%09%09%09%09%09%09%09%09aMPop.setAttribute%28%22onpopupshowing%22%2C%20%22event.stopPropagation%28%29%3B%22%29%3B%0A%09%09%09%09%09%09%09%09aMPop.setAttribute%28%22onpopuphidden%22%2C%20%22event.stopPropagation%28%29%3B%22%29%3B%0A%09%09%09%09%09%09%09%09aMPop.setAttribute%28%22oncontextmenu%22%2C%20%22event.stopPropagation%28%29%3B%22%29%3B%0A%09%09%09%09%09%09%09%09aMPop.setAttribute%28%22oncommand%22%2C%20%24.cmdStr%29%3B%0A%09%09%09%09%09%09%09%09aMPop.setAttribute%28%22onclick%22%2C%20%22event.stopPropagation%28%29%3B%22%29%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09%09%09Cu.reportError%28%5Bself.name%20+%20%22%3A%20%22%20+%20self.id%2C%20aPath%2C%20aFromImportAction%2C%20aErr%2C%20aErr.stack%5D.join%28%22%5Cn%22%29%29%3B%0A%09%09%09%09%7D%20finally%20%7B%0A%09%09%09%09%09while%20%28self.childNodes.length%20%3E%200%29%0A%09%09%09%09%09%09self.removeChild%28self.firstChild%29%3B%0A%09%09%09%09%09//Create%20Hotkeys.%0A%09%09%09%09%09if%20%28%24._HotkeysEnabled%20%26%26%20hotKeys.length%20%3E%200%29%0A%09%09%09%09%09%09%24.createHotkeys%28hotKeys%29%3B%0A%09%09%09%09%09self.appendChild%28xulDoc%29%3B%0A%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09%24.handleDragAndDrop%28%29%3B%0A%09%09%09%09%09%09if%20%28self.menuModified%29%20%7B%0A%09%09%09%09%09%09%09self.image%20%3D%20buttonImage%3B%0A%09%09%09%09%09%09%09self.menuModified%20%3D%20false%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%2C%20function%20onFailure%28aRejectReason%29%20%7B%0A%09%09%09Cu.reportError%28%5Bself.name%20+%20%22%3A%20%22%20+%20self.id%2C%20aRejectReason%2C%20aRejectReason.stack%5D.join%28%22%5Cn%22%29%29%3B%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09saveToXULFile%3A%20function%28%29%20%7B%0A%09%09let%20node%20%3D%20%24.selfPop.cloneNode%28true%29%2C%0A%09%09%09path%20%3D%20%24.XULFile.path%3B%0A%09%09if%20%28node%29%20%7B%0A%09%09%09//%20Clear%20main%20menupopup%20from%20all%20its%20attributes%20to%20make%20the%20items%20file%20more%20%22clean%22.%0A%09%09%09while%20%28node.attributes.length%20%3E%200%29%0A%09%09%09%09node.removeAttribute%28node.attributes%5B0%5D.name%29%3B%0A%09%09%09//%20Clear%20all%20menupopups%20inside%20the%20main%20menupopup%20from%20all%20its%20attributes.%0A%09%09%09Array.prototype.slice.call%28node.getElementsByTagName%28%22menupopup%22%29%29.forEach%28function%28aMPop%29%20%7B%0A%09%09%09%09while%20%28aMPop%20%26%26%20aMPop.attributes.length%20%3E%200%29%0A%09%09%09%09%09aMPop.removeAttribute%28aMPop.attributes%5B0%5D.name%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%09//%20Clear%20all%20menuitems%20from%20the%20%22acceltext%22%20attribute.%0A%09%09%09Array.prototype.slice.call%28node.getElementsByTagName%28%22menuitem%22%29%29.forEach%28function%28aMI%29%20%7B%0A%09%09%09%09aMI%20%26%26%20aMI.removeAttribute%28%22acceltext%22%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%09//%20XML%20string%20of%20the%20main%20menupopup.%0A%09%09%09let%20xmlStr%20%3D%20%28new%20XMLSerializer%28%29%29.serializeToString%28node%29%3B%0A%09%09%09//%20Un-minify%20the%20XML%20string.%0A%09%09%09if%20%28%24._SaveXULExpanded%29%0A%09%09%09%09xmlStr%20%3D%20xmlStr.replace%28/%3E%3C/g%2C%20%22%3E%5Cn%3C%22%29%0A%09%09%09if%20%28self.menuModified%29%20%7B%0A%09%09%09%09self.image%20%3D%20buttonImage%3B%0A%09%09%09%09self.menuModified%20%3D%20false%3B%0A%09%09%09%7D%0A%09%09%09OS.File.writeAtomic%28path%2C%20xmlStr%2C%20%7B%0A%09%09%09%09tmpPath%3A%20path%20+%20%22.tmp%22%2C%0A%09%09%09%09encoding%3A%20%22utf-8%22%0A%09%09%09%7D%29.then%28function%20onSuccess%28%29%20%7B%0A%09%09%09%09%24.selfDestroy%28%29%3B%0A%09%09%09%7D%2C%20function%20onFailure%28aRejectReason%29%20%7B%0A%09%09%09%09Cu.reportError%28%5Bself.name%20+%20%22%3A%20%22%20+%20self.id%2C%20aRejectReason%2C%20aRejectReason.stack%5D.join%28%22%5Cn%22%29%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09importNewItems%3A%20function%28%29%20%7B%0A%09%09var%20nsIFilePicker%20%3D%20Ci.nsIFilePicker%3B%0A%09%09var%20fp%20%3D%20Cc%5B%22@mozilla.org/filepicker%3B1%22%5D.createInstance%28nsIFilePicker%29%3B%0A%09%09fp.init%28window%2C%20%22Select%20a%20file%20to%20import%20into%20%22%20+%20self.name%2C%20nsIFilePicker.modeOpen%29%3B%0A%09%09fp.appendFilter%28%22XUL%20files%22%2C%20%22*.xul%22%29%3B%0A%09%09fp.appendFilters%28fp.filterAll%29%3B%0A%09%09fp.displayDirectory%20%3D%20new%20%24._nsIFile%28%24.storagePath%29%3B%0A%09%09if%20%28fp.show%28%29%20%3D%3D%3D%20fp.returnOK%29%0A%09%09%09%24.loadFromXULFile%28fp.file.path%2C%20true%29%3B%0A%09%09else%0A%09%09%09return%3B%0A%09%7D%2C%0A%0A%09openOptions%3A%20function%28%29%20%7B%0A%09%09var%20em%20%3D%20Services.ww.getWindowEnumerator%28%22CB%3AMultiSnippetsInserter%3ASettings%22%29%3B%0A%09%09var%20index%20%3D%201%3B%0A%09%09while%20%28em.hasMoreElements%28%29%29%20%7B%0A%09%09%09let%20win%20%3D%20em.getNext%28%29%3B%0A%09%09%09if%20%28win.document.documentElement.getAttribute%28%22windowtype%22%29%20%3D%3D%3D%20%22CB%3AMultiSnippetsInserter%3ASettings%22%29%20%7B%0A%09%09%09%09win.focus%28%29%3B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09index++%0A%09%09%7D%0A%09%09let%20xul%20%3D%20%24.getHelp%28%22OptionsWindow%22%29%3B%0A%09%09let%20storage%20%3D%20%7B%7D%3B%0A%09%09storage%5B%22self_id%22%5D%20%3D%20self.id%3B%0A%09%09xul%20%3D%20xul.replace%28/%3E%5Cs+%3C/g%2C%20%22%3E%3C%22%29%0A%09%09%09.replace%28%22_self_%22%2C%20%22opener.document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29%22%29%3B%0A%09%09xul%20%3D%20xul.split%28%22_U_I_D_%22%29.join%28%24._UID%29%3B%0A%09%09xul%20%3D%20xul.split%28%22_RoOt_%22%29.join%28%24.Branch%29%3B%0A%09%09let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28xul%29%3B%0A%09%09let%20win%20%3D%20openDialog%28url%2C%20%22%22%2C%20%22chrome%2C%20resizable%2C%20dependant%2C%20dialog%2C%20centerscreen%2C%20close%2C%20alwaysRaised%22%29%3B%0A%09%09win._storage%20%3D%20storage%3B%0A%09%7D%2C%0A%0A%09handleDragAndDrop%3A%20function%28aE%29%20%7B%0A%09%09let%20dropEvts%20%3D%20%5B%22dragstart%22%2C%20%22drop%22%2C%20%22dragover%22%2C%20%22dragleave%22%5D%3B%0A%09%09dropEvts.forEach%28function%28aLi%29%20%7B%0A%09%09%09%24.selfPop.addEventListener%28aLi%2C%20%24.DragAndDropHandler%5BaLi%5D%2C%20false%29%3B%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09draggedElement%3A%20null%2C%0A%09moveToMenu%3A%20null%2C%0A%09/**%0A%09%20*%20%5BDragAndDropHandler%20description%5D%0A%09%20*%20@type%20%7BObject%7D%0A%09%20*%20Without%20%22aE.dataTransfer.setData%28%27text/plain%27%2C%20%27dummy%27%29%3B%22%2C%20none%20of%20the%20other%20events%20works.%20%AC%AC%0A%09%20*%20Without%20the%20%22dragover%22%20event%2C%20%22drop%22%20doesn%27t%20work.%20%AC%AC%0A%09%20*/%0A%09DragAndDropHandler%3A%20%7B%0A%09%09dragstart%3A%20function%28aE%29%20%7B%0A%09%09%09if%20%28%21aE.shiftKey%29%0A%09%09%09%09return%20false%3B%0A%09%09%09aE.dataTransfer.setData%28%27text/plain%27%2C%20%27dummy%27%29%3B%20//%20Stupid%20piece%20of%20SHEET%21%21%21%21%21%0A%09%09%09%24.draggedElement%20%3D%20aE.target%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09dragover%3A%20function%28aE%29%20%7B%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%24.moveToMenu%20%3D%20%24.isMacOS%20%3F%20aE.metaKey%20%3A%20aE.ctrlKey%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09drop%3A%20function%28aE%29%20%7B%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09let%20el%2C%0A%09%09%09%09moved%20%3D%20false%3B%0A%09%09%09if%20%28%24.moveToMenu%29%20%7B%0A%09%09%09%09el%20%3D%20aE.target.firstChild%3B%0A%09%09%09%09if%20%28%21el%20%7C%7C%20el.nodeName%20%21%3D%3D%20%22menupopup%22%29%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09el.appendChild%28%24.draggedElement%29%3B%0A%09%09%09%09moved%20%3D%20true%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09el%20%3D%20aE.target.parentNode%3B%0A%09%09%09%09if%20%28%21el%20%7C%7C%20el.nodeName%20%21%3D%3D%20%22menupopup%22%29%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09el.insertBefore%28%24.draggedElement%2C%20aE.target%29%3B%0A%09%09%09%09moved%20%3D%20true%3B%0A%09%09%09%7D%0A%09%09%09moved%20%26%26%20%24.setBtnImage%28%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09handleMainMenuContextMenu%3A%20function%28aE%2C%20aNode%29%20%7B%0A%09%09aNode.getElementsByAttribute%28%22_value%22%2C%20%22export-menu%22%29%5B0%5D.hidden%20%3D%20%21%28aE.target.triggerNode.nodeName%20%3D%3D%3D%20%22menu%22%29%3B%0A%09%7D%2C%0A%0A%09mainMenuContextMenuFunctions%3A%20function%28aE%29%20%7B%0A%09%09let%20el%20%3D%20document.popupNode%3B%0A%09%09switch%20%28aE.target.getAttribute%28%22_value%22%29%29%20%7B%0A%09%09%09case%20%22edit%22%3A%0A%09%09%09%09%24.addEditItems%28false%2C%20null%2C%20false%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22delete%22%3A%0A%09%09%09%09if%20%28aE.shiftKey%29%0A%09%09%09%09%09%24.deleteItem%28el%29%3B%0A%09%09%09%09else%20%7B%0A%09%09%09%09%09let%20cBox%20%3D%20custombuttons.confirmBox%28self.name%2C%20%22Are%20you%20sure%20that%20you%20want%20to%20%22%20+%0A%09%09%09%09%09%09%22delete%20this%20item%3F%5Cn%22%20+%0A%09%09%09%09%09%09%22This%20process%20is%20immediate%20and%20irreversible.%5Cn%5Cn%22%20+%0A%09%09%09%09%09%09%22Keep%20Shift%20key%20pressed%20to%20directly%20delete%20items%20and%20avoid%20this%20alert.%5Cn%5Cn%22%20+%0A%09%09%09%09%09%09%22Click%20%27Yes%27%20to%20proceed.%5Cn%22%20+%0A%09%09%09%09%09%09%22Click%20%27Cancel%27%20to%20abort.%5Cn%22%2C%20%22Yes%22%2C%20%22Cancel%22%29%3B%0A%09%09%09%09%09if%20%28cBox%29%20%7B%0A%09%09%09%09%09%09%24.deleteItem%28el%29%3B%0A%09%09%09%09%09%7D%20else%0A%09%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09break%3B%0A%09%09%09case%20%22add-item%22%3A%0A%09%09%09%09%24.addEditItems%28true%2C%20%22menuitem%22%2C%20false%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22add-menu%22%3A%0A%09%09%09%09%24.addEditItems%28true%2C%20%22menu%22%2C%20false%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22import%22%3A%0A%09%09%09%09%24.importAnchor%20%3D%20el%3B%0A%09%09%09%09%24.importNewItems%28%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22export-menu%22%3A%0A%09%09%09%09%24.exportMenu%28el%29%3B%0A%09%09%09%09break%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09exportMenu%3A%20function%28aEl%29%20%7B%0A%09%09var%20nsIFilePicker%20%3D%20Ci.nsIFilePicker%3B%0A%09%09var%20fp%20%3D%20Cc%5B%22@mozilla.org/filepicker%3B1%22%5D.createInstance%28nsIFilePicker%29%3B%0A%09%09fp.init%28window%2C%20%22Select%20a%20file%20to%20import%20into%20%22%20+%20self.name%2C%20nsIFilePicker.modeSave%29%3B%0A%09%09fp.appendFilter%28%22XUL%20files%22%2C%20%22*.xul%22%29%3B%0A%09%09fp.appendFilters%28fp.filterAll%29%3B%0A%09%09fp.displayDirectory%20%3D%20new%20%24._nsIFile%28%24.storagePath%29%3B%0A%09%09fp.defaultExtension%20%3D%20%22.xul%22%3B%0A%09%09fp.defaultString%20%3D%20%22Name%20me.xul%22%3B%0A%09%09if%20%28fp.show%28%29%20%3D%3D%3D%20fp.returnOK%29%20%7B%0A%09%09%09let%20node%20%3D%20aEl.cloneNode%28true%29%2C%0A%09%09%09%09path%20%3D%20fp.file.path%3B%0A%09%09%09if%20%28node%29%20%7B%0A%09%09%09%09//%20Clear%20all%20menupopups%20inside%20the%20main%20menupopup%20from%20all%20its%20attributes.%0A%09%09%09%09Array.prototype.slice.call%28node.getElementsByTagName%28%22menupopup%22%29%29.forEach%28function%28aMPop%29%20%7B%0A%09%09%09%09%09while%20%28aMPop%20%26%26%20aMPop.attributes.length%20%3E%200%29%0A%09%09%09%09%09%09aMPop.removeAttribute%28aMPop.attributes%5B0%5D.name%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09//%20Clear%20all%20menuitems%20from%20from%20the%20%22acceltext%22%20attribute.%0A%09%09%09%09Array.prototype.slice.call%28node.getElementsByTagName%28%22menuitem%22%29%29.forEach%28function%28aMI%29%20%7B%0A%09%09%09%09%09aMI%20%26%26%20aMI.removeAttribute%28%22acceltext%22%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09//%20XML%20string%20of%20the%20main%20menupopup.%0A%09%09%09%09let%20xmlStr%20%3D%20%28new%20XMLSerializer%28%29%29.serializeToString%28node%29%3B%0A%09%09%09%09xmlStr%20%3D%20%22%3Cmenupopup%20xmlns%3D%5C%22%22%20+%20xulns%20+%20%22%5C%22%3E%22%20+%20xmlStr%20+%20%22%3C/menupopup%3E%22%3B%0A%09%09%09%09//%20Un-minify%20the%20XML%20string.%0A%09%09%09%09if%20%28%24._SaveXULExpanded%29%0A%09%09%09%09%09xmlStr%20%3D%20xmlStr.replace%28/%3E%3C/g%2C%20%22%3E%5Cn%3C%22%29%0A%09%09%09%09OS.File.writeAtomic%28path%2C%20xmlStr%2C%20%7B%0A%09%09%09%09%09tmpPath%3A%20path%20+%20%22.tmp%22%2C%0A%09%09%09%09%09encoding%3A%20%22utf-8%22%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%0A%09%09%7D%20else%0A%09%09%09return%3B%0A%09%7D%2C%0A%0A%09deleteItem%3A%20function%28aEl%29%20%7B%0A%09%09let%20mPop%20%3D%20%24.selfPop%3B%0A%09%09%24.setBtnImage%28%29%3B%0A%09%09aEl%20%26%26%20aEl.parentNode.removeChild%28aEl%29%3B%0A%09%09if%20%28mPop%20%26%26%20mPop.childNodes.length%20%3D%3D%3D%200%29%0A%09%09%09%24.writeFile%28%24.XULFile.path%2C%20%24.dummyItems%29%3B%0A%09%7D%2C%0A%0A%09addEditItems%3A%20function%28aNew%2C%20aType%2C%20aFromContext%29%20%7B%0A%09%09//%20DO%20NOT%20allow%20more%20than%20one%20add/edit%20window%20from%20more%20than%20one%20Multi%20Snippets%20Inserter%20button.%0A%09%09//%20Just%20to%20avoid%20%22a%20mess%22%20when%20more%20that%20one%20button%20is%20installed.%0A%09%09var%20em%20%3D%20Services.ww.getWindowEnumerator%28%22CB%3AMultiSnippetsInserter%3AAddEditItems%22%29%3B%0A%09%09var%20index%20%3D%201%3B%0A%09%09while%20%28em.hasMoreElements%28%29%29%20%7B%0A%09%09%09let%20win%20%3D%20em.getNext%28%29%3B%0A%09%09%09if%20%28win.document.documentElement.getAttribute%28%22windowtype%22%29%20%3D%3D%3D%20%22CB%3AMultiSnippetsInserter%3AAddEditItems%22%29%20%7B%0A%09%09%09%09win.focus%28%29%3B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09index++%0A%09%09%7D%0A%09%09let%20xul%20%3D%20%24.getHelp%28%22AddEditWindow%22%29%3B%0A%09%09xul%20%3D%20xul.replace%28/%3E%5Cs+%3C/g%2C%20%22%3E%3C%22%29%3B%0A%09%09xul%20%3D%20xul.replace%28%22_self_%22%2C%20%22opener.document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29%22%29%0A%09%09%09.replace%28%22_insert_selection_anchor_here_%22%2C%20%24.escHTML%28%24._SelectionAnchor%29%29%0A%09%09%09.replace%28%22_insert_caret_anchor_here_%22%2C%20%24.escHTML%28%24._CaretAnchor%29%29%0A%09%09xul%20%3D%20xul.split%28%22_insert_evaluator_anchor_here_%22%29.join%28%24.escHTML%28%24._Evaluator%29%29%3B%0A%09%09let%20storage%20%3D%20%7B%7D%3B%0A%09%09storage%5B%22popup_node%22%5D%20%3D%20aFromContext%20%3F%20%24.selfPop.firstChild%20%3A%20document.popupNode%3B%0A%09%09let%20type%20%3D%20aType%20%7C%7C%20document.popupNode.nodeName%3B%0A%09%09storage%5B%22is_menu%22%5D%20%3D%20type%20%3D%3D%3D%20%22menu%22%3B%0A%09%09storage%5B%22is_new%22%5D%20%3D%20aNew%3B%0A%09%09storage%5B%22self_id%22%5D%20%3D%20self.id%3B%0A%09%09storage%5B%22caret_anchor%22%5D%20%3D%20%24._CaretAnchor%3B%0A%09%09storage%5B%22selection_anchor%22%5D%20%3D%20%24._SelectionAnchor%3B%0A%09%09storage%5B%22evaluator_anchor%22%5D%20%3D%20%24._Evaluator%3B%0A%09%09storage%5B%22create_hotkey%22%5D%20%3D%20%24._HotkeysEnabled%3B%0A%09%09storage%5B%22from_context%22%5D%20%3D%20aFromContext%3B%0A%09%09xul%20%3D%20xul.split%28%22_U_I_D_%22%29.join%28%24._UID%29%3B%0A%09%09let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28xul%29%3B%0A%09%09let%20win%20%3D%20openDialog%28url%2C%20%22%22%2C%20%22chrome%2C%20resizable%2C%20dependant%2C%20dialog%2C%20centerscreen%2C%20close%2C%20alwaysRaised%22%29%3B%0A%09%09win._storage%20%3D%20storage%3B%0A%09%7D%2C%0A%0A%09img_to_b64_cback%3A%20function%28aURL%2C%20aCallback%29%20%7B%0A%09%09if%20%28%21aURL%29%0A%09%09%09aCallback%28false%29%3B%0A%09%09else%20%7B%0A%09%09%09let%20xhr%20%3D%20new%20XMLHttpRequest%2C%0A%09%09%09%09nsIMIMEService%20%3D%20Cc%5B%22@mozilla.org/mime%3B1%22%5D.getService%28Ci.nsIMIMEService%29%3B%0A%09%09%09try%20%7B%0A%09%09%09%09xhr.open%28%22GET%22%2C%20aURL%2C%20true%29%3B%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09%09aCallback%28false%29%3B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%0A%09%09%09xhr.responseType%20%3D%20%22arraybuffer%22%3B%0A%09%09%09xhr.onload%20%3D%20function%28%29%20%7B%0A%09%09%09%09let%20mediaType%2C%0A%09%09%09%09%09dataURI%2C%0A%09%09%09%09%09binary%2C%0A%09%09%09%09%09bytes%3B%0A%09%09%09%09bytes%20%3D%20new%20Uint8Array%28xhr.response%29%3B%0A%09%09%09%09binary%20%3D%20%5B%5D.map.call%28bytes%2C%20function%28aByte%29%20%7B%0A%09%09%09%09%09return%20String.fromCharCode%28aByte%29%3B%0A%09%09%09%09%7D%29.join%28%22%22%29%3B%0A%09%09%09%09mediaType%20%3D%20xhr.getResponseHeader%28%22Content-Type%22%29%3B%0A%09%09%09%09let%20base64%20%3D%20btoa%28binary%29%3B%0A%09%09%09%09if%20%28mediaType.indexOf%28%22image/%22%29%20%21%3D%3D%200%29%20%7B%0A%09%09%09%09%09try%20%7B%0A%09%09%09%09%09%09mediaType%20%3D%20nsIMIMEService.getTypeFromURI%28Services.io.newURI%28aURL%2C%20null%2C%20null%29%29%3B%0A%09%09%09%09%09%7D%20catch%20%28aError%29%20%7B%0A%09%09%09%09%09%09mediaType%20%3D%20%22image/png%22%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09dataURI%20%3D%20%22data%3A%22%20+%20mediaType%20+%20%22%3Bbase64%2C%22%20+%20base64%3B%0A%09%09%09%09aCallback%28dataURI%29%3B%0A%09%09%09%7D%3B%0A%09%09%09xhr.onerror%20%3D%20function%28%29%20%7B%0A%09%09%09%09aCallback%28false%29%3B%0A%09%09%09%7D%3B%0A%09%09%09xhr.send%28null%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09HandlePrefListener%3A%20function%28aRem%29%20%7B%0A%09%09var%20prefs%20%3D%20%24.DefPrefs%3B%0A%09%09for%20%28let%20key%20in%20prefs%29%20%7B%0A%09%09%09let%20pref%20%3D%20%24.Branch%20+%20key%3B%0A%09%09%09if%20%28prefs.hasOwnProperty%28key%29%29%20%7B%0A%09%09%09%09if%20%28aRem%29%0A%09%09%09%09%09Services.prefs.removeObserver%28pref%2C%20%24.PrefListener%2C%20false%29%3B%0A%09%09%09%09else%0A%09%09%09%09%09Services.prefs.addObserver%28pref%2C%20%24.PrefListener%2C%20false%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09PrefListener%3A%20%7B%0A%09%09observe%3A%20function%28aSubject%2C%20aTopic%2C%20aPStr%29%20%7B%0A%09%09%09if%20%28aTopic%20%3D%3D%3D%20%22nsPref%3Achanged%22%29%20%7B%0A%09%09%09%09let%20prefName%20%3D%20aPStr.slice%28%24.Branch.length%29%3B%0A%09%09%09%09%24%5B%22_%22%20+%20prefName%5D%20%3D%20%24.gPref%28prefName%29%3B%0A%09%09%09%09//%20switch%20%28prefName%29%20%7B%0A%09%09%09%09//%20%09case%20%22%22%3A%0A%09%09%09%09//%20%09%09break%3B%0A%09%09%09%09//%20%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09writeFile%3A%20function%28aPath%2C%20aData%2C%20aSaveType%29%20%7B%0A%09%09try%20%7B%0A%09%09%09var%20file%20%3D%20new%20%24._nsIFile%28aPath%29%3B%0A%09%09%09var%20fos%20%3D%20Cc%5B%22@mozilla.org/network/file-output-stream%3B1%22%5D.createInstance%28Ci.nsIFileOutputStream%29%3B%0A%09%09%09switch%20%28aSaveType%29%20%7B%0A%09%09%09%09case%20%22append%22%3A%0A%09%09%09%09%09fos.init%28file%2C%200x02%20%7C%200x08%20%7C%200x10%2C%200x1B6%2C%200%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22unique%22%3A%0A%09%09%09%09%09file.createUnique%28Ci.nsIFile.NORMAL_FILE_TYPE%2C%200x1B6%29%3B%0A%09%09%09%09%09fos.init%28file%2C%200x02%20%7C%200x08%20%7C%200x20%2C%200x1B6%2C%200%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09default%3A%0A%09%09%09%09%09fos.init%28file%2C%200x02%20%7C%200x08%20%7C%200x20%2C%200x1B6%2C%200%29%3B%0A%09%09%09%7D%0A%09%09%09var%20cos%20%3D%20Cc%5B%22@mozilla.org/intl/converter-output-stream%3B1%22%5D.createInstance%28Ci.nsIConverterOutputStream%29%3B%0A%09%09%09cos.init%28fos%2C%20%22UTF-8%22%2C%200%2C%200%29%3B%0A%09%09%09cos.writeString%28aData%29%3B%0A%09%09%09cos.close%28%29%3B%0A%09%09%09fos.close%28%29%3B%0A%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09OS.File.writeAtomic%28aPath%2C%20aData%2C%20%7B%0A%09%09%09%09tmpPath%3A%20aPath%20+%20%22.tmp%22%2C%0A%09%09%09%09encoding%3A%20%22utf-8%22%0A%09%09%09%7D%29%3B%0A%09%09%09Cu.reportError%28%5Bself.name%20+%20%22%3A%20%22%20+%20self.id%2C%20aPath%2C%20aData%2C%20aSaveType%2C%20aErr%2C%20aErr.stack%5D.join%28%22%5Cn%22%29%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09readFile%3A%20function%28aPath%29%20%7B%0A%09%09var%20data%20%3D%20%22%22%3B%0A%09%09var%20file%20%3D%20null%3B%0A%09%09try%20%7B%0A%09%09%09file%20%3D%20new%20%24._nsIFile%28aPath%29%3B%0A%09%09%09var%20fis%20%3D%20Cc%5B%22@mozilla.org/network/file-input-stream%3B1%22%5D.createInstance%28Ci.nsIFileInputStream%29%3B%0A%09%09%09fis.init%28file%2C%20-1%2C%200%2C%200%29%3B%0A%09%09%09var%20cis%20%3D%20Cc%5B%22@mozilla.org/intl/converter-input-stream%3B1%22%5D.createInstance%28Ci.nsIConverterInputStream%29%3B%0A%09%09%09cis.init%28fis%2C%20%22UTF-8%22%2C%200%2C%20Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER%29%3B%0A%09%09%09let%20str%20%3D%20%7B%7D%2C%0A%09%09%09%09read%20%3D%200%3B%0A%09%09%09do%20%7B%0A%09%09%09%09read%20%3D%20cis.readString%280xffffffff%2C%20str%29%3B%0A%09%09%09%09data%20+%3D%20str.value%3B%0A%09%09%09%7D%20while%20%28read%20%21%3D%3D%200%29%3B%0A%09%09%09cis.close%28%29%3B%0A%09%09%09fis.close%28%29%3B%0A%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09Cu.reportError%28%5Bself.name%20+%20%22%3A%20%22%20+%20self.id%2C%20aPath%2C%20aErr%2C%20aErr.stack%5D.join%28%22%5Cn%22%29%29%3B%0A%09%09%09return%20null%3B%0A%09%09%7D%0A%09%09return%20data%3B%0A%09%7D%2C%0A%0A%09_messageResponse%3A%20%7B%0A%09%09receiveMessage%3A%20function%28aMsg%29%20%7B%0A%09%09%09if%20%28aMsg.name%20%21%3D%3D%20%24._responseMsgID%20+%20%24._randomID%29%0A%09%09%09%09return%3B%0A%09%09%09switch%20%28aMsg.data.id%29%20%7B%0A%09%09%09%09case%20%22TextInserterFailSafe%22%3A%0A%09%09%09%09%09%24.TextInserterFailSafe%28aMsg.data.snippet%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22CreateFromSeletion%22%3A%0A%09%09%09%09%09%24.addEditItems%28true%2C%20%22menuitem%22%2C%20aMsg.data.selStr%29%0A%09%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D%2C%0A%09%7D%2C%0A%0A%09selfDestroy%3A%20function%28%29%20%7B%0A%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09self.destroy%28%22update%22%29%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09self.init%28%29%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%7D%2C%20100%29%3B%0A%09%7D%2C%0A%0A%09resetToDefaults%3A%20function%28aWin%29%20%7B%0A%09%09let%20cBox%20%3D%20custombuttons.confirmBox%28self.name%2C%20%22Are%20you%20sure%20that%20you%20want%20to%20%22%20+%0A%09%09%09%22reset%20%22%20+%20self.name%20+%20%22%20preferences%20to%20their%20default%20values%3F%5Cn%22%20+%0A%09%09%09%22This%20process%20is%20immediate%20and%20irreversible.%5Cn%5Cn%22%20+%0A%09%09%09%22Click%20%27Yes%27%20to%20proceed.%5Cn%22%20+%0A%09%09%09%22Click%20%27Cancel%27%20to%20abort.%5Cn%22%2C%20%22Yes%22%2C%20%22Cancel%22%29%3B%0A%09%09if%20%28cBox%29%20%7B%0A%09%09%09aWin.close%28%29%3B%0A%09%09%09%28Services.prefs.getBranch%28%24.Branch%29%29.deleteBranch%28%22%22%29%3B%0A%09%09%09Services.prefs.savePrefFile%28null%29%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09//%20self.init%28%29%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%7D%20else%0A%09%09%09return%3B%0A%09%7D%2C%0A%0A%09getHelp%3A%20function%28aPlaceholder%29%20%7B%20//%20Get%20specific%20data%2C%20surrounded%20by%20%22placeholders%22%2C%20from%20the%20Help%20tab.%0A%09%09return%20%24.%24%28self.id%29.getAttribute%28%22Help%22%29.split%28%22%3C%21--%22%20+%20aPlaceholder%20+%20%22--%3E%22%29%5B1%5D%3B%0A%09%7D%2C%0A%0A%09%24%3A%20function%28aID%2C%20aParent%29%20%7B%0A%09%09if%20%28%21aParent%29%0A%09%09%09return%20document.getElementById%28aID%29%3B%0A%09%09return%20aParent.getElementById%28aID%29%3B%0A%09%7D%2C%0A%0A%09%24CNS%3A%20function%28aElName%2C%20aAttrs%2C%20aNS%29%20%7B%0A%09%09//%20Holy%20crap%21%21%21%20createElementNS%20is%20absolute%20sheet%21%21%0A%09%09//%20%22key%22%20elements%20are%20useless%20for%20one%21%21%20%AC%AC%0A%09%09//%20var%20el%20%3D%20document.createElementNS%28%28aNS%20%3F%20aNS%20%3A%20xulns%29%2C%20aElName%29%3B%0A%09%09var%20el%20%3D%20document.createElement%28aElName%29%3B%0A%09%09if%20%28aAttrs%29%0A%09%09%09Object.keys%28aAttrs%29.forEach%28function%28n%29%20%7B%0A%09%09%09%09if%20%28aAttrs%5Bn%5D%20%21%3D%3D%20%22%22%29%0A%09%09%09%09%09el.setAttribute%28n%2C%20aAttrs%5Bn%5D%29%0A%09%09%09%7D%29%3B%0A%09%09return%20el%3B%0A%09%7D%2C%0A%0A%09escHTML%3A%20function%28aStr%2C%20aIsAttr%29%20%7B%0A%09%09aStr%20%3D%20String%28aStr%29%0A%09%09%09.replace%28/%26/g%2C%20%22%26amp%3B%22%29%0A%09%09%09.replace%28/%3C/g%2C%20%22%26lt%3B%22%29%0A%09%09%09.replace%28/%3E/g%2C%20%22%26gt%3B%22%29%0A%09%09%09.replace%28/%22/g%2C%20%22%26quot%3B%22%29%0A%09%09%09.replace%28/%27/g%2C%20%22%26apos%3B%22%29%3B%0A%09%09if%20%28aIsAttr%29%20%7B%0A%09%09%09aStr%20%3D%20aStr%0A%09%09%09%09.replace%28/%5Ct/g%2C%20%22%26%23x9%3B%22%29%0A%09%09%09%09.replace%28/%5Cn/g%2C%20%22%26%23xA%3B%22%29%0A%09%09%09%09.replace%28/%5Cr/g%2C%20%22%26%23xD%3B%22%29%3B%0A%09%09%7D%0A%09%09return%20aStr%3B%0A%09%7D%2C%0A%0A%09_getTimeStamp%3A%20function%28aDate%29%20%7B%0A%09%09let%20ts%3B%0A%09%09switch%20%28%24._TimeStampForBackups%29%20%7B%0A%09%09%09case%200%3A%0A%09%09%09%09ts%20%3D%20%24.legalize%28%24._TimeStampForBackupsCustom%29%3B%20//%20Custom%0A%09%09%09%09break%3B%0A%09%09%09case%201%3A%0A%09%09%09%09ts%20%3D%20%22YYYY%20MM-DD%20hh.mm.ss%22%3B%20//%20ISO8601%0A%09%09%09%09break%3B%0A%09%09%09case%202%3A%0A%09%09%09%09ts%20%3D%20%22YYYY%20DD.MM%20hh.mm.ss%22%3B%20//%20European%0A%09%09%09%09break%3B%0A%09%09%7D%0A%09%09let%20dte%20%3D%20new%20Date%28parseInt%28aDate%29%29%3B%0A%09%09let%20YYYY%20%3D%20String%28dte.getFullYear%28%29%29%3B%0A%09%09let%20MM%20%3D%20String%28dte.getMonth%28%29%20+%201%29%3B%0A%09%09if%20%28MM.length%20%3D%3D%3D%201%29%20%7B%0A%09%09%09MM%20%3D%20%220%22%20+%20MM%3B%0A%09%09%7D%0A%09%09let%20DD%20%3D%20String%28dte.getDate%28%29%29%3B%0A%09%09if%20%28DD.length%20%3D%3D%3D%201%29%0A%09%09%09DD%20%3D%20%220%22%20+%20DD%3B%0A%09%09let%20hh%20%3D%20String%28dte.getHours%28%29%29%3B%0A%09%09if%20%28hh.length%20%3D%3D%3D%201%29%0A%09%09%09hh%20%3D%20%220%22%20+%20hh%3B%0A%09%09let%20mm%20%3D%20String%28dte.getMinutes%28%29%29%3B%0A%09%09if%20%28mm.length%20%3D%3D%3D%201%29%0A%09%09%09mm%20%3D%20%220%22%20+%20mm%3B%0A%09%09let%20ss%20%3D%20String%28dte.getSeconds%28%29%29%3B%0A%09%09if%20%28ss.length%20%3D%3D%3D%201%29%0A%09%09%09ss%20%3D%20%220%22%20+%20ss%3B%0A%09%09ts%20%3D%20ts.replace%28%22YYYY%22%2C%20YYYY%29%3B%0A%09%09ts%20%3D%20ts.replace%28%22MM%22%2C%20MM%29%3B%0A%09%09ts%20%3D%20ts.replace%28%22DD%22%2C%20DD%29%3B%0A%09%09ts%20%3D%20ts.replace%28%22hh%22%2C%20hh%29%3B%0A%09%09ts%20%3D%20ts.replace%28%22mm%22%2C%20mm%29%3B%0A%09%09ts%20%3D%20ts.replace%28%22ss%22%2C%20ss%29%3B%0A%09%09return%20ts%3B%0A%09%7D%2C%0A%0A%09legalize%3A%20function%28aStr%29%20%7B%20//%20Removes%20illegal%20characters%20in%20file%20names.%0A%09%09return%20aStr.replace%28/%5B%5C/%3A%5C%22%5C*%5C%3F%3C%3E%5C%7C%5C%5C%5D/g%2C%20%22%22%29%3B%0A%09%7D%2C%0A%0A%09handleMainPopup%3A%20function%28%29%20%7B%0A%09%09let%20mPop%20%3D%20%24.selfPop%3B%0A%09%09mPop%20%26%26%20mPop.state%20%21%3D%3D%20%22open%22%20%3F%0A%09%09%09mPop.openPopup%28self%2C%20%22after_start%22%2C%200%2C%200%2C%20false%2C%20null%2C%20null%29%20%3A%0A%09%09%09mPop.hidePopup%28%29%3B%0A%09%7D%2C%0A%0A%09styleSheet%3A%20function%28aCSS%2C%20aRemFlag%29%20%7B%0A%09%09var%20sss%20%3D%20Cc%5B%22@mozilla.org/content/style-sheet-service%3B1%22%5D.getService%28Ci.nsIStyleSheetService%29%3B%0A%09%09var%20uri%20%3D%20Services.io.newURI%28%22data%3Atext/css%2C%22%20+%20encodeURIComponent%28aCSS%29%2C%20null%2C%20null%29%3B%0A%09%09if%20%28sss.sheetRegistered%28uri%2C%20sss.USER_SHEET%29%29%0A%09%09%09sss.unregisterSheet%28uri%2C%20sss.USER_SHEET%29%3B%0A%09%09if%20%28aRemFlag%29%0A%09%09%09return%3B%0A%09%09sss.loadAndRegisterSheet%28uri%2C%20sss.USER_SHEET%29%3B%0A%09%7D%2C%0A%0A%09CSSLoader%3A%20function%28%29%20%7B%0A%09%09var%20timer%20%3D%200%3B%0A%09%09if%20%28%21%24._ConvertMenuToPanel%29%20%7B%0A%09%09%09try%20%7B%0A%09%09%09%09%24.styleSheet%28window%5B%24._UID%5D%5B%22StyleSheet%22%5D%2C%20true%29%3B%0A%09%09%09%09window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%3D%20false%3B%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%7D%0A%09%09%09return%20true%3B%0A%09%09%7D%0A%09%09let%20css%20%3D%20%22@namespace%20url%28%22%20+%20xulns%20+%20%22%29%3B%5Cn%22%20+%20%24.getHelp%28%22StylePanelConvertion%22%29%3B%0A%09%09css%20%3D%20css.split%28%22_U_I_D_%22%29.join%28%24._UID%29.split%28%22_self_id_%22%29.join%28self.id%29%3B%0A%0A%09%09if%20%28%21window%5B%24._UID%5D%5B%22StyleSheet%22%5D%29%20%7B%0A%09%09%09window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%3D%20css%3B%0A%09%09%09%24.styleSheet%28css%29%3B%0A%09%09%7D%20else%20if%20%28window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%26%26%20window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%21%3D%3D%20css%29%20%7B%0A%09%09%09%24.styleSheet%28window%5B%24._UID%5D%5B%22StyleSheet%22%5D%2C%20true%29%3B%0A%09%09%09clearTimeout%28timer%29%3B%0A%09%09%09timer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09%09window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%3D%20css%3B%0A%09%09%09%09%24.styleSheet%28css%29%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09notifyme%3A%20function%28aTitle%2C%20aMsg%2C%20aImg%2C%20aCallback%29%20%7B%20//%20Notification%20function%0A%09%09let%20origin%20%3D%20%28Services.prefs.getPrefType%28%22ui.alertNotificationOrigin%22%29%20%21%3D%3D%200%29%20%3F%0A%09%09%09Services.prefs.getIntPref%28%22ui.alertNotificationOrigin%22%29%20%3A%0A%09%09%09null%3B%0A%09%09let%20win%20%3D%20Services.ww.openWindow%28null%2C%20%22chrome%3A//global/content/alerts/alert.xul%22%2C%0A%09%09%09%22_blank%22%2C%20%22chrome%2Ctitlebar%3Dno%2Cpopup%3Dyes%22%2C%20null%29%3B%0A%09%09win.arguments%20%3D%20%5BaImg%2C%20aTitle%2C%20aMsg%2C%20%21%21aCallback%2C%20%22%22%2C%20origin%2C%20%22%22%2C%20%22%22%2C%20null%2C%20%28%21%21aCallback%20%3F%20aCallback%20%3A%20null%29%5D%3B%0A%09%7D%2C%0A%0A%09_UID%3A%20%22__multi_snippets_inserter_%22%20+%20self.id.slice%2820%29%2C%0A%09_nsIFile%3A%20Components.Constructor%28%22@mozilla.org/file/local%3B1%22%2C%20%22nsIFile%22%2C%20%22initWithPath%22%29%2C%0A%09_globalMM%3A%20Cc%5B%22@mozilla.org/globalmessagemanager%3B1%22%5D.getService%28Ci.nsIMessageListenerManager%29%2C%0A%09_frameScript%3A%20null%2C%0A%09_randomID%3A%20null%2C%0A%09isMacOS%3A%20Services.appinfo.OS%20%3D%3D%3D%20%22Darwin%22%2C%0A%09openOnHoverTimer%3A%20null%2C%0A%09_cbs%3A%20custombuttons.cbService%2C%0A%09importAnchor%3A%20null%2C%0A%09alertCallback%3A%20%7B%20//%20Thanks%20to%20srazzano%21%21%21%0A%09%09observe%3A%20function%28aSubject%2C%20aTopic%2C%20aData%29%20%7B%0A%09%09%09let%20alt%20%3D%20Services.wm.getMostRecentWindow%28%22alert%3Aalert%22%29%0A%09%09%09if%20%28aTopic%20%3D%3D%3D%20%22alertshow%22%29%20%7B%0A%09%09%09%09let%20a%2C%20b%3B%0A%09%09%09%09var%20altH%20%3D%20alt.outerHeight%2C%0A%09%09%09%09%09altW%20%3D%20alt.outerWidth%2C%0A%09%09%09%09%09scrH%20%3D%20screen.availHeight%2C%0A%09%09%09%09%09scrW%20%3D%20screen.availWidth%3B%0A%09%09%09%09switch%20%28%24._NotificationPosition%29%20%7B%0A%09%09%09%09%09case%201%3A%20//%20Left%20top%0A%09%09%09%09%09%09a%20%3D%200%3B%0A%09%09%09%09%09%09b%20%3D%200%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%202%3A%20//%20Right%20top%0A%09%09%09%09%09%09a%20%3D%20scrW%20-%20altW%3B%0A%09%09%09%09%09%09b%20%3D%200%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%203%3A%20//%20Left%20bottom%0A%09%09%09%09%09%09a%20%3D%200%3B%0A%09%09%09%09%09%09b%20%3D%20scrH%20-%20altH%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%204%3A%20//%20Right%20bottom%0A%09%09%09%09%09%09a%20%3D%20scrW%20-%20altW%3B%0A%09%09%09%09%09%09b%20%3D%20scrH%20-%20altH%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%205%3A%20//%20Center%20of%20screen%0A%09%09%09%09%09%09a%20%3D%20%28scrW%20/%202%29%20-%20%28altW%20/%202%29%3B%0A%09%09%09%09%09%09b%20%3D%20%28scrH%20/%202%29%20-%20%28altH%20/%202%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09default%3A%0A%09%09%09%09%09%09a%20%3D%20scrW%20-%20altW%3B%0A%09%09%09%09%09%09b%20%3D%20scrH%20-%20altH%3B%0A%09%09%09%09%7D%0A%09%09%09%09alt.moveTo%28a%2C%20b%29%3B%0A%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09alt.close%28%29%3B%0A%09%09%09%09%7D%2C%205000%29%3B%0A%09%09%09%7D%0A%09%09%09if%20%28aTopic%20%3D%3D%3D%20%22alertclickcallback%22%29%20%7B%0A%09%09%09%09alt.close%28%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%09get%20storagePath%28%29%20%7B%0A%09%09let%20dirPath%20%3D%20OS.Path.join%28OS.Constants.Path.profileDir%2C%20%22custombuttons%22%2C%20%22MultiSnippetsInserter%22%29%3B%0A%09%09OS.File.makeDir%28dirPath%2C%20%7B%0A%09%09%09ignoreExisting%3A%20true%0A%09%09%7D%29%3B%0A%09%09return%20dirPath%3B%0A%09%7D%2C%0A%09get%20XULFileName%28%29%20%7B%0A%09%09return%20%24._ItemsFileName%20+%20self.id.slice%2813%29%3B%0A%09%7D%2C%0A%09get%20XULFile%28%29%20%7B%0A%09%09let%20path%20%3D%20OS.Path.join%28%24.storagePath%2C%20%24.XULFileName%20+%20%22.xul%22%29%3B%0A%09%09let%20file%20%3D%20new%20%24._nsIFile%28path%29%3B%0A%09%09if%20%28%21file.exists%28%29%29%0A%09%09%09%24.writeFile%28path%2C%20%24.dummyItems%29%3B%0A%09%09return%20file%3B%0A%09%7D%2C%0A%09get%20cmdStr%28%29%20%7B%0A%09%09return%20%22if%28event.shiftKey%29return%20false%3Bdocument.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%22%27%29.MultiSnippetsInserter.TextInserter%28event.target.getAttribute%28%27_snippet%27%29%29%3Bevent.stopPropagation%28%29%3B%22%3B%0A%09%7D%2C%0A%09get%20ctxM%28%29%20%7B%0A%09%09return%20%24.%24%28%22contentAreaContextMenu%22%29%20%7C%7C%20%24.%24%28%22mailContext%22%29%20%7C%7C%20%24.%24%28%22msgComposeContext%22%29%3B%0A%09%7D%2C%0A%09get%20dynamicTT%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22_dynamic_tooltip%22%29%3B%0A%09%7D%2C%0A%09get%20keySet%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22_keyset%22%29%3B%0A%09%7D%2C%0A%09get%20selfPop%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22_self_popup%22%29%3B%0A%09%7D%2C%0A%09get%20ctxPop%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22_context_popup%22%29%3B%0A%09%7D%2C%0A%09get%20createFromSelCtx%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22_page_context%22%29%3B%0A%09%7D%2C%0A%09get%20optionsPop%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22_options_popup%22%29%3B%0A%09%7D%2C%0A%09get%20_responseMsgID%28%29%20%7B%0A%09%09return%20%22CB%3AMultiSnippetsInserter%3AResponse%3A%22%20+%20self.id.slice%2814%29%20+%20%22-%22%3B%0A%09%7D%2C%0A%09get%20_createFromSelectionMsgID%28%29%20%7B%0A%09%09return%20%22CB%3AMultiSnippetsInserter%3AGetSelection%3A%22%20+%20self.id.slice%2814%29%20+%20%22-%22%20+%20%24._randomID%3B%0A%09%7D%2C%0A%09get%20_insertTextMsgID%28%29%20%7B%0A%09%09return%20%22CB%3AMultiSnippetsInserter%3AInsertText%3A%22%20+%20self.id.slice%2814%29%20+%20%22-%22%20+%20%24._randomID%3B%0A%09%7D%2C%0A%09get%20_tagInserterMsgID%28%29%20%7B%0A%09%09return%20%22CB%3AMultiSnippetsInserter%3ATagInserter%3A%22%20+%20self.id.slice%2814%29%20+%20%22-%22%20+%20%24._randomID%3B%0A%09%7D%2C%0A%09get%20canCreateHotKeys%28%29%20%7B%0A%09%09return%20%22require%22%20in%20self%3B%0A%09%7D%2C%0A%09get%20dummyItems%28%29%20%7B%0A%09%09return%20%27%3Cmenupopup%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%3E%27%20+%0A%09%09%09%27%3Cmenuitem%20label%3D%22Dummy%20menuitem%22%20accesskey%3D%22D%22%20_snippet%3D%22Current%2520User%2520Agent%2520%253%27%20+%0A%09%09%09%27D%2520%25E2%2598%25A2navigator.userAgent%253B%25E2%2598%25A2%250ACurrent%2520Date%2520%253D%2520%25E2%2598%25A2new%252%27%20+%0A%09%09%09%270Date%28%29.toDateString%28%29%253B%25E2%2598%25A2%250ACurrent%2520Date%25202%2520%2520%253D%2520%25E2%2598%25A2new%2520Da%27%20+%0A%09%09%09%27te%28%29.toString%28%29%253B%25E2%2598%25A2%22%20/%3E%3Cmenu%20label%3D%22Dummy%20menu%22%20accesskey%3D%22M%22%3E%3Cmenupopup%3E%3Cme%27%20+%0A%09%09%09%27nuitem%20label%3D%22Dummy%20sub-menuitem%22%20accesskey%3D%22D%22%20_snippet%3D%22Dummy%20sub-menuitem%22%20/%3E%3C/me%27%20+%0A%09%09%09%27nupopup%3E%3C/menu%3E%3C/menupopup%3E%27%3B%0A%09%7D%2C%0A%09get%20_mm%28%29%20%7B%0A%09%09let%20mm%20%3D%20null%3B%0A%09%09try%20%7B%0A%09%09%09mm%20%3D%20typeof%20gBrowser%20%3D%3D%3D%20%22object%22%20%3F%0A%09%09%09%09gBrowser.selectedTab.linkedBrowser.messageManager%20%3A%20//%20Everything%20else.%0A%09%09%09%09getBrowser%28%29.messageManager%3B%20//%20Thunderbird.%20%25%24/%26%24%25%20you%21%21%21%21%0A%09%09%7D%20catch%20%28aErr%29%20%7B%7D%0A%09%09return%20mm%3B%0A%09%7D%2C%0A%7D%3B%0A%0Athis.MultiSnippetsInserter.Branch%20%3D%20%22CB.MultiSnippetsInserter.Id%22%20+%20self.id.slice%2820%29%20+%20%22.%22%3B%0A%0Athis.MultiSnippetsInserter.DefPrefs%20%3D%20%7B%0A%09ItemsFileName%3A%20%22MultiSnippetsInserter%22%2C%0A%09CaretAnchor%3A%20%22%u276E%u2759%u276F%22%2C%0A%09SelectionAnchor%3A%20%22%u276E%u25FC%u276F%22%2C%0A%09Evaluator%3A%20%22%u2622%22%2C%0A%09OpenOnHover%3A%20false%2C%0A%09OpenOnHoverDelayClose%3A%20200%2C%0A%09OpenOnHoverDelayOpen%3A%20200%2C%0A%09KeepSelection%3A%20true%2C%0A%09ShowAccelText%3A%20true%2C%0A%09EvaluatorEnabled%3A%20true%2C%0A%09HotkeysEnabled%3A%20true%2C%0A%09InstantHotkeys%3A%20true%2C%0A%09ContextMenuEnabled%3A%20true%2C%0A%09ConvertMenuToPanel%3A%20true%2C%0A%09SaveXULExpanded%3A%20false%2C%0A%09TimeStampForBackups%3A%201%2C%0A%09TimeStampForBackupsCustom%3A%20%22YYYY-MM-DD%20hh.mm.ss%22%2C%0A%09NotificationPosition%3A%205%2C%0A%7D%3B%0A%0Athis.MultiSnippetsInserter.gPref%20%3D%20function%28aKey%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getBranch%28self.MultiSnippetsInserter.Branch%29%3B%0A%09switch%20%28typeof%20self.MultiSnippetsInserter.DefPrefs%5BaKey%5D%29%20%7B%0A%09%09case%20%22boolean%22%3A%0A%09%09%09return%20branch.getBoolPref%28aKey%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22number%22%3A%0A%09%09%09return%20branch.getIntPref%28aKey%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22string%22%3A%0A%09%09%09return%20branch.getComplexValue%28aKey%2C%20Ci.nsISupportsString%29.data%3B%0A%09%09%09break%3B%0A%09%7D%0A%09return%20null%3B%0A%7D%3B%0Athis.MultiSnippetsInserter.sPref%20%3D%20function%28aKey%2C%20aVal%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getBranch%28self.MultiSnippetsInserter.Branch%29%3B%0A%09switch%20%28typeof%20aVal%29%20%7B%0A%09%09case%20%22boolean%22%3A%0A%09%09%09branch.setBoolPref%28aKey%2C%20aVal%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22number%22%3A%0A%09%09%09branch.setIntPref%28aKey%2C%20aVal%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22string%22%3A%0A%09%09%09let%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%09%09%09str.data%20%3D%20aVal%3B%0A%09%09%09branch.setComplexValue%28%28aKey%29%2C%20Ci.nsISupportsString%2C%20str%29%3B%0A%09%09%09break%3B%0A%09%7D%0A%7D%3B%0A%0Athis.MultiSnippetsInserter.Init%28%29%3B%0A%0A//%20All%20this%20crap%20to%20be%20able%20to%20use%20%22require%22%20in%20all%20Gecko%20applications.%0A//%20The%20%22try%22%20block%20is%20for%20Firefox/SeaMonkey/Thunderbird.%0A//%20The%20catch%20is%20for%20Palemoon.%20%AC%AC%0A%28function%28%29%20%7B%0A%09//%20If%20Hotkeys%20are%20disabled%20or%20if%20require%20is%20already%20loaded%20or%20if%20it%27s%20that%20%22sheet%22%20of%20Thunderbird%20%0A%09//%20or%20if%20%22InstantHotkeys%22%20is%20disabled%2C%20do%20not%20make%20%22require%22%20available.%0A%09if%20%28%21%24._HotkeysEnabled%20%7C%7C%20%24.canCreateHotKeys%20%7C%7C%20%21%28%22gBrowser%22%20in%20window%29%20%7C%7C%20%21%24._InstantHotkeys%29%0A%09%09return%20true%3B%0A%09try%20%7B%0A%09%09Cu.import%28%22resource%3A//gre/modules/commonjs/toolkit/require.js%22%2C%20self%29%3B%0A%09%7D%20catch%20%28aErr%29%20%7B%20//%20Thanks%20to%20alice0775%21%21%21%20https%3A//github.com/alice0775/userChrome.js/blob/master/0-builtin_addon-SDK.uc.js%0A%09%09var%20%7B%0A%09%09%09Services%0A%09%09%7D%20%3D%20Cu.import%28%22resource%3A//gre/modules/Services.jsm%22%2C%20%7B%7D%29%3B%0A%09%09var%20LoaderModule%20%3D%20Cu.import%28%22resource%3A//gre/modules/commonjs/toolkit/loader.js%22%2C%20%7B%7D%29.Loader%3B%0A%09%09var%20%7B%0A%09%09%09console%0A%09%09%7D%20%3D%20Cu.import%28%22resource%3A//gre/modules/devtools/Console.jsm%22%2C%20%7B%7D%29%3B%0A%09%09let%20%7B%0A%09%09%09Loader%2C%20main%2C%20Module%2C%20Require%2C%20unload%0A%09%09%7D%20%3D%20LoaderModule%3B%0A%0A%09%09function%20getCURRENT_DIR%28%29%20%7B%0A%09%09%09Error%28%29.stack.split%28%27%5Cn%27%29%5B2%5D.match%28/%5E%5B%5E@%5D*@%28.*%3F%29%5B%5E/%5D+%3A%5Cd+%24/%29%3B%0A%09%09%09let%20p0%20%3D%20RegExp.%241%3B%0A%09%09%09let%20p1%20%3D%20Error%28%29.fileName.replace%28/%5B%5E/%5D+%24/%2C%20%27%27%29.split%28%27%20-%3E%20%27%29.pop%28%29%3B%0A%09%09%09return%20%28p0%20%3D%3D%20p1%29%20%3F%20%5Bp0%5D%20%3A%20%5Bp0%2C%20p1%5D%3B%0A%09%09%7D%0A%0A%09%09let%20CURRENT_DIR%20%3D%20getCURRENT_DIR%28%29%3B%20//%27scratchpad%3A//%27%3B%0A%09%09let%20loaders%20%3D%20%5B%5D%3B%0A%0A%09%09function%20makePaths%28root%29%20%7B%0A%09%09%09return%20%7B%0A%09%09%09%09%27./%27%3A%20CURRENT_DIR%2C%0A%09%09%09%09%27%27%3A%20%27resource%3A//gre/modules/commonjs/%27%0A%09%09%09%7D%3B%0A%09%09%7D%0A%0A%09%09function%20makeLoader%28options%29%20%7B%0A%09%09%09let%20%7B%0A%09%09%09%09paths%2C%20globals%0A%09%09%09%7D%20%3D%20options%20%7C%7C%20%7B%7D%3B%0A%0A%09%09%09//%20We%20have%20to%20have%20%60console%60%20as%20a%20global%2C%20otherwise%0A%09%09%09//%20many%20SDK%20modules%20will%20fail%0A%09%09%09//%20bug%20961252%0A%09%09%09let%20globalDefaults%20%3D%20%7B%0A%09%09%09%09console%3A%20console%0A%09%09%09%7D%3B%0A%0A%09%09%09let%20loader%20%3D%20Loader%28%7B%0A%09%09%09%09paths%3A%20paths%20%7C%7C%20makePaths%28%29%2C%0A%09%09%09%09globals%3A%20extend%28%7B%7D%2C%20globalDefaults%2C%20globals%29%20%7C%7C%20null%2C%0A%09%09%09%09modules%3A%20%7B%0A%09%09%09%09%09//%20Needed%20because%20sdk/%20modules%20reference%20utilities%20in%0A%09%09%09%09%09//%20%60toolkit/loader%60%2C%20until%20Bug%20961194%20is%20completed%0A%09%09%09%09%09%27toolkit/loader%27%3A%20LoaderModule%0A%09%09%09%09%7D%2C%0A%09%09%09%09//%20We%20need%20rootURI%20due%20to%20%60sdk/self%60%20%28or%20are%20using%20native%20loader%29%0A%09%09%09%09//%20which%20overloads%20with%20pseudo%20modules%0A%09%09%09%09//%20bug%20961245%0A%09%09%09%09rootURI%3A%20CURRENT_DIR%2C%0A%09%09%09%09//%20We%20also%20need%20metadata%20dummy%20object%0A%09%09%09%09//%20bug%20961245%0A%09%09%09%09metadata%3A%20%7B%7D%0A%09%09%09%7D%29%3B%0A%0A%09%09%09loaders.push%28loader%29%3B%0A%09%09%09return%20loader%3B%0A%09%09%7D%0A%0A%09%09function%20extend%28...objs%29%20%7B%0A%09%09%09if%20%28objs.length%20%3D%3D%3D%200%20%7C%7C%20objs.length%20%3D%3D%3D%201%29%0A%09%09%09%09return%20objs%5B0%5D%20%7C%7C%20%7B%7D%3B%0A%0A%09%09%09for%20%28let%20i%20%3D%20objs.length%3B%20i%20%3E%201%3B%20i--%29%20%7B%0A%09%09%09%09for%20%28var%20prop%20in%20objs%5Bi%20-%201%5D%29%0A%09%09%09%09%09objs%5B0%5D%5Bprop%5D%20%3D%20objs%5Bi%20-%201%5D%5Bprop%5D%3B%0A%09%09%09%7D%0A%09%09%09return%20objs%5B0%5D%3B%0A%09%09%7D%0A%0A%09%09let%20unloadListener%20%3D%20function%28%29%20%7B%0A%09%09%09loaders.forEach%28unload%29%3B%0A%09%09%7D%3B%0A%09%09//%20clean%20up%0A%09%09window.addEventListener%28%22unload%22%2C%20unloadListener%2C%20false%29%3B%0A%0A%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22update%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09window.removeEventListener%28%22unload%22%2C%20unloadListener%2C%20false%29%3B%0A%09%09%09%7D%0A%09%09%7D%29%3B%0A%0A%09%09//%20init%20codes%0A%09%09function%20init_require%28%29%20%7B%0A%09%09%09//%20Load%20%60constructor%60%20as%20global%20since%20tabs%20uses%20%60traits%60%0A%09%09%09//%20that%20use%20this%20module%0A%09%09%09let%20loader%20%3D%20makeLoader%28%7B%0A%09%09%09%09globals%3A%20constructor%0A%09%09%09%7D%29%3B%0A%09%09%09let%20module%20%3D%20Module%28%22./main%22%2C%20CURRENT_DIR%20/*%20%22scratchpad%3A//%22%20*/%20%29%3B%0A%09%09%09let%20require%20%3D%20Require%28loader%2C%20module%29%3B%0A%09%09%09self.require%20%3D%20require%3B%0A%09%09%7D%0A%0A%09%09init_require%28%29%3B%0A%09%7D%0A%7D%29%28%29%3B%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5Bif%28%21event.target%20%26%26%20%21this.disabled%29%20%7B%20//%20If%20button%20hotkey%20is%20pressed.%0A%09this.MultiSnippetsInserter.handleMainPopup%28%29%3B%0A%7D%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%uD835%uDDD6%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%uD835%uDE00%20%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%0ALeft%20click%09%09%09%09%09%09%3D%26gt%3B%20Open/Close%20main%20menu%0AMiddle%20click/Ctrl%20+%20Left%20Click%09%09%3D%26gt%3B%20Open%20Options%20menu%0A%0A%uD835%uDDD7%uD835%uDDFF%uD835%uDDEE%uD835%uDDF4%uFF06%uD835%uDDD7%uD835%uDDFF%uD835%uDDFC%uD835%uDDFD%20%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDFA%uD835%uDDF2%uD835%uDDFB%uD835%uDE02%0AShift%20+%20Drag%20item%09%09%09%09%09%3D%26gt%3B%20Reorder%20items%0AShift%20+%20Ctrl%20+%20Drag%20item%09%09%09%3D%26gt%3B%20Move%20item%20inside%20a%20menu%0A%0A%uD835%uDDDC%uD835%uDDFA%uD835%uDDFD%uD835%uDDFC%uD835%uDDFF%uD835%uDE01%uD835%uDDEE%uD835%uDDFB%uD835%uDE01%20%uD835%uDDFB%uD835%uDDFC%uD835%uDE01%uD835%uDDF2%uD835%uDE00%0A%u26AB%20Create%20periodic%20backups%20of%20your%20items%20file.%20Open%20the%20options%20menu%20and%20click%20%uD835%uDDD5%uD835%uDDEE%uD835%uDDF0%uD835%uDDF8%uD835%uDE02%uD835%uDDFD%20%uD835%uDDF6%uD835%uDE01%uD835%uDDF2%uD835%uDDFA%uD835%uDE00%20%uD835%uDDF3%uD835%uDDF6%uD835%uDDF9%uD835%uDDF2.%0A%u26AB%20After%20cloning%20this%20button%2C%20remember%20to%20open%20the%20%uD835%uDDE0%uD835%uDE02%uD835%uDDF9%uD835%uDE01%uD835%uDDF6%20%uD835%uDDE6%uD835%uDDFB%uD835%uDDF6%uD835%uDDFD%uD835%uDDFD%uD835%uDDF2%uD835%uDE01%uD835%uDE00%20%uD835%uDDDC%uD835%uDDFB%uD835%uDE00%uD835%uDDF2%uD835%uDDFF%uD835%uDE01%uD835%uDDF2%uD835%uDDFF%27%uD835%uDE00%20options%20window%20of%20the%20newly%20created%20button%20and%20close%20it.%20This%20is%20needed%20because%20of%20a%20bug%20in%20Custom%20Buttons%20add-on%20in%20which%20cloned%20buttons%20with%20type%20set%20to%20%22menu%22%20are%20initialized%20thrice.%0A%u26AB%20The%20image%20for%20this%20button%20can%20be%20changed%20by%20editing%20the%20variable%20called%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%uD835%uDDDC%uD835%uDDFA%uD835%uDDEE%uD835%uDDF4%uD835%uDDF2%20inside%20the%20Initialization%20tab.%20This%20is%20not%20a%20whim%2C%20there%20is%20a%20%22programmatic%20reason%22%20to%20use%20that%20variable%20and%20not%20the%20usual%20place%20to%20set%20a%20CB%20button%20image.%0A%u26AB%20If%20the%20button%20image%20changes%20to%20a%20siren%2C%20it%20means%20that%20you%20have%20made%20some%20changes%20to%20the%20main%20menu%20and%20they%20need%20to%20be%20saved.%20Just%20open%20the%20options%20menu%20and%20click%20%uD835%uDDE6%uD835%uDDEE%uD835%uDE03%uD835%uDDF2%20%uD835%uDDF6%uD835%uDE01%uD835%uDDF2%uD835%uDDFA%uD835%uDE00%20%uD835%uDE01%uD835%uDDFC%20%uD835%uDDF3%uD835%uDDF6%uD835%uDDF9%uD835%uDDF2.%0A%u26AB%20If%20the%20button%20image%20changes%20to%20an%20animated%20circle%2C%20it%20means%20that%20the%20button%20is%20creating%20its%20main%20menu%20from%20the%20items%20file%20located%20inside%20the%20profile%20folder.%20Do%20not%20attempt%20to%20manipulate%20the%20button%20in%20any%20way%20while%20this%20image%20is%20displayed.%0A%0A%uD835%uDDEA%uD835%uDDD4%uD835%uDDE5%uD835%uDDE1%uD835%uDDDC%uD835%uDDE1%uD835%uDDDA%u2757%u2757%20%uD835%uDDD5%uD835%uDDD8%20%uD835%uDDD6%uD835%uDDD4%uD835%uDDE5%uD835%uDDD8%uD835%uDDD9%uD835%uDDE8%uD835%uDDDF%20%uD835%uDDDC%uD835%uDDD9%20%uD835%uDDEC%uD835%uDDE2%uD835%uDDE8%20%uD835%uDDD8%uD835%uDDD7%uD835%uDDDC%uD835%uDDE7%20%uD835%uDDE7%uD835%uDDDB%uD835%uDDD8%20%uD835%uDDDB%uD835%uDDD8%uD835%uDDDF%uD835%uDDE3%20%uD835%uDDE7%uD835%uDDD4%uD835%uDDD5%20%uD835%uDDE2%uD835%uDDD9%20%uD835%uDDE7%uD835%uDDDB%uD835%uDDDC%uD835%uDDE6%20%uD835%uDDD5%uD835%uDDE8%uD835%uDDE7%uD835%uDDE7%uD835%uDDE2%uD835%uDDE1%u2757%u2757%u2757%0A%uD835%uDDDC%uD835%uDDE7%20%uD835%uDDD6%uD835%uDDE2%uD835%uDDE8%uD835%uDDDF%uD835%uDDD7%20%uD835%uDDD5%uD835%uDDE5%uD835%uDDD8%uD835%uDDD4%uD835%uDDDE%20%uD835%uDDE7%uD835%uDDDB%uD835%uDDD8%20%uD835%uDDD9%uD835%uDDE8%uD835%uDDE1%uD835%uDDD6%uD835%uDDDC%uD835%uDDE2%uD835%uDDE1%uD835%uDDD4%uD835%uDDDF%uD835%uDDDC%uD835%uDDE7%uD835%uDDEC%20%uD835%uDDE2%uD835%uDDD9%20%uD835%uDDE7%uD835%uDDDB%uD835%uDDDC%uD835%uDDE6%20%uD835%uDDD5%uD835%uDDE8%uD835%uDDE7%uD835%uDDE7%uD835%uDDE2%uD835%uDDE1%u2757%u2757%u2757%0A%0A%5B%2C%5D%0A%26lt%3B%21--FrameScript--%26gt%3B%22use%20sctrict%22%3B%0Avar%20Ci%20%3D%20Components.interfaces%3B%0Avar%20Cc%20%3D%20Components.classes%3B%0Avar%20Cu%20%3D%20Components.utils%3B%0Alet%20MultiSnippetsInserter%20%3D%20%7B%0A%09_activeEl%3A%20null%2C%0A%09Init%3A%20function%28%29%20%7B%0A%09%09addMessageListener%28%22_Create_From_Selection_ID_%22%2C%20this%29%3B%0A%09%09addMessageListener%28%22_Insert_Text_ID_%22%2C%20this%29%3B%0A%09%7D%2C%0A%0A%09receiveMessage%3A%20function%28aMsg%29%20%7B%0A%09%09//%20Cu.reportError%28aMsg.data%29%3B%0A%09%09switch%20%28aMsg.name%29%20%7B%0A%09%09%09case%20%22_Insert_Text_ID_%22%3A%0A%09%09%09%09this._insertText2%28aMsg.data%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22_Create_From_Selection_ID_%22%3A%0A%09%09%09%09//%20This%20is%20executed%20from%20context%20menu.%0A%09%09%09%09//%20With%20getSelectionInfo%28%29%20I%20get%20%22text%22%20undefined.%0A%09%09%09%09sendAsyncMessage%28%22_Response_ID_%22%2C%20%7B%0A%09%09%09%09%09id%3A%20%22CreateFromSeletion%22%2C%0A%09%09%09%09%09selStr%3A%20MultiSnippetsInserter.getSelectionInfo%28%29.selStr%2C%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09break%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09//%20forms.js%20Firefox%2046%0A%09getSelectionInfo%3A%20function%28%29%20%7B%0A%09%09let%20el%20%3D%20this._activeEl%20%3D%20MSI_getFocusedElement%28%29%3B%0A%09%09//%20el.focus%28%29%3B%0A%09%09let%20range%20%3D%20MSI_getSelectionRange%28el%29%3B%0A%09%09let%20text%20%3D%20MSI_isContentEditable%28el%29%20%3F%20MSI_getContentEditableText%28el%29%20%3A%20el.value%3B%0A%09%09let%20fallbackText%20%3D%20null%3B%0A%09%09if%20%28%21text%29%20//%20Fallback%20to%20this%20for%20XUL%20documents.%20%22range%22%20seems%20not%20to%20be%20affected.%20Needs%20more%20testing.%0A%09%09%09fallbackText%20%3D%20this._getSelection%28%29%3B%0A%09%09return%20%7B%0A%09%09%09selectionStart%3A%20range%5B0%5D%2C%0A%09%09%09selectionEnd%3A%20range%5B1%5D%2C%0A%09%09%09selStr%3A%20text%20%3F%20text.substring%28range%5B0%5D%2C%20range%5B1%5D%29%20%3A%20fallbackText%0A%09%09%7D%3B%0A%09%7D%2C%0A%0A%09_getSelection%3A%20function%28%29%20%7B%0A%09%09let%20fWin%20%3D%20%7B%7D%3B%0A%09%09let%20fEl%20%3D%20Services.focus.getFocusedElementForWindow%28content%2C%20true%2C%20fWin%29%3B%0A%09%09fWin%20%3D%20fWin.value%3B%0A%09%09sel%20%3D%20fWin.getSelection%28%29.toString%28%29%3B%0A%09%09if%20%28%21sel%20%26amp%3B%26amp%3B%20fEl%20instanceof%20Ci.nsIDOMNSEditableElement%29%20%7B%0A%09%09%09if%20%28fEl%20instanceof%20Ci.nsIDOMHTMLTextAreaElement%20%7C%7C%0A%09%09%09%09%28fEl%20instanceof%20Ci.nsIDOMHTMLInputElement%20%26amp%3B%26amp%3B%0A%09%09%09%09%09fEl.mozIsTextField%28true%29%29%29%20%7B%0A%09%09%09%09sel%20%3D%20fEl.editor.selection.toString%28%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09return%20sel%3B%0A%09%7D%2C%0A%0A%09_insertText2%3A%20function%28aData%29%20%7B%0A%09%09let%20selObj%20%3D%20this.getSelectionInfo%28%29%3B%0A%09%09let%20el%20%3D%20this._activeEl%3B%0A%09%09var%20selStr%20%3D%20selObj.selStr%2C%0A%09%09%09firstPart%20%3D%20aData.firstPart%2C%0A%09%09%09secondPart%20%3D%20aData.secondPart%2C%0A%09%09%09caretIndex%20%3D%20aData.caretIndex%2C%0A%09%09%09snippet%20%3D%20secondPart%20%3F%0A%09%09%09%28firstPart%20+%20selStr%20+%20%28secondPart%20%26amp%3B%26amp%3B%20secondPart%29%29%20%3A%0A%09%09%09firstPart%3B%0A%09%09this._editor%20%3D%20MSI_getPlaintextEditor%28el%29%3B%0A%09%09if%20%28MSI_isContentEditable%28el%29%29%20%7B%0A%09%09%09//%20Using%20the%20editor%20because%20%22execCommand%28%22insertText%22...%29%22%20doesn%27t%20work%20on%0A%09%09%09//%20contenteditable%20elements%20placed%20inside%20iframes.%20%AC%AC%0A%09%09%09//%20I%20kept%20%22execCommand%28%22insertText%22...%29%22%20just%20as%20a%20fail%20safe.%0A%09%09%09if%20%28this._editor%29%0A%09%09%09%09this._editor.insertText%28snippet%29%3B%0A%09%09%09else%0A%09%09%09%09%22execCommand%22%20in%20content.document%20%26amp%3B%26amp%3B%20content.document.execCommand%28%22insertText%22%2C%20%22%22%2C%20snippet%29%3B%0A%09%09%09%28selStr%20%26amp%3B%26amp%3B%20aData.keepSelection%20%26amp%3B%26amp%3B%20secondPart%29%20%3F%0A%09%09%09MSI_setSelectionRange%28el%2C%20selObj.selectionStart%20+%20firstPart.length%2C%0A%09%09%09%09%09selObj.selectionStart%20+%20firstPart.length%20+%20selStr.length%29%3A%0A%09%09%09%09%28%28caretIndex%20%21%3D%3D%20-1%29%20%26amp%3B%26amp%3B%20MSI_setSelectionRange%28el%2C%20caretIndex%2C%20caretIndex%29%29%3B%0A%09%09%09this._activeEl%20%3D%20null%3B%0A%09%09%09this._editor%20%3D%20null%3B%0A%09%09%09return%20true%3B%0A%09%09%7D%0A%09%09if%20%28this._editor%29%20%7B%0A%09%09%09this._editor.insertText%28snippet%29%3B%0A%09%09%09%28selStr%20%26amp%3B%26amp%3B%20aData.keepSelection%20%26amp%3B%26amp%3B%20secondPart%29%20%3F%0A%09%09%09MSI_setSelectionRange%28el%2C%20selObj.selectionStart%20+%20firstPart.length%2C%0A%09%09%09%09%09selObj.selectionStart%20+%20firstPart.length%20+%20selStr.length%29%3A%0A%09%09%09%09%28caretIndex%20%21%3D%3D%20-1%29%20%26amp%3B%26amp%3B%20MSI_setSelectionRange%28el%2C%20caretIndex%2C%20caretIndex%29%3B%0A%09%09%09el.focus%28%29%3B%0A%09%09%09this._activeEl%20%3D%20null%3B%0A%09%09%09this._editor%20%3D%20null%3B%0A%09%09%09return%20true%3B%0A%09%09%7D%0A%09%09//%20Last%20try%21%21%21%0A%09%09sendAsyncMessage%28%22_Response_ID_%22%2C%20%7B%0A%09%09%09id%3A%20%22TextInserterFailSafe%22%2C%0A%09%09%09snippet%3A%20snippet%2C%0A%09%09%7D%29%3B%0A%09%09this._activeEl%20%3D%20null%3B%0A%09%09this._editor%20%3D%20null%3B%0A%09%09return%20true%3B%0A%09%7D%0A%7D%3B%0AMultiSnippetsInserter.Init%28%29%3B%0A//%20MSI%20stands%20for%20Multi%20Snippets%20Inserter.%0Afunction%20MSI_getSelectionObj%28%29%20%7B%0A%09let%20fWin%20%3D%20%7B%7D%3B%0A%09let%20fEl%20%3D%20Services.focus.getFocusedElementForWindow%28content%2C%20true%2C%20fWin%29%3B%0A%09fWin%20%3D%20fWin.value%3B%0A%09let%20sel%20%3D%20fWin.getSelection%28%29%3B%0A%09if%20%28%21sel%29%0A%09%09return%20null%3B%0A%09return%20sel%3B%0A%7D%0A%0Afunction%20MSI_getFocusedElement%28%29%20%7B%0A%09let%20fWin%20%3D%20%7B%7D%3B%0A%09let%20el%20%3D%20Services.focus.getFocusedElementForWindow%28content.window%2C%20true%2C%20fWin%29%3B%0A%09fWin%20%3D%20fWin.value%3B%0A%09fWin.focus%28%29%3B%0A%09if%20%28%21el%29%0A%09%09el%20%3D%20content.document.activeElement%3B%0A%09if%20%28%21el%29%0A%09%09return%20null%3B%0A%09return%20el%3B%0A%7D%0A%0A//%20forms.js%20Firefox%2046%0Afunction%20MSI_isContentEditable%28aEl%29%20%7B%0A%09if%20%28%21aEl%29%20%7B%0A%09%09return%20false%3B%0A%09%7D%0A%09if%20%28aEl.isContentEditable%20%7C%7C%20aEl.designMode%20%3D%3D%20%22on%22%29%0A%09%09return%20true%3B%0A%09return%20aEl.ownerDocument%20%26amp%3B%26amp%3B%20aEl.ownerDocument.designMode%20%3D%3D%20%22on%22%3B%0A%7D%0A%0A//%20forms.js%20Firefox%2046%0Afunction%20MSI_isPlainTextField%28aEl%29%20%7B%0A%09if%20%28%21aEl%29%20%7B%0A%09%09return%20false%3B%0A%09%7D%0A%09return%20aEl%20instanceof%20Ci.nsIDOMHTMLTextAreaElement%20%7C%7C%0A%09%09%28aEl%20instanceof%20Ci.nsIDOMHTMLInputElement%20%26amp%3B%26amp%3B%0A%09%09%09aEl.mozIsTextField%28false%29%29%3B%0A%7D%0A%0A//%20forms.js%20Firefox%2046%0Afunction%20MSI_getDocumentEncoder%28aEl%29%20%7B%0A%09let%20encoder%20%3D%20Cc%5B%22@mozilla.org/layout/documentEncoder%3B1%3Ftype%3Dtext/plain%22%5D%0A%09%09.createInstance%28Ci.nsIDocumentEncoder%29%3B%0A%09let%20flags%20%3D%20Ci.nsIDocumentEncoder.SkipInvisibleContent%20%7C%0A%09%09Ci.nsIDocumentEncoder.OutputRaw%20%7C%0A%09%09Ci.nsIDocumentEncoder.OutputDropInvisibleBreak%20%7C%0A%09%09//%20Bug%20902847.%20Don%27t%20trim%20trailing%20spaces%20of%20a%20line.%0A%09%09Ci.nsIDocumentEncoder.OutputDontRemoveLineEndingSpaces%20%7C%0A%09%09Ci.nsIDocumentEncoder.OutputLFLineBreak%20%7C%0A%09%09Ci.nsIDocumentEncoder.OutputNonTextContentAsPlaceholder%3B%0A%09encoder.init%28aEl.ownerDocument%2C%20%22text/plain%22%2C%20flags%29%3B%0A%09return%20encoder%3B%0A%7D%0A%0A//%20forms.js%20Firefox%2046%0Afunction%20MSI_getSelectionRange%28aEl%29%20%7B%0A%09let%20start%20%3D%200%3B%0A%09let%20end%20%3D%200%3B%0A%09if%20%28MSI_isPlainTextField%28aEl%29%29%20%7B%0A%09%09//%20Get%20the%20selection%20range%20of%20%26lt%3Binput%26gt%3B%20and%20%26lt%3Btextarea%26gt%3B%20elements%0A%09%09start%20%3D%20aEl.selectionStart%3B%0A%09%09end%20%3D%20aEl.selectionEnd%3B%0A%09%7D%20else%20if%20%28MSI_isContentEditable%28aEl%29%29%20%7B%0A%09%09//%20Get%20the%20selection%20range%20of%20contenteditable%20elements%0A%09%09//%20let%20win%20%3D%20aEl.ownerDocument.defaultView%3B%0A%09%09//%20let%20win%20%3D%20content.window%3B%0A%09%09let%20sel%20%3D%20MSI_getSelectionObj%28%29%3B%0A%09%09//%20let%20sel%20%3D%20win.getSelection%28%29%3B%0A%09%09if%20%28sel%20%26amp%3B%26amp%3B%20sel.rangeCount%20%26gt%3B%200%29%20%7B%0A%09%09%09start%20%3D%20MSI_getContentEditableSelectionStart%28aEl%2C%20sel%29%3B%0A%09%09%09end%20%3D%20start%20+%20MSI_getContentEditableSelectionLength%28aEl%2C%20sel%29%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09dump%28%22Failed%20to%20get%20window.getSelection%28%29%5Cn%22%29%3B%0A%09%09%7D%0A%09%7D%0A%09return%20%5Bstart%2C%20end%5D%3B%0A%7D%0A%0A//%20forms.js%20Firefox%2046%0Afunction%20MSI_setSelectionRange%28aEl%2C%20aStart%2C%20aEnd%29%20%7B%0A%09let%20isTextField%20%3D%20MSI_isPlainTextField%28aEl%29%3B%0A%09//%20Check%20the%20parameters%0A%09if%20%28%21isTextField%20%26amp%3B%26amp%3B%20%21MSI_isContentEditable%28aEl%29%29%20%7B%0A%09%09//%20Skip%20HTMLOptionElement%20and%20HTMLSelectElement%20elements%2C%20as%20they%20don%27t%0A%09%09//%20support%20the%20operation%20of%20setSelectionRange%0A%09%09return%20false%3B%0A%09%7D%0A%09let%20text%20%3D%20isTextField%20%3F%20aEl.value%20%3A%20MSI_getContentEditableText%28aEl%29%3B%0A%09let%20length%20%3D%20text.length%3B%0A%09if%20%28aStart%20%26lt%3B%200%29%20%7B%0A%09%09aStart%20%3D%200%3B%0A%09%7D%0A%09if%20%28aEnd%20%26gt%3B%20length%29%20%7B%0A%09%09aEnd%20%3D%20length%3B%0A%09%7D%0A%09if%20%28aStart%20%26gt%3B%20aEnd%29%20%7B%0A%09%09aStart%20%3D%20aEnd%3B%0A%09%7D%0A%09if%20%28isTextField%20%26amp%3B%26amp%3B%20%22setSelectionRange%22%20in%20aEl%29%20%7B%0A%09%09//%20Set%20the%20selection%20range%20of%20%26lt%3Binput%26gt%3B%20and%20%26lt%3Btextarea%26gt%3B%20elements%0A%09%09aEl.setSelectionRange%28aStart%2C%20aEnd%2C%20%22forward%22%29%3B%0A%09%09return%20true%3B%0A%09%7D%20else%20%7B%0A%09%09//%20set%20the%20selection%20range%20of%20contenteditable%20elements%0A%09%09//%20let%20win%20%3D%20aEl.ownerDocument.defaultView%3B%20//%20From%20original%20function%0A%09%09//%20let%20sel%20%3D%20win.getSelection%28%29%3B%20//%20From%20original%20function%0A%09%09let%20sel%20%3D%20MSI_getSelectionObj%28%29%3B%0A%09%09//%20Move%20the%20caret%20to%20the%20aStart%20position%0A%09%09sel.collapse%28aEl%2C%200%29%3B%0A%09%09for%20%28let%20i%20%3D%200%3B%20i%20%26lt%3B%20aStart%3B%20i++%29%20%7B%0A%09%09%09sel.modify%28%22move%22%2C%20%22forward%22%2C%20%22character%22%29%3B%0A%09%09%7D%0A%09%09//%20Avoid%20entering%20infinite%20loop%20in%20case%20we%20cannot%20change%20the%20selection%0A%09%09//%20range.%20See%20bug%20https%3A//bugzilla.mozilla.org/show_bug.cgi%3Fid%3D978918%0A%09%09let%20oldStart%20%3D%20MSI_getContentEditableSelectionStart%28aEl%2C%20sel%29%3B%0A%09%09let%20counter%20%3D%200%3B%0A%09%09while%20%28oldStart%20%26lt%3B%20aStart%29%20%7B%0A%09%09%09sel.modify%28%22move%22%2C%20%22forward%22%2C%20%22character%22%29%3B%0A%09%09%09let%20newStart%20%3D%20MSI_getContentEditableSelectionStart%28aEl%2C%20sel%29%3B%0A%09%09%09if%20%28oldStart%20%3D%3D%20newStart%29%20%7B%0A%09%09%09%09counter++%3B%0A%09%09%09%09if%20%28counter%20%26gt%3B%2020%29%20%7B%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09counter%20%3D%200%3B%0A%09%09%09%09oldStart%20%3D%20newStart%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09//%20Extend%20the%20selection%20to%20the%20aEnd%20position%0A%09%09for%20%28let%20i%20%3D%20aStart%3B%20i%20%26lt%3B%20aEnd%3B%20i++%29%20%7B%0A%09%09%09sel.modify%28%22extend%22%2C%20%22forward%22%2C%20%22character%22%29%3B%0A%09%09%7D%0A%09%09//%20Avoid%20entering%20infinite%20loop%20in%20case%20we%20cannot%20change%20the%20selection%0A%09%09//%20range.%20See%20bug%20https%3A//bugzilla.mozilla.org/show_bug.cgi%3Fid%3D978918%0A%09%09counter%20%3D%200%3B%0A%09%09let%20selectionLength%20%3D%20aEnd%20-%20aStart%3B%0A%09%09let%20oldSelectionLength%20%3D%20MSI_getContentEditableSelectionLength%28aEl%2C%20sel%29%3B%0A%09%09while%20%28oldSelectionLength%20%26lt%3B%20selectionLength%29%20%7B%0A%09%09%09sel.modify%28%22extend%22%2C%20%22forward%22%2C%20%22character%22%29%3B%0A%09%09%09let%20newSelectionLength%20%3D%20MSI_getContentEditableSelectionLength%28aEl%2C%20sel%29%3B%0A%09%09%09if%20%28oldSelectionLength%20%3D%3D%20newSelectionLength%29%20%7B%0A%09%09%09%09counter++%3B%0A%09%09%09%09if%20%28counter%20%26gt%3B%2020%29%20%7B%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09counter%20%3D%200%3B%0A%09%09%09%09oldSelectionLength%20%3D%20newSelectionLength%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09return%20true%3B%0A%09%7D%0A%7D%0A%0A//%20forms.js%20Firefox%2046%0Afunction%20MSI_getContentEditableText%28aEl%29%20%7B%0A%09if%20%28%21aEl%20%7C%7C%20%21MSI_isContentEditable%28aEl%29%29%20%7B%0A%09%09return%20null%3B%0A%09%7D%0A%0A%09//%20let%20doc%20%3D%20content.document%3B%0A%09let%20doc%20%3D%20aEl.ownerDocument%3B%0A%09let%20range%20%3D%20doc.createRange%28%29%3B%0A%09range.selectNodeContents%28aEl%29%3B%0A%09let%20encoder%20%3D%20MSI_getDocumentEncoder%28aEl%29%3B%0A%09encoder.setRange%28range%29%3B%0A%09return%20encoder.encodeToString%28%29%3B%0A%7D%0A%0A//%20forms.js%20Firefox%2046%0Afunction%20MSI_getContentEditableSelectionStart%28aEl%2C%20aSel%29%20%7B%0A%09//%20let%20doc%20%3D%20content.document%3B%3B%0A%09let%20doc%20%3D%20aEl.ownerDocument%3B%0A%09let%20range%20%3D%20doc.createRange%28%29%3B%0A%09range.setStart%28aEl%2C%200%29%3B%0A%09range.setEnd%28aSel.anchorNode%2C%20aSel.anchorOffset%29%3B%0A%09let%20encoder%20%3D%20MSI_getDocumentEncoder%28aEl%29%3B%0A%09encoder.setRange%28range%29%3B%0A%09return%20encoder.encodeToString%28%29.length%3B%0A%7D%0A%0A//%20forms.js%20Firefox%2046%0Afunction%20MSI_getContentEditableSelectionLength%28aEl%2C%20aSel%29%20%7B%0A%09let%20encoder%20%3D%20MSI_getDocumentEncoder%28aEl%29%3B%0A%09encoder.setRange%28aSel.getRangeAt%280%29%29%3B%0A%09return%20encoder.encodeToString%28%29.length%3B%0A%7D%0A%0A//%20forms.js%20Firefox%2046%0Afunction%20MSI_getPlaintextEditor%28aEl%29%20%7B%0A%09let%20editor%20%3D%20null%3B%0A%09//%20Get%20nsIEditor%0A%09if%20%28MSI_isPlainTextField%28aEl%29%29%20%7B%0A%09%09//%20Get%20from%20the%20%26lt%3Binput%26gt%3B%20and%20%26lt%3Btextarea%26gt%3B%20elements%0A%09%09editor%20%3D%20aEl.QueryInterface%28Ci.nsIDOMNSEditableElement%29.editor%3B%0A%09%7D%20else%20if%20%28MSI_isContentEditable%28aEl%29%29%20%7B%0A%09%09//%20Get%20from%20content%20editable%20element%0A%09%09let%20win%20%3D%20aEl.ownerDocument.defaultView%3B%0A%09%09let%20editingSession%20%3D%20win.QueryInterface%28Ci.nsIInterfaceRequestor%29%0A%09%09%09.getInterface%28Ci.nsIWebNavigation%29%0A%09%09%09.QueryInterface%28Ci.nsIInterfaceRequestor%29%0A%09%09%09.getInterface%28Ci.nsIEditingSession%29%3B%0A%09%09if%20%28editingSession%29%20%7B%0A%09%09%09editor%20%3D%20editingSession.getEditorForWindow%28win%29%3B%0A%09%09%7D%0A%09%7D%0A%09if%20%28editor%29%20%7B%0A%09%09editor.QueryInterface%28Ci.nsIPlaintextEditor%29%3B%0A%09%7D%0A%09return%20editor%3B%0A%7D%0A%26lt%3B%21--FrameScript--%26gt%3B%0A%0A%26lt%3B%21--AddEditWindow--%26gt%3B%26lt%3B%3Fxml%20version%3D%221.0%22%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22data%3Atext/css%3Bcharset%3Dutf-8%2C%0Awindow%20*%20%7B%0A%09font-family%3A%20%26amp%3Bquot%3BOpen%20Sans%26amp%3Bquot%3B%2C%20Helvetica%2C%20Arial%2C%20sans-serif%20%21important%3B%0A%7D%0Acaption%20.caption-text%2C%0A.bold_text%7B%0A%09font-weight%3Abold%3B%0A%7D%0A.warning%7B%0A%09font-weight%3A%20bold%20%21important%3B%0A%09color%3A%20red%20%21important%3B%0A%7D%0Abutton%20.button-text%20%7B%0A%09display%3A%20inline-block%20%21important%3B%0A%09text-align%3A%20left%20%21important%3B%0A%7D%0Abutton%20%7B%0A%09min-width%3A%201em%20%21important%3B%0A%7D%0A.optional%20%7B%0A%09-moz-appearance%3A%20none%20%21important%3B%0A%09border%3A2px%20groove%20green%20%21important%3B%0A%7D%0A.required%20%7B%0A%09-moz-appearance%3A%20none%20%21important%3B%0A%09border%3A%202px%20groove%20brown%20%21important%3B%0A%7D%0A%22%20type%3D%22text/css%22%20%3F%26gt%3B%0A%26lt%3Bwindow%20onload%3D%22gMultiSnippetsInserter.onLoad%28%29%3B%22%0A%09%20%20%20%20onunload%3D%22gMultiSnippetsInserter.onUnLoad%28%29%3B%22%0A%09%20%20%20%20windowtype%3D%22CB%3AMultiSnippetsInserter%3AAddEditItems%22%0A%09%20%20%20%20xmlns%3Ahtml%3D%22http%3A//www.w3.org/1999/xhtml%22%0A%09%20%20%20%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%26gt%3B%0A%26lt%3Bscript%26gt%3B%26lt%3B%21%5BCDATA%5B%0Avar%20Cc%20%3D%20Components.classes%3B%0Avar%20Ci%20%3D%20Components.interfaces%3B%0Avar%20Cu%20%3D%20Components.utils%3B%0Aif%20%28%21%28%22Services%22%20in%20window%29%29%0A%09Cu.import%28%22resource%3A//gre/modules/Services.jsm%22%29%3B%0Avar%20fromButton%20%3D%20_self_%3B%0Avar%20storage%20%3D%20window._storage%3B%0Avar%20node%20%3D%20storage.popup_node%2C%0A%09mItemBoxes%20%3D%20document.getElementsByClassName%28%22menuitem-box%22%29%2C%0A%09isMenu%20%3D%20storage.is_menu%2C%0A%09isNew%20%3D%20storage.is_new%2C%0A%09itemName%20%3D%20isMenu%20%3F%20%22menu%22%20%3A%20%22menuitem%22%2C%0A%09idNumber%20%3D%20storage.self_id.slice%2820%29%3B%0Afunction%20%24%28id%29%20document.getElementById%28id%29%3B%0Avar%20gMultiSnippetsInserter%20%3D%20%7B%0A%09onLoad%3A%20function%28%29%20%7B%0A%09%09//%20box-shadow%20won%27t%20work%20on%20Palemoon.%20%AC%AC%0A%09%09//%20fromButton.style.setProperty%28%22box-shadow%22%2C%20%220%200%200%202pt%20green%22%2C%20%22important%22%29%3B%0A%09%09fromButton.style.setProperty%28%22outline%22%2C%20%224px%20groove%20green%22%2C%20%22important%22%29%3B%0A%09%09fromButton.style.setProperty%28%22outline-offset%22%2C%20%22-3px%22%2C%20%22important%22%29%3B%0A%09%09isNew%20%7C%7C%20this.populateFields%28%29%3B%0A%09%09if%20%28isNew%20%26amp%3B%26amp%3B%20storage.from_context%29%0A%09%09%09this.snippet_tbox.value%20%3D%20storage.from_context%3B%0A%09%09this.setFieldsVisibility%28%29%3B%0A%09%09this.setDynamicLabels%28%29%3B%0A%09%09this.label_tbox.focus%28%29%3B%0A%09%09this.setImagePreview%28%29%3B%0A%09%09window.document.documentElement.setAttribute%28%22title%22%2C%20isNew%20%3F%0A%09%09%09%22Add%20new%20%22%20+%20itemName%20+%20%22%20-%20Button%20%23ID%3A%20%22%20+%20idNumber%20%3A%0A%09%09%09%22Edit%20%22%20+%20itemName%20+%20%22%20-%20Button%20%23ID%3A%20%22%20+%20idNumber%29%3B%0A%09%09this.setHotKey%28%29%3B%0A%09%09this.handleToBase64Btn%28%29%3B%0A%09%7D%2C%0A%0A%09onUnLoad%3A%20function%28%29%20%7B%0A%09%09//%20box-shadow%20won%27t%20work%20on%20Palemoon.%20%AC%AC%0A%09%09//%20fromButton.style.removeProperty%28%22box-shadow%22%2C%20%220%200%200%202pt%20green%22%2C%20%22important%22%29%3B%0A%09%09fromButton.style.removeProperty%28%22outline%22%2C%20%224px%20groove%20green%22%2C%20%22important%22%29%3B%0A%09%09fromButton.style.removeProperty%28%22outline-offset%22%2C%20%22-3px%22%2C%20%22important%22%29%3B%0A%09%09fromButton._storage%20%3D%20%7B%7D%3B%0A%09%7D%2C%0A%0A%09onAccept%3A%20function%28%29%20%7B%0A%09%09if%20%28isNew%29%20%7B%0A%09%09%09if%20%28isMenu%29%20%7B%0A%09%09%09%09let%20m%20%3D%20node.parentNode.appendChild%28this.%24CNS%28%22menu%22%2C%20%7B%0A%09%09%09%09%09%22label%22%3A%20this.label_tbox.value%2C%0A%09%09%09%09%09%22image%22%3A%20this.image_tbox.value%2C%0A%09%09%09%09%09%22accesskey%22%3A%20this.accesskey_tbox.value%2C%0A%09%09%09%09%7D%29%29.appendChild%28this.%24CNS%28%22menupopup%22%29%29%3B%0A%09%09%09%09m.appendChild%28this.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09%09%22label%22%3A%20%22Dummy%20item%22%2C%0A%09%09%09%09%09%22_snippet%22%3A%20%22Dummy%20item%22%2C%0A%09%09%09%09%7D%29%29%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09node.parentNode.appendChild%28this.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09%09%22label%22%3A%20this.label_tbox.value%2C%0A%09%09%09%09%09%22image%22%3A%20this.image_tbox.value%2C%0A%09%09%09%09%09%22accesskey%22%3A%20this.accesskey_tbox.value%2C%0A%09%09%09%09%09%22style%22%3A%20this.style_tbox.value%2C%0A%09%09%09%09%09%22_hotkey%22%3A%20this.hotkey_tbox.value%2C%0A%09%09%09%09%09%22_snippet%22%3A%20this.snippet_tbox.value%2C%0A%09%09%09%09%7D%29%29%3B%0A%09%09%09%7D%0A%09%09%09this.setBtnImage%28%29%3B%0A%09%09%7D%20else%0A%09%09%09this.saveAttributes%28%29%3B%0A%09%7D%2C%0A%0A%09setDynamicLabels%3A%20function%28%29%20%7B%0A%09%09this.accept_button.label%20%3D%20isNew%20%3F%20%22Add%20new%20%22%20+%20itemName%20%3A%20%22Save%20%22%20+%20itemName%3B%0A%09%09this.selection_ph_lbl.value%20%3D%20storage.selection_anchor%3B%0A%09%09this.caret_ph_lbl.value%20%3D%20storage.caret_anchor%3B%0A%09%09this.evaluator_ph_lbl.value%20%3D%20storage.evaluator_anchor%3B%0A%09%7D%2C%0A%0A%09%24CNS%3A%20function%28aElName%2C%20aAttrs%2C%20aNS%29%20%7B%0A%09%09var%20el%20%3D%20document.createElement%28aElName%29%3B%20//%20createElementNS%20not%20working%20here.%0A%09%09if%20%28aAttrs%29%0A%09%09%09Object.keys%28aAttrs%29.forEach%28function%28n%29%20%7B%0A%09%09%09%09if%20%28aAttrs%5Bn%5D%20%21%3D%3D%20%22%22%29%0A%09%09%09%09%09el.setAttribute%28n%2C%20aAttrs%5Bn%5D%29%0A%09%09%09%7D%29%3B%0A%09%09return%20el%3B%0A%09%7D%2C%0A%0A%09img_to_b64%3A%20function%28%29%20%7B%0A%09%09let%20imgURL%20%3D%20this.image_tbox.value%3B%0A%09%09if%20%28imgURL.search%28/%5Edata%3Aimage/%29%20%3D%3D%3D%200%20%7C%7C%20imgURL%20%3D%3D%3D%20%22%22%29%0A%09%09%09return%20true%3B%0A%09%09fromButton.MultiSnippetsInserter.img_to_b64_cback%28imgURL%2C%20function%28aImgData%29%20%7B%0A%09%09%09aImgData%20%26amp%3B%26amp%3B%20%28gMultiSnippetsInserter.image_tbox.value%20%3D%20aImgData%29%3B%0A%09%09%7D%29%3B%0A%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09gMultiSnippetsInserter.handleToBase64Btn%28%29%3B%0A%09%09%7D%2C%20100%29%3B%0A%09%7D%2C%0A%0A%09insertPlaceholders%3A%20function%28aText%29%20%7B%0A%09%09var%20el%20%3D%20this.snippet_tbox%3B%0A%09%09var%20text%20%3D%20aText%3B%0A%09%09var%20selectionEnd%20%3D%20el.selectionStart%20+%20text.length%3B%0A%09%09var%20currentValue%20%3D%20el.value%20%7C%7C%20el.textContent%3B%0A%09%09var%20beforeText%20%3D%20currentValue.substring%280%2C%20el.selectionStart%29%3B%0A%09%09var%20afterText%20%3D%20currentValue.substring%28el.selectionEnd%2C%20currentValue.length%29%3B%0A%09%09el.value%20%3D%20beforeText%20+%20text%20+%20afterText%3B%0A%09%09el.focus%28%29%3B%0A%09%09el.selectionStart%20%3D%20el.selectionEnd%20%3D%20selectionEnd%3B%0A%09%7D%2C%0A%0A%09setFieldsVisibility%3A%20function%28%29%20%7B%0A%09%09for%20%28var%20i%20%3D%20mItemBoxes.length%20-%201%3B%20i%20%26gt%3B%3D%200%3B%20i--%29%0A%09%09%09mItemBoxes%5Bi%5D.hidden%20%3D%20isMenu%3B%0A%09%09%24%28%22hotkey-box%22%29.hidden%20%3D%20%21storage.create_hotkey%20%7C%7C%20isMenu%3B%0A%09%7D%2C%0A%0A%09setHotKey%3A%20function%28aE%29%20%7B%20//%20Taken%20from%20Custom%20Buttons%20add-on.%20I%20%u2665%20CB%21%21%21%0A%09%09let%20hki%20%3D%20this.hotkey_tbox_inserter%3B%0A%09%09hki.addEventListener%28%22input%22%2C%20function%28aE%29%20%7B%0A%09%09%09this.value%20%3D%20%22%22%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%20false%29%3B%0A%09%09hki.addEventListener%28%22keypress%22%2C%20function%28aE%29%20%7B%0A%09%09%09var%20cbd%20%3D%20Cc%5B%22@xsms.nm.ru/custombuttons/cbkeymap%3B1%22%5D.getService%28Ci.cbIKeyMapService%29%3B%0A%09%09%09var%20key%20%3D%20cbd.getKey%28aE%29%3B%0A%09%09%09if%20%28key%20%3D%3D%20%22ESCAPE%22%29%20%7B%0A%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%09if%20%28this.value%20%21%3D%20%22%22%29%20%7B%0A%09%09%09%09%09this.bExtendedMode%20%3D%20false%3B%0A%09%09%09%09%09this.value%20%3D%20%22%22%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20%28%21this.bExtendedMode%29%20%7B%0A%09%09%09%09%09this.bExtendedMode%20%3D%20true%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09if%20%28key%20%3D%3D%20%22TAB%22%29%20%7B%0A%09%09%09%09if%20%28%21this.bExtendedMode%29%0A%09%09%09%09%09return%3B%0A%09%09%09%09this.bExtendedMode%20%3D%20false%3B%0A%09%09%09%09if%20%28this.value%20%21%3D%20%22%22%29%0A%09%09%09%09%09return%3B%0A%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%7D%0A%09%09%09this.bExtendedMode%20%3D%20false%3B%0A%09%09%09var%20prefix%20%3D%20cbd.getKeyPrefix%28aE%29%3B%0A%09%09%09this.value%20%3D%20%22%22%3B%0A%09%09%09gMultiSnippetsInserter.hotkey_tbox.value%20%3D%20prefix%20+%20key%3B%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%20false%29%3B%0A%09%7D%2C%0A%0A%09saveAttributes%3A%20function%28%29%20%7B%0A%09%09this.label_tbox.value%20%21%3D%3D%20%22%22%20%3F%0A%09%09%09node.setAttribute%28%22label%22%2C%20this.label_tbox.value%29%20%3A%0A%09%09%09node.setAttribute%28%22label%22%2C%20%22Name%20me%21%21%21%22%29%3B%0A%09%09this.image_tbox.value%20%21%3D%3D%20%22%22%20%3F%0A%09%09%09node.setAttribute%28%22image%22%2C%20this.image_tbox.value%29%20%3A%0A%09%09%09node.removeAttribute%28%22image%22%29%3B%0A%09%09this.accesskey_tbox.value%20%21%3D%3D%20%22%22%20%3F%0A%09%09%09node.setAttribute%28%22accesskey%22%2C%20this.accesskey_tbox.value%29%20%3A%0A%09%09%09node.removeAttribute%28%22accesskey%22%29%3B%0A%09%09this.style_tbox.value%20%21%3D%3D%20%22%22%20%3F%0A%09%09%09node.setAttribute%28%22style%22%2C%20this.style_tbox.value%29%20%3A%0A%09%09%09node.removeAttribute%28%22style%22%29%3B%0A%09%09if%20%28%21isMenu%29%20%7B%0A%09%09%09this.hotkey_tbox.value%20%21%3D%3D%20%22%22%20%3F%0A%09%09%09%09%28node.setAttribute%28%22_hotkey%22%2C%20this.hotkey_tbox.value%29%2C%0A%09%09%09%09%09node.setAttribute%28%22acceltext%22%2C%20this.hotkey_tbox.value%29%29%20%3A%0A%09%09%09%09%28node.removeAttribute%28%22_hotkey%22%29%2C%0A%09%09%09%09%09node.removeAttribute%28%22acceltext%22%29%29%3B%0A%09%09%09node.setAttribute%28%22_snippet%22%2C%20encodeURIComponent%28this.snippet_tbox.value%29%29%3B%0A%09%09%7D%0A%09%09this.setBtnImage%28%29%3B%0A%09%7D%2C%0A%0A%09setBtnImage%3A%20function%28%29%20%7B%0A%09%09window.setTimeout%28function%28%29%20%7B%0A%09%09%09fromButton.MultiSnippetsInserter.setBtnImage%28%29%3B%0A%09%09%09close%28%29%3B%0A%09%09%7D%2C%20200%29%3B%0A%09%7D%2C%0A%0A%09populateFields%3A%20function%28%29%20%7B%0A%09%09this.label_tbox.value%20%3D%20node.getAttribute%28%22label%22%29%20%7C%7C%20%22%22%3B%0A%09%09this.image_tbox.value%20%3D%20node.getAttribute%28%22image%22%29%20%7C%7C%20%22%22%3B%0A%09%09this.accesskey_tbox.value%20%3D%20node.getAttribute%28%22accesskey%22%29%20%7C%7C%20%22%22%3B%0A%09%09this.style_tbox.value%20%3D%20node.getAttribute%28%22style%22%29%20%7C%7C%20%22%22%3B%0A%09%09this.hotkey_tbox.value%20%3D%20node.getAttribute%28%22_hotkey%22%29%20%7C%7C%20%22%22%3B%0A%09%09this.snippet_tbox.value%20%3D%20decodeURIComponent%28node.getAttribute%28%22_snippet%22%29%29%20%7C%7C%20%22%22%3B%0A%09%7D%2C%0A%0A%09handleToBase64Btn%3A%20function%28%29%20%7B%0A%09%09if%20%28this.image_tbox.value%20%3D%3D%3D%20%22%22%20%7C%7C%20this.image_tbox.value.search%28/%5Edata%3Aimage/%29%20%3D%3D%3D%200%29%0A%09%09%09this.to_base64_btn.disabled%20%3D%20true%3B%0A%09%09else%0A%09%09%09this.to_base64_btn.disabled%20%3D%20false%3B%0A%09%7D%2C%0A%0A%09setImagePreview%3A%20function%28%29%20%7B%0A%09%09this.image_preview.src%20%3D%20this.image_tbox.value%3B%0A%09%09this.handleToBase64Btn%28%29%3B%0A%09%7D%2C%0A%0A%09selectLocalImage%3A%20function%28%29%20%7B%0A%09%09var%20fp%20%3D%20Cc%5B%22@mozilla.org/filepicker%3B1%22%5D.createInstance%28Ci.nsIFilePicker%29%3B%0A%09%09fp.init%28window%2C%20%22Select%20an%20image%20file%22%2C%200%29%3B%0A%09%09fp.appendFilters%28fp.filterImages%29%3B%0A%09%09var%20res%20%3D%20fp.show%28%29%3B%0A%09%09if%20%28res%20%3D%3D%20fp.returnOK%29%20%7B%0A%09%09%09this.image_tbox.value%20%3D%20fp.fileURL.spec%3B%0A%09%09%09this.setImagePreview%28%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09get%20label_tbox%28%29%20%7B%0A%09%09return%20%24%28%22label_tbox%22%29%3B%0A%09%7D%2C%0A%09get%20image_tbox%28%29%20%7B%0A%09%09return%20%24%28%22image_tbox%22%29%3B%0A%09%7D%2C%0A%09get%20accesskey_tbox%28%29%20%7B%0A%09%09return%20%24%28%22accesskey_tbox%22%29%3B%0A%09%7D%2C%0A%09get%20hotkey_tbox%28%29%20%7B%0A%09%09return%20%24%28%22hotkey_tbox%22%29%3B%0A%09%7D%2C%0A%09get%20hotkey_tbox_inserter%28%29%20%7B%0A%09%09return%20%24%28%22hotkey_tbox_inserter%22%29%3B%0A%09%7D%2C%0A%09get%20style_tbox%28%29%20%7B%0A%09%09return%20%24%28%22style_tbox%22%29%3B%0A%09%7D%2C%0A%09get%20to_base64_btn%28%29%20%7B%0A%09%09return%20%24%28%22to_base64_btn%22%29%3B%0A%09%7D%2C%0A%09get%20snippet_tbox%28%29%20%7B%0A%09%09return%20%24%28%22snippet_tbox%22%29%3B%0A%09%7D%2C%0A%09get%20image_preview%28%29%20%7B%0A%09%09return%20%24%28%22image_preview%22%29%3B%0A%09%7D%2C%0A%09get%20selection_ph_lbl%28%29%20%7B%0A%09%09return%20%24%28%22selection_ph_lbl%22%29%3B%0A%09%7D%2C%0A%09get%20caret_ph_lbl%28%29%20%7B%0A%09%09return%20%24%28%22caret_ph_lbl%22%29%3B%0A%09%7D%2C%0A%09get%20evaluator_ph_lbl%28%29%20%7B%0A%09%09return%20%24%28%22evaluator_ph_lbl%22%29%3B%0A%09%7D%2C%0A%09get%20accept_button%28%29%20%7B%0A%09%09return%20%24%28%22accept_button%22%29%3B%0A%09%7D%2C%0A%7D%3B%0A%5D%5D%26gt%3B%26lt%3B/script%26gt%3B%0A%09%26lt%3Bkeyset%26gt%3B%0A%09%09%26lt%3Bkey%20keycode%3D%22VK_ESCAPE%22%20oncommand%3D%22close%28%29%3B%22/%26gt%3B%0A%09%26lt%3B/keyset%26gt%3B%0A%09%26lt%3Bvbox%26gt%3B%0A%09%09%26lt%3Bgroupbox%20orient%3D%22vertical%22%26gt%3B%0A%09%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%09%26lt%3Brow%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Label%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Btextbox%20id%3D%22label_tbox%22%20tooltip%3D%22label_tt%22%20flex%3D%221%22%20class%3D%22required%22%20placeholder%3D%22A%20name%20for%20the%20item.%22/%26gt%3B%0A%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%26lt%3Brow%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Image%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bhbox%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Btextbox%20id%3D%22image_tbox%22%20oninput%3D%22gMultiSnippetsInserter.setImagePreview%28%29%3B%22%20tooltip%3D%22image_tt%22%20flex%3D%221%22%20class%3D%22optional%22%20placeholder%3D%22A%20link%20to%20an%20image.%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bimage%20id%3D%22image_preview%22%20width%3D%2216%22%20height%3D%2216%22%20/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bbutton%20label%3D%22Browse...%22%20align%3D%22left%22%20oncommand%3D%22gMultiSnippetsInserter.selectLocalImage%28%29%3B%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bbutton%20id%3D%22to_base64_btn%22%20label%3D%22to%20Base64%22%20align%3D%22left%22%20oncommand%3D%22gMultiSnippetsInserter.img_to_b64%28%29%3B%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%26lt%3Brow%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Accesskey%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Btextbox%20id%3D%22accesskey_tbox%22%20tooltip%3D%22accesskey_tt%22%20flex%3D%221%22%20maxlength%3D%221%22%20class%3D%22optional%22%20placeholder%3D%22Any%20alpha-numeric%20character.%22/%26gt%3B%0A%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%26lt%3Brow%20id%3D%22hotkey-box%22%20class%3D%22menuitem-box%22%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Hotkey%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bhbox%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Btextbox%20id%3D%22hotkey_tbox%22%20tooltip%3D%22hotkey_tt%22%20flex%3D%221%22%20class%3D%22optional%22%20placeholder%3D%22Key%20combination%20to%20activate%20this%20item.%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Capture%20hotkey%20%3D%26amp%3Bgt%3B%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Btextbox%20id%3D%22hotkey_tbox_inserter%22%20tooltip%3D%22hotkey_inserter_tt%22%20maxwidth%3D%2230%22%20flex%3D%220%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%26lt%3Brow%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Style%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Btextbox%20id%3D%22style_tbox%22%20tooltip%3D%22style_tt%22%20flex%3D%221%22%20class%3D%22optional%22%20placeholder%3D%22Example%3A%20color%3Ared%3Bfont-size%3A18px%3B%22/%26gt%3B%0A%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%09%26lt%3B/grid%26gt%3B%0A%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%26lt%3Bgroupbox%20orient%3D%22vertical%22%20class%3D%22menuitem-box%22%26gt%3B%0A%09%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bvbox%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bcaption%20label%3D%22Snippet%20of%20text%22%20/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Btextbox%20id%3D%22snippet_tbox%22%0A%09%09%09%09%09%09%09%09%09%20tooltip%3D%22snippet_tt%22%0A%09%09%09%09%09%09%09%09%09%20class%3D%22required%22%0A%09%09%09%09%09%09%09%09%09%20rows%3D%2210%22%0A%09%09%09%09%09%09%09%09%09%20width%3D%22400%22%0A%09%09%09%09%09%09%09%09%09%20multiline%3D%22true%22%0A%09%09%09%09%09%09%09%09%09%20newlines%3D%22pasteintact%22%0A%09%09%09%09%09%09%09%09%09%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/vbox%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bvbox%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bcaption%20label%3D%22Insert%20placeholders%22%20/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%09%09%09%09%09%26lt%3Blabel%20id%3D%22caret_ph_lbl%22%20class%3D%22bold_text%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%09%09%26lt%3Bbutton%20label%3D%22Caret%20anchor%22%20tooltip%3D%22caret_anchor_btn_tt%22%20align%3D%22left%22%20oncommand%3D%22gMultiSnippetsInserter.insertPlaceholders%28storage.caret_anchor%29%3B%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%09%09%09%09%09%26lt%3Blabel%20id%3D%22selection_ph_lbl%22%20class%3D%22bold_text%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%09%09%26lt%3Bbutton%20label%3D%22Selection%20anchor%22%20tooltip%3D%22selection_anchor_btn_tt%22%20align%3D%22left%22%20oncommand%3D%22gMultiSnippetsInserter.insertPlaceholders%28storage.selection_anchor%29%3B%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%09%09%09%09%09%26lt%3Blabel%20id%3D%22evaluator_ph_lbl%22%20class%3D%22bold_text%20warning%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%09%09%26lt%3Bbutton%20label%3D%22Evaluator%22%20tooltip%3D%22evaluator_btn_tt%22%20class%3D%22warning%22%20align%3D%22left%22%20oncommand%3D%22gMultiSnippetsInserter.insertPlaceholders%28storage.evaluator_anchor+storage.evaluator_anchor%29%3B%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3B/grid%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bseparator%20/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bvbox%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bhbox%20align%3D%22center%22%26gt%3B%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bbutton%20popup%3D%22extra_info_pop%22%20tooltiptext%3D%22Extra%20info%20about%20placeholders%22%20image%3D%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAADjklEQVRIicWV708TdxzHP3f4aDRxNYHsgQs/HvjQu7o+MYRkrJI6TDyhPf+A2Vo3iHHptVtmlqAxEQe0RayFay1FXLIlS3ymG8YQMvYDs/EAWduFIWhcgoQHBKSCLffeg7v2rtgqmmX7JJ9ccj/er8+9P9/v50v0f4YoihUHDx2xc05fgHdKY1bBPWsV3LO8UxrjWqXeBltLMxGxbyTOC+0tFsfpVI1nJFPln0DluXmwvVmwvVlUnptHlX8CNZ7rGUtbR4oTTtlfS5xz+m/UuWPPmIACCgIUAqgPoJCiXbUMAkzPFurc0cz+477hHYlbHGfGzWenVOE+gC4D1A+YI5v4+Js03k/8DerX7udhAcDsv6dwbWfuvrJy8xdT6keaMIUBCiv48uY0crkc/nqwgHcuL6r3r2jvaZA9/kmFE31DZT2vc8eeFcSvAHQVoAhAg0D7d0msrKzg1+k0dl9dAQ1oz7dB6j+SM/xRT3ORuCiKFRbH6RQT1DzOiw8AJAOMnMOuwU00Jh5gb2wZTHQLJONFSBBgurOwtHbMkHF1HTx0xF7jGclQyGCLJs7Kz3Hi699xaTRVSHFkGsw1BRQ1QPq1ngSA2pOJ9camwzaD975AlX9Cr16zhWIAE1dgTSyg81YS+Th/OwkmngPF1CIoUvwX1d5xcE6pS/ffKY1Vnp9XXzBUT9cASgB0HXg7uojl5eViQBz6X4R1gKlzDrxDulMAWI+5Z9lAthgQhSowDNANwBRbxNLSkgr4PglmyAAYNNgUAtivNmAVXOn/DrATi0yyAbATi0TvqN5kUeot12SKqxBTpATgZU0WvRcLgAZbS3O5ZZqHmMIGwK0kmFiu/DJ1J5422OxNxr3GHmhrTzKBrZIbjaKAqf9JAXDhdhrMYK7sRuNbP7lP28c4J5yy17mjmVKjoiKyiX2hFNbW1gAA8Z8W8FbPYzDhrVKjYv3Ah64PSs6j/cd9w+bP7ynGYbcruIqum5P47c9HWF1dLeS3P/4BhzxVPOykXxSuTYqVFNcb7r2757NJJT+umb4cLOF5vDfwUM+Imu+Gnujivp8VzvnpDy8V1yG+oXqXnGF6ssUHTj6NB053FvUn5PVXVr49+KOeZktrx0ytJ7FeLY3D1DkHtnsDbPcGTJ1zqJbGUXsy8dQitM+U9XwHwTY2HbZxTqmLd0h3rIIrbRVcaV70jnKi96K2FN/s0P+34h8T4tFY/JoDdAAAAABJRU5ErkJggg%3D%3D%22%20/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%26lt%3B/hbox%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3B/vbox%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/vbox%26gt%3B%0A%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%09%26lt%3B/grid%26gt%3B%0A%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%26lt%3Blabel%20value%3D%22Brown%20colored%20fields%20are%20REQUIRED%22%20class%3D%22bold_text%22%20style%3D%22color%3Abrown%20%21important%3B%22/%26gt%3B%0A%09%09%26lt%3Blabel%20value%3D%22Green%20colored%20fields%20are%20OPTIONAL%22%20class%3D%22bold_text%22%20style%3D%22color%3Agreen%20%21important%3B%22/%26gt%3B%0A%09%26lt%3B/vbox%26gt%3B%0A%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%26lt%3Bhbox%20id%3D%22buttons-box%22%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%26lt%3Bbutton%20id%3D%22accept_button%22%20image%3D%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAADp0lEQVQ4jWNgGKwg9qIed9U9Z/G+x6GcVDM0dLcxf9YFy5y6x957ej9Ep/a/TxCg2NCE/QYCaafNs2sfet+b8CX2/+TviS/6P8blTnobzUeBS5X4k46ZZFfe9brX9T7if/eHiP+TvsX/7/0Y+7LlRXhBwzNfLpINddupxx21Vz+n9KbbvY63Yf/L77n9z7hg8b/2sff/CV/i/re+jHhVdcevFK7Bc5uKqP9mzbjgnXrmuAx12O/AErhVK6/gisvDjrfh/4vvuPyPOWHwP/yw9v+4k4b/y++7/y++5fE/95LrNgYGBgYGy1UynBG7jVIzzjo+TD1lt9Fns7YZNoNdV6kUZZ93etr5LuJ//i2n/2FHdP4HHtCA4+jjRv/jjlkeSzpqZcnA0MDAFLHHzLb0pvfjCV/j/7c8D/uWcMRmk/taTSNkQ20Xy5SmnrZ71fMx+n/Wdfv//gc0/nvtVYVj/31a/0P2GBwL321k0dDAwMQQu9NKrPia9+3uj1H/s244/K9+5ve/4UnIz4g95lscl6loMzAwMFjMkSlPOGr9duK3hP+pV2z+u+1R+e+8UxGO3Xep/ffdrrs3aJOBaeiqUGYGBgYGhvQzTicnfo//F3nG5L/ddrn/Poe0/tc89/9f8zDoj98m/e0mMyVnRB+0fDv1Z9L/+IuW/+22y/232SYLxw7bFP+7b9VaGrzZQJWhgYEJ7kXLzTInvQ5p/jXbLPUfht0PqP+vfRnwv+y23/+k4/b/J3yJ/x9zwfw/shqzzVL/LTfK/rFfr7bSdY2BKkaEqKziEdVfJ7pPb73YL70N4v9h2Gmf6v/qF/7/+7/F/Y84b/bfYKMEXE5vvfh/g7WSP8xWyq+2W6SqiTNtaqwXUNBcI7JNY43Id401wv9h2Gqnwn/7vSr/tdeJ/kcW11wh9l1vkfRa01mQOMAN/jMwyq8Q1lRcJbBBcaXAN8WVAv9xYaWlgj/UZkus1Z0so4vfUBhoYGCSXsytL72Md43UUp6vUst4/6Nj6QV8f+SmCq1W6ZAg4FIshoss5jISXsy5WngR51fhRZz/4Xg213/xPr6Vks3CuMOUkOH881iNeOezreGZz/aNZz7bf55pbP/52jiWitbwYcY+qYazzmXVZ5vNuIF1EtN3tgbmheyl7MqUGcrAwCIgICAgqCQoxx/J78oXyx0r6MBrIyIiIsnAwEB6cYgEGBkYGJgZGBhYtbW12VRUVNi1tbXZGBgYWBgYkHLWQAEAiWuvhyf4ZMUAAAAASUVORK5CYII%3D%22%20oncommand%3D%22gMultiSnippetsInserter.onAccept%28%29%3B%22/%26gt%3B%0A%09%09%26lt%3Bbutton%20label%3D%22Cancel%22%20image%3D%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAD1ElEQVQ4jYWUe0yVdRzGn3M4533P+77nfojDXSLiZqYFHsyZsULKZW5ZGV5aZcVoJDmpLSsda2UzXRalRYhAGDVuGhBXuUZMyIlgkkDSEAq5y0XBgXv6w5PDovVs339+z2+f7fn+nv2AeUoRhOAcIAj/oxpFcc+0uTsWNLcAxqZXd2zvjI3d/Q1g+S9IMmDsWLs2sXFb3FsvAdbbTG/AGu/htasnp3B0prSSNf7+B3MAr39CsgF7iZ//vvFPDrEnNevKTi+f9wOAO/72ZYfN9sHxJ58dmz5wmHOHMjiYkHit3j/gaD7gfSs24FHt6//l5biEa3PJ6ZzZf5hlm18YX2W3fwrAhKdXPFLQsPsjzm3bzvEnYji64Tlej3uDQxu3ssLunnMMMKYBhhNu9mP965/h9Vd2cOTxjRxfv4mzz8ezbl0Mn1q6sgwvLlud8dWWl8f6w1dx8M5g9obex+GHonljw2YOhEewJfLhglOOiOzeoMW8sSKSA/cu56WAUA7eFcKR0GVMXeKYjF3yYDGMgNUuCG+/6+795yWbK7s0Wp43mThwdyDnvLw5HbOVV6Me5bSiZ5+i5y+iyA5BYK8k80OTZdhHqz3gDenWPi33i+Jre4ymgQ6TmZUAKwC2Axyz2Pi7ovA0wDLneZsgcK9WN7pco9kDwB2Aav7LSZEuLjHviPJss8WVxwHmAywCeAJgHsACgHUaDZO0wuwatfr1xYB+wY7kAC7xanV888rV/MFi5RGAR52TCjBfJ/HHwFC+qVYn5wAuC0JSADldMsbkGgxDFSYzv1apmAYwwzlpTmC52cw8g3E6Q5E27QeUf7X1W70+4aTZOlQlycx1xikG+JMks8lgZDHA750RqyWZlWbLcJai7EwCzACAdECXKwi76ozGkVpRZAnAWoANAM9rtbwYGMLuMAcvCAIbANYALAFYI4qsN5lHs3S6pI8BCecSEr9oj4pmnUbDKoA/A2wF2CeK/M1qZbmiVJcZpLyLrjb2SxJbnXeqAdZrtGxd5M/ipWFHcPqxdVW/OhxTTYLAFpWKXQAviyK7XW3TJ2W5sApYVAxYymQ5s9tunxpWFHYCbFGp2CyIPOfpNXM24oE2FFk8fcu12oPtBv1wn8HASTc3dlksV2sVJasGuCcJUANQlQJ+VXr9Zx12t4lJvZ5/6HS8YDJPVAtCZrXBEAQAqjLA44ygee9KdPRYW9QanhLFlEYggDchAAACqgbAs16W957x9eFERMTUWVH8vBTw4/xCNgCGvMDA7zrDw7J7AMtt5jzVAPp2P+99hcEhRY03/yMVAPwFQsCsEJnbtMgAAAAASUVORK5CYII%3D%22%20oncommand%3D%22close%28%29%3B%22/%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%26lt%3B/hbox%26gt%3B%0A%09%26lt%3Bseparator/%26gt%3B%0A%26lt%3Bpopupset%26gt%3B%0A%09%26lt%3Bpanel%20id%3D%22extra_info_pop%22%20type%3D%22arrow%22%20orient%3D%22vertical%22%20flip%3D%22slide%22%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3B*%26lt%3B/html%3Astrong%26gt%3B%20All%20three%20placeholders%20can%20be%20used%20in%20the%20same%20snippet%20at%20the%20same%20time.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3B*%26lt%3B/html%3Astrong%26gt%3B%20The%20%26lt%3Bhtml%3Astrong%26gt%3BCaret%20anchor%26lt%3B/html%3Astrong%26gt%3B%20can%20be%20used%20%26lt%3Bhtml%3Astrong%26gt%3BONLY%20ONCE%26lt%3B/html%3Astrong%26gt%3B%20per%20snippet.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3B*%26lt%3B/html%3Astrong%26gt%3B%20The%20%26lt%3Bhtml%3Astrong%26gt%3BSelection%20anchor%26lt%3B/html%3Astrong%26gt%3B%20can%20be%20used%20%26lt%3Bhtml%3Astrong%26gt%3BONLY%20ONCE%26lt%3B/html%3Astrong%26gt%3B%20per%20snippet.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3B*%26lt%3B/html%3Astrong%26gt%3B%20The%20%26lt%3Bhtml%3Astrong%26gt%3BEvaluator%26lt%3B/html%3Astrong%26gt%3B%20placeholder%20%26lt%3Bhtml%3Astrong%26gt%3Bmust%20always%20be%20used%20in%20pairs%26lt%3B/html%3Astrong%26gt%3B%20and%20can%20be%20used%20any%20amount%20of%20times%20inside%20the%20same%20snippet.%26lt%3B/description%26gt%3B%0A%09%26lt%3B/panel%26gt%3B%0A%09%26lt%3Btooltip%20id%3D%22label_tt%22%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BLabel%20for%20the%20menu/menuitem.%26lt%3B/description%26gt%3B%0A%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3Btooltip%20id%3D%22image_tt%22%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BLink%20to%20an%20image%20for%20the%20menu/menuitem.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BAn%20image%20can%20be%3A%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bhtml%3Aul%26gt%3B%0A%09%09%26lt%3Bhtml%3Ali%26gt%3BAn%20URL%20containing%20an%20online%20image%2C%20e.g.%2C%20%26amp%3Bquot%3Bhttps%3A//duckduckgo.com/favicon.ico%26amp%3Bquot%3B.%26lt%3B/html%3Ali%26gt%3B%0A%09%09%26lt%3Bhtml%3Ali%26gt%3BA%20%26amp%3Bquot%3Bchrome%26amp%3Bquot%3B%20URL%2C%20e.g.%2C%20%26amp%3Bquot%3Bchrome%3A//branding/content/icon32.png%26amp%3Bquot%3B.%26lt%3B/html%3Ali%26gt%3B%0A%09%09%26lt%3Bhtml%3Ali%26gt%3BA%20%26amp%3Bquot%3Bfile%3A///%26amp%3Bquot%3B%20URI%2C%20e.g.%2C%20%26amp%3Bquot%3Bfile%3A///C%3A/Users/UserName/Desktop/Image.png%26amp%3Bquot%3B%2C%20%26amp%3Bquot%3Bfile%3A///home/UserName/Pictures/Image.png%26amp%3Bquot%3B.%26lt%3B/html%3Ali%26gt%3B%0A%09%09%26lt%3Bhtml%3Ali%26gt%3BA%20data%20URI%2C%20e.g.%2C%20%26amp%3Bquot%3Bdata%3Aimage/png%3Bbase64%2C...base64%20code...%26amp%3Bquot%3B.%26lt%3B/html%3Ali%26gt%3B%0A%09%09%26lt%3Bhtml%3Ali%26gt%3BA%20%22moz-icon%22%2C%20e.g.%2C%20%26amp%3Bquot%3Bmoz-icon%3A//.png%3Fsize%3D16%26amp%3Bquot%3B.%26lt%3B/html%3Ali%26gt%3B%0A%09%09%26lt%3B/html%3Aul%26gt%3B%0A%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3Btooltip%20id%3D%22accesskey_tt%22%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BThis%20should%20be%20set%20to%20a%20character%20that%20is%20used%20as%20a%20shortcut%20key%20%28not%20to%20be%20confused%20with%20hotkey%29.%20This%20should%20be%20one%20of%20the%20characters%20that%20appears%20in%20the%20label%20for%20the%20element.%20%26lt%3B/description%26gt%3B%0A%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3Btooltip%20id%3D%22hotkey_tt%22%26gt%3B%0A%09%09%26lt%3Bdescription%20class%3D%22warning%22%26gt%3BWARNING%21%21%21%21%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BMake%20sure%20to%20use%20a%20key%20combination%20with%20at%20least%20one%20modifier%20key.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BUse%20the%20%26amp%3Bquot%3BCapture%20hotkey%26amp%3Bquot%3B%20textbox%20to%20the%20right%20to%20create%20the%20key%20combination%20of%20your%20choice.%26lt%3B/description%26gt%3B%0A%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3Btooltip%20id%3D%22hotkey_inserter_tt%22%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BPlace%20the%20cursor%20here%20and%20press%20the%20key%20combination%20of%20your%20choosing%20to%20set%20a%20hotkey.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%20class%3D%22warning%22%26gt%3BWARNING%21%21%21%21%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BMake%20sure%20to%20use%20a%20key%20combination%20with%20at%20least%20one%20modifier%20key.%26lt%3B/description%26gt%3B%0A%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3Btooltip%20id%3D%22style_tt%22%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BHere%20can%20be%20set%20an%20style%20that%20will%20be%20applied%20to%20the%20menu/menuitem.%26lt%3B/description%26gt%3B%0A%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3Btooltip%20id%3D%22snippet_tt%22%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BSnippet%20of%20text%20that%20will%20be%20inserted%20into%20any%20editable%20content%20when%20the%20menuitem%20%28or%20hotkey%20if%20any%29%20is%20activated.%26lt%3B/description%26gt%3B%0A%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3Btooltip%20id%3D%22caret_anchor_btn_tt%22%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BBy%20default%2C%20every%20time%20a%20snippet%20is%20inserted%2C%20the%20caret%20will%20be%20positioned%20at%20the%20end%20of%20the%20inserted%20text.%20This%20placeholder%20will%20allow%20you%20to%20position%20the%20caret%20anywhere%20inside%20the%20snippet.%26lt%3B/description%26gt%3B%0A%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3Btooltip%20id%3D%22selection_anchor_btn_tt%22%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BThis%20placeholder%20is%20usefull%20to%20create%20snippets%20to%20insert%20HTML/BBCode%20tags.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BFor%20example%3A%26lt%3B/html%3Astrong%26gt%3B%20given%20the%20%26lt%3Bhtml%3Astrong%26gt%3B%26amp%3Bquot%3B%5Bb%5D_insert_selection_anchor_here_%5B/b%5D%26amp%3Bquot%3B%26lt%3B/html%3Astrong%26gt%3B%20snippet%2C%20and%20some%20selected%20text%20in%20the%20current%20page%2C%20the%20%26lt%3Bhtml%3Astrong%26gt%3B%26amp%3Bquot%3B%5Bb%5D%26amp%3Bquot%3B%26lt%3B/html%3Astrong%26gt%3B%20part%20of%20the%20snippet%20will%20be%20inserted%20at%20the%20%26lt%3Bhtml%3Astrong%26gt%3Bbeginning%26lt%3B/html%3Astrong%26gt%3B%20of%20the%20selection%20and%20the%20%26lt%3Bhtml%3Astrong%26gt%3B%26amp%3Bquot%3B%5B/b%5D%26amp%3Bquot%3B%26lt%3B/html%3Astrong%26gt%3B%20part%20of%20the%20snippet%20will%20be%20inserted%20at%20the%20%26lt%3Bhtml%3Astrong%26gt%3Bend%26lt%3B/html%3Astrong%26gt%3B%20of%20the%20selection.%26lt%3B/description%26gt%3B%0A%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3Btooltip%20id%3D%22evaluator_btn_tt%22%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3BThis%20placeholder%20is%20usefull%20for%20creating%20%26amp%3Bquot%3Bdynamic%20snippets%26amp%3Bquot%3B.%20The%20text%20surrounded%20by%20this%20placeholders%20will%20be%20evaluated%20and%20a%20string%20%28returned%20by%20the%20evaluated%20code%29%20will%20be%20displayed%20in%20its%20place.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BExample%201%3A%26lt%3B/html%3Astrong%26gt%3B%20The%20snippet%20%26lt%3Bhtml%3Astrong%26gt%3B%26amp%3Bquot%3B_insert_evaluator_anchor_here_new%20Date%28%29.toDateString%28%29%3B_insert_evaluator_anchor_here_%26amp%3Bquot%3B%26lt%3B/html%3Astrong%26gt%3B%20will%20insert%20the%20current%20date.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BExample%202%3A%26lt%3B/html%3Astrong%26gt%3B%20The%20snippet%20%26lt%3Bhtml%3Astrong%26gt%3B%26amp%3Bquot%3B_insert_evaluator_anchor_here_navigator.userAgent%3B_insert_evaluator_anchor_here_%26amp%3Bquot%3B%26lt%3B/html%3Astrong%26gt%3B%20will%20insert%20the%20application%27s%20User%20Agent.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%20class%3D%22warning%22%26gt%3BWARNING%21%21%21%21%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%20class%3D%22warning%22%26gt%3BThe%20expresion%20inside%20the%20Evaluator%20placeholders%20must%20always%20return%20a%20string.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3Bdescription%20class%3D%22warning%22%26gt%3BIf%20you%20have%20no%20notion%20at%20all%20of%20what%20evaluating%20JavaScript%20code%20means/does%2C%20DO%20NOT%20USE%20this%20feature.%26lt%3B/description%26gt%3B%0A%09%26lt%3B/tooltip%26gt%3B%0A%26lt%3B/popupset%26gt%3B%0A%26lt%3B/window%26gt%3B%26lt%3B%21--AddEditWindow--%26gt%3B%0A%0A%26lt%3B%21--OptionsWindow--%26gt%3B%26lt%3B%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22data%3Atext/css%3Bcharset%3Dutf-8%2C%0Acaption%20.caption-text%2C%0A.bold_text%7B%0A%09font-weight%3Abold%3B%0A%7D%0A.warning%7B%0A%09font-weight%3A%20bold%20%21important%3B%0A%09color%3A%20red%20%21important%3B%0A%7D%0A.info%7B%0A%09font-weight%3A%20bold%20%21important%3B%0A%09color%3A%20green%20%21important%3B%0A%7D%0A%22%20type%3D%22text/css%22%20%3F%26gt%3B%0A%26lt%3Bprefwindow%20xmlns%3Ahtml%3D%22http%3A//www.w3.org/1999/xhtml%22%0A%09%09%09%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%0A%09%09%09%20onload%3D%22gMultiSnippetsInserter.onLoad%28%29%3B%22%0A%09%09%09%20onunload%3D%22gMultiSnippetsInserter.onUnload%28%29%3B%22%0A%09%09%09%20buttons%3D%22accept%2Ccancel%2Cextra1%2Cextra2%22%0A%09%09%09%20buttonlabelextra1%3D%22Apply%22%0A%09%09%09%20buttonlabelextra2%3D%22Reset%20to%20defaults%22%0A%09%09%09%20ondialogextra1%3D%22gMultiSnippetsInserter.onApply%28%29%3B%22%0A%09%09%09%20ondialogextra2%3D%22gMultiSnippetsInserter.resetToDefaults%28%29%3B%22%0A%09%09%09%20windowtype%3D%22CB%3AMultiSnippetsInserter%3ASettings%22%0A%09%09%09%20title%3D%22Multi%20Snippets%20Inserter%20settings%22%26gt%3B%0A%09%09%09%09%26lt%3Bscript%26gt%3B%0A%09%09%26lt%3B%21%5BCDATA%5B%0Avar%20Cc%20%3D%20Components.classes%3B%0Avar%20Ci%20%3D%20Components.interfaces%3B%0Avar%20Cu%20%3D%20Components.utils%3B%0Avar%20fromButton%20%3D%20_self_%3B%0Avar%20storage%20%3D%20window._storage%3B%0Avar%20idNumber%20%3D%20storage.self_id.slice%2820%29%3B%0Afunction%20%24%28id%29document.getElementById%28id%29%3B%0Avar%20gMultiSnippetsInserter%20%3D%20%7B%0A%09_initialized%20%3A%20false%2C%0A%09onLoad%20%3A%20function%20%28%29%20%7B%0A%09%09fromButton.style.setProperty%28%22outline%22%2C%20%224px%20groove%20green%22%2C%20%22important%22%29%3B%0A%09%09fromButton.style.setProperty%28%22outline-offset%22%2C%20%22-3px%22%2C%20%22important%22%29%3B%0A%09%09window.document.documentElement.setAttribute%28%22title%22%2C%0A%09%09%20%22Multi%20Snippets%20Inserter%20settings%20-%20Button%20%23ID%3A%20%22%20+%20idNumber%29%3B%0A%09%09document.documentElement.getButton%28%22extra1%22%29.setAttribute%28%22icon%22%2C%20%22save%22%29%3B%0A%09%09document.documentElement.getButton%28%22extra2%22%29.setAttribute%28%22icon%22%2C%20%22clear%22%29%3B%0A%09%09this._initialized%20%3D%20true%3B%0A%09%09var%20docElt%20%3D%20document.documentElement%3B%0A%09%09this.instantApply%20%3D%20docElt.instantApply%3B%0A%09%09window.addEventListener%28%22change%22%2C%20this%2C%20false%29%3B%0A%09%09window.addEventListener%28%22beforeaccept%22%2C%20this%2C%20false%29%3B%0A%09%7D%2C%0A%09handleEvent%20%3A%20function%20%28aEvent%29%20%7B%0A%09%09switch%20%28aEvent.type%29%20%7B%0A%09%09case%20%22change%22%3A%0A%09%09%09if%20%28aEvent.target.localName%20%21%3D%20%22preference%22%29%0A%09%09%09%09return%3B%0A%09%09%09this.updateBroadcasters%28aEvent.target%29%3B%0A%09%09%09if%20%28%21this.instantApply%29%0A%09%09%09%09this.updateApplyButton%28aEvent%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22beforeaccept%22%3A%0A%09%09%09break%3B%0A%09%09%7D%0A%09%7D%2C%0A%09changes%20%3A%20%5B%5D%2C%0A%09updateApplyButton%20%3A%20function%20%28aEvent%29%20%7B%0A%09%09var%20item%20%3D%20aEvent.target%3B%0A%09%09if%20%28item.localName%20%21%3D%20%22preference%22%29%0A%09%09%09return%3B%0A%09%09var%20valueChanged%20%3D%20item.value%20%21%3D%20item.valueFromPreferences%3B%0A%09%09var%20index%20%3D%20this.changes.indexOf%28item%29%3B%0A%09%09if%20%28valueChanged%20%26amp%3B%26amp%3B%20index%20%3D%3D%20-1%29%0A%09%09%09this.changes.push%28item%29%3B%0A%09%09else%20if%20%28%21valueChanged%20%26amp%3B%26amp%3B%20index%20%26gt%3B%20-1%29%0A%09%09%09this.changes.splice%28index%2C%201%29%3B%0A%09%7D%2C%0A%09onApply%20%3A%20function%20%28%29%20%7B%0A%09%09while%20%28this.changes.length%29%20%7B%0A%09%09%09var%20preference%20%3D%20this.changes.shift%28%29%3B%0A%09%09%09preference.batching%20%3D%20true%3B%0A%09%09%09preference.valueFromPreferences%20%3D%20preference.value%3B%0A%09%09%09preference.batching%20%3D%20false%3B%0A%09%09%7D%0A%09%09this.onLoad%28%29%3B%0A%09%09fromButton.MultiSnippetsInserter.selfDestroy%28%29%3B%0A%09%7D%2C%0A%09updateBroadcasters%20%3A%20function%20%28aPreference%29%20%7B%0A%09%09if%20%28aPreference.type%20%21%3D%20%22bool%22%29%0A%09%09%09return%3B%0A%09%09var%20obs%20%3D%20%24%28aPreference.id.replace%28%22pref_%22%2C%20%22obs_%22%29%29%3B%0A%09%09if%20%28obs%29%0A%09%09%09this.setDisabled%28obs%2C%20%21aPreference.value%29%3B%0A%09%7D%2C%0A%09setDisabled%20%3A%20function%20%28itemOrId%2C%20val%29%20%7B%0A%09%09var%20item%20%3D%20typeof%28itemOrId%29%20%3D%3D%20%22string%22%20%3F%20%24%28itemOrId%29%20%3A%20itemOrId%3B%0A%09%09if%20%28%21item%29%0A%09%09%09return%3B%0A%09%7D%2C%0A%09onUnload%20%3A%20function%20%28%29%20%7B%0A%09%09fromButton.style.removeProperty%28%22outline%22%2C%20%224px%20groove%20green%22%2C%20%22important%22%29%3B%0A%09%09fromButton.style.removeProperty%28%22outline-offset%22%2C%20%22-3px%22%2C%20%22important%22%29%3B%0A%09%09window.removeEventListener%28%22change%22%2C%20this%2C%20false%29%3B%0A%09%09window.removeEventListener%28%22beforeaccept%22%2C%20this%2C%20false%29%3B%0A%09%09fromButton.MultiSnippetsInserter.selfDestroy%28%29%3B%0A%09%7D%2C%0A%09resetToDefaults%20%3A%20function%20%28%29%20%7B%0A%09%09fromButton.MultiSnippetsInserter.resetToDefaults%28window%29%3B%0A%09%7D%2C/*%0A%09setNotificationPosition%20%3A%20function%20%28%29%20%7B%0A%09%09fromButton.MultiSnippetsInserter.resetToDefaults%28window%29%3B%0A%09%7D*/%0A%7D%3B%0A%5D%5D%26gt%3B%26lt%3B/script%26gt%3B%0A%09%26lt%3Bprefpane%20id%3D%22_U_I_D__PrefPane%22%26gt%3B%0A%09%09%26lt%3Bpreferences%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22ItemsFileName%22%20name%3D%22_RoOt_ItemsFileName%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22CaretAnchor%22%20name%3D%22_RoOt_CaretAnchor%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22SelectionAnchor%22%20name%3D%22_RoOt_SelectionAnchor%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22Evaluator%22%20name%3D%22_RoOt_Evaluator%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22EvaluatorEnabled%22%20name%3D%22_RoOt_EvaluatorEnabled%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22KeepSelection%22%20name%3D%22_RoOt_KeepSelection%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22ShowAccelText%22%20name%3D%22_RoOt_ShowAccelText%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22HotkeysEnabled%22%20name%3D%22_RoOt_HotkeysEnabled%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22InstantHotkeys%22%20name%3D%22_RoOt_InstantHotkeys%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22SaveXULExpanded%22%20name%3D%22_RoOt_SaveXULExpanded%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22ContextMenuEnabled%22%20name%3D%22_RoOt_ContextMenuEnabled%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22ConvertMenuToPanel%22%20name%3D%22_RoOt_ConvertMenuToPanel%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22NotificationPosition%22%20name%3D%22_RoOt_NotificationPosition%22%20type%3D%22int%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22TimeStampForBackups%22%20name%3D%22_RoOt_TimeStampForBackups%22%20type%3D%22int%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22TimeStampForBackupsCustom%22%20name%3D%22_RoOt_TimeStampForBackupsCustom%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22OpenOnHover%22%20name%3D%22_RoOt_OpenOnHover%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22OpenOnHoverDelayClose%22%20name%3D%22_RoOt_OpenOnHoverDelayClose%22%20type%3D%22int%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22OpenOnHoverDelayOpen%22%20name%3D%22_RoOt_OpenOnHoverDelayOpen%22%20type%3D%22int%22/%26gt%3B%0A%09%09%26lt%3B/preferences%26gt%3B%0A%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%26lt%3Bvbox%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Convert%20popup%20to%20panel%22%20tooltip%3D%22tt_15%22%20preference%3D%22ConvertMenuToPanel%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Enable%20context%20menu%22%20tooltip%3D%22tt_14%22%20preference%3D%22ContextMenuEnabled%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Enable%20item%20hotkeys%22%20tooltip%3D%22tt_0%22%20preference%3D%22HotkeysEnabled%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Evaluator%20enabled%22%20tooltip%3D%22tt_3%22%20preference%3D%22EvaluatorEnabled%22%20/%26gt%3B%0A%09%09%09%09%09%26lt%3B/vbox%26gt%3B%0A%09%09%09%09%09%26lt%3Bvbox%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Instant%20hotkeys%22%20tooltip%3D%22tt_16%22%20preference%3D%22InstantHotkeys%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Keep%20selection%20selected%22%20tooltip%3D%22tt_1%22%20preference%3D%22KeepSelection%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Save%20file%20expanded%22%20tooltip%3D%22tt_11%22%20preference%3D%22SaveXULExpanded%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Show%20acceltext%20on%20items%22%20tooltip%3D%22tt_2%22%20preference%3D%22ShowAccelText%22%20/%26gt%3B%0A%09%09%09%09%09%26lt%3B/vbox%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%26lt%3B/grid%26gt%3B%0A%09%09%26lt%3Bhbox%20align%3D%22center%22%26gt%3B%0A%09%09%09%26lt%3Blabel%20value%3D%22Items%20file%20base%20name%22/%26gt%3B%0A%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20tooltip%3D%22tt_4%22%20preference%3D%22ItemsFileName%22/%26gt%3B%0A%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%26lt%3Bgroupbox%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcaption%20label%3D%22Placeholders%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Brow%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Caret%20anchor%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20maxlength%3D%223%22%20maxwidth%3D%2270%22%20tooltip%3D%22tt_5%22%20preference%3D%22CaretAnchor%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Brow%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Selection%20anchor%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20maxlength%3D%223%22%20maxwidth%3D%2270%22%20tooltip%3D%22tt_6%22%20preference%3D%22SelectionAnchor%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Brow%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Evaluator%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20maxlength%3D%221%22%20maxwidth%3D%2270%22%20tooltip%3D%22tt_7%22%20preference%3D%22Evaluator%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/grid%26gt%3B%0A%09%09%09%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%09%09%09%26lt%3Bgroupbox%20tooltip%3D%22tt_13%22%20%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcaption%20label%3D%22Timestamp%20for%20backups%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bradiogroup%20orient%3D%22vertical%22%20preference%3D%22TimeStampForBackups%22%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bradio%20label%3D%22YYYY%20MM-DD%20hh.mm.ss%22%20tooltiptext%3D%22ISO8601%22%20value%3D%221%22%20/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bradio%20label%3D%22YYYY%20DD.MM%20hh.mm.ss%22%20tooltiptext%3D%22European%22%20value%3D%222%22%20/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bradio%20label%3D%22Custom%22%20value%3D%220%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/radiogroup%26gt%3B%0A%09%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20tooltip%3D%22tt_12%22%20preference%3D%22TimeStampForBackupsCustom%22/%26gt%3B%0A%09%09%09%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%26lt%3B/grid%26gt%3B%0A%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%26lt%3Bgroupbox%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcaption%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Open%20main%20menu%20on%20hover%22%20tooltip%3D%22tt_8%22%20preference%3D%22OpenOnHover%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/caption%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Brow%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Auto%20open%20menu%20delay%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20tooltip%3D%22tt_9%22%20maxwidth%3D%2270%22%20preference%3D%22OpenOnHoverDelayOpen%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Brow%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Auto%20close%20menu%20delay%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20tooltip%3D%22tt_10%22%20maxwidth%3D%2270%22%20preference%3D%22OpenOnHoverDelayClose%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/grid%26gt%3B%0A%09%09%09%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%09%09%09%26lt%3Bgroupbox%20tooltip%3D%22tt_17%22%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcaption%20label%3D%22Notification%20position%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bmenulist%20preference%3D%22NotificationPosition%22%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bmenupopup%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Bmenuitem%20label%3D%22Left%20top%22%20value%3D%221%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Bmenuitem%20label%3D%22Right%20top%22%20value%3D%222%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Bmenuitem%20label%3D%22Left%20bottom%22%20value%3D%223%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Bmenuitem%20label%3D%22Right%20bottom%22%20value%3D%224%22/%26gt%3B%0A%09%09%09%09%09%09%09%09%26lt%3Bmenuitem%20label%3D%22Center%20screen%22%20value%3D%225%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3B/menupopup%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/menulist%26gt%3B%0A%09%09%09%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%26lt%3B/grid%26gt%3B%0A%09%26lt%3B/prefpane%26gt%3B%0A%09%26lt%3Bpopupset%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_0%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20checked/enabled%2C%20you%20can%20set%20hotkeys%20to%20insert%20the%20snippets%20from%20any%20item.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_1%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20checked/enabled%2C%20and%20your%20snippet%20has%20a%20%26amp%3Bquot%3BSelection%20anchor%26amp%3Bquot%3B%2C%20the%20current%20selected%20text%20will%20still%20be%20selected%20after%20inserting%20the%20snippet.%20This%20allows%20you%20to%20insert%20different%20snippets%20to%20the%20same%20selection.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_2%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20checked/enabled%2C%20and%20item%20hotkeys%20are%20also%20enabled%2C%20the%20key%20combination%20for%20the%20hotkey%20asigned%20to%20an%20item%20will%20be%20displayed%20next%20to%20the%20item%20label.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_3%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20checked/enabled%2C%20all%20snippets%20containing%20%26amp%3Bquot%3BEvaluators%26amp%3Bquot%3B%20will%20be%20processed.%20If%20unchecked/disabled%2C%20all%20snippets%20containing%20%26amp%3Bquot%3BEvaluators%26amp%3Bquot%3B%20will%20be%20ignored.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_4%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BAll%20items%20in%20the%20main%20menu%20are%20saved%20into%20a%20file.%20Here%20can%20be%20defined%20a%20base%20name%20for%20that%20file.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_5%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BHere%20can%20be%20defined%20the%20%26lt%3Bhtml%3Astrong%26gt%3B%26amp%3Bquot%3BCaret%20anchor%26amp%3Bquot%3B%26lt%3B/html%3Astrong%26gt%3B.%20It%20has%20to%20be%20a%20combination%20of%20exactly%203%20characters.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_6%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BHere%20can%20be%20defined%20the%20%26lt%3Bhtml%3Astrong%26gt%3B%26amp%3Bquot%3BSelection%20anchor%26amp%3Bquot%3B%26lt%3B/html%3Astrong%26gt%3B.%20It%20has%20to%20be%20a%20combination%20of%20exactly%203%20characters.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_7%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BHere%20can%20be%20defined%20the%20%26lt%3Bhtml%3Astrong%26gt%3B%26amp%3Bquot%3BEvaluator%26amp%3Bquot%3B%26lt%3B/html%3Astrong%26gt%3B.%20It%27s%20better%20if%20you%20don%27t%20change%20this%20character.%20The%20warning%20symbol%20%28the%20default%20character%20for%20the%20%26lt%3Bhtml%3Astrong%26gt%3B%26amp%3Bquot%3BEvaluator%26amp%3Bquot%3B%26lt%3B/html%3Astrong%26gt%3B%29%20is%20a%20reminder%20of%20how%20%26amp%3Bquot%3Bdangerous%26amp%3Bquot%3B%20its%20usage%20can%20be.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_8%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20checked/enabled%2C%20the%20main%20menu%20will%20be%20automatically%20opened%20on%20mouse%20over.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_9%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BDelay%20in%20seconds%20to%20open%20the%20main%20menu%20on%20mouse%20hover.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_10%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BDelay%20in%20seconds%20to%20close%20the%20main%20menu%20on%20mouse%20out.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_11%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20checked/enabled%2C%20the%20content%20of%20the%20items%20file%20will%20be%20saved%20with%20a%20line%20break%20at%20almost%20every%20tag%20%28this%20makes%20it%20a%20little%20easier%20to%20read%29.%20If%20unchecked/disabled%2C%20the%20content%20of%20the%20items%20file%20will%20be%20saved%20in%20a%20single%20line%20%28this%20makes%20it%20hard%20to%20read%29.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BNote%3A%26lt%3B/html%3Astrong%26gt%3B%20This%20option%20is%20usefull%20only%20for%20people%20that%20doesn%27t%20use%20a%20proper%20text%20editor%20software.%20Now%20a%20days%2C%20any%20text%20editor%20%28that%20deserves%20to%20be%20called%20as%20such%29%20has%20some%20sort%20of%20HTML/XML%20%26amp%3Bquot%3Bprettifier%26amp%3Bquot%3B.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_12%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BSet%20a%20custom%20timestamp%20format%20for%20the%20items%20file%20backups.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BYYYY%3A%26lt%3B/html%3Astrong%26gt%3B%20year%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BMM%3A%26lt%3B/html%3Astrong%26gt%3B%20month%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BDD%3A%26lt%3B/html%3Astrong%26gt%3B%20day%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3Bhh%3A%26lt%3B/html%3Astrong%26gt%3B%20hour%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3Bmm%3A%26lt%3B/html%3Astrong%26gt%3B%20minute%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3Bss%3A%26lt%3B/html%3Astrong%26gt%3B%20second%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BNote%3A%26lt%3B/html%3Astrong%26gt%3B%20The%20choosen%20format%20will%20be%20automatically%20stripped%20of%20ilegal%20characters%20for%20file%20names.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_13%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BChoose%20the%20timestamp%20that%20will%20be%20added%20to%20the%20backup%20filenames.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_14%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20checked/enabled%2C%20a%20item%20called%20%26amp%3Bquot%3BCreate%20snippet%20inserter%20item%26amp%3Bquot%3B%20will%20be%20displayed%20in%20the%20page%20context%20menu.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_15%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20checked/enabled%2C%20the%20main%20popup%20will%20have%20the%20appearance%20of%20a%20panel.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_16%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20checked/enabled%2C%20the%20hotkeys%20will%20be%20created%20using%20the%20%26amp%3Bquot%3BAddon%20SDK%20method%26amp%3Bquot%3B.%20If%20unchecked/disabled%2C%20hotkeys%20will%20be%20created%20using%20%26amp%3Bquot%3Bkey%26amp%3Bquot%3B%20elements.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BGecko%20applications%20have%20two%20methods%20for%20creating%20hotkeys%20%28that%20I%20know%20of%29%2C%20through%20the%20Addon%20SDK%20or%20by%20creating%20%26amp%3Bquot%3Bkey%26amp%3Bquot%3B%20elements.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%20class%3D%22bold_text%22%26gt%3BInstant%20hotkeys%20ENABLED%20%28Addon%20SDK%20method%29%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Aspan%20class%3D%22info%22%26gt%3BPros%3A%26lt%3B/html%3Aspan%26gt%3B%20Hotkeys%20start%20working%20instantly%20after%20creation%20and/or%20if%20you%20change%20an%20existent%20one.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Aspan%20class%3D%22warning%22%26gt%3BCons%3A%26lt%3B/html%3Aspan%26gt%3B%20Hotkeys%20will%20not%20work%20on%20Private%20windows%20and%2C%20if%20more%20that%20one%20application%20window%20is%20openend%2C%20once%20a%20window%20is%20closed%20the%20hotkeys%20will%20stop%20working%20on%20all%20other%20windows.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BNote%3A%26lt%3B/html%3Astrong%26gt%3B%20Use%20Instant%20hotkeys%20enabled%20only%20if%20you%20are%20a%20%26amp%3Bquot%3Bmono-window%26amp%3Bquot%3B%20user.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%20class%3D%22bold_text%22%26gt%3BInstant%20hotkeys%20DISABLED%20%28%26amp%3Bquot%3Bkey%26amp%3Bquot%3B%20element%20creation%29%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Aspan%20class%3D%22info%22%26gt%3BPros%3A%26lt%3B/html%3Aspan%26gt%3B%20Hotkeys%20will%20work%20across%20any%20opened%20application%20window.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Aspan%20class%3D%22warning%22%26gt%3BCons%3A%26lt%3B/html%3Aspan%26gt%3B%20The%20application%20may%20need%20to%20be%20restarted%20after%20adding/editing%20hotkeys.%20Some%20key%20combination%20are%20not%20posible%20to%20set%20%28Ctrl+Alt+Shift+1%29.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BNote%3A%26lt%3B/html%3Astrong%26gt%3B%20Use%20Instant%20hotkeys%20disabled%20only%20if%20you%20are%20a%20%26amp%3Bquot%3Bmulti-window%26amp%3Bquot%3B%20user%20and%20you%20don%27t%20mind%20restarting%20the%20application%20each%20time%20you%20add/edit%20hotkeys.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_17%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BChoose%20in%20which%20part%20of%20the%20screen%20the%20popup%20notification%20generated%20by%20this%20button%20will%20appear.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3B/popupset%26gt%3B%0A%26lt%3B/prefwindow%26gt%3B%26lt%3B%21--OptionsWindow--%26gt%3B%0A%0A%26lt%3B%21--StylePanelConvertion--%26gt%3B%0A%23_U_I_D__self_popup%20%7B%0A%09-moz-appearance%3A%20none%20%21important%3B%0A%09-moz-binding%3A%20url%28%22chrome%3A//global/content/bindings/popup.xml%23arrowpanel%22%29%20%21important%3B%0A%09background%3A%20transparent%20%21important%3B%0A%09border%3A%20none%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0A%26lt%3B%21--StylePanelConvertion--%26gt%3B%0A%0A%26lt%3B%21--Siren--%26gt%3Bdata%3Aimage/gif%3Bbase64%2CR0lGODlhFAARAMMAAYD/gBQJCVMdGUk+QZklH9M3HfVaLJ5PUPtpTb13gue4sv/Hm//47mlTVv6VbQAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFIQAAACwAAAAAFAARAAMEZxDIqZK4IqnJucIDpnVeUhTEcggEIWwkkBxnurJZDBzEWTCrFuGgQ/mALZyud3oZfK6iT8B41gTSJ6EKxcaeVu5VWjAYGK3x14dAY1g6g/DwwbR073xgH9v7/4AdewOEA4CBAIeKigAAIfkECQsAAAAsAgAAABIAEQADBG8QyEkqmTjXwmv+kgMghXSBocM4JFCChYGIisMiaDwDDLPUhk8BIVP1eo7gZ+ZY8I5JUNF59IkyuuYTifsYgornYhH1ypw2hLqL/YrUhpgSQ+DY7RtNRWCxCPgnAAIHBw2Eh4R+AhJ/got/kIuOfwAAOw%3D%3D%26lt%3B%21--Siren--%26gt%3B%0A%26lt%3B%21--Loading--%26gt%3Bdata%3Aimage/png%3Bbase64%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%3D%3D%26lt%3B%21--Loading--%26gt%3B%0A%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" rel="nofollow" title="Install Multi Snippets Inserter">
				<![CDATA[Install this button]]>
			</html:a>
		</html:div>
		<html:a id="about" href="https://addons.mozilla.org/addon/custom-buttons/">
			<![CDATA[About CustomButtons]]>
		</html:a>
		<html:div id="credits">
			<html:a href="http://custombuttons.sourceforge.net/forum/viewtopic.php?t=3599">
				<![CDATA[XML created with]]>
				<html:br/>
				<![CDATA[CB Context Menu Extended]]>
			</html:a>
		</html:div>
	</html:div>
</html:body>
  <name>Multi Snippets Inserter</name>
  <image><![CDATA[data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB/0lEQVQ4ja2SQUtUUQCFz8y8N1ODMzLD04lM34zV6xEYDi1q0ULsF7jKIkjKEDJazax6kAtdDrjUhYILBS0xrZWRSEVM7qba+AekRTvFuxG+NndEJK2gCwcuB87HuZcj/c8DxK1iv/P/FG4BLgMBcAlosX6n9QKgcBqgy3GcdUk/HcfZBHwgBgSSfsRisa/ARSALnD0edufn569LajiOsyXpW61WuwmcsYCtRCLxanx8/FYYhk9XV1fLwIXDZwF53/crkr4MDw+/kFTv6OiIgDYL+Cjpveu63yVtS9oul8uPgLYmoJhMJufS6fQbY8ztfD7/0nXdRaDbAt5J2mw0Gs/q9fqopA/JZHIW6BaQmpycvCFpI5fLLWYymel8Pr8gaaNSqfRZwFo2m10ArgLXUqnUSjweXwQCAZ6t/9r3/ZlSqbRULBZnJK0UCoXnFrAk6W1vb+9QEARPJK319PREQElA0XXdqXQ6Pbu/v38XGDg4OBhsbW2dTiQSsxYwl8vlptrb29clfQrDsLa8vDwA5ASc393dHTTGPGx+CnDOGDO0t7d3HwiMMY+NMQ+Aezs7OyPAHaB0ODjABdxm2I7mChDae2jVaQd38iqBTs/zxiR9PirP88aArlPnfKRNf7VaHZU0IWmiWq2OAv3Nln8NiaJoJIqikX8KH4P0WZ0Y/gX5M2qRPU0WMgAAAABJRU5ErkJggg==]]></image>
  <mode>0</mode>
  <initcode><![CDATA[// To avoid initialization while moving the button in "Australis customize mode". ¬¬
if (self.parentNode && /^wrapper-/.test(self.parentNode.id))
	return;

var buttonImage = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB/0lEQVQ4ja2SQUtUUQCFz8y8N1ODMzLD04lM34zV6xEYDi1q0ULsF7jKIkjKEDJazax6kAtdDrjUhYILBS0xrZWRSEVM7qba+AekRTvFuxG+NndEJK2gCwcuB87HuZcj/c8DxK1iv/P/FG4BLgMBcAlosX6n9QKgcBqgy3GcdUk/HcfZBHwgBgSSfsRisa/ARSALnD0edufn569LajiOsyXpW61WuwmcsYCtRCLxanx8/FYYhk9XV1fLwIXDZwF53/crkr4MDw+/kFTv6OiIgDYL+Cjpveu63yVtS9oul8uPgLYmoJhMJufS6fQbY8ztfD7/0nXdRaDbAt5J2mw0Gs/q9fqopA/JZHIW6BaQmpycvCFpI5fLLWYymel8Pr8gaaNSqfRZwFo2m10ArgLXUqnUSjweXwQCAZ6t/9r3/ZlSqbRULBZnJK0UCoXnFrAk6W1vb+9QEARPJK319PREQElA0XXdqXQ6Pbu/v38XGDg4OBhsbW2dTiQSsxYwl8vlptrb29clfQrDsLa8vDwA5ASc393dHTTGPGx+CnDOGDO0t7d3HwiMMY+NMQ+Aezs7OyPAHaB0ODjABdxm2I7mChDae2jVaQd38iqBTs/zxiR9PirP88aArlPnfKRNf7VaHZU0IWmiWq2OAv3Nln8NiaJoJIqikX8KH4P0WZ0Y/gX5M2qRPU0WMgAAAABJRU5ErkJggg==";

var $ = this.MultiSnippetsInserter = {
	Init: function() {
		// I had to put this right here because of that aberration called Palemoon. ¬¬
		self.orient = "horizontal";

		// To diminish "damage" caused by double initialization.
		// Thanks sdavidg!!! I would never have thought of this!!!
		// Problems in Thunderbird's main window with this. The message composer window is fine. ¬¬
		if (!self.type || self.type !== "menu") {
			self.type = "menu";
			if (!$.$("messengerWindow")) // If it isn't Thunderbird's main window.
				return true;
		}

		if (!("OS" in window))
			Cu.import("resource://gre/modules/osfile.jsm");
		if (!("Services" in window))
			Cu.import("resource://gre/modules/Services.jsm");

		$.InitPrefs();

		if (!($._UID in window)) {
			window[$._UID] = {
				Initialized: false,
				StyleSheet: false,
				FrameScriptLoaded: false,
			};
		}

		self.tooltipText = ""; // Set to blank. Otherwise the tooltip attribute doesn't work.
		self.setAttribute("tooltip", $._UID + "_dynamic_tooltip");
		self.onclick = function(aE) {
			// Not needed since its a "menu" type button. Duh!!!!
			// if (aE.button === 0 && !aE.shiftKey && !aE.ctrlKey && !aE.altKey) {
			// 	aE.preventDefault();
			// 	$.handleMainPopup();
			// }
			if ((aE.button === 0 && !aE.shiftKey && aE.ctrlKey && !aE.altKey) ||
				(aE.button === 1 && !aE.shiftKey && !aE.ctrlKey && !aE.altKey)) {
				aE.preventDefault();
				$.optionsPop && $.optionsPop.openPopup(self, "after_start", 0, 0, false, null, null);
			}
			aE.stopPropagation();
		};

		// For loading frame scripts. What a (%·$(&%$&%$)) stupidity!!!!!
		$._randomID = parseInt(Math.random() * 10000, 10);
		window[$._UID]["RandomID"] = $._randomID;

		if (!(window[$._UID]["FrameScriptLoaded"])) {
			window[$._UID]["FrameScriptLoaded"] = true;
			let fS = $.getHelp("FrameScript")
				.replace(/_Tag_Inserter__ID_/g, $._tagInserterMsgID)
				.replace(/_Insert_Text_ID_/g, $._insertTextMsgID)
				.replace(/_Create_From_Selection_ID_/g, $._createFromSelectionMsgID)
				.replace(/_Response_ID_/g, $._responseMsgID + $._randomID);
			$._frameScript = "data:application/javascript," + encodeURIComponent(fS);
			// Load frame script to send messages TO content.
			$._globalMM.loadFrameScript($._frameScript, true);
			// Add listener to receive messages FROM content.
			$._globalMM.addMessageListener($._responseMsgID + $._randomID, $._messageResponse);
		}

		// "Convert" preferences to properties of main object.
		// So I don't have to call gPref("prefname") which is slower.
		// Just have to be carefull not to create a preference with the same name as a property. Duh!
		for (let p in $.DefPrefs) {
			if ($.DefPrefs.hasOwnProperty(p))
				$["_" + p] = $.gPref(p);
		}

		if (!(window[$._UID]["Initialized"])) {
			window[$._UID]["Initialized"] = true;
			$.HandlePrefListener();
		}

		$.CreateElements();
		$.CSSLoader();

		if ($._OpenOnHover) {
			// DO NOT USE $.handleMainPopup() here!!!!!
			self.onmouseover = function(aE) {
				aE.stopPropagation();
				clearTimeout($.openOnHoverTimer);
				$.openOnHoverTimer = setTimeout(function() {
					$.selfPop && $.selfPop.openPopup(self, "after_start", 0, 0, false, null, null);
				}, $._OpenOnHoverDelayOpen);
			};
			self.onmouseout = function(aE) {
				aE.stopPropagation();
				clearTimeout($.openOnHoverTimer);
				$.openOnHoverTimer = setTimeout(function() {
					if ($.ctxPop.state !== "open")
						$.selfPop && $.selfPop.hidePopup();
				}, $._OpenOnHoverDelayClose);
			};
		} else {
			self.onmouseover = null;
			self.onmouseout = null;
		}

		addDestructor(function(aReason) {
			if (aReason === "update" || aReason === "delete") {
				if (self.menuModified) {
					self.image = buttonImage;
					self.menuModified = false;
				}
				$.HandlePrefListener(true);
				// Delete all elements created by this button.
				let selfEls = document.getElementsByAttribute("cb_id", $._UID);
				Array.prototype.slice.call(selfEls).forEach(function(aEl) {
					aEl.parentNode.removeChild(aEl);
				});
				window[$._UID]["FrameScriptLoaded"] = false;
				$._globalMM.removeDelayedFrameScript($._frameScript);
				$._globalMM.removeMessageListener($._responseMsgID + window[$._UID]["RandomID"], $._messageResponse);
			}
			if (aReason === "delete") {
				(Services.prefs.getBranch($.Branch)).deleteBranch("");
				Services.prefs.savePrefFile(null);
				delete window[$._UID];
			}
		});
		// Do this right here at the end just to be sure.
		$.loadFromXULFile($.XULFile.path, false);
	},

	populateDynamicTooltip: function(aE, aN) {
		aN.textContent = "";

		if (aE.target.triggerNode.nodeName === "menu") {
			aE.preventDefault();
			return false;
		}

		if (aE.target.triggerNode.id === self.id) {
			var grid = aN.appendChild($.$CNS("grid"));
			var cols = grid.appendChild($.$CNS("columns"));
			cols.appendChild($.$CNS("column", {
				flex: 2
			}));
			cols.appendChild($.$CNS("column", {
				flex: 3
			}));
			cols.appendChild($.$CNS("column", {
				flex: 1
			}));
			var rows = grid.appendChild($.$CNS("rows"));
			// AppendRow
			let AR = function(aRowsNode, aLabel1, aLabel2, aLabel3, aEmpty) {
				let row = $.$CNS("row");
				if (aEmpty) {
					row.appendChild($.$CNS("label", {
						value: " ",
						width: 0,
					}));
				} else {
					row.appendChild($.$CNS("label", {
						value: aLabel1,
						style: "font-weight: bold;",
					}));
					row.appendChild($.$CNS("label", {
						value: aLabel2,
						style: "font-weight: bold;",
					}));
					let desc = $.$CNS("description", {
						maxwidth: 250,
					});
					desc.textContent = aLabel3; // Use of "textContent" to achieve word wrap. ¬¬
					row.appendChild(desc);
				}
				aRowsNode.appendChild(row);
			};

			let btn = aE.target.triggerNode;
			AR(rows, btn.name, "→", "ID = " + btn.id.slice(20));
			AR(rows, null, null, null, true);
			AR(rows, "Clicks on button", "", "");
			AR(rows, "Left click", "→", "Open/Close main menu");
			AR(rows, "Middle click or Ctrl + Left click", "→", "Open Options menu");
			AR(rows, null, null, null, true);
			AR(rows, "Drag&Drop on menu", "", "");
			AR(rows, "Shift + Drag item", "→", "Reorder items");
			AR(rows, "Shift + Ctrl + Drag item", "→", "Move item inside a menu");
			aN.appendChild($.$CNS("separator")); // Empty space
			let desc2 = $.$CNS("description", {
				style: "font-weight:bold;",
			});
			// Use of "textContent" to achieve word wrap. ¬¬
			desc2.textContent = "Read this button help for very important usage notes.\n" +
				"Right click on button, \"Button Help\" item.";
			aN.appendChild(desc2);
			if (self.menuModified && self.image === $.getHelp("Siren")) {
				aN.appendChild($.$CNS("separator")); // Empty space
				let desc1 = $.$CNS("description", {
					style: "color:red;font-weight:bold;",
				});
				// Use of "textContent" to achieve word wrap. ¬¬
				desc1.textContent = "Remember to save the changes to the modified menu.\n" +
					"Open the \"Options\" menu and select the \"Save to main file\" item.";
				aN.appendChild(desc1);
			}
			return true;
		}

		if (aE.target.triggerNode.nodeName === "menuitem") {
			// Using encode/decodeURIComponent makes it easy to edit the items file in a text editor.
			// Because almost all text editors "for developers" have an encode/decodeURIComponent function integrated.
			let snippet = decodeURIComponent(aE.target.triggerNode.getAttribute("_snippet"));
			aN.appendChild($.$CNS("description", {
				"value": "Snippet",
				"style": "font-weight:bold;"
			}));
			let desc = $.$CNS("description");
			desc.textContent = snippet; // Use of "textContent" to achieve word wrap. ¬¬
			aN.appendChild(desc);
			return true;
		}
	},

	InitPrefs: function() {
		let branch = Services.prefs.getDefaultBranch(self.MultiSnippetsInserter.Branch),
			defaults = self.MultiSnippetsInserter.DefPrefs;
		for (let key in defaults) {
			if (defaults.hasOwnProperty(key)) {
				let val = defaults[key];
				switch (typeof val) {
					case "boolean":
						branch.setBoolPref(key, val);
						break;
					case "number":
						branch.setIntPref(key, val);
						break;
					case "string":
						let str = Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString);
						str.data = val;
						branch.setComplexValue((key),
							Ci.nsISupportsString, str);
						break;
				}
			}
		}
	},

	createHotkeys: function(aArr) {
		if ($._InstantHotkeys && $.canCreateHotKeys) {
			var {
				Hotkey
			} = self.require("sdk/hotkeys");
			self.hotkeys = {};
			Array.prototype.slice.call(aArr).forEach(function(aObj, aIndex) {
				let combo = $.getCombo(aObj["combo"]);
				self.hotkeys[aIndex] = Hotkey({
					combo: combo,
					onPress: function() {
						$.TextInserter(aObj["snippet"]);
					}
				});
				addDestructor(function(aReason) {
					if (aReason === "delete" || aReason === "update") {
						self.hotkeys[aIndex].destroy();
					}
				});
			});
		} else {
			var keyset = $.keySet;
			Array.prototype.slice.call(aArr).forEach(function(aObj, aIndex) {
				let combo = $.getCombo(aObj["combo"]);
				let key = combo.substring(combo.lastIndexOf("-") + 1, combo.length);
				let modifiers = combo.slice(0, -(key.length + 1)).split("-").join(",");
				if (key && modifiers && keyset) {
					let attr = key.length === 1 ? "key" : "keycode";
					let hk = keyset.appendChild($.$CNS("key", {
						modifiers: modifiers,
						oncommand: "document.getElementById('" + self.id +
							"').MultiSnippetsInserter.TextInserter('" + aObj["snippet"] +
							"');event.stopPropagation();",
					}));
					hk.setAttribute(attr, key.length === 1 ? key : "VK_" + key); // Set "keycode" or "key" attribute.
				}
			});
		}
	},

	getCombo: function(aHKStr) {
		var prefix = "";
		if (aHKStr.search("Alt+") !== -1)
			prefix += "alt-";
		if (aHKStr.search("Ctrl+") !== -1)
			prefix += "control-";
		if (aHKStr.search("Shift+") !== -1)
			prefix += "shift-";
		if (aHKStr.search("Meta+") !== -1)
			prefix += "meta-";
		return prefix + aHKStr.substring(aHKStr.lastIndexOf("+") + 1, aHKStr.length);
	},

	TagInserter: function() {
		// Just send to frame script to obtain selection anchors and send them back to main code here. Can you believe this SHEET!?!??! ¬¬
		$._mm.sendAsyncMessage($._tagInserterMsgID);
	},

	setBtnImage: function(aType) {
		let mMod = self.menuModified; // Stored so I can use the original value twice.
		if (!mMod)
			self.menuModified = true;
		if (aType)
			self.image = $.getHelp("Loading");
		else {
			if (!mMod) {
				$.notifyme(self.name,
					"Remember to save the changes made to the main menu.",
					$.getHelp("Siren"),
					$.alertCallback);
			}
			self.image = $.getHelp("Siren");
		}
	},

	// http://stackoverflow.com/questions/7365575/how-to-get-text-between-two-characters
	// Answer by BarryTheHatchet.
	getSubStr: function(aStr, aDelim) {
		var a = aStr.indexOf(aDelim);
		if (a === -1)
			return "";
		var b = aStr.indexOf(aDelim, a + 1);
		if (b === -1)
			return "";
		return aStr.substr(a + 1, b - a - 1);
	},

	TextInserter: function(aSnippet) {
		// Using encode/decodeURIComponent makes it easy to edit the items file in a text editor.
		// Because almost all text editors "for developers" has an encode/decodeURIComponent function integrated.
		let snippet = decodeURIComponent(aSnippet);
		if (snippet.indexOf($._Evaluator) !== -1 && $._EvaluatorEnabled) {
			let regExp = new RegExp($._Evaluator + ".*?" + $._Evaluator),
				arr = snippet.split($._Evaluator);
			let count = (arr.length - 1) / 2,
				strToEval;
			// If count is a float (not an integer), the ammount of "Evaluator characters" in the snippet is wrong.
			if (count !== (count | 0)) {
				Services.prompt.alert(null, "Multi Snippets Inserter", "Something is wrong with the " +
					"snippet text in this item. The amount of \"Evaluator characters\" might be wrong.");
				return false;
			}
			while (count--) {
				strToEval = $.getSubStr(snippet, $._Evaluator);
				snippet = snippet.replace(regExp, eval(strToEval + "") + "");
			}
		}
		snippet = snippet.split($._SelectionAnchor);
		// Get the "before selection" and "after selection" parts of the snippet.
		let firstPart = snippet[0],
			secondPart = snippet[1],
			caretIndex;
		snippet = snippet.join("");
		caretIndex = snippet.indexOf($._CaretAnchor);
		firstPart = firstPart.split($._CaretAnchor).join("");
		secondPart && (secondPart = secondPart.split($._CaretAnchor).join(""));
		let mm = $._mm;
		if (mm) {
			mm.sendAsyncMessage($._insertTextMsgID, {
				firstPart: firstPart, // The part before the SelectionAnchor or the full snippet.
				secondPart: secondPart, // If "undefined", there is no SelectionAnchor.
				caretIndex: caretIndex, // If -1, there is no "CaretAnchor".
				keepSelection: $._KeepSelection,
			});
		} else {
			snippet = snippet.split($._CaretAnchor).join("");
			$.TextInserterFailSafe(snippet);
		}
	},

	TextInserterFailSafe: function(aSnippet) {
		if (aSnippet !== "") {
			try {
				let command = "cmd_insertText";
				let controller = document.commandDispatcher.getControllerForCommand(command);

				if (controller && controller.isCommandEnabled(command)) {
					controller = controller.QueryInterface(Ci.nsICommandController);
					let params = Cc["@mozilla.org/embedcomp/command-params;1"];
					params = params.createInstance(Ci.nsICommandParams);
					params.setStringValue("state_data", aSnippet);
					controller.doCommandWithParams(command, params);
				}
			} catch (e) {
				let tmp = gClipboard.read();
				gClipboard.write(aSnippet);
				setTimeout(function() {
					goDoCommand("cmd_paste");
					setTimeout(function() {
						gClipboard.write(tmp);
					}, 100);
				}, 100);
			}
		}
		return false;
	},

	CreateElements: function(aInit) {
		var mPop = $.$("mainPopupSet") || $.$($._UID + "_popupset");
		if (!mPop) {
			try {
				mPop = $.$("msgcomposeWindow").appendChild($.$CNS("popupset", {
					id: $._UID + "_popupset",
					cb_id: $._UID
				}));
			} catch (aErr) {}
		}

		if (mPop && !$.optionsPop) {
			let opt = mPop.appendChild($.$CNS("menupopup", {
				id: $._UID + "_options_popup",
				cb_id: $._UID,
				orient: "vertical",
				onpopupshowing: "document.getElementById('" + self.id +
					"').MultiSnippetsInserter.populateOptionsMenu(this);event.stopPropagation();",
				onpopuphiding: "this.textContent='';event.stopPropagation();",
				menugenerated: true,
				oncommand: "document.getElementById('" + self.id +
					"').MultiSnippetsInserter.handleOptionsPopup(event);event.stopPropagation();",
				onclick: "event.stopPropagation();",
			}));
		}
		if (mPop && !$.ctxPop) {
			let ctx = mPop.appendChild($.$CNS("menupopup", {
				id: $._UID + "_context_popup",
				cb_id: $._UID,
				orient: "vertical",
				onpopupshowing: "document.getElementById('" + self.id +
					"').MultiSnippetsInserter.handleMainMenuContextMenu(event, this);event.stopPropagation();",
				onpopuphidden: "event.stopPropagation();",
				oncommand: "document.getElementById('" + self.id +
					"').MultiSnippetsInserter.mainMenuContextMenuFunctions(event);event.stopPropagation();",
				onclick: "event.stopPropagation();",
			}));
			ctx.appendChild($.$CNS("menuitem", {
				label: "Edit",
				_value: "edit",
			}));
			ctx.appendChild($.$CNS("menuitem", {
				label: "Delete",
				_value: "delete",
			}));
			ctx.appendChild($.$CNS("menuseparator"));
			ctx.appendChild($.$CNS("menuitem", {
				label: "Add new menuitem",
				_value: "add-item",
			}));
			ctx.appendChild($.$CNS("menuitem", {
				label: "Add new menu",
				_value: "add-menu",
			}));
			ctx.appendChild($.$CNS("menuseparator"));
			ctx.appendChild($.$CNS("menuitem", {
				label: "Import items into current menu",
				_value: "import",
			}));
			ctx.appendChild($.$CNS("menuitem", {
				label: "Export menu to file",
				_value: "export-menu",
			}));
		}
		if (mPop && !$.dynamicTT) {
			mPop.appendChild($.$CNS("tooltip", {
				id: $._UID + "_dynamic_tooltip",
				cb_id: $._UID,
				onpopupshowing: "document.getElementById('" + self.id +
					"').MultiSnippetsInserter.populateDynamicTooltip(event, this);event.stopPropagation();",
				onpopuphiding: "event.stopPropagation();",
				flex: 1,
			}));
		}
		if (mPop && !$.keySet) { // Using "my own" keyset seems to minimize hotkeys erratic behaivor.
			mPop.parentNode.appendChild($.$CNS("keyset", {
				id: $._UID + "_keyset",
				cb_id: $._UID,
			}));
		}
		let ctxM = $.ctxM;
		let insertPoint = $.$("mailContext-selectall") ||
			$.$("context-selectall") ||
			$.$("spellCheckSuggestionsSeparator");
		if (ctxM && !$.createFromSelCtx && $._ContextMenuEnabled) {
			let createFromSelMI = $.$CNS("menuitem", {
				label: "Create snippet item - ID: " + self.id.slice(20),
				cb_id: $._UID,
				id: $._UID + "_page_context",
				image: buttonImage,
				onclick: "event.stopPropagation();",
				oncommand: "document.getElementById('" + self.id + "')" +
					".MultiSnippetsInserter.createFromSelection();event.stopPropagation();",
			});
			ctxM.insertBefore(createFromSelMI, insertPoint.nextSibling);
			let createFromSelectionListener = function() {
				$.createFromSelCtx && ($.createFromSelCtx.hidden = !(gContextMenu.isTextSelected));
			};
			ctxM.addEventListener("popupshowing", createFromSelectionListener, false);
			addDestructor(function(aReason) {
				if (aReason === "update" || aReason === "delete") {
					ctxM.removeEventListener("popupshowing", createFromSelectionListener, false);
				}
			});
		}
	},

	createFromSelection: function() {
		$._mm.sendAsyncMessage($._createFromSelectionMsgID);
	},

	populateOptionsMenu: function(aNode) {
		aNode.appendChild($.$CNS("dialogheader", {
			title: "Options popup",
			tooltiptext: "Multi Snippets Inserter options popup.",
			style: "margin: 0 0 7px 0;padding: 2px 0 2px 5px;border:none;font-size:smaller;",
		}));
		aNode.appendChild($.$CNS("menuitem", {
			label: "Save to main file",
			style: self.menuModified ? "color:red;font-weight:bold;" : "",
			tooltiptext: "Save all changes made to the main menu into the items file.",
			_value: "saveToXULFile",
		}));
		aNode.appendChild($.$CNS("menuitem", {
			label: "Reload main file",
			tooltiptext: "Reload the items file.\n\nThis will discard any modification made to the main menu!!!",
			_value: "reloadMainMenu",
		}));
		aNode.appendChild($.$CNS("menuitem", {
			label: "Edit items file",
			tooltiptext: "Edit the current items file in any text editor.",
			_value: "editXULFile",
		}));
		aNode.appendChild($.$CNS("menuitem", {
			label: "Backup items file",
			tooltiptext: "Make a backup of the current loaded items file.",
			_value: "backup",
		}));
		aNode.appendChild($.$CNS("menuitem", {
			label: "Open storage folder",
			tooltiptext: "Open the folder where all items files are stored.",
			_value: "open-storage",
		}));
		aNode.appendChild($.$CNS("menuseparator"));
		aNode.appendChild($.$CNS("menuitem", {
			label: "More options",
			tooltiptext: "Open " + self.name + " options window.",
			_value: "open-options",
		}));
	},

	handleOptionsPopup: function(aE) {
		switch (aE.target.getAttribute("_value")) {
			case "saveToXULFile":
				$.saveToXULFile();
				break;
			case "reloadMainMenu":
				let cBox = custombuttons.confirmBox(self.name, "Are you sure that you want to " +
					"reload the main menu?\n" +
					"You will loose all changes made to the menu!!!\nOn the other hand, if you edited the " +
					"items file manually, the menu will be updated with those changes aplied.\n" +
					"This process is immediate and irreversible.\n\n" +
					"Click 'Yes' to proceed.\n" +
					"Click 'Cancel' to abort.\n", "Yes", "Cancel");
				if (cBox) {
					$.loadFromXULFile($.XULFile.path, false);
				} else
					return;
				break;
			case "editXULFile":
				$.XULFile.launch();
				break;
			case "backup":
				let dest = OS.Path.join($.storagePath, $.XULFileName + "-" +
					$._getTimeStamp(new Date().getTime()) + ".xul");
				OS.File.copy($.XULFile.path, dest);
				break;
			case "import":
				$.importNewItems();
				break;
			case "open-storage":
				new $._nsIFile($.storagePath).reveal();
				break;
			case "open-options":
				$.openOptions();
				break;
		}
	},

	loadFromXULFile: function(aPath, aFromImportAction) {
		OS.File.read(aPath).then(function onSuccess(aReadData) {
			let xulStr = (new TextDecoder().decode(aReadData)).replace(/>\s+</g, "><");
			let xulDoc = (new DOMParser).parseFromString(xulStr, "application/xml").documentElement;
			let hotKeys = [];
			if (aFromImportAction) {
				let mPop = $.importAnchor.parentNode;
				$.setBtnImage();
				try {
					Array.prototype.slice.call(xulDoc.childNodes).forEach(function(aEl2) {
						(mPop && mPop.nodeName === "menupopup" && aEl2) && mPop.appendChild(aEl2);
					});
				} finally {
					$.importAnchor = null;
				}
			} else {
				$.setBtnImage(true);
				try {
					let allMIs = xulDoc.getElementsByTagName("menuitem"),
						allMPops = xulDoc.getElementsByTagName("menupopup");
					xulDoc.setAttribute("id", $._UID + "_self_popup");
					xulDoc.setAttribute("cb_id", $._UID);
					xulDoc.setAttribute("position", "after_start");
					xulDoc.setAttribute("orient", "vertical");
					xulDoc.setAttribute("tooltip", $._UID + "_dynamic_tooltip");
					xulDoc.setAttribute("context", $._UID + "_context_popup");
					xulDoc.setAttribute("onpopupshowing", "event.stopPropagation();");
					xulDoc.setAttribute("onpopuphidden", "event.stopPropagation();");
					xulDoc.setAttribute("oncontextmenu", "event.stopPropagation();");
					xulDoc.setAttribute("oncommand", $.cmdStr);
					xulDoc.setAttribute("onclick", "event.stopPropagation();");
					if (allMIs.length > 0) {
						Array.prototype.slice.call(allMIs).forEach(function(aMI) {
							let hk = aMI.getAttribute("_hotkey") || "";
							if (hk) {
								hotKeys.push({
									combo: hk,
									snippet: aMI.getAttribute("_snippet")
								});
							}
							if ($._ShowAccelText && $._HotkeysEnabled && hk !== "")
								aMI && aMI.setAttribute("acceltext", hk);
							else
								aMI && aMI.removeAttribute("acceltext");
						});
					}
					if (allMPops.length > 0) {
						Array.prototype.slice.call(allMPops).forEach(function(aMPop) {
							if (aMPop) {
								aMPop.setAttribute("tooltip", $._UID + "_dynamic_tooltip");
								aMPop.setAttribute("context", $._UID + "_context_popup");
								aMPop.setAttribute("onpopupshowing", "event.stopPropagation();");
								aMPop.setAttribute("onpopuphidden", "event.stopPropagation();");
								aMPop.setAttribute("oncontextmenu", "event.stopPropagation();");
								aMPop.setAttribute("oncommand", $.cmdStr);
								aMPop.setAttribute("onclick", "event.stopPropagation();");
							}
						});
					}
				} catch (aErr) {
					Cu.reportError([self.name + ": " + self.id, aPath, aFromImportAction, aErr, aErr.stack].join("\n"));
				} finally {
					while (self.childNodes.length > 0)
						self.removeChild(self.firstChild);
					//Create Hotkeys.
					if ($._HotkeysEnabled && hotKeys.length > 0)
						$.createHotkeys(hotKeys);
					self.appendChild(xulDoc);
					setTimeout(function() {
						$.handleDragAndDrop();
						if (self.menuModified) {
							self.image = buttonImage;
							self.menuModified = false;
						}
					}, 100);
				}
			}
		}, function onFailure(aRejectReason) {
			Cu.reportError([self.name + ": " + self.id, aRejectReason, aRejectReason.stack].join("\n"));
		});
	},

	saveToXULFile: function() {
		let node = $.selfPop.cloneNode(true),
			path = $.XULFile.path;
		if (node) {
			// Clear main menupopup from all its attributes to make the items file more "clean".
			while (node.attributes.length > 0)
				node.removeAttribute(node.attributes[0].name);
			// Clear all menupopups inside the main menupopup from all its attributes.
			Array.prototype.slice.call(node.getElementsByTagName("menupopup")).forEach(function(aMPop) {
				while (aMPop && aMPop.attributes.length > 0)
					aMPop.removeAttribute(aMPop.attributes[0].name);
			});
			// Clear all menuitems from the "acceltext" attribute.
			Array.prototype.slice.call(node.getElementsByTagName("menuitem")).forEach(function(aMI) {
				aMI && aMI.removeAttribute("acceltext");
			});
			// XML string of the main menupopup.
			let xmlStr = (new XMLSerializer()).serializeToString(node);
			// Un-minify the XML string.
			if ($._SaveXULExpanded)
				xmlStr = xmlStr.replace(/></g, ">\n<")
			if (self.menuModified) {
				self.image = buttonImage;
				self.menuModified = false;
			}
			OS.File.writeAtomic(path, xmlStr, {
				tmpPath: path + ".tmp",
				encoding: "utf-8"
			}).then(function onSuccess() {
				$.selfDestroy();
			}, function onFailure(aRejectReason) {
				Cu.reportError([self.name + ": " + self.id, aRejectReason, aRejectReason.stack].join("\n"));
			});
		}
	},

	importNewItems: function() {
		var nsIFilePicker = Ci.nsIFilePicker;
		var fp = Cc["@mozilla.org/filepicker;1"].createInstance(nsIFilePicker);
		fp.init(window, "Select a file to import into " + self.name, nsIFilePicker.modeOpen);
		fp.appendFilter("XUL files", "*.xul");
		fp.appendFilters(fp.filterAll);
		fp.displayDirectory = new $._nsIFile($.storagePath);
		if (fp.show() === fp.returnOK)
			$.loadFromXULFile(fp.file.path, true);
		else
			return;
	},

	openOptions: function() {
		var em = Services.ww.getWindowEnumerator("CB:MultiSnippetsInserter:Settings");
		var index = 1;
		while (em.hasMoreElements()) {
			let win = em.getNext();
			if (win.document.documentElement.getAttribute("windowtype") === "CB:MultiSnippetsInserter:Settings") {
				win.focus();
				return;
			}
			index++
		}
		let xul = $.getHelp("OptionsWindow");
		let storage = {};
		storage["self_id"] = self.id;
		xul = xul.replace(/>\s+</g, "><")
			.replace("_self_", "opener.document.getElementById('" + self.id + "')");
		xul = xul.split("_U_I_D_").join($._UID);
		xul = xul.split("_RoOt_").join($.Branch);
		let url = "data:application/vnd.mozilla.xul+xml;text/plain," + encodeURIComponent(xul);
		let win = openDialog(url, "", "chrome, resizable, dependant, dialog, centerscreen, close, alwaysRaised");
		win._storage = storage;
	},

	handleDragAndDrop: function(aE) {
		let dropEvts = ["dragstart", "drop", "dragover", "dragleave"];
		dropEvts.forEach(function(aLi) {
			$.selfPop.addEventListener(aLi, $.DragAndDropHandler[aLi], false);
		});
	},

	draggedElement: null,
	moveToMenu: null,
	/**
	 * [DragAndDropHandler description]
	 * @type {Object}
	 * Without "aE.dataTransfer.setData('text/plain', 'dummy');", none of the other events works. ¬¬
	 * Without the "dragover" event, "drop" doesn't work. ¬¬
	 */
	DragAndDropHandler: {
		dragstart: function(aE) {
			if (!aE.shiftKey)
				return false;
			aE.dataTransfer.setData('text/plain', 'dummy'); // Stupid piece of SHEET!!!!!
			$.draggedElement = aE.target;
			aE.stopPropagation();
		},

		dragover: function(aE) {
			aE.preventDefault();
			$.moveToMenu = $.isMacOS ? aE.metaKey : aE.ctrlKey;
			aE.stopPropagation();
		},

		drop: function(aE) {
			aE.preventDefault();
			let el,
				moved = false;
			if ($.moveToMenu) {
				el = aE.target.firstChild;
				if (!el || el.nodeName !== "menupopup")
					return false;
				el.appendChild($.draggedElement);
				moved = true;
			} else {
				el = aE.target.parentNode;
				if (!el || el.nodeName !== "menupopup")
					return false;
				el.insertBefore($.draggedElement, aE.target);
				moved = true;
			}
			moved && $.setBtnImage();
			aE.stopPropagation();
		}
	},

	handleMainMenuContextMenu: function(aE, aNode) {
		aNode.getElementsByAttribute("_value", "export-menu")[0].hidden = !(aE.target.triggerNode.nodeName === "menu");
	},

	mainMenuContextMenuFunctions: function(aE) {
		let el = document.popupNode;
		switch (aE.target.getAttribute("_value")) {
			case "edit":
				$.addEditItems(false, null, false);
				break;
			case "delete":
				if (aE.shiftKey)
					$.deleteItem(el);
				else {
					let cBox = custombuttons.confirmBox(self.name, "Are you sure that you want to " +
						"delete this item?\n" +
						"This process is immediate and irreversible.\n\n" +
						"Keep Shift key pressed to directly delete items and avoid this alert.\n\n" +
						"Click 'Yes' to proceed.\n" +
						"Click 'Cancel' to abort.\n", "Yes", "Cancel");
					if (cBox) {
						$.deleteItem(el);
					} else
						return;
				}
				break;
			case "add-item":
				$.addEditItems(true, "menuitem", false);
				break;
			case "add-menu":
				$.addEditItems(true, "menu", false);
				break;
			case "import":
				$.importAnchor = el;
				$.importNewItems();
				break;
			case "export-menu":
				$.exportMenu(el);
				break;
		}
	},

	exportMenu: function(aEl) {
		var nsIFilePicker = Ci.nsIFilePicker;
		var fp = Cc["@mozilla.org/filepicker;1"].createInstance(nsIFilePicker);
		fp.init(window, "Select a file to import into " + self.name, nsIFilePicker.modeSave);
		fp.appendFilter("XUL files", "*.xul");
		fp.appendFilters(fp.filterAll);
		fp.displayDirectory = new $._nsIFile($.storagePath);
		fp.defaultExtension = ".xul";
		fp.defaultString = "Name me.xul";
		if (fp.show() === fp.returnOK) {
			let node = aEl.cloneNode(true),
				path = fp.file.path;
			if (node) {
				// Clear all menupopups inside the main menupopup from all its attributes.
				Array.prototype.slice.call(node.getElementsByTagName("menupopup")).forEach(function(aMPop) {
					while (aMPop && aMPop.attributes.length > 0)
						aMPop.removeAttribute(aMPop.attributes[0].name);
				});
				// Clear all menuitems from from the "acceltext" attribute.
				Array.prototype.slice.call(node.getElementsByTagName("menuitem")).forEach(function(aMI) {
					aMI && aMI.removeAttribute("acceltext");
				});
				// XML string of the main menupopup.
				let xmlStr = (new XMLSerializer()).serializeToString(node);
				xmlStr = "<menupopup xmlns=\"" + xulns + "\">" + xmlStr + "</menupopup>";
				// Un-minify the XML string.
				if ($._SaveXULExpanded)
					xmlStr = xmlStr.replace(/></g, ">\n<")
				OS.File.writeAtomic(path, xmlStr, {
					tmpPath: path + ".tmp",
					encoding: "utf-8"
				});
			}
		} else
			return;
	},

	deleteItem: function(aEl) {
		let mPop = $.selfPop;
		$.setBtnImage();
		aEl && aEl.parentNode.removeChild(aEl);
		if (mPop && mPop.childNodes.length === 0)
			$.writeFile($.XULFile.path, $.dummyItems);
	},

	addEditItems: function(aNew, aType, aFromContext) {
		// DO NOT allow more than one add/edit window from more than one Multi Snippets Inserter button.
		// Just to avoid "a mess" when more that one button is installed.
		var em = Services.ww.getWindowEnumerator("CB:MultiSnippetsInserter:AddEditItems");
		var index = 1;
		while (em.hasMoreElements()) {
			let win = em.getNext();
			if (win.document.documentElement.getAttribute("windowtype") === "CB:MultiSnippetsInserter:AddEditItems") {
				win.focus();
				return;
			}
			index++
		}
		let xul = $.getHelp("AddEditWindow");
		xul = xul.replace(/>\s+</g, "><");
		xul = xul.replace("_self_", "opener.document.getElementById('" + self.id + "')")
			.replace("_insert_selection_anchor_here_", $.escHTML($._SelectionAnchor))
			.replace("_insert_caret_anchor_here_", $.escHTML($._CaretAnchor))
		xul = xul.split("_insert_evaluator_anchor_here_").join($.escHTML($._Evaluator));
		let storage = {};
		storage["popup_node"] = aFromContext ? $.selfPop.firstChild : document.popupNode;
		let type = aType || document.popupNode.nodeName;
		storage["is_menu"] = type === "menu";
		storage["is_new"] = aNew;
		storage["self_id"] = self.id;
		storage["caret_anchor"] = $._CaretAnchor;
		storage["selection_anchor"] = $._SelectionAnchor;
		storage["evaluator_anchor"] = $._Evaluator;
		storage["create_hotkey"] = $._HotkeysEnabled;
		storage["from_context"] = aFromContext;
		xul = xul.split("_U_I_D_").join($._UID);
		let url = "data:application/vnd.mozilla.xul+xml;text/plain," + encodeURIComponent(xul);
		let win = openDialog(url, "", "chrome, resizable, dependant, dialog, centerscreen, close, alwaysRaised");
		win._storage = storage;
	},

	img_to_b64_cback: function(aURL, aCallback) {
		if (!aURL)
			aCallback(false);
		else {
			let xhr = new XMLHttpRequest,
				nsIMIMEService = Cc["@mozilla.org/mime;1"].getService(Ci.nsIMIMEService);
			try {
				xhr.open("GET", aURL, true);
			} catch (aErr) {
				aCallback(false);
				return true;
			}
			xhr.responseType = "arraybuffer";
			xhr.onload = function() {
				let mediaType,
					dataURI,
					binary,
					bytes;
				bytes = new Uint8Array(xhr.response);
				binary = [].map.call(bytes, function(aByte) {
					return String.fromCharCode(aByte);
				}).join("");
				mediaType = xhr.getResponseHeader("Content-Type");
				let base64 = btoa(binary);
				if (mediaType.indexOf("image/") !== 0) {
					try {
						mediaType = nsIMIMEService.getTypeFromURI(Services.io.newURI(aURL, null, null));
					} catch (aError) {
						mediaType = "image/png";
					}
				}
				dataURI = "data:" + mediaType + ";base64," + base64;
				aCallback(dataURI);
			};
			xhr.onerror = function() {
				aCallback(false);
			};
			xhr.send(null);
		}
	},

	HandlePrefListener: function(aRem) {
		var prefs = $.DefPrefs;
		for (let key in prefs) {
			let pref = $.Branch + key;
			if (prefs.hasOwnProperty(key)) {
				if (aRem)
					Services.prefs.removeObserver(pref, $.PrefListener, false);
				else
					Services.prefs.addObserver(pref, $.PrefListener, false);
			}
		}
	},

	PrefListener: {
		observe: function(aSubject, aTopic, aPStr) {
			if (aTopic === "nsPref:changed") {
				let prefName = aPStr.slice($.Branch.length);
				$["_" + prefName] = $.gPref(prefName);
				// switch (prefName) {
				// 	case "":
				// 		break;
				// }
			}
		}
	},

	writeFile: function(aPath, aData, aSaveType) {
		try {
			var file = new $._nsIFile(aPath);
			var fos = Cc["@mozilla.org/network/file-output-stream;1"].createInstance(Ci.nsIFileOutputStream);
			switch (aSaveType) {
				case "append":
					fos.init(file, 0x02 | 0x08 | 0x10, 0x1B6, 0);
					break;
				case "unique":
					file.createUnique(Ci.nsIFile.NORMAL_FILE_TYPE, 0x1B6);
					fos.init(file, 0x02 | 0x08 | 0x20, 0x1B6, 0);
					break;
				default:
					fos.init(file, 0x02 | 0x08 | 0x20, 0x1B6, 0);
			}
			var cos = Cc["@mozilla.org/intl/converter-output-stream;1"].createInstance(Ci.nsIConverterOutputStream);
			cos.init(fos, "UTF-8", 0, 0);
			cos.writeString(aData);
			cos.close();
			fos.close();
		} catch (aErr) {
			OS.File.writeAtomic(aPath, aData, {
				tmpPath: aPath + ".tmp",
				encoding: "utf-8"
			});
			Cu.reportError([self.name + ": " + self.id, aPath, aData, aSaveType, aErr, aErr.stack].join("\n"));
		}
	},

	readFile: function(aPath) {
		var data = "";
		var file = null;
		try {
			file = new $._nsIFile(aPath);
			var fis = Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream);
			fis.init(file, -1, 0, 0);
			var cis = Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream);
			cis.init(fis, "UTF-8", 0, Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);
			let str = {},
				read = 0;
			do {
				read = cis.readString(0xffffffff, str);
				data += str.value;
			} while (read !== 0);
			cis.close();
			fis.close();
		} catch (aErr) {
			Cu.reportError([self.name + ": " + self.id, aPath, aErr, aErr.stack].join("\n"));
			return null;
		}
		return data;
	},

	_messageResponse: {
		receiveMessage: function(aMsg) {
			if (aMsg.name !== $._responseMsgID + $._randomID)
				return;
			switch (aMsg.data.id) {
				case "TextInserterFailSafe":
					$.TextInserterFailSafe(aMsg.data.snippet);
					break;
				case "CreateFromSeletion":
					$.addEditItems(true, "menuitem", aMsg.data.selStr)
					break;
			}
		},
	},

	selfDestroy: function() {
		setTimeout(function() {
			self.destroy("update");
			setTimeout(function() {
				self.init();
			}, 100);
		}, 100);
	},

	resetToDefaults: function(aWin) {
		let cBox = custombuttons.confirmBox(self.name, "Are you sure that you want to " +
			"reset " + self.name + " preferences to their default values?\n" +
			"This process is immediate and irreversible.\n\n" +
			"Click 'Yes' to proceed.\n" +
			"Click 'Cancel' to abort.\n", "Yes", "Cancel");
		if (cBox) {
			aWin.close();
			(Services.prefs.getBranch($.Branch)).deleteBranch("");
			Services.prefs.savePrefFile(null);
			setTimeout(function() {
				// self.init();
			}, 100);
		} else
			return;
	},

	getHelp: function(aPlaceholder) { // Get specific data, surrounded by "placeholders", from the Help tab.
		return $.$(self.id).getAttribute("Help").split("<!--" + aPlaceholder + "-->")[1];
	},

	$: function(aID, aParent) {
		if (!aParent)
			return document.getElementById(aID);
		return aParent.getElementById(aID);
	},

	$CNS: function(aElName, aAttrs, aNS) {
		// Holy crap!!! createElementNS is absolute sheet!!
		// "key" elements are useless for one!! ¬¬
		// var el = document.createElementNS((aNS ? aNS : xulns), aElName);
		var el = document.createElement(aElName);
		if (aAttrs)
			Object.keys(aAttrs).forEach(function(n) {
				if (aAttrs[n] !== "")
					el.setAttribute(n, aAttrs[n])
			});
		return el;
	},

	escHTML: function(aStr, aIsAttr) {
		aStr = String(aStr)
			.replace(/&/g, "&amp;")
			.replace(/</g, "&lt;")
			.replace(/>/g, "&gt;")
			.replace(/"/g, "&quot;")
			.replace(/'/g, "&apos;");
		if (aIsAttr) {
			aStr = aStr
				.replace(/\t/g, "&#x9;")
				.replace(/\n/g, "&#xA;")
				.replace(/\r/g, "&#xD;");
		}
		return aStr;
	},

	_getTimeStamp: function(aDate) {
		let ts;
		switch ($._TimeStampForBackups) {
			case 0:
				ts = $.legalize($._TimeStampForBackupsCustom); // Custom
				break;
			case 1:
				ts = "YYYY MM-DD hh.mm.ss"; // ISO8601
				break;
			case 2:
				ts = "YYYY DD.MM hh.mm.ss"; // European
				break;
		}
		let dte = new Date(parseInt(aDate));
		let YYYY = String(dte.getFullYear());
		let MM = String(dte.getMonth() + 1);
		if (MM.length === 1) {
			MM = "0" + MM;
		}
		let DD = String(dte.getDate());
		if (DD.length === 1)
			DD = "0" + DD;
		let hh = String(dte.getHours());
		if (hh.length === 1)
			hh = "0" + hh;
		let mm = String(dte.getMinutes());
		if (mm.length === 1)
			mm = "0" + mm;
		let ss = String(dte.getSeconds());
		if (ss.length === 1)
			ss = "0" + ss;
		ts = ts.replace("YYYY", YYYY);
		ts = ts.replace("MM", MM);
		ts = ts.replace("DD", DD);
		ts = ts.replace("hh", hh);
		ts = ts.replace("mm", mm);
		ts = ts.replace("ss", ss);
		return ts;
	},

	legalize: function(aStr) { // Removes illegal characters in file names.
		return aStr.replace(/[\/:\"\*\?<>\|\\]/g, "");
	},

	handleMainPopup: function() {
		let mPop = $.selfPop;
		mPop && mPop.state !== "open" ?
			mPop.openPopup(self, "after_start", 0, 0, false, null, null) :
			mPop.hidePopup();
	},

	styleSheet: function(aCSS, aRemFlag) {
		var sss = Cc["@mozilla.org/content/style-sheet-service;1"].getService(Ci.nsIStyleSheetService);
		var uri = Services.io.newURI("data:text/css," + encodeURIComponent(aCSS), null, null);
		if (sss.sheetRegistered(uri, sss.USER_SHEET))
			sss.unregisterSheet(uri, sss.USER_SHEET);
		if (aRemFlag)
			return;
		sss.loadAndRegisterSheet(uri, sss.USER_SHEET);
	},

	CSSLoader: function() {
		var timer = 0;
		if (!$._ConvertMenuToPanel) {
			try {
				$.styleSheet(window[$._UID]["StyleSheet"], true);
				window[$._UID]["StyleSheet"] = false;
			} catch (aErr) {}
			return true;
		}
		let css = "@namespace url(" + xulns + ");\n" + $.getHelp("StylePanelConvertion");
		css = css.split("_U_I_D_").join($._UID).split("_self_id_").join(self.id);

		if (!window[$._UID]["StyleSheet"]) {
			window[$._UID]["StyleSheet"] = css;
			$.styleSheet(css);
		} else if (window[$._UID]["StyleSheet"] && window[$._UID]["StyleSheet"] !== css) {
			$.styleSheet(window[$._UID]["StyleSheet"], true);
			clearTimeout(timer);
			timer = setTimeout(function() {
				window[$._UID]["StyleSheet"] = css;
				$.styleSheet(css);
			}, 100);
		}
	},

	notifyme: function(aTitle, aMsg, aImg, aCallback) { // Notification function
		let origin = (Services.prefs.getPrefType("ui.alertNotificationOrigin") !== 0) ?
			Services.prefs.getIntPref("ui.alertNotificationOrigin") :
			null;
		let win = Services.ww.openWindow(null, "chrome://global/content/alerts/alert.xul",
			"_blank", "chrome,titlebar=no,popup=yes", null);
		win.arguments = [aImg, aTitle, aMsg, !!aCallback, "", origin, "", "", null, (!!aCallback ? aCallback : null)];
	},

	_UID: "__multi_snippets_inserter_" + self.id.slice(20),
	_nsIFile: Components.Constructor("@mozilla.org/file/local;1", "nsIFile", "initWithPath"),
	_globalMM: Cc["@mozilla.org/globalmessagemanager;1"].getService(Ci.nsIMessageListenerManager),
	_frameScript: null,
	_randomID: null,
	isMacOS: Services.appinfo.OS === "Darwin",
	openOnHoverTimer: null,
	_cbs: custombuttons.cbService,
	importAnchor: null,
	alertCallback: { // Thanks to srazzano!!!
		observe: function(aSubject, aTopic, aData) {
			let alt = Services.wm.getMostRecentWindow("alert:alert")
			if (aTopic === "alertshow") {
				let a, b;
				var altH = alt.outerHeight,
					altW = alt.outerWidth,
					scrH = screen.availHeight,
					scrW = screen.availWidth;
				switch ($._NotificationPosition) {
					case 1: // Left top
						a = 0;
						b = 0;
						break;
					case 2: // Right top
						a = scrW - altW;
						b = 0;
						break;
					case 3: // Left bottom
						a = 0;
						b = scrH - altH;
						break;
					case 4: // Right bottom
						a = scrW - altW;
						b = scrH - altH;
						break;
					case 5: // Center of screen
						a = (scrW / 2) - (altW / 2);
						b = (scrH / 2) - (altH / 2);
						break;
					default:
						a = scrW - altW;
						b = scrH - altH;
				}
				alt.moveTo(a, b);
				setTimeout(function() {
					alt.close();
				}, 5000);
			}
			if (aTopic === "alertclickcallback") {
				alt.close();
			}
		}
	},
	get storagePath() {
		let dirPath = OS.Path.join(OS.Constants.Path.profileDir, "custombuttons", "MultiSnippetsInserter");
		OS.File.makeDir(dirPath, {
			ignoreExisting: true
		});
		return dirPath;
	},
	get XULFileName() {
		return $._ItemsFileName + self.id.slice(13);
	},
	get XULFile() {
		let path = OS.Path.join($.storagePath, $.XULFileName + ".xul");
		let file = new $._nsIFile(path);
		if (!file.exists())
			$.writeFile(path, $.dummyItems);
		return file;
	},
	get cmdStr() {
		return "if(event.shiftKey)return false;document.getElementById('" + self.id +
			"').MultiSnippetsInserter.TextInserter(event.target.getAttribute('_snippet'));event.stopPropagation();";
	},
	get ctxM() {
		return $.$("contentAreaContextMenu") || $.$("mailContext") || $.$("msgComposeContext");
	},
	get dynamicTT() {
		return $.$($._UID + "_dynamic_tooltip");
	},
	get keySet() {
		return $.$($._UID + "_keyset");
	},
	get selfPop() {
		return $.$($._UID + "_self_popup");
	},
	get ctxPop() {
		return $.$($._UID + "_context_popup");
	},
	get createFromSelCtx() {
		return $.$($._UID + "_page_context");
	},
	get optionsPop() {
		return $.$($._UID + "_options_popup");
	},
	get _responseMsgID() {
		return "CB:MultiSnippetsInserter:Response:" + self.id.slice(14) + "-";
	},
	get _createFromSelectionMsgID() {
		return "CB:MultiSnippetsInserter:GetSelection:" + self.id.slice(14) + "-" + $._randomID;
	},
	get _insertTextMsgID() {
		return "CB:MultiSnippetsInserter:InsertText:" + self.id.slice(14) + "-" + $._randomID;
	},
	get _tagInserterMsgID() {
		return "CB:MultiSnippetsInserter:TagInserter:" + self.id.slice(14) + "-" + $._randomID;
	},
	get canCreateHotKeys() {
		return "require" in self;
	},
	get dummyItems() {
		return '<menupopup xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">' +
			'<menuitem label="Dummy menuitem" accesskey="D" _snippet="Current%20User%20Agent%20%3' +
			'D%20%E2%98%A2navigator.userAgent%3B%E2%98%A2%0ACurrent%20Date%20%3D%20%E2%98%A2new%2' +
			'0Date().toDateString()%3B%E2%98%A2%0ACurrent%20Date%202%20%20%3D%20%E2%98%A2new%20Da' +
			'te().toString()%3B%E2%98%A2" /><menu label="Dummy menu" accesskey="M"><menupopup><me' +
			'nuitem label="Dummy sub-menuitem" accesskey="D" _snippet="Dummy sub-menuitem" /></me' +
			'nupopup></menu></menupopup>';
	},
	get _mm() {
		let mm = null;
		try {
			mm = typeof gBrowser === "object" ?
				gBrowser.selectedTab.linkedBrowser.messageManager : // Everything else.
				getBrowser().messageManager; // Thunderbird. %$/&$% you!!!!
		} catch (aErr) {}
		return mm;
	},
};

this.MultiSnippetsInserter.Branch = "CB.MultiSnippetsInserter.Id" + self.id.slice(20) + ".";

this.MultiSnippetsInserter.DefPrefs = {
	ItemsFileName: "MultiSnippetsInserter",
	CaretAnchor: "❮❙❯",
	SelectionAnchor: "❮◼❯",
	Evaluator: "☢",
	OpenOnHover: false,
	OpenOnHoverDelayClose: 200,
	OpenOnHoverDelayOpen: 200,
	KeepSelection: true,
	ShowAccelText: true,
	EvaluatorEnabled: true,
	HotkeysEnabled: true,
	InstantHotkeys: true,
	ContextMenuEnabled: true,
	ConvertMenuToPanel: true,
	SaveXULExpanded: false,
	TimeStampForBackups: 1,
	TimeStampForBackupsCustom: "YYYY-MM-DD hh.mm.ss",
	NotificationPosition: 5,
};

this.MultiSnippetsInserter.gPref = function(aKey) {
	let branch = Services.prefs.getBranch(self.MultiSnippetsInserter.Branch);
	switch (typeof self.MultiSnippetsInserter.DefPrefs[aKey]) {
		case "boolean":
			return branch.getBoolPref(aKey);
			break;
		case "number":
			return branch.getIntPref(aKey);
			break;
		case "string":
			return branch.getComplexValue(aKey, Ci.nsISupportsString).data;
			break;
	}
	return null;
};
this.MultiSnippetsInserter.sPref = function(aKey, aVal) {
	let branch = Services.prefs.getBranch(self.MultiSnippetsInserter.Branch);
	switch (typeof aVal) {
		case "boolean":
			branch.setBoolPref(aKey, aVal);
			break;
		case "number":
			branch.setIntPref(aKey, aVal);
			break;
		case "string":
			let str = Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString);
			str.data = aVal;
			branch.setComplexValue((aKey), Ci.nsISupportsString, str);
			break;
	}
};

this.MultiSnippetsInserter.Init();

// All this crap to be able to use "require" in all Gecko applications.
// The "try" block is for Firefox/SeaMonkey/Thunderbird.
// The catch is for Palemoon. ¬¬
(function() {
	// If Hotkeys are disabled or if require is already loaded or if it's that "sheet" of Thunderbird 
	// or if "InstantHotkeys" is disabled, do not make "require" available.
	if (!$._HotkeysEnabled || $.canCreateHotKeys || !("gBrowser" in window) || !$._InstantHotkeys)
		return true;
	try {
		Cu.import("resource://gre/modules/commonjs/toolkit/require.js", self);
	} catch (aErr) { // Thanks to alice0775!!! https://github.com/alice0775/userChrome.js/blob/master/0-builtin_addon-SDK.uc.js
		var {
			Services
		} = Cu.import("resource://gre/modules/Services.jsm", {});
		var LoaderModule = Cu.import("resource://gre/modules/commonjs/toolkit/loader.js", {}).Loader;
		var {
			console
		} = Cu.import("resource://gre/modules/devtools/Console.jsm", {});
		let {
			Loader, main, Module, Require, unload
		} = LoaderModule;

		function getCURRENT_DIR() {
			Error().stack.split('\n')[2].match(/^[^@]*@(.*?)[^/]+:\d+$/);
			let p0 = RegExp.$1;
			let p1 = Error().fileName.replace(/[^/]+$/, '').split(' -> ').pop();
			return (p0 == p1) ? [p0] : [p0, p1];
		}

		let CURRENT_DIR = getCURRENT_DIR(); //'scratchpad://';
		let loaders = [];

		function makePaths(root) {
			return {
				'./': CURRENT_DIR,
				'': 'resource://gre/modules/commonjs/'
			};
		}

		function makeLoader(options) {
			let {
				paths, globals
			} = options || {};

			// We have to have `console` as a global, otherwise
			// many SDK modules will fail
			// bug 961252
			let globalDefaults = {
				console: console
			};

			let loader = Loader({
				paths: paths || makePaths(),
				globals: extend({}, globalDefaults, globals) || null,
				modules: {
					// Needed because sdk/ modules reference utilities in
					// `toolkit/loader`, until Bug 961194 is completed
					'toolkit/loader': LoaderModule
				},
				// We need rootURI due to `sdk/self` (or are using native loader)
				// which overloads with pseudo modules
				// bug 961245
				rootURI: CURRENT_DIR,
				// We also need metadata dummy object
				// bug 961245
				metadata: {}
			});

			loaders.push(loader);
			return loader;
		}

		function extend(...objs) {
			if (objs.length === 0 || objs.length === 1)
				return objs[0] || {};

			for (let i = objs.length; i > 1; i--) {
				for (var prop in objs[i - 1])
					objs[0][prop] = objs[i - 1][prop];
			}
			return objs[0];
		}

		let unloadListener = function() {
			loaders.forEach(unload);
		};
		// clean up
		window.addEventListener("unload", unloadListener, false);

		addDestructor(function(aReason) {
			if (aReason === "update" || aReason === "delete") {
				window.removeEventListener("unload", unloadListener, false);
			}
		});

		// init codes
		function init_require() {
			// Load `constructor` as global since tabs uses `traits`
			// that use this module
			let loader = makeLoader({
				globals: constructor
			});
			let module = Module("./main", CURRENT_DIR /* "scratchpad://" */ );
			let require = Require(loader, module);
			self.require = require;
		}

		init_require();
	}
})();]]></initcode>
  <code><![CDATA[if(!event.target && !this.disabled) { // If button hotkey is pressed.
	this.MultiSnippetsInserter.handleMainPopup();
}]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help>𝗖𝗹𝗶𝗰𝗸𝘀 𝗼𝗻 𝗯𝘂𝘁𝘁𝗼𝗻
Left click						=&gt; Open/Close main menu
Middle click/Ctrl + Left Click		=&gt; Open Options menu

𝗗𝗿𝗮𝗴＆𝗗𝗿𝗼𝗽 𝗼𝗻 𝗺𝗲𝗻𝘂
Shift + Drag item					=&gt; Reorder items
Shift + Ctrl + Drag item			=&gt; Move item inside a menu

𝗜𝗺𝗽𝗼𝗿𝘁𝗮𝗻𝘁 𝗻𝗼𝘁𝗲𝘀
⚫ Create periodic backups of your items file. Open the options menu and click 𝗕𝗮𝗰𝗸𝘂𝗽 𝗶𝘁𝗲𝗺𝘀 𝗳𝗶𝗹𝗲.
⚫ After cloning this button, remember to open the 𝗠𝘂𝗹𝘁𝗶 𝗦𝗻𝗶𝗽𝗽𝗲𝘁𝘀 𝗜𝗻𝘀𝗲𝗿𝘁𝗲𝗿'𝘀 options window of the newly created button and close it. This is needed because of a bug in Custom Buttons add-on in which cloned buttons with type set to "menu" are initialized thrice.
⚫ The image for this button can be changed by editing the variable called 𝗯𝘂𝘁𝘁𝗼𝗻𝗜𝗺𝗮𝗴𝗲 inside the Initialization tab. This is not a whim, there is a "programmatic reason" to use that variable and not the usual place to set a CB button image.
⚫ If the button image changes to a siren, it means that you have made some changes to the main menu and they need to be saved. Just open the options menu and click 𝗦𝗮𝘃𝗲 𝗶𝘁𝗲𝗺𝘀 𝘁𝗼 𝗳𝗶𝗹𝗲.
⚫ If the button image changes to an animated circle, it means that the button is creating its main menu from the items file located inside the profile folder. Do not attempt to manipulate the button in any way while this image is displayed.

𝗪𝗔𝗥𝗡𝗜𝗡𝗚❗❗ 𝗕𝗘 𝗖𝗔𝗥𝗘𝗙𝗨𝗟 𝗜𝗙 𝗬𝗢𝗨 𝗘𝗗𝗜𝗧 𝗧𝗛𝗘 𝗛𝗘𝗟𝗣 𝗧𝗔𝗕 𝗢𝗙 𝗧𝗛𝗜𝗦 𝗕𝗨𝗧𝗧𝗢𝗡❗❗❗
𝗜𝗧 𝗖𝗢𝗨𝗟𝗗 𝗕𝗥𝗘𝗔𝗞 𝗧𝗛𝗘 𝗙𝗨𝗡𝗖𝗜𝗢𝗡𝗔𝗟𝗜𝗧𝗬 𝗢𝗙 𝗧𝗛𝗜𝗦 𝗕𝗨𝗧𝗧𝗢𝗡❗❗❗

[,]
&lt;!--FrameScript--&gt;"use sctrict";
var Ci = Components.interfaces;
var Cc = Components.classes;
var Cu = Components.utils;
let MultiSnippetsInserter = {
	_activeEl: null,
	Init: function() {
		addMessageListener("_Create_From_Selection_ID_", this);
		addMessageListener("_Insert_Text_ID_", this);
	},

	receiveMessage: function(aMsg) {
		// Cu.reportError(aMsg.data);
		switch (aMsg.name) {
			case "_Insert_Text_ID_":
				this._insertText2(aMsg.data);
				break;
			case "_Create_From_Selection_ID_":
				// This is executed from context menu.
				// With getSelectionInfo() I get "text" undefined.
				sendAsyncMessage("_Response_ID_", {
					id: "CreateFromSeletion",
					selStr: MultiSnippetsInserter.getSelectionInfo().selStr,
				});
				break;
		}
	},

	// forms.js Firefox 46
	getSelectionInfo: function() {
		let el = this._activeEl = MSI_getFocusedElement();
		// el.focus();
		let range = MSI_getSelectionRange(el);
		let text = MSI_isContentEditable(el) ? MSI_getContentEditableText(el) : el.value;
		let fallbackText = null;
		if (!text) // Fallback to this for XUL documents. "range" seems not to be affected. Needs more testing.
			fallbackText = this._getSelection();
		return {
			selectionStart: range[0],
			selectionEnd: range[1],
			selStr: text ? text.substring(range[0], range[1]) : fallbackText
		};
	},

	_getSelection: function() {
		let fWin = {};
		let fEl = Services.focus.getFocusedElementForWindow(content, true, fWin);
		fWin = fWin.value;
		sel = fWin.getSelection().toString();
		if (!sel &amp;&amp; fEl instanceof Ci.nsIDOMNSEditableElement) {
			if (fEl instanceof Ci.nsIDOMHTMLTextAreaElement ||
				(fEl instanceof Ci.nsIDOMHTMLInputElement &amp;&amp;
					fEl.mozIsTextField(true))) {
				sel = fEl.editor.selection.toString();
			}
		}
		return sel;
	},

	_insertText2: function(aData) {
		let selObj = this.getSelectionInfo();
		let el = this._activeEl;
		var selStr = selObj.selStr,
			firstPart = aData.firstPart,
			secondPart = aData.secondPart,
			caretIndex = aData.caretIndex,
			snippet = secondPart ?
			(firstPart + selStr + (secondPart &amp;&amp; secondPart)) :
			firstPart;
		this._editor = MSI_getPlaintextEditor(el);
		if (MSI_isContentEditable(el)) {
			// Using the editor because "execCommand("insertText"...)" doesn't work on
			// contenteditable elements placed inside iframes. ¬¬
			// I kept "execCommand("insertText"...)" just as a fail safe.
			if (this._editor)
				this._editor.insertText(snippet);
			else
				"execCommand" in content.document &amp;&amp; content.document.execCommand("insertText", "", snippet);
			(selStr &amp;&amp; aData.keepSelection &amp;&amp; secondPart) ?
			MSI_setSelectionRange(el, selObj.selectionStart + firstPart.length,
					selObj.selectionStart + firstPart.length + selStr.length):
				((caretIndex !== -1) &amp;&amp; MSI_setSelectionRange(el, caretIndex, caretIndex));
			this._activeEl = null;
			this._editor = null;
			return true;
		}
		if (this._editor) {
			this._editor.insertText(snippet);
			(selStr &amp;&amp; aData.keepSelection &amp;&amp; secondPart) ?
			MSI_setSelectionRange(el, selObj.selectionStart + firstPart.length,
					selObj.selectionStart + firstPart.length + selStr.length):
				(caretIndex !== -1) &amp;&amp; MSI_setSelectionRange(el, caretIndex, caretIndex);
			el.focus();
			this._activeEl = null;
			this._editor = null;
			return true;
		}
		// Last try!!!
		sendAsyncMessage("_Response_ID_", {
			id: "TextInserterFailSafe",
			snippet: snippet,
		});
		this._activeEl = null;
		this._editor = null;
		return true;
	}
};
MultiSnippetsInserter.Init();
// MSI stands for Multi Snippets Inserter.
function MSI_getSelectionObj() {
	let fWin = {};
	let fEl = Services.focus.getFocusedElementForWindow(content, true, fWin);
	fWin = fWin.value;
	let sel = fWin.getSelection();
	if (!sel)
		return null;
	return sel;
}

function MSI_getFocusedElement() {
	let fWin = {};
	let el = Services.focus.getFocusedElementForWindow(content.window, true, fWin);
	fWin = fWin.value;
	fWin.focus();
	if (!el)
		el = content.document.activeElement;
	if (!el)
		return null;
	return el;
}

// forms.js Firefox 46
function MSI_isContentEditable(aEl) {
	if (!aEl) {
		return false;
	}
	if (aEl.isContentEditable || aEl.designMode == "on")
		return true;
	return aEl.ownerDocument &amp;&amp; aEl.ownerDocument.designMode == "on";
}

// forms.js Firefox 46
function MSI_isPlainTextField(aEl) {
	if (!aEl) {
		return false;
	}
	return aEl instanceof Ci.nsIDOMHTMLTextAreaElement ||
		(aEl instanceof Ci.nsIDOMHTMLInputElement &amp;&amp;
			aEl.mozIsTextField(false));
}

// forms.js Firefox 46
function MSI_getDocumentEncoder(aEl) {
	let encoder = Cc["@mozilla.org/layout/documentEncoder;1?type=text/plain"]
		.createInstance(Ci.nsIDocumentEncoder);
	let flags = Ci.nsIDocumentEncoder.SkipInvisibleContent |
		Ci.nsIDocumentEncoder.OutputRaw |
		Ci.nsIDocumentEncoder.OutputDropInvisibleBreak |
		// Bug 902847. Don't trim trailing spaces of a line.
		Ci.nsIDocumentEncoder.OutputDontRemoveLineEndingSpaces |
		Ci.nsIDocumentEncoder.OutputLFLineBreak |
		Ci.nsIDocumentEncoder.OutputNonTextContentAsPlaceholder;
	encoder.init(aEl.ownerDocument, "text/plain", flags);
	return encoder;
}

// forms.js Firefox 46
function MSI_getSelectionRange(aEl) {
	let start = 0;
	let end = 0;
	if (MSI_isPlainTextField(aEl)) {
		// Get the selection range of &lt;input&gt; and &lt;textarea&gt; elements
		start = aEl.selectionStart;
		end = aEl.selectionEnd;
	} else if (MSI_isContentEditable(aEl)) {
		// Get the selection range of contenteditable elements
		// let win = aEl.ownerDocument.defaultView;
		// let win = content.window;
		let sel = MSI_getSelectionObj();
		// let sel = win.getSelection();
		if (sel &amp;&amp; sel.rangeCount &gt; 0) {
			start = MSI_getContentEditableSelectionStart(aEl, sel);
			end = start + MSI_getContentEditableSelectionLength(aEl, sel);
		} else {
			dump("Failed to get window.getSelection()\n");
		}
	}
	return [start, end];
}

// forms.js Firefox 46
function MSI_setSelectionRange(aEl, aStart, aEnd) {
	let isTextField = MSI_isPlainTextField(aEl);
	// Check the parameters
	if (!isTextField &amp;&amp; !MSI_isContentEditable(aEl)) {
		// Skip HTMLOptionElement and HTMLSelectElement elements, as they don't
		// support the operation of setSelectionRange
		return false;
	}
	let text = isTextField ? aEl.value : MSI_getContentEditableText(aEl);
	let length = text.length;
	if (aStart &lt; 0) {
		aStart = 0;
	}
	if (aEnd &gt; length) {
		aEnd = length;
	}
	if (aStart &gt; aEnd) {
		aStart = aEnd;
	}
	if (isTextField &amp;&amp; "setSelectionRange" in aEl) {
		// Set the selection range of &lt;input&gt; and &lt;textarea&gt; elements
		aEl.setSelectionRange(aStart, aEnd, "forward");
		return true;
	} else {
		// set the selection range of contenteditable elements
		// let win = aEl.ownerDocument.defaultView; // From original function
		// let sel = win.getSelection(); // From original function
		let sel = MSI_getSelectionObj();
		// Move the caret to the aStart position
		sel.collapse(aEl, 0);
		for (let i = 0; i &lt; aStart; i++) {
			sel.modify("move", "forward", "character");
		}
		// Avoid entering infinite loop in case we cannot change the selection
		// range. See bug https://bugzilla.mozilla.org/show_bug.cgi?id=978918
		let oldStart = MSI_getContentEditableSelectionStart(aEl, sel);
		let counter = 0;
		while (oldStart &lt; aStart) {
			sel.modify("move", "forward", "character");
			let newStart = MSI_getContentEditableSelectionStart(aEl, sel);
			if (oldStart == newStart) {
				counter++;
				if (counter &gt; 20) {
					return false;
				}
			} else {
				counter = 0;
				oldStart = newStart;
			}
		}
		// Extend the selection to the aEnd position
		for (let i = aStart; i &lt; aEnd; i++) {
			sel.modify("extend", "forward", "character");
		}
		// Avoid entering infinite loop in case we cannot change the selection
		// range. See bug https://bugzilla.mozilla.org/show_bug.cgi?id=978918
		counter = 0;
		let selectionLength = aEnd - aStart;
		let oldSelectionLength = MSI_getContentEditableSelectionLength(aEl, sel);
		while (oldSelectionLength &lt; selectionLength) {
			sel.modify("extend", "forward", "character");
			let newSelectionLength = MSI_getContentEditableSelectionLength(aEl, sel);
			if (oldSelectionLength == newSelectionLength) {
				counter++;
				if (counter &gt; 20) {
					return false;
				}
			} else {
				counter = 0;
				oldSelectionLength = newSelectionLength;
			}
		}
		return true;
	}
}

// forms.js Firefox 46
function MSI_getContentEditableText(aEl) {
	if (!aEl || !MSI_isContentEditable(aEl)) {
		return null;
	}

	// let doc = content.document;
	let doc = aEl.ownerDocument;
	let range = doc.createRange();
	range.selectNodeContents(aEl);
	let encoder = MSI_getDocumentEncoder(aEl);
	encoder.setRange(range);
	return encoder.encodeToString();
}

// forms.js Firefox 46
function MSI_getContentEditableSelectionStart(aEl, aSel) {
	// let doc = content.document;;
	let doc = aEl.ownerDocument;
	let range = doc.createRange();
	range.setStart(aEl, 0);
	range.setEnd(aSel.anchorNode, aSel.anchorOffset);
	let encoder = MSI_getDocumentEncoder(aEl);
	encoder.setRange(range);
	return encoder.encodeToString().length;
}

// forms.js Firefox 46
function MSI_getContentEditableSelectionLength(aEl, aSel) {
	let encoder = MSI_getDocumentEncoder(aEl);
	encoder.setRange(aSel.getRangeAt(0));
	return encoder.encodeToString().length;
}

// forms.js Firefox 46
function MSI_getPlaintextEditor(aEl) {
	let editor = null;
	// Get nsIEditor
	if (MSI_isPlainTextField(aEl)) {
		// Get from the &lt;input&gt; and &lt;textarea&gt; elements
		editor = aEl.QueryInterface(Ci.nsIDOMNSEditableElement).editor;
	} else if (MSI_isContentEditable(aEl)) {
		// Get from content editable element
		let win = aEl.ownerDocument.defaultView;
		let editingSession = win.QueryInterface(Ci.nsIInterfaceRequestor)
			.getInterface(Ci.nsIWebNavigation)
			.QueryInterface(Ci.nsIInterfaceRequestor)
			.getInterface(Ci.nsIEditingSession);
		if (editingSession) {
			editor = editingSession.getEditorForWindow(win);
		}
	}
	if (editor) {
		editor.QueryInterface(Ci.nsIPlaintextEditor);
	}
	return editor;
}
&lt;!--FrameScript--&gt;

&lt;!--AddEditWindow--&gt;&lt;?xml version="1.0"?&gt;
&lt;?xml-stylesheet href="chrome://global/skin/"?&gt;
&lt;?xml-stylesheet href="data:text/css;charset=utf-8,
window * {
	font-family: &amp;quot;Open Sans&amp;quot;, Helvetica, Arial, sans-serif !important;
}
caption .caption-text,
.bold_text{
	font-weight:bold;
}
.warning{
	font-weight: bold !important;
	color: red !important;
}
button .button-text {
	display: inline-block !important;
	text-align: left !important;
}
button {
	min-width: 1em !important;
}
.optional {
	-moz-appearance: none !important;
	border:2px groove green !important;
}
.required {
	-moz-appearance: none !important;
	border: 2px groove brown !important;
}
" type="text/css" ?&gt;
&lt;window onload="gMultiSnippetsInserter.onLoad();"
	    onunload="gMultiSnippetsInserter.onUnLoad();"
	    windowtype="CB:MultiSnippetsInserter:AddEditItems"
	    xmlns:html="http://www.w3.org/1999/xhtml"
	    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"&gt;
&lt;script&gt;&lt;![CDATA[
var Cc = Components.classes;
var Ci = Components.interfaces;
var Cu = Components.utils;
if (!("Services" in window))
	Cu.import("resource://gre/modules/Services.jsm");
var fromButton = _self_;
var storage = window._storage;
var node = storage.popup_node,
	mItemBoxes = document.getElementsByClassName("menuitem-box"),
	isMenu = storage.is_menu,
	isNew = storage.is_new,
	itemName = isMenu ? "menu" : "menuitem",
	idNumber = storage.self_id.slice(20);
function $(id) document.getElementById(id);
var gMultiSnippetsInserter = {
	onLoad: function() {
		// box-shadow won't work on Palemoon. ¬¬
		// fromButton.style.setProperty("box-shadow", "0 0 0 2pt green", "important");
		fromButton.style.setProperty("outline", "4px groove green", "important");
		fromButton.style.setProperty("outline-offset", "-3px", "important");
		isNew || this.populateFields();
		if (isNew &amp;&amp; storage.from_context)
			this.snippet_tbox.value = storage.from_context;
		this.setFieldsVisibility();
		this.setDynamicLabels();
		this.label_tbox.focus();
		this.setImagePreview();
		window.document.documentElement.setAttribute("title", isNew ?
			"Add new " + itemName + " - Button #ID: " + idNumber :
			"Edit " + itemName + " - Button #ID: " + idNumber);
		this.setHotKey();
		this.handleToBase64Btn();
	},

	onUnLoad: function() {
		// box-shadow won't work on Palemoon. ¬¬
		// fromButton.style.removeProperty("box-shadow", "0 0 0 2pt green", "important");
		fromButton.style.removeProperty("outline", "4px groove green", "important");
		fromButton.style.removeProperty("outline-offset", "-3px", "important");
		fromButton._storage = {};
	},

	onAccept: function() {
		if (isNew) {
			if (isMenu) {
				let m = node.parentNode.appendChild(this.$CNS("menu", {
					"label": this.label_tbox.value,
					"image": this.image_tbox.value,
					"accesskey": this.accesskey_tbox.value,
				})).appendChild(this.$CNS("menupopup"));
				m.appendChild(this.$CNS("menuitem", {
					"label": "Dummy item",
					"_snippet": "Dummy item",
				}));
			} else {
				node.parentNode.appendChild(this.$CNS("menuitem", {
					"label": this.label_tbox.value,
					"image": this.image_tbox.value,
					"accesskey": this.accesskey_tbox.value,
					"style": this.style_tbox.value,
					"_hotkey": this.hotkey_tbox.value,
					"_snippet": this.snippet_tbox.value,
				}));
			}
			this.setBtnImage();
		} else
			this.saveAttributes();
	},

	setDynamicLabels: function() {
		this.accept_button.label = isNew ? "Add new " + itemName : "Save " + itemName;
		this.selection_ph_lbl.value = storage.selection_anchor;
		this.caret_ph_lbl.value = storage.caret_anchor;
		this.evaluator_ph_lbl.value = storage.evaluator_anchor;
	},

	$CNS: function(aElName, aAttrs, aNS) {
		var el = document.createElement(aElName); // createElementNS not working here.
		if (aAttrs)
			Object.keys(aAttrs).forEach(function(n) {
				if (aAttrs[n] !== "")
					el.setAttribute(n, aAttrs[n])
			});
		return el;
	},

	img_to_b64: function() {
		let imgURL = this.image_tbox.value;
		if (imgURL.search(/^data:image/) === 0 || imgURL === "")
			return true;
		fromButton.MultiSnippetsInserter.img_to_b64_cback(imgURL, function(aImgData) {
			aImgData &amp;&amp; (gMultiSnippetsInserter.image_tbox.value = aImgData);
		});
		setTimeout(function() {
			gMultiSnippetsInserter.handleToBase64Btn();
		}, 100);
	},

	insertPlaceholders: function(aText) {
		var el = this.snippet_tbox;
		var text = aText;
		var selectionEnd = el.selectionStart + text.length;
		var currentValue = el.value || el.textContent;
		var beforeText = currentValue.substring(0, el.selectionStart);
		var afterText = currentValue.substring(el.selectionEnd, currentValue.length);
		el.value = beforeText + text + afterText;
		el.focus();
		el.selectionStart = el.selectionEnd = selectionEnd;
	},

	setFieldsVisibility: function() {
		for (var i = mItemBoxes.length - 1; i &gt;= 0; i--)
			mItemBoxes[i].hidden = isMenu;
		$("hotkey-box").hidden = !storage.create_hotkey || isMenu;
	},

	setHotKey: function(aE) { // Taken from Custom Buttons add-on. I ♥ CB!!!
		let hki = this.hotkey_tbox_inserter;
		hki.addEventListener("input", function(aE) {
			this.value = "";
			aE.stopPropagation();
		}, false);
		hki.addEventListener("keypress", function(aE) {
			var cbd = Cc["@xsms.nm.ru/custombuttons/cbkeymap;1"].getService(Ci.cbIKeyMapService);
			var key = cbd.getKey(aE);
			if (key == "ESCAPE") {
				aE.preventDefault();
				if (this.value != "") {
					this.bExtendedMode = false;
					this.value = "";
					return;
				}
				if (!this.bExtendedMode) {
					this.bExtendedMode = true;
					return;
				}
			}
			if (key == "TAB") {
				if (!this.bExtendedMode)
					return;
				this.bExtendedMode = false;
				if (this.value != "")
					return;
				aE.preventDefault();
			}
			this.bExtendedMode = false;
			var prefix = cbd.getKeyPrefix(aE);
			this.value = "";
			gMultiSnippetsInserter.hotkey_tbox.value = prefix + key;
			aE.preventDefault();
			aE.stopPropagation();
		}, false);
	},

	saveAttributes: function() {
		this.label_tbox.value !== "" ?
			node.setAttribute("label", this.label_tbox.value) :
			node.setAttribute("label", "Name me!!!");
		this.image_tbox.value !== "" ?
			node.setAttribute("image", this.image_tbox.value) :
			node.removeAttribute("image");
		this.accesskey_tbox.value !== "" ?
			node.setAttribute("accesskey", this.accesskey_tbox.value) :
			node.removeAttribute("accesskey");
		this.style_tbox.value !== "" ?
			node.setAttribute("style", this.style_tbox.value) :
			node.removeAttribute("style");
		if (!isMenu) {
			this.hotkey_tbox.value !== "" ?
				(node.setAttribute("_hotkey", this.hotkey_tbox.value),
					node.setAttribute("acceltext", this.hotkey_tbox.value)) :
				(node.removeAttribute("_hotkey"),
					node.removeAttribute("acceltext"));
			node.setAttribute("_snippet", encodeURIComponent(this.snippet_tbox.value));
		}
		this.setBtnImage();
	},

	setBtnImage: function() {
		window.setTimeout(function() {
			fromButton.MultiSnippetsInserter.setBtnImage();
			close();
		}, 200);
	},

	populateFields: function() {
		this.label_tbox.value = node.getAttribute("label") || "";
		this.image_tbox.value = node.getAttribute("image") || "";
		this.accesskey_tbox.value = node.getAttribute("accesskey") || "";
		this.style_tbox.value = node.getAttribute("style") || "";
		this.hotkey_tbox.value = node.getAttribute("_hotkey") || "";
		this.snippet_tbox.value = decodeURIComponent(node.getAttribute("_snippet")) || "";
	},

	handleToBase64Btn: function() {
		if (this.image_tbox.value === "" || this.image_tbox.value.search(/^data:image/) === 0)
			this.to_base64_btn.disabled = true;
		else
			this.to_base64_btn.disabled = false;
	},

	setImagePreview: function() {
		this.image_preview.src = this.image_tbox.value;
		this.handleToBase64Btn();
	},

	selectLocalImage: function() {
		var fp = Cc["@mozilla.org/filepicker;1"].createInstance(Ci.nsIFilePicker);
		fp.init(window, "Select an image file", 0);
		fp.appendFilters(fp.filterImages);
		var res = fp.show();
		if (res == fp.returnOK) {
			this.image_tbox.value = fp.fileURL.spec;
			this.setImagePreview();
		}
	},

	get label_tbox() {
		return $("label_tbox");
	},
	get image_tbox() {
		return $("image_tbox");
	},
	get accesskey_tbox() {
		return $("accesskey_tbox");
	},
	get hotkey_tbox() {
		return $("hotkey_tbox");
	},
	get hotkey_tbox_inserter() {
		return $("hotkey_tbox_inserter");
	},
	get style_tbox() {
		return $("style_tbox");
	},
	get to_base64_btn() {
		return $("to_base64_btn");
	},
	get snippet_tbox() {
		return $("snippet_tbox");
	},
	get image_preview() {
		return $("image_preview");
	},
	get selection_ph_lbl() {
		return $("selection_ph_lbl");
	},
	get caret_ph_lbl() {
		return $("caret_ph_lbl");
	},
	get evaluator_ph_lbl() {
		return $("evaluator_ph_lbl");
	},
	get accept_button() {
		return $("accept_button");
	},
};
]]&gt;&lt;/script&gt;
	&lt;keyset&gt;
		&lt;key keycode="VK_ESCAPE" oncommand="close();"/&gt;
	&lt;/keyset&gt;
	&lt;vbox&gt;
		&lt;groupbox orient="vertical"&gt;
			&lt;grid&gt;
				&lt;columns&gt;
					&lt;column /&gt;
					&lt;column flex="1"/&gt;
				&lt;/columns&gt;
				&lt;rows&gt;
					&lt;row align="center"&gt;
						&lt;label value="Label"/&gt;
						&lt;textbox id="label_tbox" tooltip="label_tt" flex="1" class="required" placeholder="A name for the item."/&gt;
					&lt;/row&gt;
					&lt;row align="center"&gt;
						&lt;label value="Image"/&gt;
						&lt;hbox align="center"&gt;
							&lt;textbox id="image_tbox" oninput="gMultiSnippetsInserter.setImagePreview();" tooltip="image_tt" flex="1" class="optional" placeholder="A link to an image."/&gt;
							&lt;image id="image_preview" width="16" height="16" /&gt;
							&lt;button label="Browse..." align="left" oncommand="gMultiSnippetsInserter.selectLocalImage();"/&gt;
							&lt;button id="to_base64_btn" label="to Base64" align="left" oncommand="gMultiSnippetsInserter.img_to_b64();"/&gt;
						&lt;/hbox&gt;
					&lt;/row&gt;
					&lt;row align="center"&gt;
						&lt;label value="Accesskey"/&gt;
						&lt;textbox id="accesskey_tbox" tooltip="accesskey_tt" flex="1" maxlength="1" class="optional" placeholder="Any alpha-numeric character."/&gt;
					&lt;/row&gt;
					&lt;row id="hotkey-box" class="menuitem-box" align="center"&gt;
						&lt;label value="Hotkey"/&gt;
						&lt;hbox align="center"&gt;
							&lt;textbox id="hotkey_tbox" tooltip="hotkey_tt" flex="1" class="optional" placeholder="Key combination to activate this item."/&gt;
							&lt;label value="Capture hotkey =&amp;gt;"/&gt;
							&lt;textbox id="hotkey_tbox_inserter" tooltip="hotkey_inserter_tt" maxwidth="30" flex="0" /&gt;
						&lt;/hbox&gt;
					&lt;/row&gt;
					&lt;row align="center"&gt;
						&lt;label value="Style"/&gt;
						&lt;textbox id="style_tbox" tooltip="style_tt" flex="1" class="optional" placeholder="Example: color:red;font-size:18px;"/&gt;
					&lt;/row&gt;
				&lt;/rows&gt;
			&lt;/grid&gt;
		&lt;/groupbox&gt;
		&lt;groupbox orient="vertical" class="menuitem-box"&gt;
			&lt;grid&gt;
				&lt;columns&gt;
					&lt;column flex="1"/&gt;
					&lt;column /&gt;
				&lt;/columns&gt;
				&lt;rows&gt;
					&lt;row&gt;
						&lt;vbox&gt;
							&lt;caption label="Snippet of text" /&gt;
							&lt;textbox id="snippet_tbox"
									 tooltip="snippet_tt"
									 class="required"
									 rows="10"
									 width="400"
									 multiline="true"
									 newlines="pasteintact"
									 flex="1"/&gt;
						&lt;/vbox&gt;
						&lt;vbox&gt;
							&lt;caption label="Insert placeholders" /&gt;
							&lt;grid&gt;
								&lt;columns&gt;
									&lt;column flex="1"/&gt;
									&lt;column /&gt;
								&lt;/columns&gt;
								&lt;rows&gt;
									&lt;row&gt;
										&lt;label id="caret_ph_lbl" class="bold_text"/&gt;
										&lt;button label="Caret anchor" tooltip="caret_anchor_btn_tt" align="left" oncommand="gMultiSnippetsInserter.insertPlaceholders(storage.caret_anchor);"/&gt;
									&lt;/row&gt;
									&lt;row&gt;
										&lt;label id="selection_ph_lbl" class="bold_text"/&gt;
										&lt;button label="Selection anchor" tooltip="selection_anchor_btn_tt" align="left" oncommand="gMultiSnippetsInserter.insertPlaceholders(storage.selection_anchor);"/&gt;
									&lt;/row&gt;
									&lt;row&gt;
										&lt;label id="evaluator_ph_lbl" class="bold_text warning"/&gt;
										&lt;button label="Evaluator" tooltip="evaluator_btn_tt" class="warning" align="left" oncommand="gMultiSnippetsInserter.insertPlaceholders(storage.evaluator_anchor+storage.evaluator_anchor);"/&gt;
									&lt;/row&gt;
								&lt;/rows&gt;
							&lt;/grid&gt;
							&lt;separator /&gt;
							&lt;vbox align="center"&gt;
							&lt;hbox align="center"&gt;&lt;spacer flex="1"/&gt;
							&lt;button popup="extra_info_pop" tooltiptext="Extra info about placeholders" image="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAADjklEQVRIicWV708TdxzHP3f4aDRxNYHsgQs/HvjQu7o+MYRkrJI6TDyhPf+A2Vo3iHHptVtmlqAxEQe0RayFay1FXLIlS3ymG8YQMvYDs/EAWduFIWhcgoQHBKSCLffeg7v2rtgqmmX7JJ9ccj/er8+9P9/v50v0f4YoihUHDx2xc05fgHdKY1bBPWsV3LO8UxrjWqXeBltLMxGxbyTOC+0tFsfpVI1nJFPln0DluXmwvVmwvVlUnptHlX8CNZ7rGUtbR4oTTtlfS5xz+m/UuWPPmIACCgIUAqgPoJCiXbUMAkzPFurc0cz+477hHYlbHGfGzWenVOE+gC4D1A+YI5v4+Js03k/8DerX7udhAcDsv6dwbWfuvrJy8xdT6keaMIUBCiv48uY0crkc/nqwgHcuL6r3r2jvaZA9/kmFE31DZT2vc8eeFcSvAHQVoAhAg0D7d0msrKzg1+k0dl9dAQ1oz7dB6j+SM/xRT3ORuCiKFRbH6RQT1DzOiw8AJAOMnMOuwU00Jh5gb2wZTHQLJONFSBBgurOwtHbMkHF1HTx0xF7jGclQyGCLJs7Kz3Hi699xaTRVSHFkGsw1BRQ1QPq1ngSA2pOJ9camwzaD975AlX9Cr16zhWIAE1dgTSyg81YS+Th/OwkmngPF1CIoUvwX1d5xcE6pS/ffKY1Vnp9XXzBUT9cASgB0HXg7uojl5eViQBz6X4R1gKlzDrxDulMAWI+5Z9lAthgQhSowDNANwBRbxNLSkgr4PglmyAAYNNgUAtivNmAVXOn/DrATi0yyAbATi0TvqN5kUeot12SKqxBTpATgZU0WvRcLgAZbS3O5ZZqHmMIGwK0kmFiu/DJ1J5422OxNxr3GHmhrTzKBrZIbjaKAqf9JAXDhdhrMYK7sRuNbP7lP28c4J5yy17mjmVKjoiKyiX2hFNbW1gAA8Z8W8FbPYzDhrVKjYv3Ah64PSs6j/cd9w+bP7ynGYbcruIqum5P47c9HWF1dLeS3P/4BhzxVPOykXxSuTYqVFNcb7r2757NJJT+umb4cLOF5vDfwUM+Imu+Gnujivp8VzvnpDy8V1yG+oXqXnGF6ssUHTj6NB053FvUn5PVXVr49+KOeZktrx0ytJ7FeLY3D1DkHtnsDbPcGTJ1zqJbGUXsy8dQitM+U9XwHwTY2HbZxTqmLd0h3rIIrbRVcaV70jnKi96K2FN/s0P+34h8T4tFY/JoDdAAAAABJRU5ErkJggg==" /&gt;
							&lt;spacer flex="1"/&gt;&lt;/hbox&gt;
							&lt;/vbox&gt;
							&lt;spacer flex="1"/&gt;
						&lt;/vbox&gt;
					&lt;/row&gt;
				&lt;/rows&gt;
			&lt;/grid&gt;
		&lt;/groupbox&gt;
		&lt;label value="Brown colored fields are REQUIRED" class="bold_text" style="color:brown !important;"/&gt;
		&lt;label value="Green colored fields are OPTIONAL" class="bold_text" style="color:green !important;"/&gt;
	&lt;/vbox&gt;
	&lt;spacer flex="1"/&gt;
	&lt;hbox id="buttons-box"&gt;
		&lt;spacer flex="1"/&gt;
		&lt;button id="accept_button" image="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAADp0lEQVQ4jWNgGKwg9qIed9U9Z/G+x6GcVDM0dLcxf9YFy5y6x957ej9Ep/a/TxCg2NCE/QYCaafNs2sfet+b8CX2/+TviS/6P8blTnobzUeBS5X4k46ZZFfe9brX9T7if/eHiP+TvsX/7/0Y+7LlRXhBwzNfLpINddupxx21Vz+n9KbbvY63Yf/L77n9z7hg8b/2sff/CV/i/re+jHhVdcevFK7Bc5uKqP9mzbjgnXrmuAx12O/AErhVK6/gisvDjrfh/4vvuPyPOWHwP/yw9v+4k4b/y++7/y++5fE/95LrNgYGBgYGy1UynBG7jVIzzjo+TD1lt9Fns7YZNoNdV6kUZZ93etr5LuJ//i2n/2FHdP4HHtCA4+jjRv/jjlkeSzpqZcnA0MDAFLHHzLb0pvfjCV/j/7c8D/uWcMRmk/taTSNkQ20Xy5SmnrZ71fMx+n/Wdfv//gc0/nvtVYVj/31a/0P2GBwL321k0dDAwMQQu9NKrPia9+3uj1H/s244/K9+5ve/4UnIz4g95lscl6loMzAwMFjMkSlPOGr9duK3hP+pV2z+u+1R+e+8UxGO3Xep/ffdrrs3aJOBaeiqUGYGBgYGhvQzTicnfo//F3nG5L/ddrn/Poe0/tc89/9f8zDoj98m/e0mMyVnRB+0fDv1Z9L/+IuW/+22y/232SYLxw7bFP+7b9VaGrzZQJWhgYEJ7kXLzTInvQ5p/jXbLPUfht0PqP+vfRnwv+y23/+k4/b/J3yJ/x9zwfw/shqzzVL/LTfK/rFfr7bSdY2BKkaEqKziEdVfJ7pPb73YL70N4v9h2Gmf6v/qF/7/+7/F/Y84b/bfYKMEXE5vvfh/g7WSP8xWyq+2W6SqiTNtaqwXUNBcI7JNY43Id401wv9h2Gqnwn/7vSr/tdeJ/kcW11wh9l1vkfRa01mQOMAN/jMwyq8Q1lRcJbBBcaXAN8WVAv9xYaWlgj/UZkus1Z0so4vfUBhoYGCSXsytL72Md43UUp6vUst4/6Nj6QV8f+SmCq1W6ZAg4FIshoss5jISXsy5WngR51fhRZz/4Xg213/xPr6Vks3CuMOUkOH881iNeOezreGZz/aNZz7bf55pbP/52jiWitbwYcY+qYazzmXVZ5vNuIF1EtN3tgbmheyl7MqUGcrAwCIgICAgqCQoxx/J78oXyx0r6MBrIyIiIsnAwEB6cYgEGBkYGJgZGBhYtbW12VRUVNi1tbXZGBgYWBgYkHLWQAEAiWuvhyf4ZMUAAAAASUVORK5CYII=" oncommand="gMultiSnippetsInserter.onAccept();"/&gt;
		&lt;button label="Cancel" image="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAD1ElEQVQ4jYWUe0yVdRzGn3M4533P+77nfojDXSLiZqYFHsyZsULKZW5ZGV5aZcVoJDmpLSsda2UzXRalRYhAGDVuGhBXuUZMyIlgkkDSEAq5y0XBgXv6w5PDovVs339+z2+f7fn+nv2AeUoRhOAcIAj/oxpFcc+0uTsWNLcAxqZXd2zvjI3d/Q1g+S9IMmDsWLs2sXFb3FsvAdbbTG/AGu/htasnp3B0prSSNf7+B3MAr39CsgF7iZ//vvFPDrEnNevKTi+f9wOAO/72ZYfN9sHxJ58dmz5wmHOHMjiYkHit3j/gaD7gfSs24FHt6//l5biEa3PJ6ZzZf5hlm18YX2W3fwrAhKdXPFLQsPsjzm3bzvEnYji64Tlej3uDQxu3ssLunnMMMKYBhhNu9mP965/h9Vd2cOTxjRxfv4mzz8ezbl0Mn1q6sgwvLlud8dWWl8f6w1dx8M5g9obex+GHonljw2YOhEewJfLhglOOiOzeoMW8sSKSA/cu56WAUA7eFcKR0GVMXeKYjF3yYDGMgNUuCG+/6+795yWbK7s0Wp43mThwdyDnvLw5HbOVV6Me5bSiZ5+i5y+iyA5BYK8k80OTZdhHqz3gDenWPi33i+Jre4ymgQ6TmZUAKwC2Axyz2Pi7ovA0wDLneZsgcK9WN7pco9kDwB2Aav7LSZEuLjHviPJss8WVxwHmAywCeAJgHsACgHUaDZO0wuwatfr1xYB+wY7kAC7xanV888rV/MFi5RGAR52TCjBfJ/HHwFC+qVYn5wAuC0JSADldMsbkGgxDFSYzv1apmAYwwzlpTmC52cw8g3E6Q5E27QeUf7X1W70+4aTZOlQlycx1xikG+JMks8lgZDHA750RqyWZlWbLcJai7EwCzACAdECXKwi76ozGkVpRZAnAWoANAM9rtbwYGMLuMAcvCAIbANYALAFYI4qsN5lHs3S6pI8BCecSEr9oj4pmnUbDKoA/A2wF2CeK/M1qZbmiVJcZpLyLrjb2SxJbnXeqAdZrtGxd5M/ipWFHcPqxdVW/OhxTTYLAFpWKXQAviyK7XW3TJ2W5sApYVAxYymQ5s9tunxpWFHYCbFGp2CyIPOfpNXM24oE2FFk8fcu12oPtBv1wn8HASTc3dlksV2sVJasGuCcJUANQlQJ+VXr9Zx12t4lJvZ5/6HS8YDJPVAtCZrXBEAQAqjLA44ygee9KdPRYW9QanhLFlEYggDchAAACqgbAs16W957x9eFERMTUWVH8vBTw4/xCNgCGvMDA7zrDw7J7AMtt5jzVAPp2P+99hcEhRY03/yMVAPwFQsCsEJnbtMgAAAAASUVORK5CYII=" oncommand="close();"/&gt;
		&lt;spacer flex="1"/&gt;
	&lt;/hbox&gt;
	&lt;separator/&gt;
&lt;popupset&gt;
	&lt;panel id="extra_info_pop" type="arrow" orient="vertical" flip="slide"&gt;
		&lt;description&gt;&lt;html:strong&gt;*&lt;/html:strong&gt; All three placeholders can be used in the same snippet at the same time.&lt;/description&gt;
		&lt;description&gt;&lt;html:strong&gt;*&lt;/html:strong&gt; The &lt;html:strong&gt;Caret anchor&lt;/html:strong&gt; can be used &lt;html:strong&gt;ONLY ONCE&lt;/html:strong&gt; per snippet.&lt;/description&gt;
		&lt;description&gt;&lt;html:strong&gt;*&lt;/html:strong&gt; The &lt;html:strong&gt;Selection anchor&lt;/html:strong&gt; can be used &lt;html:strong&gt;ONLY ONCE&lt;/html:strong&gt; per snippet.&lt;/description&gt;
		&lt;description&gt;&lt;html:strong&gt;*&lt;/html:strong&gt; The &lt;html:strong&gt;Evaluator&lt;/html:strong&gt; placeholder &lt;html:strong&gt;must always be used in pairs&lt;/html:strong&gt; and can be used any amount of times inside the same snippet.&lt;/description&gt;
	&lt;/panel&gt;
	&lt;tooltip id="label_tt"&gt;
		&lt;description&gt;Label for the menu/menuitem.&lt;/description&gt;
	&lt;/tooltip&gt;
	&lt;tooltip id="image_tt"&gt;
		&lt;description&gt;Link to an image for the menu/menuitem.&lt;/description&gt;
		&lt;description&gt;&lt;/description&gt;
		&lt;description&gt;An image can be:&lt;/description&gt;
		&lt;html:ul&gt;
		&lt;html:li&gt;An URL containing an online image, e.g., &amp;quot;https://duckduckgo.com/favicon.ico&amp;quot;.&lt;/html:li&gt;
		&lt;html:li&gt;A &amp;quot;chrome&amp;quot; URL, e.g., &amp;quot;chrome://branding/content/icon32.png&amp;quot;.&lt;/html:li&gt;
		&lt;html:li&gt;A &amp;quot;file:///&amp;quot; URI, e.g., &amp;quot;file:///C:/Users/UserName/Desktop/Image.png&amp;quot;, &amp;quot;file:///home/UserName/Pictures/Image.png&amp;quot;.&lt;/html:li&gt;
		&lt;html:li&gt;A data URI, e.g., &amp;quot;data:image/png;base64,...base64 code...&amp;quot;.&lt;/html:li&gt;
		&lt;html:li&gt;A "moz-icon", e.g., &amp;quot;moz-icon://.png?size=16&amp;quot;.&lt;/html:li&gt;
		&lt;/html:ul&gt;
	&lt;/tooltip&gt;
	&lt;tooltip id="accesskey_tt"&gt;
		&lt;description&gt;This should be set to a character that is used as a shortcut key (not to be confused with hotkey). This should be one of the characters that appears in the label for the element. &lt;/description&gt;
	&lt;/tooltip&gt;
	&lt;tooltip id="hotkey_tt"&gt;
		&lt;description class="warning"&gt;WARNING!!!!&lt;/description&gt;
		&lt;description&gt;Make sure to use a key combination with at least one modifier key.&lt;/description&gt;
		&lt;description&gt;Use the &amp;quot;Capture hotkey&amp;quot; textbox to the right to create the key combination of your choice.&lt;/description&gt;
	&lt;/tooltip&gt;
	&lt;tooltip id="hotkey_inserter_tt"&gt;
		&lt;description&gt;Place the cursor here and press the key combination of your choosing to set a hotkey.&lt;/description&gt;
		&lt;description&gt;&lt;/description&gt;
		&lt;description class="warning"&gt;WARNING!!!!&lt;/description&gt;
		&lt;description&gt;Make sure to use a key combination with at least one modifier key.&lt;/description&gt;
	&lt;/tooltip&gt;
	&lt;tooltip id="style_tt"&gt;
		&lt;description&gt;Here can be set an style that will be applied to the menu/menuitem.&lt;/description&gt;
	&lt;/tooltip&gt;
	&lt;tooltip id="snippet_tt"&gt;
		&lt;description&gt;Snippet of text that will be inserted into any editable content when the menuitem (or hotkey if any) is activated.&lt;/description&gt;
	&lt;/tooltip&gt;
	&lt;tooltip id="caret_anchor_btn_tt"&gt;
		&lt;description&gt;By default, every time a snippet is inserted, the caret will be positioned at the end of the inserted text. This placeholder will allow you to position the caret anywhere inside the snippet.&lt;/description&gt;
	&lt;/tooltip&gt;
	&lt;tooltip id="selection_anchor_btn_tt"&gt;
		&lt;description&gt;This placeholder is usefull to create snippets to insert HTML/BBCode tags.&lt;/description&gt;
		&lt;description&gt;&lt;html:strong&gt;For example:&lt;/html:strong&gt; given the &lt;html:strong&gt;&amp;quot;[b]_insert_selection_anchor_here_[/b]&amp;quot;&lt;/html:strong&gt; snippet, and some selected text in the current page, the &lt;html:strong&gt;&amp;quot;[b]&amp;quot;&lt;/html:strong&gt; part of the snippet will be inserted at the &lt;html:strong&gt;beginning&lt;/html:strong&gt; of the selection and the &lt;html:strong&gt;&amp;quot;[/b]&amp;quot;&lt;/html:strong&gt; part of the snippet will be inserted at the &lt;html:strong&gt;end&lt;/html:strong&gt; of the selection.&lt;/description&gt;
	&lt;/tooltip&gt;
	&lt;tooltip id="evaluator_btn_tt"&gt;
		&lt;description&gt;This placeholder is usefull for creating &amp;quot;dynamic snippets&amp;quot;. The text surrounded by this placeholders will be evaluated and a string (returned by the evaluated code) will be displayed in its place.&lt;/description&gt;
		&lt;description&gt;&lt;html:strong&gt;Example 1:&lt;/html:strong&gt; The snippet &lt;html:strong&gt;&amp;quot;_insert_evaluator_anchor_here_new Date().toDateString();_insert_evaluator_anchor_here_&amp;quot;&lt;/html:strong&gt; will insert the current date.&lt;/description&gt;
		&lt;description&gt;&lt;html:strong&gt;Example 2:&lt;/html:strong&gt; The snippet &lt;html:strong&gt;&amp;quot;_insert_evaluator_anchor_here_navigator.userAgent;_insert_evaluator_anchor_here_&amp;quot;&lt;/html:strong&gt; will insert the application's User Agent.&lt;/description&gt;
		&lt;description&gt;&lt;/description&gt;
		&lt;description class="warning"&gt;WARNING!!!!&lt;/description&gt;
		&lt;description class="warning"&gt;The expresion inside the Evaluator placeholders must always return a string.&lt;/description&gt;
		&lt;description class="warning"&gt;If you have no notion at all of what evaluating JavaScript code means/does, DO NOT USE this feature.&lt;/description&gt;
	&lt;/tooltip&gt;
&lt;/popupset&gt;
&lt;/window&gt;&lt;!--AddEditWindow--&gt;

&lt;!--OptionsWindow--&gt;&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;?xml-stylesheet href="chrome://global/skin/" ?&gt;
&lt;?xml-stylesheet href="data:text/css;charset=utf-8,
caption .caption-text,
.bold_text{
	font-weight:bold;
}
.warning{
	font-weight: bold !important;
	color: red !important;
}
.info{
	font-weight: bold !important;
	color: green !important;
}
" type="text/css" ?&gt;
&lt;prefwindow xmlns:html="http://www.w3.org/1999/xhtml"
			 xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
			 onload="gMultiSnippetsInserter.onLoad();"
			 onunload="gMultiSnippetsInserter.onUnload();"
			 buttons="accept,cancel,extra1,extra2"
			 buttonlabelextra1="Apply"
			 buttonlabelextra2="Reset to defaults"
			 ondialogextra1="gMultiSnippetsInserter.onApply();"
			 ondialogextra2="gMultiSnippetsInserter.resetToDefaults();"
			 windowtype="CB:MultiSnippetsInserter:Settings"
			 title="Multi Snippets Inserter settings"&gt;
				&lt;script&gt;
		&lt;![CDATA[
var Cc = Components.classes;
var Ci = Components.interfaces;
var Cu = Components.utils;
var fromButton = _self_;
var storage = window._storage;
var idNumber = storage.self_id.slice(20);
function $(id)document.getElementById(id);
var gMultiSnippetsInserter = {
	_initialized : false,
	onLoad : function () {
		fromButton.style.setProperty("outline", "4px groove green", "important");
		fromButton.style.setProperty("outline-offset", "-3px", "important");
		window.document.documentElement.setAttribute("title",
		 "Multi Snippets Inserter settings - Button #ID: " + idNumber);
		document.documentElement.getButton("extra1").setAttribute("icon", "save");
		document.documentElement.getButton("extra2").setAttribute("icon", "clear");
		this._initialized = true;
		var docElt = document.documentElement;
		this.instantApply = docElt.instantApply;
		window.addEventListener("change", this, false);
		window.addEventListener("beforeaccept", this, false);
	},
	handleEvent : function (aEvent) {
		switch (aEvent.type) {
		case "change":
			if (aEvent.target.localName != "preference")
				return;
			this.updateBroadcasters(aEvent.target);
			if (!this.instantApply)
				this.updateApplyButton(aEvent);
			break;
		case "beforeaccept":
			break;
		}
	},
	changes : [],
	updateApplyButton : function (aEvent) {
		var item = aEvent.target;
		if (item.localName != "preference")
			return;
		var valueChanged = item.value != item.valueFromPreferences;
		var index = this.changes.indexOf(item);
		if (valueChanged &amp;&amp; index == -1)
			this.changes.push(item);
		else if (!valueChanged &amp;&amp; index &gt; -1)
			this.changes.splice(index, 1);
	},
	onApply : function () {
		while (this.changes.length) {
			var preference = this.changes.shift();
			preference.batching = true;
			preference.valueFromPreferences = preference.value;
			preference.batching = false;
		}
		this.onLoad();
		fromButton.MultiSnippetsInserter.selfDestroy();
	},
	updateBroadcasters : function (aPreference) {
		if (aPreference.type != "bool")
			return;
		var obs = $(aPreference.id.replace("pref_", "obs_"));
		if (obs)
			this.setDisabled(obs, !aPreference.value);
	},
	setDisabled : function (itemOrId, val) {
		var item = typeof(itemOrId) == "string" ? $(itemOrId) : itemOrId;
		if (!item)
			return;
	},
	onUnload : function () {
		fromButton.style.removeProperty("outline", "4px groove green", "important");
		fromButton.style.removeProperty("outline-offset", "-3px", "important");
		window.removeEventListener("change", this, false);
		window.removeEventListener("beforeaccept", this, false);
		fromButton.MultiSnippetsInserter.selfDestroy();
	},
	resetToDefaults : function () {
		fromButton.MultiSnippetsInserter.resetToDefaults(window);
	},/*
	setNotificationPosition : function () {
		fromButton.MultiSnippetsInserter.resetToDefaults(window);
	}*/
};
]]&gt;&lt;/script&gt;
	&lt;prefpane id="_U_I_D__PrefPane"&gt;
		&lt;preferences&gt;
			&lt;preference id="ItemsFileName" name="_RoOt_ItemsFileName" type="string"/&gt;
			&lt;preference id="CaretAnchor" name="_RoOt_CaretAnchor" type="string"/&gt;
			&lt;preference id="SelectionAnchor" name="_RoOt_SelectionAnchor" type="string"/&gt;
			&lt;preference id="Evaluator" name="_RoOt_Evaluator" type="string"/&gt;
			&lt;preference id="EvaluatorEnabled" name="_RoOt_EvaluatorEnabled" type="bool"/&gt;
			&lt;preference id="KeepSelection" name="_RoOt_KeepSelection" type="bool"/&gt;
			&lt;preference id="ShowAccelText" name="_RoOt_ShowAccelText" type="bool"/&gt;
			&lt;preference id="HotkeysEnabled" name="_RoOt_HotkeysEnabled" type="bool"/&gt;
			&lt;preference id="InstantHotkeys" name="_RoOt_InstantHotkeys" type="bool"/&gt;
			&lt;preference id="SaveXULExpanded" name="_RoOt_SaveXULExpanded" type="bool"/&gt;
			&lt;preference id="ContextMenuEnabled" name="_RoOt_ContextMenuEnabled" type="bool"/&gt;
			&lt;preference id="ConvertMenuToPanel" name="_RoOt_ConvertMenuToPanel" type="bool"/&gt;
			&lt;preference id="NotificationPosition" name="_RoOt_NotificationPosition" type="int"/&gt;
			&lt;preference id="TimeStampForBackups" name="_RoOt_TimeStampForBackups" type="int"/&gt;
			&lt;preference id="TimeStampForBackupsCustom" name="_RoOt_TimeStampForBackupsCustom" type="string"/&gt;
			&lt;preference id="OpenOnHover" name="_RoOt_OpenOnHover" type="bool"/&gt;
			&lt;preference id="OpenOnHoverDelayClose" name="_RoOt_OpenOnHoverDelayClose" type="int"/&gt;
			&lt;preference id="OpenOnHoverDelayOpen" name="_RoOt_OpenOnHoverDelayOpen" type="int"/&gt;
		&lt;/preferences&gt;
		&lt;grid&gt;
			&lt;columns&gt;
				&lt;column flex="1"/&gt;
				&lt;column flex="1"/&gt;
			&lt;/columns&gt;
			&lt;rows&gt;
				&lt;row&gt;
					&lt;vbox&gt;
						&lt;checkbox label="Convert popup to panel" tooltip="tt_15" preference="ConvertMenuToPanel" /&gt;
						&lt;checkbox label="Enable context menu" tooltip="tt_14" preference="ContextMenuEnabled" /&gt;
						&lt;checkbox label="Enable item hotkeys" tooltip="tt_0" preference="HotkeysEnabled" /&gt;
						&lt;checkbox label="Evaluator enabled" tooltip="tt_3" preference="EvaluatorEnabled" /&gt;
					&lt;/vbox&gt;
					&lt;vbox&gt;
						&lt;checkbox label="Instant hotkeys" tooltip="tt_16" preference="InstantHotkeys" /&gt;
						&lt;checkbox label="Keep selection selected" tooltip="tt_1" preference="KeepSelection" /&gt;
						&lt;checkbox label="Save file expanded" tooltip="tt_11" preference="SaveXULExpanded" /&gt;
						&lt;checkbox label="Show acceltext on items" tooltip="tt_2" preference="ShowAccelText" /&gt;
					&lt;/vbox&gt;
				&lt;/row&gt;
			&lt;/rows&gt;
		&lt;/grid&gt;
		&lt;hbox align="center"&gt;
			&lt;label value="Items file base name"/&gt;
			&lt;textbox flex="1" tooltip="tt_4" preference="ItemsFileName"/&gt;
		&lt;/hbox&gt;
		&lt;grid&gt;
			&lt;columns&gt;
				&lt;column /&gt;
				&lt;column flex="1"/&gt;
			&lt;/columns&gt;
			&lt;rows&gt;
				&lt;row&gt;
					&lt;groupbox&gt;
						&lt;caption label="Placeholders"/&gt;
						&lt;grid&gt;
							&lt;columns&gt;
								&lt;column flex="1"/&gt;
								&lt;column /&gt;
							&lt;/columns&gt;
							&lt;rows&gt;
								&lt;row align="center"&gt;
									&lt;label value="Caret anchor"/&gt;
									&lt;textbox flex="1" maxlength="3" maxwidth="70" tooltip="tt_5" preference="CaretAnchor"/&gt;
								&lt;/row&gt;
								&lt;row align="center"&gt;
									&lt;label value="Selection anchor"/&gt;
									&lt;textbox flex="1" maxlength="3" maxwidth="70" tooltip="tt_6" preference="SelectionAnchor"/&gt;
								&lt;/row&gt;
								&lt;row align="center"&gt;
									&lt;label value="Evaluator"/&gt;
									&lt;textbox flex="1" maxlength="1" maxwidth="70" tooltip="tt_7" preference="Evaluator"/&gt;
								&lt;/row&gt;
							&lt;/rows&gt;
						&lt;/grid&gt;
					&lt;/groupbox&gt;
					&lt;groupbox tooltip="tt_13" &gt;
						&lt;caption label="Timestamp for backups" /&gt;
						&lt;radiogroup orient="vertical" preference="TimeStampForBackups"&gt;
							&lt;radio label="YYYY MM-DD hh.mm.ss" tooltiptext="ISO8601" value="1" /&gt;
							&lt;radio label="YYYY DD.MM hh.mm.ss" tooltiptext="European" value="2" /&gt;
							&lt;radio label="Custom" value="0" /&gt;
						&lt;/radiogroup&gt;
						&lt;textbox flex="1" tooltip="tt_12" preference="TimeStampForBackupsCustom"/&gt;
					&lt;/groupbox&gt;
				&lt;/row&gt;
			&lt;/rows&gt;
		&lt;/grid&gt;
		&lt;grid&gt;
			&lt;columns&gt;
				&lt;column /&gt;
				&lt;column flex="1"/&gt;
			&lt;/columns&gt;
			&lt;rows&gt;
				&lt;row&gt;
					&lt;groupbox&gt;
						&lt;caption&gt;
							&lt;checkbox label="Open main menu on hover" tooltip="tt_8" preference="OpenOnHover" /&gt;
						&lt;/caption&gt;
						&lt;grid&gt;
							&lt;columns&gt;
								&lt;column /&gt;
								&lt;column flex="1"/&gt;
							&lt;/columns&gt;
							&lt;rows&gt;
								&lt;row align="center"&gt;
									&lt;label value="Auto open menu delay"/&gt;
									&lt;textbox flex="1" tooltip="tt_9" maxwidth="70" preference="OpenOnHoverDelayOpen"/&gt;
								&lt;/row&gt;
								&lt;row align="center"&gt;
									&lt;label value="Auto close menu delay"/&gt;
									&lt;textbox flex="1" tooltip="tt_10" maxwidth="70" preference="OpenOnHoverDelayClose"/&gt;
								&lt;/row&gt;
							&lt;/rows&gt;
						&lt;/grid&gt;
					&lt;/groupbox&gt;
					&lt;groupbox tooltip="tt_17"&gt;
						&lt;caption label="Notification position" /&gt;
						&lt;menulist preference="NotificationPosition"&gt;
							&lt;menupopup&gt;
								&lt;menuitem label="Left top" value="1"/&gt;
								&lt;menuitem label="Right top" value="2"/&gt;
								&lt;menuitem label="Left bottom" value="3"/&gt;
								&lt;menuitem label="Right bottom" value="4"/&gt;
								&lt;menuitem label="Center screen" value="5"/&gt;
							&lt;/menupopup&gt;
						&lt;/menulist&gt;
					&lt;/groupbox&gt;
				&lt;/row&gt;
			&lt;/rows&gt;
		&lt;/grid&gt;
	&lt;/prefpane&gt;
	&lt;popupset&gt;
		&lt;tooltip id="tt_0"&gt;
			&lt;description&gt;If checked/enabled, you can set hotkeys to insert the snippets from any item.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_1"&gt;
			&lt;description&gt;If checked/enabled, and your snippet has a &amp;quot;Selection anchor&amp;quot;, the current selected text will still be selected after inserting the snippet. This allows you to insert different snippets to the same selection.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_2"&gt;
			&lt;description&gt;If checked/enabled, and item hotkeys are also enabled, the key combination for the hotkey asigned to an item will be displayed next to the item label.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_3"&gt;
			&lt;description&gt;If checked/enabled, all snippets containing &amp;quot;Evaluators&amp;quot; will be processed. If unchecked/disabled, all snippets containing &amp;quot;Evaluators&amp;quot; will be ignored.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_4"&gt;
			&lt;description&gt;All items in the main menu are saved into a file. Here can be defined a base name for that file.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_5"&gt;
			&lt;description&gt;Here can be defined the &lt;html:strong&gt;&amp;quot;Caret anchor&amp;quot;&lt;/html:strong&gt;. It has to be a combination of exactly 3 characters.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_6"&gt;
			&lt;description&gt;Here can be defined the &lt;html:strong&gt;&amp;quot;Selection anchor&amp;quot;&lt;/html:strong&gt;. It has to be a combination of exactly 3 characters.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_7"&gt;
			&lt;description&gt;Here can be defined the &lt;html:strong&gt;&amp;quot;Evaluator&amp;quot;&lt;/html:strong&gt;. It's better if you don't change this character. The warning symbol (the default character for the &lt;html:strong&gt;&amp;quot;Evaluator&amp;quot;&lt;/html:strong&gt;) is a reminder of how &amp;quot;dangerous&amp;quot; its usage can be.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_8"&gt;
			&lt;description&gt;If checked/enabled, the main menu will be automatically opened on mouse over.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_9"&gt;
			&lt;description&gt;Delay in seconds to open the main menu on mouse hover.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_10"&gt;
			&lt;description&gt;Delay in seconds to close the main menu on mouse out.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_11"&gt;
			&lt;description&gt;If checked/enabled, the content of the items file will be saved with a line break at almost every tag (this makes it a little easier to read). If unchecked/disabled, the content of the items file will be saved in a single line (this makes it hard to read).&lt;/description&gt;
			&lt;description&gt;&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;Note:&lt;/html:strong&gt; This option is usefull only for people that doesn't use a proper text editor software. Now a days, any text editor (that deserves to be called as such) has some sort of HTML/XML &amp;quot;prettifier&amp;quot;.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_12"&gt;
			&lt;description&gt;Set a custom timestamp format for the items file backups.&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;YYYY:&lt;/html:strong&gt; year&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;MM:&lt;/html:strong&gt; month&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;DD:&lt;/html:strong&gt; day&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;hh:&lt;/html:strong&gt; hour&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;mm:&lt;/html:strong&gt; minute&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;ss:&lt;/html:strong&gt; second&lt;/description&gt;
			&lt;description&gt;&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;Note:&lt;/html:strong&gt; The choosen format will be automatically stripped of ilegal characters for file names.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_13"&gt;
			&lt;description&gt;Choose the timestamp that will be added to the backup filenames.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_14"&gt;
			&lt;description&gt;If checked/enabled, a item called &amp;quot;Create snippet inserter item&amp;quot; will be displayed in the page context menu.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_15"&gt;
			&lt;description&gt;If checked/enabled, the main popup will have the appearance of a panel.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_16"&gt;
			&lt;description&gt;If checked/enabled, the hotkeys will be created using the &amp;quot;Addon SDK method&amp;quot;. If unchecked/disabled, hotkeys will be created using &amp;quot;key&amp;quot; elements.&lt;/description&gt;
			&lt;description&gt;&lt;/description&gt;
			&lt;description&gt;Gecko applications have two methods for creating hotkeys (that I know of), through the Addon SDK or by creating &amp;quot;key&amp;quot; elements.&lt;/description&gt;
			&lt;description class="bold_text"&gt;Instant hotkeys ENABLED (Addon SDK method)&lt;/description&gt;
			&lt;description&gt;&lt;html:span class="info"&gt;Pros:&lt;/html:span&gt; Hotkeys start working instantly after creation and/or if you change an existent one.&lt;/description&gt;
			&lt;description&gt;&lt;html:span class="warning"&gt;Cons:&lt;/html:span&gt; Hotkeys will not work on Private windows and, if more that one application window is openend, once a window is closed the hotkeys will stop working on all other windows.&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;Note:&lt;/html:strong&gt; Use Instant hotkeys enabled only if you are a &amp;quot;mono-window&amp;quot; user.&lt;/description&gt;
			&lt;description&gt;&lt;/description&gt;
			&lt;description class="bold_text"&gt;Instant hotkeys DISABLED (&amp;quot;key&amp;quot; element creation)&lt;/description&gt;
			&lt;description&gt;&lt;html:span class="info"&gt;Pros:&lt;/html:span&gt; Hotkeys will work across any opened application window.&lt;/description&gt;
			&lt;description&gt;&lt;html:span class="warning"&gt;Cons:&lt;/html:span&gt; The application may need to be restarted after adding/editing hotkeys. Some key combination are not posible to set (Ctrl+Alt+Shift+1).&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;Note:&lt;/html:strong&gt; Use Instant hotkeys disabled only if you are a &amp;quot;multi-window&amp;quot; user and you don't mind restarting the application each time you add/edit hotkeys.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_17"&gt;
			&lt;description&gt;Choose in which part of the screen the popup notification generated by this button will appear.&lt;/description&gt;
		&lt;/tooltip&gt;
	&lt;/popupset&gt;
&lt;/prefwindow&gt;&lt;!--OptionsWindow--&gt;

&lt;!--StylePanelConvertion--&gt;
#_U_I_D__self_popup {
	-moz-appearance: none !important;
	-moz-binding: url("chrome://global/content/bindings/popup.xml#arrowpanel") !important;
	background: transparent !important;
	border: none !important;
	-moz-image-region: auto !important;
}
&lt;!--StylePanelConvertion--&gt;

&lt;!--Siren--&gt;data:image/gif;base64,R0lGODlhFAARAMMAAYD/gBQJCVMdGUk+QZklH9M3HfVaLJ5PUPtpTb13gue4sv/Hm//47mlTVv6VbQAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFIQAAACwAAAAAFAARAAMEZxDIqZK4IqnJucIDpnVeUhTEcggEIWwkkBxnurJZDBzEWTCrFuGgQ/mALZyud3oZfK6iT8B41gTSJ6EKxcaeVu5VWjAYGK3x14dAY1g6g/DwwbR073xgH9v7/4AdewOEA4CBAIeKigAAIfkECQsAAAAsAgAAABIAEQADBG8QyEkqmTjXwmv+kgMghXSBocM4JFCChYGIisMiaDwDDLPUhk8BIVP1eo7gZ+ZY8I5JUNF59IkyuuYTifsYgornYhH1ypw2hLqL/YrUhpgSQ+DY7RtNRWCxCPgnAAIHBw2Eh4R+AhJ/got/kIuOfwAAOw==&lt;!--Siren--&gt;
&lt;!--Loading--&gt;data:image/png;base64,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&lt;!--Loading--&gt;
</help>
  <attributes/>
</custombutton>