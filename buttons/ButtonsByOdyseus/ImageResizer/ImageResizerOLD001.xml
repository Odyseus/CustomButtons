<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/" xmlns:html="http://www.w3.org/1999/xhtml">
<html:head>
	<html:title><![CDATA[Image Resizer]]></html:title>
	<html:link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACIklEQVQ4jY2TS0hUYRiGn43YRdACo/EMRptaRkwX6QIWRSR4zq6I2rVxY9CioJryHCg3hmFSoQVdzDMxZi1kxHNJhWgRhIFURC66LMSZwZkzM2JmjF+Lxmk8JvXCu/ue93v/D37w6eIoB3SX+4bDuO4Q1x3ihsOY7nBLd6jzzxc1cZTyQX11sP05x8Ij9F0eJWO4SKl1h7zucEePUrEE/lzPqqymxOYaaqcymtI+1lxR3faMDeERrhouC/6gFgereZDyYkCusaYjpwUlpwVlRg3KjyO1796EKAO4NMoJw2W2NOCCy/sinFZrtuc0Jb8YUPBkor66WPOKy2HDYdJwkRYX0W2akjG2iMUecmqw0wdLRg2e8t8obLFZd7h5zqENQCxuiE0/OU15WwrPaIGzK166oESUCrFJisUEWVVJLML5hqoz/4IL22+LjYhFgqyqJH/Dla3/CbeKjRScJKsqH/MNVfGuUKiMnmSAXm/dirDN9RJYxOYDs40BM6Vtatva+XoH0flpIulvPJ4+/hf4vA8WsXiAHCqr6286uZe++VdEPClxUxEeIiA2s8sChtgPwO6O4RDROfEFCL3fTwOkolSKwxff9od/+t3LrMdMv1gWEPEW6P0ZrukaWBOL7dwoFt1ikxKblxKlcukjH02txUx1E/EWljeZ+0okd23Xk+Ft0YGDivg/0xKZqX2Y6buY6XFML07ES2B6nzCzT+mRev/4L1Efe6ctWKX1AAAAAElFTkSuQmCC"/>
	<html:style type="text/css"><![CDATA[body{font-size:medium;margin:0}body,code:before,help:before,initcode:before{font-family:"Verdana",sans-serif}#wrapper{position:fixed;top:1em;right:1em;max-width:15%;text-align:center}#button{background-color:#299a0b;border:1px solid #3a7404;border-radius:.5em;padding:0;margin-bottom:1em;box-shadow:1px 2px 3px rgba(0,0,0,.25)}#button a{color:#f0f0f0;font-weight:700;text-shadow:-.5pt -.5px .5pt rgba(0,0,0,1);padding:.8em;text-decoration:none}:-moz-any-link:focus{color:grey;outline-color:transparent;text-decoration:none}#button a,code,code:before,initcode,initcode:before,help,help:before{display:block}#credits{position:fixed;bottom:1em;right:1em;font-size:small}#about{font-size:small}custombutton{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABAElEQVQ4jW2TQXLFMAhDff+b2vEHYw5AF38eVTNdZAIxCEkmw31VptU5T7mvOuepc56K2B2f85TZrEwr99VxptUwm2U2695PZVrH937KfZX76txsVsTus0yrEbEr0/4F4AyQc56eDMiI2F0IbYoj9h9ZSCV2XzXUA1BVL8BvBvSMiN20zWY38VZ5gDEkYtfAYTRToA3qiQJk2hcA7W8gpaxG0nPvp4aiQ5UCzOV2GKAgLUEfpsGCfaBR92TonapmdCoAjHTIgLa6/14gbgow8oj9uwe6SMQ0qTz9P9oDZOgCkfMNJnqWaV8P3ouDRorUXEA4H1wbtMmVjcrQ7TSb9QMtXcwa4wpbXgAAAABJRU5ErkJggg==) fixed #f6f6f1;margin:1em}date,image,mode,accelkey{display:none}name{font-weight:700;font-size:x-large}code:before,help:before,initcode:before{font-weight:700;font-size:large;margin:0 0 1em;padding:.5em}code:before{content:"Code Tab"}help:before{content:"Help Tab"}initcode:before{content:"Initialization Code Tab"}code,initcode,help{background-color:#fcfcfc;font-size:.875em;font-family:Consolas,"Bitstream Vera Sans Mono","Courier New",Courier,monospace!important;margin:1em 2em 1em 0 !important;padding:1em;text-align:left;box-shadow:2px 2px 0 rgba(170,160,130,0.5),4px 4px 0 rgba(200,190,165,0.5);max-width:80%;min-width:80%;white-space:pre-wrap;word-wrap:break-word}]]></html:style>
</html:head>
<html:body>
	<html:div id="wrapper">
		<html:div id="button">
			<html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EImage%20Resizer%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACIklEQVQ4jY2TS0hUYRiGn43YRdACo/EMRptaRkwX6QIWRSR4zq6I2rVxY9CioJryHCg3hmFSoQVdzDMxZi1kxHNJhWgRhIFURC66LMSZwZkzM2JmjF+Lxmk8JvXCu/ue93v/D37w6eIoB3SX+4bDuO4Q1x3ihsOY7nBLd6jzzxc1cZTyQX11sP05x8Ij9F0eJWO4SKl1h7zucEePUrEE/lzPqqymxOYaaqcymtI+1lxR3faMDeERrhouC/6gFgereZDyYkCusaYjpwUlpwVlRg3KjyO1796EKAO4NMoJw2W2NOCCy/sinFZrtuc0Jb8YUPBkor66WPOKy2HDYdJwkRYX0W2akjG2iMUecmqw0wdLRg2e8t8obLFZd7h5zqENQCxuiE0/OU15WwrPaIGzK166oESUCrFJisUEWVVJLML5hqoz/4IL22+LjYhFgqyqJH/Dla3/CbeKjRScJKsqH/MNVfGuUKiMnmSAXm/dirDN9RJYxOYDs40BM6Vtatva+XoH0flpIulvPJ4+/hf4vA8WsXiAHCqr6286uZe++VdEPClxUxEeIiA2s8sChtgPwO6O4RDROfEFCL3fTwOkolSKwxff9od/+t3LrMdMv1gWEPEW6P0ZrukaWBOL7dwoFt1ikxKblxKlcukjH02txUx1E/EWljeZ+0okd23Xk+Ft0YGDivg/0xKZqX2Y6buY6XFML07ES2B6nzCzT+mRev/4L1Efe6ctWKX1AAAAAElFTkSuQmCC%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5Bvar%20%24%20%3D%20this.ImageResizer%20%3D%20%7B%0A%0A%09Init%3A%20function%28%29%20%7B%0A%09%09if%20%28%21%28%22Services%22%20in%20window%29%29%0A%09%09%09Cu.import%28%22resource%3A//gre/modules/Services.jsm%22%29%3B%0A%0A%09%09%24.InitPrefs%28%29%3B%0A%0A%09%09if%20%28%21%28%24._UID%20in%20window%29%29%20%7B%0A%09%09%09window%5B%24._UID%5D%20%3D%20%7B%0A%09%09%09%09CustomizableUI%3A%20false%2C%0A%09%09%09%09Initialized%3A%20false%0A%09%09%09%7D%3B%0A%09%09%7D%0A%0A%09%09for%20%28var%20p%20in%20%24.DefPrefs%29%20%7B%0A%09%09%09if%20%28%24.DefPrefs.hasOwnProperty%28p%29%29%0A%09%09%09%09%24%5B%22_%22%20+%20p%5D%20%3D%20%24.gPref%28p%29%3B%0A%09%09%7D%0A%0A%09%09if%20%28%21window%5B%24._UID%5D%5B%22Initialized%22%5D%29%20%7B%0A%09%09%09window%5B%24._UID%5D%5B%22Initialized%22%5D%20%3D%20true%3B%0A%09%09%09%24.HandlePrefObserver%28%29%3B%0A%09%09%7D%0A%0A%09%09if%20%28%21%24.%24%28%24._UID%20+%20%22-context-menu%22%29%29%0A%09%09%09%24.convertImageContext.init%28%29%3B%0A%0A%09%09if%20%28%21%24.%24%28%24._UID%20+%20%22-view-favicon%22%29%20%26%26%20%24._pShowViewFaviconInContext%29%0A%09%09%09%24.getFaviconContext.init%28%29%3B%0A%0A%09%09//%20For%20loading%20frame%20scripts.%20What%20a%20%28%25%B7%24%28%26%25%24%26%25%24%29%29%20stupidity%21%21%21%21%21%0A%09%09%24._randomID%20%3D%20parseInt%28Math.random%28%29%20*%2010000%2C%2010%29%3B%0A%09%09window%5B%24._UID%5D%5B%22RandomID%22%5D%20%3D%20%24._randomID%3B%0A%0A%09%09%24.createPreviewPanel%28%29%3B%0A%0A%09%09self.tooltipText%20%3D%20self.name%20+%20%22%20-%20ID%23%3A%20%22%20+%20self.id.slice%2820%29%20+%0A%09%09%09%22%5Cn%5CnLeft%20click%3A%20Open%20options%20window%5Ct%22%3B%0A%09%09self.onclick%20%3D%20function%28aE%29%20%7B%0A%09%09%09if%20%28%28aE.button%20%3D%3D%3D%200%20%26%26%20%21aE.shiftKey%20%26%26%20%21%24.accel%28aE%29%20%26%26%20%21aE.altKey%29%29%20%7B%0A%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%09%24.openOptions%28%29%3B%0A%09%09%09%7D%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%3B%0A%0A%09%09if%20%28%22CustomizableUI%22%20in%20window%29%20%7B%0A%09%09%09if%20%28%21window%5B%24._UID%5D%5B%22CustomizableUI%22%5D%29%20%7B%0A%09%09%09%09window%5B%24._UID%5D%5B%22CustomizableUI%22%5D%20%3D%20true%3B%0A%09%09%09%09CustomizableUI.addListener%28%7B%0A%09%09%09%09%09onCustomizeEnd%3A%20function%28aWindow%29%20%7B%0A%09%09%09%09%09%09var%20thisBtn%20%3D%20aWindow.document.getElementById%28self.id%29%3B%0A%09%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09%09aWindow%5B%24._UID%5D%5B%22CustomizableUI%22%5D%20%26%26%20thisBtn.init%28%29%3B%0A%09%09%09%09%09%09%7D%2C%20Math.floor%28Math.random%28%29%20*%20%281%20+%202000%20-%20200%29%29%20+%20200%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22update%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09//%20Delete%20all%20elements%20created%20by%20this%20button.%0A%09%09%09%09let%20selfEls%20%3D%20document.getElementsByAttribute%28%22cb_id%22%2C%20%24._UID%29%3B%0A%09%09%09%09Array.prototype.slice.call%28selfEls%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09%09aEl.parentNode.removeChild%28aEl%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09%28Services.prefs.getBranch%28%24.Branch%29%29.deleteBranch%28%22%22%29%3B%0A%09%09%09%09Services.prefs.savePrefFile%28null%29%3B%0A%09%09%09%09delete%20window%5B%24._UID%5D%3B%0A%09%09%09%7D%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09createPreviewPanel%3A%20function%28%29%20%7B%0A%09%09let%20popSet%20%3D%20%24.popSet%3B%0A%09%09if%20%28popSet%20%26%26%20%21%24.prevPanel%29%20%7B%0A%09%09%09let%20p%20%3D%20popSet.appendChild%28%24.%24CNS%28%22panel%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-preview-panel%22%2C%0A%09%09%09%09%22xmlns%3Ahtml%22%3A%20%22http%3A//www.w3.org/1999/xhtml%22%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09orient%3A%20%22vertical%22%2C%0A%09%09%09%09level%3A%20%22top%22%2C%0A%09%09%09%09noautofocus%3A%20%22true%22%2C%0A%09%09%09%09consumeoutsideclicks%3A%20%22false%22%2C%0A%09%09%09%09onclick%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.ImageResizer.onPreviewPanelClick%28event%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopuphiding%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.ImageResizer.onPreviewPanelHiding%28event%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopupshowing%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09p.appendChild%28%24.%24CNS%28%22img%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-image%22%2C%0A%09%09%09%09hidden%3A%20true%0A%09%09%09%7D%2C%20xhtmlns%29%29%3B%0A%09%09%09p.appendChild%28%24.%24CNS%28%22canvas%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-canvas%22%0A%09%09%09%7D%2C%20xhtmlns%29%29%3B%0A%09%09%09p.style.setProperty%28%22background%22%2C%20%22transparent%22%2C%20%22important%22%29%3B%0A%09%09%09p.style.setProperty%28%22border%22%2C%20%22none%22%2C%20%22important%22%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09onPreviewPanelHiding%3A%20function%28aE%29%20%7B%0A%09%09%24.canvas.hidden%20%3D%20true%3B%0A%09%09%24.image.hidden%20%3D%20true%3B%0A%09%09let%20alt%20%3D%20Services.wm.getMostRecentWindow%28%22alert%3Aalert%22%29%3B%0A%09%09alt%20%26%26%20alt.close%28%29%3B%0A%09%09aE.stopPropagation%28%29%3B%0A%09%7D%2C%0A%0A%09onPreviewPanelClick%3A%20function%28aE%29%20%7B%0A%09%09%24.prevPanel.hidePopup%28%29%3B%0A%09%09if%20%28%24._pCopyToClipboardOnPanelClick%29%0A%09%09%09%24.copyToClipboard%28%24.dataImage%29%3B%0A%09%09aE.stopPropagation%28%29%3B%0A%09%7D%2C%0A%0A%09convertImageContext%3A%20%7B%0A%09%09init%3A%20function%28%29%20%7B%0A%09%09%09let%20inserPoint%20%3D%20%24.%24%28%22context-sep-copyimage%22%29%3B%0A%09%09%09let%20menu%20%3D%20%24.%24CNS%28%22menu%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-context-menu%22%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09image%3A%20self.image%2C%0A%09%09%09%09label%3A%20%22Image%20Resizer%22%2C%0A%09%09%09%7D%29%3B%0A%09%09%09inserPoint.parentNode.insertBefore%28menu%2C%20inserPoint%29%3B%0A%09%09%09let%20mPop%20%3D%20menu.appendChild%28%24.%24CNS%28%22menupopup%22%2C%20%7B%0A%09%09%09%09orient%3A%20%22vertical%22%2C%0A%09%09%09%09onpopupshowing%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onclick%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09oncommand%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.ImageResizer.convertImageContext.onContextCommand%28event%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09mPop.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20%22Convert%20to%20Base64%22%2C%0A%09%09%09%09tooltiptext%3A%20%22Convert%20image%20to%20Base64%20without%20resizing%20it.%22%2C%0A%09%09%09%09data%3A%20%22convert%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09mPop.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20%22Custom%20size%22%2C%0A%09%09%09%09tooltiptext%3A%20%22Resize%20image%20to%20a%20fixed%20custom%20size%20or%20to%20a%20percentage%20of%20the%20original%20image%20size.%22%2C%0A%09%09%09%09data%3A%20%22custom%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09let%20sizesA%20%3D%20%24._pListOfSizesA.replace%28/%5Cs+/gm%2C%20%22%22%29.split%28%22%2C%22%29.filter%28aSize%20%3D%3E%0A%09%09%09%09aSize%20%21%3D%3D%20%22%22%20%26%26%20%24.isValidSize%28aSize%29%29%3B%0A%09%09%09if%20%28%24._pSortMenuNumerically%29%20%7B%0A%09%09%09%09sizesA.sort%28function%28a%2C%20b%29%20%7B%0A%09%09%09%09%09return%20a.split%28%22x%22%29%5B0%5D%20-%20b.split%28%22x%22%29%5B0%5D%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%0A%09%09%09let%20insPonint%3B%0A%09%09%09if%20%28sizesA.length%20%3E%201%29%20%7B%0A%09%09%09%09%24._pShowSizesAsSubMenus%20%7C%7C%20mPop.appendChild%28%24.%24CNS%28%22dialogheader%22%2C%20%7B%0A%09%09%09%09%09title%3A%20%22Fixed%20sizes%22%2C%0A%09%09%09%09%09tooltiptext%3A%20%22Resize%20images%20to%20a%20fixed%20size.%22%2C%0A%09%09%09%09%09description%3A%20%22%22%2C%0A%09%09%09%09%09style%3A%20%22margin%3A%200%200%207px%200%3Bpadding%3A%202px%200%202px%205px%3Bborder%3Anone%3Bfont-size%3Asmaller%3B%22%2C%0A%09%09%09%09%7D%29%29%3B%0A%09%09%09%09var%20a%20%3D%200%2C%0A%09%09%09%09%09iLen%20%3D%20sizesA.length%2C%0A%09%09%09%09%09insPoint%20%3D%20%24._pShowSizesAsSubMenus%20%3F%0A%09%09%09%09%09mPop.appendChild%28%24.%24CNS%28%22menu%22%2C%20%7B%0A%09%09%09%09%09%09label%3A%20%22Fixed%20sizes%22%2C%0A%09%09%09%09%09%09tooltiptext%3A%20%22Resize%20images%20to%20a%20fixed%20size.%22%2C%0A%09%09%09%09%09%7D%29%29.appendChild%28%24.%24CNS%28%22menupopup%22%2C%20%7B%0A%09%09%09%09%09%09onpopupshowing%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%09%09onpopuphiding%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%09%7D%29%29%20%3A%0A%09%09%09%09%09mPop%3B%0A%0A%09%09%09%09for%20%28%3B%20a%20%3C%20iLen%3B%20a++%29%20%7B%0A%09%09%09%09%09insPoint.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09%09%09label%3A%20sizesA%5Ba%5D%2C%0A%09%09%09%09%09%09data%3A%20%22fixed%22%0A%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09let%20sizesB%20%3D%20%24._pListOfSizesB.replace%28/%5Cs+/gm%2C%20%22%22%29.split%28%22%2C%22%29.filter%28aSize%20%3D%3E%0A%09%09%09%09aSize%20%21%3D%3D%20%22%22%20%26%26%20%24.isValidSize%28aSize%29%29%3B%0A%09%09%09if%20%28%24._pSortMenuNumerically%29%20%7B%0A%09%09%09%09sizesB.sort%28function%28a%2C%20b%29%20%7B%0A%09%09%09%09%09return%20a.split%28%22%25%22%29%5B0%5D%20-%20b.split%28%22%25%22%29%5B0%5D%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%0A%09%09%09if%20%28sizesB.length%20%3E%201%29%20%7B%0A%09%09%09%09%24._pShowSizesAsSubMenus%20%7C%7C%20mPop.appendChild%28%24.%24CNS%28%22dialogheader%22%2C%20%7B%0A%09%09%09%09%09title%3A%20%22Percentages%22%2C%0A%09%09%09%09%09tooltiptext%3A%20%22Resize%20images%20to%20a%20percentage%20of%20the%20original%20image%20size.%22%2C%0A%09%09%09%09%09description%3A%20%22%22%2C%0A%09%09%09%09%09style%3A%20%22margin%3A%200%200%207px%200%3Bpadding%3A%202px%200%202px%205px%3Bborder%3Anone%3Bfont-size%3Asmaller%3B%22%2C%0A%09%09%09%09%7D%29%29%3B%0A%09%09%09%09var%20b%20%3D%200%2C%0A%09%09%09%09%09iLen%20%3D%20sizesB.length%2C%0A%09%09%09%09%09insPoint%20%3D%20%24._pShowSizesAsSubMenus%20%3F%0A%09%09%09%09%09mPop.appendChild%28%24.%24CNS%28%22menu%22%2C%20%7B%0A%09%09%09%09%09%09label%3A%20%22Percentages%22%2C%0A%09%09%09%09%09%09tooltiptext%3A%20%22Resize%20images%20to%20a%20percentage%20of%20the%20original%20image%20size.%22%2C%0A%09%09%09%09%09%7D%29%29.appendChild%28%24.%24CNS%28%22menupopup%22%2C%20%7B%0A%09%09%09%09%09%09onpopupshowing%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%09%09onpopuphiding%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%09%7D%29%29%20%3A%0A%09%09%09%09%09mPop%3B%0A%09%09%09%09for%20%28%3B%20b%20%3C%20iLen%3B%20b++%29%20%7B%0A%09%09%09%09%09insPoint.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09%09%09label%3A%20sizesB%5Bb%5D%2C%0A%09%09%09%09%09%09data%3A%20%22fixed%22%0A%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09let%20contextMenuListener%20%3D%20function%28%29%20%7B%0A%09%09%09%09let%20context%20%3D%20%24.%24%28%24._UID%20+%20%22-context-menu%22%29%3B%0A%09%09%09%09if%20%28gContextMenu%20%26%26%20context%29%0A%09%09%09%09%09context.hidden%20%3D%20%21gContextMenu.onImage%3B%0A%09%09%09%7D%3B%0A%09%09%09let%20ctx%20%3D%20%24.%24%28%22contentAreaContextMenu%22%29%3B%0A%09%09%09if%20%28ctx%29%0A%09%09%09%09ctx.addEventListener%28%22popupshowing%22%2C%20contextMenuListener%2C%20false%29%3B%0A%09%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09%09if%20%28aReason%20%3D%3D%3D%20%22update%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09%09ctx.removeEventListener%28%22popupshowing%22%2C%20contextMenuListener%2C%20false%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%29%3B%0A%09%09%7D%2C%0A%09%09onContextCommand%3A%20function%28aE%29%20%7B%0A%09%09%09let%20img%20%3D%20gContextMenu.target.src%3B%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09let%20type%20%3D%20aE.target.getAttribute%28%22data%22%29%3B%0A%09%09%09if%20%28type%20%3D%3D%3D%20%22custom%22%29%20%7B%0A%09%09%09%09let%20value%20%3D%20%24.promptme%28%22Enter%20size%20in%20width%20x%20height%20format%20like%20this%3A%20128x128%5Cn%22%20+%0A%09%09%09%09%09%22Or%20enter%20a%20percentage%20like%20this%3A%2025%25%22%2C%20%22%22%29%3B%0A%09%09%09%09if%20%28value%29%20%7B%0A%09%09%09%09%09if%20%28%21%24.isValidSize%28value%29%29%20%7B%0A%09%09%09%09%09%09%24.alertme%28%22Your%20input%20does%20not%20conform%20to%20the%20width%20x%20height%20nor%20percentage%20format%21%21%21%22%29%3B%0A%09%09%09%09%09%09return%20false%3B%0A%09%09%09%09%09%7D%20else%0A%09%09%09%09%09%09%24.processImage%28img%2C%20value%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%20else%20if%20%28type%20%3D%3D%3D%20%22fixed%22%29%20%7B%0A%09%09%09%09%24.processImage%28img%2C%20aE.target.getAttribute%28%22label%22%29%29%3B%0A%09%09%09%7D%20else%20if%20%28type%20%3D%3D%3D%20%22convert%22%29%20%7B%0A%09%09%09%09%24.processImage%28img%2C%200%29%3B%0A%09%09%09%7D%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%09%7D%2C%0A%0A%09getFaviconContext%3A%20%7B%0A%09%09init%3A%20function%28%29%20%7B%0A%09%09%09let%20ctx%20%3D%20%24.%24%28%22contentAreaContextMenu%22%29%3B%0A%09%09%09if%20%28ctx%29%20%7B%0A%09%09%09%09let%20favItem%20%3D%20%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09%09id%3A%20%24._UID%20+%20%22-view-favicon%22%2C%0A%09%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09%09label%3A%20%22View%20current%20site%27s%20favicon%22%2C%0A%09%09%09%09%09onclick%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%09oncommand%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%09%22%27%29.ImageResizer.getFaviconContext.onContextCommand%28event%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09ctx.appendChild%28favItem%29%3B%0A%09%09%09%7D%0A%09%09%7D%2C%0A%09%09onContextCommand%3A%20function%28aE%29%20%7B%0A%09%09%09let%20URL%20%3D%20document.defaultView.top.location.href%3B%0A%09%09%09var%20done%20%3D%20function%28aFavURI%29%20%7B%0A%09%09%09%09if%20%28%21aFavURI%29%0A%09%09%09%09%09aFavURI%20%3D%20gBrowser.selectedTab.image%3B%0A%09%09%09%09if%20%28aFavURI%29%0A%09%09%09%09%09gBrowser.selectedTab%20%3D%20gBrowser.addTab%28aFavURI.spec%20%7C%7C%20aFavURI%2C%20null%2C%20null%29%3B%0A%09%09%09%7D%3B%0A%09%09%09try%20%7B%0A%09%09%09%09var%20uri%20%3D%20Services.io.newURI%28URL%2C%20null%2C%20null%29%3B%0A%09%09%09%09%24.asyncFavicons.getFaviconURLForPage%28uri%2C%20done%29%3B%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09%09done%28%29%3B%0A%09%09%09%7D%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%09%7D%2C%0A%0A%09isValidSize%3A%20function%28aData%29%20%7B%0A%09%09return%20%28aData.match%28/%5Cd/%29%20%26%26%20aData.match%28/%5E%5Cs*%5Cd*%5Cs*x%5Cs*%5Cd*%5Cs*%24/i%29%29%20%7C%7C%20/%5E%5Cs*%5Cd*%5Cs*%25%24/.test%28aData%29%3B%0A%09%7D%2C%0A%0A%09copyToClipboard%3A%20function%28aData%29%20%7B%0A%09%09gClipboard.write%28aData%29%3B%0A%09%09if%20%28%24._pShowNotification%29%20%7B%0A%09%09%09%24.notifyme%28self.name%2C%0A%09%09%09%09%22Base64%20image%20copied%20to%20clipboard.%22%2C%0A%09%09%09%09%24.getHelp%28%22%25AlertImg%25%22%29%2C%0A%09%09%09%09%24.alertCallback%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09showImage%3A%20function%28aDataImage%29%20%7B%0A%09%09switch%20%28%24._pShowImageAfterConvertion%29%20%7B%0A%09%09%09case%200%3A%0A%09%09%09%09return%20true%3B%0A%09%09%09case%201%3A%0A%09%09%09%09let%20xPos%20%3D%20%28screen.availWidth%20/%202%29%20-%20%28%24.prevPanel.width%20/%202%29%2C%0A%09%09%09%09%09yPos%20%3D%20%28screen.availHeight%20/%202%29%20-%20%28%24.prevPanel.height%20/%202%29%3B%0A%09%09%09%09%24.prevPanel.openPopupAtScreen%28xPos%2C%20yPos%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%202%3A%20//%20New%20tab%20foreground%0A%09%09%09%09if%20%28aDataImage.length%20%3C%202000000%29%0A%09%09%09%09%09gBrowser.selectedTab%20%3D%20gBrowser.addTab%28aDataImage%2C%20null%2C%20null%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%203%3A%20//%20New%20tab%20background%0A%09%09%09%09if%20%28aDataImage.length%20%3C%202000000%29%0A%09%09%09%09%09gBrowser.addTab%28aDataImage%2C%20null%2C%20null%29%3B%0A%09%09%09%09break%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09processImage%3A%20function%28aCtxImg%2C%20aSize%29%20%7B%0A%09%09//%20Use%20of%20the%20base64%20converted%20image%20instead%20of%20the%20original%20image%20source%20to%20avoid%20Cross-origin%20crap.%0A%09%09%24.img_to_b64_cback%28aCtxImg%2C%20function%28aImgData%29%20%7B%0A%09%09%09let%20imgEl%20%3D%20%24.image%3B%0A%09%09%09imgEl.src%20%3D%20aImgData%3B%0A%09%09%09imgEl.onload%20%3D%20function%28%29%20%7B%0A%09%09%09%09let%20dataObj%20%3D%20aSize%20%3D%3D%3D%200%20%3F%20null%20%3A%20%24.processSize%28imgEl%2C%20aSize%29%3B%0A%09%09%09%09let%20canvas%20%3D%20%24.canvas%3B%0A%09%09%09%09if%20%28aSize%20%3D%3D%3D%200%29%20%7B%20//%20If%20just%20convert%20to%20Base64%2C%20no%20resizing.%0A%09%09%09%09%09if%20%28%24._pAutoCopyToClipboard%29%0A%09%09%09%09%09%09%24.copyToClipboard%28aImgData%29%3B%0A%09%09%09%09%09%24.showImage%28aImgData%29%3B%0A%09%09%09%09%09//%20Show%20the%20image%20%28not%20resized%29%2C%20not%20the%20canvas%20%28resized%29.%0A%09%09%09%09%09imgEl.hidden%20%3D%20false%3B%0A%09%09%09%09%09canvas.hidden%20%3D%20true%3B%0A%09%09%09%09%09return%20true%3B%0A%09%09%09%09%7D%0A%09%09%09%09canvas.width%20%3D%20dataObj.width%3B%0A%09%09%09%09canvas.height%20%3D%20dataObj.height%3B%0A%09%09%09%09var%20ctx%20%3D%20canvas.getContext%28%222d%22%29%3B%0A%09%09%09%09//%20Show%20the%20canvas%20%28resized%29%2C%20not%20the%20image%20%28not%20resized%29.%0A%09%09%09%09imgEl.hidden%20%3D%20true%3B%0A%09%09%09%09canvas.hidden%20%3D%20false%3B%0A%09%09%09%09ctx.drawImage%28imgEl%2C%200%2C%200%2C%20dataObj.width%2C%20dataObj.height%29%3B%0A%09%09%09%09let%20dataImage%20%3D%20canvas.toDataURL%28%22image/png%22%29%3B%0A%09%09%09%09if%20%28%24._pAutoCopyToClipboard%29%0A%09%09%09%09%09%24.copyToClipboard%28dataImage%29%3B%0A%09%09%09%09%24.showImage%28dataImage%29%3B%0A%09%09%09%7D%3B%0A%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09processSize%3A%20function%28aCtxImg%2C%20aSize%29%20%7B%0A%09%09var%20width%2C%20height%20%3D%200%3B%0A%09%09if%20%28/%25/.test%28aSize%29%29%20%7B%0A%09%09%09let%20percent%20%3D%20parseInt%28aSize.split%28/%25/i%29%5B0%5D%20-%200%2C%2010%29%3B%0A%09%09%09width%20%3D%20%28percent%20*%20aCtxImg.width%29%20/%20100%3B%0A%09%09%09height%20%3D%20%28percent%20*%20aCtxImg.height%29%20/%20100%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09let%20size%20%3D%20aSize.split%28/x/i%29%3B%0A%09%09%09width%20%3D%20parseInt%28%28size%5B0%5D%20%7C%7C%200%29%20-%200%2C%2010%29%3B%0A%09%09%09height%20%3D%20parseInt%28%28size%5B1%5D%20%7C%7C%200%29%20-%200%2C%2010%29%3B%0A%09%09%7D%0A%09%09return%20%7B%0A%09%09%09width%3A%20width%2C%0A%09%09%09height%3A%20height%2C%0A%09%09%7D%3B%0A%09%7D%2C%0A%0A%09img_to_b64_cback%3A%20function%28aURL%2C%20aCallback%29%20%7B%0A%09%09if%20%28%21aURL%29%0A%09%09%09aCallback%28false%29%3B%0A%09%09else%20%7B%0A%09%09%09let%20xhr%20%3D%20new%20XMLHttpRequest%28%29%2C%0A%09%09%09%09nsIMIMEService%20%3D%20Cc%5B%22@mozilla.org/mime%3B1%22%5D.getService%28Ci.nsIMIMEService%29%3B%0A%09%09%09try%20%7B%0A%09%09%09%09xhr.open%28%22GET%22%2C%20aURL%2C%20true%29%3B%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09%09aCallback%28false%29%3B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%0A%09%09%09xhr.responseType%20%3D%20%22arraybuffer%22%3B%0A%09%09%09xhr.onload%20%3D%20function%28%29%20%7B%0A%09%09%09%09let%20mediaType%2C%0A%09%09%09%09%09dataURI%2C%0A%09%09%09%09%09binary%2C%0A%09%09%09%09%09bytes%3B%0A%09%09%09%09bytes%20%3D%20new%20Uint8Array%28xhr.response%29%3B%0A%09%09%09%09binary%20%3D%20%5B%5D.map.call%28bytes%2C%20function%28aByte%29%20%7B%0A%09%09%09%09%09return%20String.fromCharCode%28aByte%29%3B%0A%09%09%09%09%7D%29.join%28%22%22%29%3B%0A%09%09%09%09mediaType%20%3D%20xhr.getResponseHeader%28%22Content-Type%22%29%3B%0A%09%09%09%09let%20base64%20%3D%20btoa%28binary%29%3B%0A%09%09%09%09if%20%28mediaType.indexOf%28%22image/%22%29%20%21%3D%3D%200%29%20%7B%0A%09%09%09%09%09try%20%7B%0A%09%09%09%09%09%09mediaType%20%3D%20nsIMIMEService.getTypeFromURI%28Services.io.newURI%28aURL%2C%20null%2C%20null%29%29%3B%0A%09%09%09%09%09%7D%20catch%20%28aError%29%20%7B%0A%09%09%09%09%09%09mediaType%20%3D%20%22image/png%22%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09dataURI%20%3D%20%22data%3A%22%20+%20mediaType%20+%20%22%3Bbase64%2C%22%20+%20base64%3B%0A%09%09%09%09aCallback%28dataURI%29%3B%0A%09%09%09%7D%3B%0A%09%09%09xhr.onerror%20%3D%20function%28%29%20%7B%0A%09%09%09%09aCallback%28false%29%3B%0A%09%09%09%7D%3B%0A%09%09%09xhr.send%28null%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09/**%0A%09%20*%20NEVER%20CHANGE%20TO%20%22BRANCH%20OBSERVER%22%21%21%21%21%0A%09%20*/%0A%09HandlePrefObserver%3A%20function%28aRem%29%20%7B%0A%09%09var%20prefs%20%3D%20%24.DefPrefs%3B%0A%09%09for%20%28let%20key%20in%20prefs%29%20%7B%0A%09%09%09let%20pref%20%3D%20%24.Branch%20+%20key%3B%0A%09%09%09if%20%28prefs.hasOwnProperty%28key%29%29%20%7B%0A%09%09%09%09if%20%28aRem%29%0A%09%09%09%09%09Services.prefs.removeObserver%28pref%2C%20%24.prefObserver%29%3B%0A%09%09%09%09else%0A%09%09%09%09%09Services.prefs.addObserver%28pref%2C%20%24.prefObserver%2C%20false%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09prefObserver%3A%20%7B%0A%09%09observe%3A%20function%28aSubject%2C%20aTopic%2C%20aPStr%29%20%7B%0A%09%09%09if%20%28aTopic%20%3D%3D%3D%20%22nsPref%3Achanged%22%29%20%7B%0A%09%09%09%09%24%5B%22_%22%20+%20aPStr%5D%20%3D%20%24.gPref%28aPStr%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09selfDestroy%3A%20function%28%29%20%7B%0A%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09self.destroy%28%22update%22%29%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09self.init%28%29%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%7D%2C%20100%29%3B%0A%09%7D%2C%0A%0A%09openOptions%3A%20function%28%29%20%7B%0A%09%09var%20em%20%3D%20Services.ww.getWindowEnumerator%28%29%3B%0A%09%09var%20winName%20%3D%20%22image_to_base64_settings_window_%22%20+%20self.id%3B%0A%09%09var%20index%20%3D%201%3B%0A%09%09while%20%28em.hasMoreElements%28%29%29%20%7B%0A%09%09%09let%20win%20%3D%20em.getNext%28%29%3B%0A%09%09%09if%20%28win.name%20%3D%3D%3D%20winName%29%20%7B%0A%09%09%09%09win.focus%28%29%3B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09index++%3B%0A%09%09%7D%0A%09%09let%20xul%20%3D%20%24.getHelp%28%22%25OptionsWindow%25%22%29%3B%0A%09%09let%20storage%20%3D%20%7B%0A%09%09%09button%3A%20self%0A%09%09%7D%3B%0A%09%09xul%20%3D%20xul.replace%28/%3E%5Cs+%3C/g%2C%20%22%3E%3C%22%29%3B%0A%09%09xul%20%3D%20xul.split%28%22%25S_E_L_F_I_D%25%22%29.join%28self.id%29%3B%0A%09%09xul%20%3D%20xul.split%28%22%25B_R_A_N_C_H%25%22%29.join%28%24.Branch%29%3B%0A%09%09let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28xul%29%3B%0A%09%09let%20win%20%3D%20openDialog%28url%2C%20winName%2C%20%22chrome%2C%20resizable%2C%20dependant%2C%20dialog%2C%20centerscreen%2C%20close%2C%20alwaysRaised%22%29%3B%0A%09%09win._storage%20%3D%20storage%3B%0A%09%7D%2C%0A%0A%09promptme%3A%20function%28aMsg%2C%20aVal%29%20%7B%0A%09%09let%20retVal%20%3D%20%7B%0A%09%09%09value%3A%20aVal%0A%09%09%7D%3B%0A%09%09if%20%28Services.prompt.prompt%28null%2C%20self.name%2C%20aMsg%2C%20retVal%2C%20null%2C%20%7B%7D%29%29%0A%09%09%09return%20retVal.value%3B%0A%09%09else%0A%09%09%09return%20false%3B%0A%09%09return%20false%3B%0A%09%7D%2C%0A%0A%09alertme%3A%20function%28aMsg%29%20%7B%0A%09%09Services.prompt.alert%28null%2C%20self.name%2C%20aMsg%29%3B%0A%09%7D%2C%0A%0A%09notifyme%3A%20function%28aTitle%2C%20aMsg%2C%20aImg%2C%20aCallback%29%20%7B%20//%20Notification%20function%0A%09%09let%20origin%20%3D%20%28Services.prefs.getPrefType%28%22ui.alertNotificationOrigin%22%29%20%21%3D%3D%200%29%20%3F%0A%09%09%09Services.prefs.getIntPref%28%22ui.alertNotificationOrigin%22%29%20%3A%0A%09%09%09null%3B%0A%09%09let%20win%20%3D%20Services.ww.openWindow%28null%2C%20%22chrome%3A//global/content/alerts/alert.xul%22%2C%0A%09%09%09%22_blank%22%2C%20%22chrome%2Ctitlebar%3Dno%2Cpopup%3Dyes%22%2C%20null%29%3B%0A%09%09win.arguments%20%3D%20%5BaImg%2C%20aTitle%2C%20aMsg%2C%20%21%21aCallback%2C%20%22%22%2C%20origin%2C%20%22%22%2C%20%22%22%2C%20null%2C%20%28%21%21aCallback%20%3F%20aCallback%20%3A%20null%29%5D%3B%0A%09%7D%2C%0A%0A%09getHelp%3A%20function%28aPlaceholder%29%20%7B%20//%20Get%20specific%20data%2C%20surrounded%20by%20%22placeholders%22%2C%20from%20the%20Help%20tab.%0A%09%09return%20self.getAttribute%28%22Help%22%29.split%28%22%3C%21--%22%20+%20aPlaceholder%20+%20%22--%3E%22%29%5B1%5D%3B%0A%09%7D%2C%0A%0A%09alertCallback%3A%20%7B%0A%09%09observe%3A%20function%28aSubject%2C%20aTopic%2C%20aData%29%20%7B%0A%09%09%09let%20alt%20%3D%20Services.wm.getMostRecentWindow%28%22alert%3Aalert%22%29%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09alt.close%28%29%3B%0A%09%09%09%7D%2C%205000%29%3B%0A%09%09%09if%20%28aTopic%20%3D%3D%3D%20%22alertclickcallback%22%29%0A%09%09%09%09alt.close%28%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09%24%3A%20function%28aId%29%20%7B%20//%20Return%20elements%20by%20Id%0A%09%09return%20document.getElementById%28aId%29%3B%0A%09%7D%2C%0A%0A%09%24CNS%3A%20function%28aElName%2C%20aAttrs%2C%20aNS%29%20%7B%20//%20Creates%20elements%0A%09%09var%20el%20%3D%20aNS%20%3F%0A%09%09%09document.createElementNS%28aNS%2C%20aElName%29%20%3A%0A%09%09%09document.createElement%28aElName%29%3B%0A%09%09if%20%28aAttrs%29%0A%09%09%09Object.keys%28aAttrs%29.forEach%28function%28n%29%20%7B%0A%09%09%09%09if%20%28aAttrs%5Bn%5D%20%21%3D%3D%20%22%22%29%0A%09%09%09%09%09el.setAttribute%28n%2C%20aAttrs%5Bn%5D%29%3B%0A%09%09%09%7D%29%3B%0A%09%09aElName%20%3D%3D%3D%20%22menu%22%20%26%26%20el.classList.add%28%22menu-iconic%22%29%3B%0A%09%09aElName%20%3D%3D%3D%20%22menuitem%22%20%26%26%20el.classList.add%28%22menuitem-iconic%22%29%3B%0A%09%09return%20el%3B%0A%09%7D%2C%0A%0A%09_UID%3A%20%22__image_resizer%22%20+%20self.id.slice%2820%29%2C%0A%09asyncFavicons%3A%20Cc%5B%22@mozilla.org/browser/favicon-service%3B1%22%5D.getService%28Ci.mozIAsyncFavicons%29%2C%0A%09dataImage%3A%20null%2C%0A%09accel%3A%20function%28aE%29%20%7B%0A%09%09let%20isOSX%20%3D%20Services.appinfo.OS.toLowerCase%28%29.startsWith%28%22darwin%22%29%3B%0A%09%09if%20%28aE%29%0A%09%09%09return%20isOSX%20%3F%20aE.metaKey%20%3A%20aE.ctrlKey%3B%0A%09%09return%20isOSX%20%3F%20%22Command%22%20%3A%20%22Control%22%3B%0A%09%7D%2C%0A%09get%20canvas%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22-canvas%22%29%3B%0A%09%7D%2C%0A%09get%20image%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22-image%22%29%3B%0A%09%7D%2C%0A%09get%20prevPanel%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22-preview-panel%22%29%3B%0A%09%7D%2C%0A%09get%20popSet%28%29%20%7B%0A%09%09let%20pSet%20%3D%20%24.%24%28%22mainPopupSet%22%29%20%7C%7C%20%24.%24%28%24._UID%20+%20%22_popupset%22%29%3B%0A%09%09if%20%28%21pSet%29%20%7B%0A%09%09%09try%20%7B%0A%09%09%09%09pSet%20%3D%20%24.%24%28%22msgcomposeWindow%22%29.appendChild%28%24.%24CNS%28%22popupset%22%2C%20%7B%0A%09%09%09%09%09id%3A%20%24._UID%20+%20%22_popupset%22%2C%0A%09%09%09%09%09cb_id%3A%20%24._UID%0A%09%09%09%09%7D%29%29%3B%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%7D%0A%09%09%7D%0A%09%09return%20pSet%3B%0A%09%7D%2C%0A%7D%3B%0A%0Athis.ImageResizer.Branch%20%3D%20%22CB.ImageResizer.Id%22%20+%20self.id.slice%2820%29%20+%20%22.%22%3B%0A%0Athis.ImageResizer.DefPrefs%20%3D%20%7B%0A%09pListOfSizesA%3A%20%2216x16%2C%5Cn32x32%2C%5Cn64x64%2C%5Cn128x128%2C%5Cn256x256%22%2C%0A%09pListOfSizesB%3A%20%2220%25%2C%5Cn40%25%2C%5Cn60%25%2C%5Cn80%25%22%2C%0A%09pShowImageAfterConvertion%3A%201%2C%0A%09pAutoCopyToClipboard%3A%20true%2C%0A%09pCopyToClipboardOnPanelClick%3A%20false%2C%0A%09pSortMenuNumerically%3A%20true%2C%0A%09pShowSizesAsSubMenus%3A%20false%2C%0A%09pShowNotification%3A%20true%2C%0A%09pShowViewFaviconInContext%3A%20true%2C%0A%7D%3B%0A%0Athis.ImageResizer.InitPrefs%20%3D%20function%28%29%20%7B%0A%09var%20branch%20%3D%20Services.prefs.getDefaultBranch%28%24.Branch%29%2C%0A%09%09defaults%20%3D%20self.ImageResizer.DefPrefs%3B%0A%09for%20%28var%20key%20in%20defaults%29%20%7B%0A%09%09if%20%28defaults.hasOwnProperty%28key%29%29%20%7B%0A%09%09%09var%20val%20%3D%20defaults%5Bkey%5D%3B%0A%09%09%09switch%20%28typeof%20val%29%20%7B%0A%09%09%09%09case%20%22boolean%22%3A%0A%09%09%09%09%09branch.setBoolPref%28key%2C%20val%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22number%22%3A%0A%09%09%09%09%09branch.setIntPref%28key%2C%20val%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22string%22%3A%0A%09%09%09%09%09var%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%09%09%09%09%09str.data%20%3D%20val%3B%0A%09%09%09%09%09branch.setComplexValue%28%28key%29%2C%0A%09%09%09%09%09%09Ci.nsISupportsString%2C%20str%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%7D%3B%0A%0Athis.ImageResizer.gPref%20%3D%20function%28aKey%29%20%7B%0A%09var%20branch%20%3D%20Services.prefs.getBranch%28%24.Branch%29%3B%0A%09switch%20%28typeof%20self.ImageResizer.DefPrefs%5BaKey%5D%29%20%7B%0A%09%09case%20%22boolean%22%3A%0A%09%09%09return%20branch.getBoolPref%28aKey%29%3B%0A%09%09case%20%22number%22%3A%0A%09%09%09return%20branch.getIntPref%28aKey%29%3B%0A%09%09case%20%22string%22%3A%0A%09%09%09return%20branch.getComplexValue%28aKey%2C%20Ci.nsISupportsString%29.data%3B%0A%09%7D%0A%09return%20null%3B%0A%7D%3B%0A%0Athis.ImageResizer.sPref%20%3D%20function%28aKey%2C%20aVal%29%20%7B%0A%09var%20branch%20%3D%20Services.prefs.getBranch%28%24.Branch%29%3B%0A%09switch%20%28typeof%20aVal%29%20%7B%0A%09%09case%20%22boolean%22%3A%0A%09%09%09branch.setBoolPref%28aKey%2C%20aVal%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22number%22%3A%0A%09%09%09branch.setIntPref%28aKey%2C%20aVal%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22string%22%3A%0A%09%09%09var%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%09%09%09str.data%20%3D%20aVal%3B%0A%09%09%09branch.setComplexValue%28%28aKey%29%2C%20Ci.nsISupportsString%2C%20str%29%3B%0A%09%09%09break%3B%0A%09%7D%0A%7D%3B%0A%0Athis.ImageResizer.Init%28%29%3B%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*CODE*/%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%uD835%uDDDC%uD835%uDDFA%uD835%uDDFD%uD835%uDDFC%uD835%uDDFF%uD835%uDE01%uD835%uDDEE%uD835%uDDFB%uD835%uDE01%20%uD835%uDDFB%uD835%uDDFC%uD835%uDE01%uD835%uDDF2%uD835%uDE00%0A%u26AB%20%uD835%uDDD7%uD835%uDDE2%20%uD835%uDDE1%uD835%uDDE2%uD835%uDDE7%20%uD835%uDDF6%uD835%uDDFB%uD835%uDE00%uD835%uDE01%uD835%uDDEE%uD835%uDDF9%uD835%uDDF9%20%uD835%uDDFA%uD835%uDDFC%uD835%uDDFF%uD835%uDDF2%20%uD835%uDE01%uD835%uDDF5%uD835%uDDEE%uD835%uDDFB%20%uD835%uDDFC%uD835%uDDFB%uD835%uDDF2%20%uD835%uDE03%uD835%uDDF2%uD835%uDDFF%uD835%uDE00%uD835%uDDF6%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDFC%uD835%uDDF3%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDEE%uD835%uDE01%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF2%20%uD835%uDE00%uD835%uDDEE%uD835%uDDFA%uD835%uDDF2%20%uD835%uDE01%uD835%uDDF6%uD835%uDDFA%uD835%uDDF2%u2757%u2757%u2757%0A%u26AB%20%uD835%uDDD7%uD835%uDDE2%20%uD835%uDDE1%uD835%uDDE2%uD835%uDDE7%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDFC%uD835%uDDFB%uD835%uDDF2%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%u2757%u2757%u2757%0A%u26AB%20If%20you%20did%20any%20of%20the%20previous%20actions%2C%20delete%20all%20extra%20buttons%20leaving%20only%20one%20version%20of%20%uD835%uDDDC%uD835%uDDFA%uD835%uDDEE%uD835%uDDF4%uD835%uDDF2%20%uD835%uDE01%uD835%uDDFC%20%uD835%uDDD5%uD835%uDDEE%uD835%uDE00%uD835%uDDF2%uD835%uDFF2%uD835%uDFF0%20and%20restart%20your%20application.%0A%0A%0A%uD835%uDDEA%uD835%uDDD4%uD835%uDDE5%uD835%uDDE1%uD835%uDDDC%uD835%uDDE1%uD835%uDDDA%u2757%u2757%20%uD835%uDDD5%uD835%uDDD8%20%uD835%uDDD6%uD835%uDDD4%uD835%uDDE5%uD835%uDDD8%uD835%uDDD9%uD835%uDDE8%uD835%uDDDF%20%uD835%uDDDC%uD835%uDDD9%20%uD835%uDDEC%uD835%uDDE2%uD835%uDDE8%20%uD835%uDDD8%uD835%uDDD7%uD835%uDDDC%uD835%uDDE7%20%uD835%uDDE7%uD835%uDDDB%uD835%uDDD8%20%uD835%uDDDB%uD835%uDDD8%uD835%uDDDF%uD835%uDDE3%20%uD835%uDDE7%uD835%uDDD4%uD835%uDDD5%20%uD835%uDDE2%uD835%uDDD9%20%uD835%uDDE7%uD835%uDDDB%uD835%uDDDC%uD835%uDDE6%20%uD835%uDDD5%uD835%uDDE8%uD835%uDDE7%uD835%uDDE7%uD835%uDDE2%uD835%uDDE1%u2757%u2757%u2757%0A%uD835%uDDDC%uD835%uDDE7%20%uD835%uDDD6%uD835%uDDE2%uD835%uDDE8%uD835%uDDDF%uD835%uDDD7%20%uD835%uDDD5%uD835%uDDE5%uD835%uDDD8%uD835%uDDD4%uD835%uDDDE%20%uD835%uDDDC%uD835%uDDE7%uD835%uDDE6%20%uD835%uDDD9%uD835%uDDE8%uD835%uDDE1%uD835%uDDD6%uD835%uDDDC%uD835%uDDE2%uD835%uDDE1%uD835%uDDD4%uD835%uDDDF%uD835%uDDDC%uD835%uDDE7%uD835%uDDEC%u2757%u2757%u2757%0A%0A%5B%2C%5D%0A/*******************************************************/%0A/*%20FROM%20THIS%20POINT%20DOWN%20DO%20NOT%20EDIT/DELETE%20ANYTHING%21%21%21%20*/%0A/*******************************************************/%0A%0A%26lt%3B%21--%25OptionsWindow%25--%26gt%3B%26lt%3B%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22data%3Atext/css%3Bcharset%3Dutf-8%2C%0Aprefwindow%20*%20%7B%0A%09font-family%3A%20%26amp%3Bquot%3BOpen%20Sans%26amp%3Bquot%3B%2C%20Helvetica%2C%20Arial%2C%20sans-serif%20%21important%3B%0A%7D%0Acaption%20.caption-text%2C%0A.bold_text%20%7B%0A%09font-weight%3A%20bold%20%21important%3B%0A%7D%0A/*%20Force%20groupboxes%20on%20Linux%20to%20have%20the%20same%20appearance%20than%20in%20Windows%20*/%0A/*%20Just%20because%20it%20makes%20effing%20sence%21%21%21%21%20*/%0A/*%20Why%20have%20elements%20grouped%20inside%20a%20groupbox%20and%20not%20visually%20delimited%3F%21%3F%21%3F%21%20*/%0Agroupbox%20%7B%0A%09-moz-appearance%3A%20groupbox%20%21important%3B%0A%09border%3A%202px%20groove%20ThreeDFace%20%21important%3B%0A%09border-radius%3A%203px%20%21important%3B%0A%09margin%3A%203px%20%21important%3B%0A%09padding%3A%203px%203px%206px%20%21important%3B%0A%7D%0A.groupbox-body%20%7B%0A%09padding%3A%20inherit%20%21important%3B%0A%7D%0Acaption%20%7B%0A%09margin%3A%200%206px%20%21important%3B%0A%09background-color%3A%20-moz-Dialog%20%21important%3B%0A%7D%0Atabpanels%20caption%20%7B%0A%09-moz-appearance%3A%20tabpanel%20%21important%3B%0A%7D%0A/*%20%21important%20is%20needed%20to%20override%20label%20in%20global.css%20*/%0A.caption-text%20%7B%0A%09margin%3A%200%202px%20%21important%3B%0A%7D%0A%0A%22%20type%3D%22text/css%22%20%3F%26gt%3B%0A%26lt%3Bprefwindow%20id%3D%22image_to_base64_settings_window_%25S_E_L_F_I_D%25%22%0A%09%09%09%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%0A%09%09%09%20xmlns%3Ahtml%3D%22http%3A//www.w3.org/1999/xhtml%22%0A%09%09%09%20onload%3D%22%24.onLoad%28%29%3B%22%0A%09%09%09%20onunload%3D%22%24.onUnload%28%29%3B%22%0A%09%09%09%20buttons%3D%22accept%2Ccancel%2Cextra1%22%0A%09%09%09%20buttonlabelextra1%3D%22Apply%22%0A%09%09%09%20ondialogextra1%3D%22%24.onApply%28%29%3B%22%0A%09%09%09%20title%3D%22Image%20Resizer%20settings%22%26gt%3B%0A%09%09%09%09%26lt%3Bscript%26gt%3B%0A%09%09%26lt%3B%21%5BCDATA%5B%0Avar%20cb_btn%20%3D%20window._storage.button%3B%0A%0Afunction%20%24id%28id%29%20%7B%0A%09return%20document.getElementById%28id%29%0A%7D%3B%0Avar%20%24%20%3D%20%7B%0A%09_initialized%3A%20false%2C%0A%09onLoad%3A%20function%28%29%20%7B%0A%09%09this._initialized%20%3D%20true%3B%0A%09%09var%20docElt%20%3D%20document.documentElement%3B%0A%09%09this.instantApply%20%3D%20docElt.instantApply%3B%0A%09%09window.addEventListener%28%22change%22%2C%20this%2C%20false%29%3B%0A%09%09docElt.getButton%28%22extra1%22%29.setAttribute%28%22icon%22%2C%20%22apply%22%29%3B%0A%09%09docElt.setAttribute%28%22cancelbuttonlabel%22%2C%20docElt.mStrBundle.GetStringFromName%28%22button-cancel%22%29%29%3B%0A%09%09this.setButtons%28true%29%3B%0A%09%7D%2C%0A%09handleEvent%3A%20function%28aE%29%20%7B%0A%09%09switch%20%28aE.type%29%20%7B%0A%09%09%09case%20%22change%22%3A%0A%09%09%09%09if%20%28aE.target.localName%20%21%3D%20%22preference%22%29%0A%09%09%09%09%09return%3B%0A%09%09%09%09if%20%28%21this.instantApply%29%0A%09%09%09%09%09this.updateApplyButton%28aE%29%3B%0A%09%09%09%09break%3B%0A%09%09%7D%0A%09%7D%2C%0A%09changes%3A%20%5B%5D%2C%0A%09updateApplyButton%3A%20function%28aE%29%20%7B%0A%09%09var%20item%20%3D%20aE.target%3B%0A%09%09if%20%28item.localName%20%21%3D%20%22preference%22%29%0A%09%09%09return%3B%0A%09%09var%20valueChanged%20%3D%20item.value%20%21%3D%20item.valueFromPreferences%3B%0A%09%09var%20index%20%3D%20this.changes.indexOf%28item%29%3B%0A%09%09if%20%28valueChanged%20%26amp%3B%26amp%3B%20index%20%3D%3D%20-1%29%0A%09%09%09this.changes.push%28item%29%3B%0A%09%09else%20if%20%28%21valueChanged%20%26amp%3B%26amp%3B%20index%20%26gt%3B%20-1%29%0A%09%09%09this.changes.splice%28index%2C%201%29%3B%0A%09%09this.setButtons%28%21this.changes.length%29%3B%0A%09%7D%2C%0A%09onApply%3A%20function%28%29%20%7B%0A%09%09this.setButtons%28true%29%3B%0A%09%09while%20%28this.changes.length%29%20%7B%0A%09%09%09var%20preference%20%3D%20this.changes.shift%28%29%3B%0A%09%09%09preference.batching%20%3D%20true%3B%0A%09%09%09preference.valueFromPreferences%20%3D%20preference.value%3B%0A%09%09%09preference.batching%20%3D%20false%3B%0A%09%09%7D%0A%09%09cb_btn.ImageResizer.selfDestroy%28%29%3B%0A%09%7D%2C%0A%09setButtons%3A%20function%28aDisable%29%20%7B%0A%09%09var%20docElt%20%3D%20document.documentElement%3B%0A%09%09//%20when%20in%20instantApply%20mode%20apply%20and%20accept%20buttons%20are%20hidden%20except%20when%20user%0A%09%09//%20change%20min/max%20width%20value%0A%09%09var%20applyButton%20%3D%20docElt.getButton%28%22extra1%22%29%3B%0A%09%09applyButton.disabled%20%3D%20aDisable%3B%0A%09%09applyButton.hidden%20%3D%20this.instantApply%20%26amp%3B%26amp%3B%20aDisable%3B%0A%09%09docElt.getButton%28%22accept%22%29.hidden%20%3D%20aDisable%3B%0A%0A%09%09var%20action%20%3D%20aDisable%20%3F%20%22close%22%20%3A%20%22cancel%22%3B%0A%09%09var%20cancelButton%20%3D%20docElt.getButton%28%22cancel%22%29%3B%0A%09%09cancelButton.label%20%3D%20docElt.getAttribute%28action%20+%20%22buttonlabel%22%29%3B%0A%09%09cancelButton.setAttribute%28%22icon%22%2C%20action%29%3B%0A%09%7D%2C%0A%09setDisabled%3A%20function%28aItemOrId%2C%20aVal%29%20%7B%0A%09%09var%20item%20%3D%20typeof%28aItemOrId%29%20%3D%3D%20%22string%22%20%3F%20%24id%28aItemOrId%29%20%3A%20aItemOrId%3B%0A%09%09if%20%28%21item%29%0A%09%09%09return%3B%0A%09%09if%20%28item.hasAttribute%28%22inverseDependency%22%29%29%0A%09%09%09aVal%20%3D%20%21aVal%3B%0A%09%09//%20remove%20disabled%20when%20the%20value%20is%20false%0A%09%09this.setItem%28item%2C%20%22disabled%22%2C%20aVal%20%7C%7C%20null%29%3B%0A%09%7D%2C%0A%09setItem%3A%20function%28aItemOrId%2C%20aAttr%2C%20aVal%29%20%7B%0A%09%09var%20el%20%3D%20typeof%28aItemOrId%29%20%3D%3D%20%22string%22%20%3F%20document.getElementById%28aItemOrId%29%20%3A%20aItemOrId%3B%0A%09%09if%20%28el%29%20%7B%0A%09%09%09if%20%28aVal%20%3D%3D%3D%20null%20%7C%7C%20aVal%20%3D%3D%3D%20undefined%29%20%7B%0A%09%09%09%09el.removeAttribute%28aAttr%29%3B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09if%20%28typeof%28aVal%29%20%3D%3D%20%22boolean%22%29%0A%09%09%09%09aVal%20%3D%20aVal%20%3F%20%22true%22%20%3A%20%22false%22%3B%0A%0A%09%09%09if%20%28%21el.hasAttribute%28aAttr%29%20%7C%7C%20el.getAttribute%28aAttr%29%20%21%3D%20aVal%29%0A%09%09%09%09el.setAttribute%28aAttr%2C%20aVal%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%09onUnload%3A%20function%28%29%20%7B%0A%09%09window.removeEventListener%28%22change%22%2C%20this%2C%20false%29%3B%0A%09%09cb_btn.ImageResizer.selfDestroy%28%29%3B%0A%09%7D%2C%0A%7D%3B%0A%5D%5D%26gt%3B%26lt%3B/script%26gt%3B%0A%09%26lt%3Bprefpane%26gt%3B%0A%09%09%26lt%3Bpreferences%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pListOfSizesA%22%20name%3D%22%25B_R_A_N_C_H%25pListOfSizesA%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pListOfSizesB%22%20name%3D%22%25B_R_A_N_C_H%25pListOfSizesB%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pSortMenuNumerically%22%20name%3D%22%25B_R_A_N_C_H%25pSortMenuNumerically%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pShowNotification%22%20name%3D%22%25B_R_A_N_C_H%25pShowNotification%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pShowViewFaviconInContext%22%20name%3D%22%25B_R_A_N_C_H%25pShowViewFaviconInContext%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pShowImageAfterConvertion%22%20name%3D%22%25B_R_A_N_C_H%25pShowImageAfterConvertion%22%20type%3D%22int%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pAutoCopyToClipboard%22%20name%3D%22%25B_R_A_N_C_H%25pAutoCopyToClipboard%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pCopyToClipboardOnPanelClick%22%20name%3D%22%25B_R_A_N_C_H%25pCopyToClipboardOnPanelClick%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pShowSizesAsSubMenus%22%20name%3D%22%25B_R_A_N_C_H%25pShowSizesAsSubMenus%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%26lt%3B/preferences%26gt%3B%0A%09%09%26lt%3Bvbox%20flex%3D%221%22%26gt%3B%0A%09%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20tooltip%3D%22tt_2%22%20label%3D%22Auto-copy%20to%20clipboard%22%20preference%3D%22pAutoCopyToClipboard%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20tooltip%3D%22tt_5%22%20label%3D%22Copy%20to%20clip.%20on%20preview%20click%22%20preference%3D%22pCopyToClipboardOnPanelClick%22/%26gt%3B%0A%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20tooltip%3D%22tt_6%22%20label%3D%22Show%20notification%22%20preference%3D%22pShowNotification%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20tooltip%3D%22tt_8%22%20label%3D%22Show%20sizes%20as%20sub-menus%22%20preference%3D%22pShowSizesAsSubMenus%22/%26gt%3B%0A%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20tooltip%3D%22tt_4%22%20label%3D%22Sort%20%26amp%3Bquot%3Bsizes%20menu%26amp%3Bquot%3B%20numerically%22%20preference%3D%22pSortMenuNumerically%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcheckbox%20tooltip%3D%22tt_3%22%20label%3D%22%26amp%3Bquot%3BView%20current%20site%26amp%3B%23039%3Bs%20favicon%26amp%3Bquot%3B%22%20preference%3D%22pShowViewFaviconInContext%22/%26gt%3B%0A%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%09%26lt%3B/grid%26gt%3B%0A%09%09%09%26lt%3Bgroupbox%20tooltip%3D%22tt_7%22%26gt%3B%0A%09%09%09%09%26lt%3Bcaption%20label%3D%22Show%20image%20after%20convertion%22%20/%26gt%3B%0A%09%09%09%09%26lt%3Bradiogroup%20orient%3D%22vertical%22%20preference%3D%22pShowImageAfterConvertion%22%26gt%3B%0A%09%09%09%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bradio%20label%3D%22Don%27t%20show%22%20value%3D%220%22%20/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bradio%20label%3D%22Floating%22%20value%3D%221%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bradio%20label%3D%22New%20tab%20%28foreground%29%22%20value%3D%222%22%20/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bradio%20label%3D%22New%20tab%20%28background%29%22%20value%3D%223%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%09%09%09%26lt%3B/grid%26gt%3B%0A%09%09%09%09%26lt%3B/radiogroup%26gt%3B%0A%09%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bgroupbox%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bcaption%20label%3D%22List%20of%20fixed%20sizes%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Btextbox%20tooltip%3D%22tt_1%22%20%20id%3D%22list_of_sizes%22%20rows%3D%225%22%20multiline%3D%22true%22%20preference%3D%22pListOfSizesA%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bgroupbox%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bcaption%20label%3D%22List%20of%20percentages%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Btextbox%20tooltip%3D%22tt_9%22%20%20id%3D%22list_of_sizes%22%20rows%3D%225%22%20multiline%3D%22true%22%20preference%3D%22pListOfSizesB%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%09%26lt%3B/grid%26gt%3B%0A%09%09%26lt%3B/vbox%26gt%3B%0A%09%26lt%3B/prefpane%26gt%3B%0A%09%26lt%3Bpopupset%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_1%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BHere%20are%20defined%20the%20list%20of%20fixed%20sizes%20that%20will%20be%20used%20to%20create%20the%20context%20menu.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BSizes%20must%20be%20defined%20with%20a%20number%2C%20the%20letter%20%26amp%3Bquot%3Bx%26amp%3Bquot%3B%20and%20another%20number%20and%20separated%20by%20a%20comma.%20%26lt%3Bhtml%3Astrong%26gt%3BExample%3A%2016x16%2C32x32%26lt%3B/html%3Astrong%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BNote%3A%26lt%3B/html%3Astrong%26gt%3B%20It%20doesn%27t%20matter%20if%20there%20are%20spaces%20and/or%20line%20breaks.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_9%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BHere%20are%20defined%20the%20list%20of%20percentages%20that%20will%20be%20used%20to%20create%20the%20context%20menu.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BPercentages%20must%20be%20defined%20with%20a%20number%20and%20the%20percent%20sign%20and%20separated%20by%20a%20comma.%20%26lt%3Bhtml%3Astrong%26gt%3BExample%3A%2025%25%2C55%25%26lt%3B/html%3Astrong%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BNote%3A%26lt%3B/html%3Astrong%26gt%3B%20It%20doesn%27t%20matter%20if%20there%20are%20spaces%20and/or%20line%20breaks.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_2%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20%26lt%3Bhtml%3Astrong%26gt%3Benabled/checked%26lt%3B/html%3Astrong%26gt%3B%2C%20the%20resulting%20Base64%20image%20will%20be%20copied%20to%20the%20clipboard%20after%20using%20any%20option%20to%20convert/resize%20an%20image.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_3%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20%26lt%3Bhtml%3Astrong%26gt%3Benabled/checked%26lt%3B/html%3Astrong%26gt%3B%2C%20a%20new%20menu%20item%20will%20appear%20in%20the%20page%20context%20menu%20that%20will%20open%20the%20current%20site%27s%20favicon%2C%20if%20any%2C%20in%20a%20new%20tab.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_4%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20%26lt%3Bhtml%3Astrong%26gt%3Benabled/checked%26lt%3B/html%3Astrong%26gt%3B%2C%20the%20%26amp%3Bquot%3Bsizes%20menu%26amp%3Bquot%3B%20in%20the%20page%20context%20menu%20will%20be%20sorted%20numerically.%20If%20%26lt%3Bhtml%3Astrong%26gt%3Bdisabled/unchecked%26lt%3B/html%3Astrong%26gt%3B%2C%20the%20menu%20will%20be%20displayed%20in%20the%20order%20they%20were%20defined%20in%20the%20list%20of%20sizes%20options%20bellow.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_5%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20%26lt%3Bhtml%3Astrong%26gt%3Benabled/checked%26lt%3B/html%3Astrong%26gt%3B%2C%20the%20Base64%20image%20will%20be%20copied%20to%20the%20clipboard%20if%20the%20floating%20panel%20is%20clicked.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_6%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20%26lt%3Bhtml%3Astrong%26gt%3Benabled/checked%26lt%3B/html%3Astrong%26gt%3B%2C%20a%20notification%20will%20be%20displayed%20after%20copying%20the%20image%20to%20the%20clipboard.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_7%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BChoose%20how%20to%20display%20the%20newly%20converted/resized%20image.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BDo%20not%20show%3A%26lt%3B/html%3Astrong%26gt%3B%20Do%20not%20show%20image%20after%20convertion.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BFloating%3A%26lt%3B/html%3Astrong%26gt%3B%20Show%20in%20a%20floating%20panel%20in%20the%20middle%20of%20the%20screen.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BNew%20tab%20%28foreground%29%3A%26lt%3B/html%3Astrong%26gt%3B%20Load%20the%20image%20in%20a%20new%20tab%20in%20the%20foreground.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BNew%20tab%20%28background%29%3A%26lt%3B/html%3Astrong%26gt%3B%20Load%20the%20image%20in%20a%20new%20tab%20in%20the%20background.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BImportant%20note%3A%26lt%3B/html%3Astrong%26gt%3B%20If%20the%20resulting%20image%20is%20bigger%20than%202MB%20%28aprox.%29%2C%20it%20will%20not%20be%20loaded%20in%20a%20new%20tab.%20This%20is%20a%20fail-safe%20because%20Base64%20images%20that%20big%20could%20freeze/crash%20the%20browser.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_8%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BShow%20the%20%26amp%3Bquot%3Bsizes%20menu%26amp%3Bquot%3B%20in%20the%20context%20menu%20as%20sub-menus.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3B/popupset%26gt%3B%0A%26lt%3B/prefwindow%26gt%3B%26lt%3B%21--%25OptionsWindow%25--%26gt%3B%0A%26lt%3B%21--%25AlertImg%25--%26gt%3Bdata%3Aimage/png%3Bbase64%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%26lt%3B%21--%25AlertImg%25--%26gt%3B%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" rel="nofollow" title="Install Image Resizer">
				<![CDATA[Install this button]]>
			</html:a>
		</html:div>
		<html:a id="about" href="https://addons.mozilla.org/addon/custom-buttons/">
			<![CDATA[About CustomButtons]]>
		</html:a>
		<html:div id="credits">
			<html:a href="http://custombuttons.sourceforge.net/forum/viewtopic.php?t=3599">
				<![CDATA[XML created with]]>
				<html:br/>
				<![CDATA[CB Context Menu Extended]]>
			</html:a>
		</html:div>
	</html:div>
</html:body>
  <name>Image Resizer</name>
  <image><![CDATA[data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACIklEQVQ4jY2TS0hUYRiGn43YRdACo/EMRptaRkwX6QIWRSR4zq6I2rVxY9CioJryHCg3hmFSoQVdzDMxZi1kxHNJhWgRhIFURC66LMSZwZkzM2JmjF+Lxmk8JvXCu/ue93v/D37w6eIoB3SX+4bDuO4Q1x3ihsOY7nBLd6jzzxc1cZTyQX11sP05x8Ij9F0eJWO4SKl1h7zucEePUrEE/lzPqqymxOYaaqcymtI+1lxR3faMDeERrhouC/6gFgereZDyYkCusaYjpwUlpwVlRg3KjyO1796EKAO4NMoJw2W2NOCCy/sinFZrtuc0Jb8YUPBkor66WPOKy2HDYdJwkRYX0W2akjG2iMUecmqw0wdLRg2e8t8obLFZd7h5zqENQCxuiE0/OU15WwrPaIGzK166oESUCrFJisUEWVVJLML5hqoz/4IL22+LjYhFgqyqJH/Dla3/CbeKjRScJKsqH/MNVfGuUKiMnmSAXm/dirDN9RJYxOYDs40BM6Vtatva+XoH0flpIulvPJ4+/hf4vA8WsXiAHCqr6286uZe++VdEPClxUxEeIiA2s8sChtgPwO6O4RDROfEFCL3fTwOkolSKwxff9od/+t3LrMdMv1gWEPEW6P0ZrukaWBOL7dwoFt1ikxKblxKlcukjH02txUx1E/EWljeZ+0okd23Xk+Ft0YGDivg/0xKZqX2Y6buY6XFML07ES2B6nzCzT+mRev/4L1Efe6ctWKX1AAAAAElFTkSuQmCC]]></image>
  <mode>0</mode>
  <initcode><![CDATA[var $ = this.ImageResizer = {

	Init: function() {
		if (!("Services" in window))
			Cu.import("resource://gre/modules/Services.jsm");

		$.InitPrefs();

		if (!($._UID in window)) {
			window[$._UID] = {
				CustomizableUI: false,
				Initialized: false
			};
		}

		for (var p in $.DefPrefs) {
			if ($.DefPrefs.hasOwnProperty(p))
				$["_" + p] = $.gPref(p);
		}

		if (!window[$._UID]["Initialized"]) {
			window[$._UID]["Initialized"] = true;
			$.HandlePrefObserver();
		}

		if (!$.$($._UID + "-context-menu"))
			$.convertImageContext.init();

		if (!$.$($._UID + "-view-favicon") && $._pShowViewFaviconInContext)
			$.getFaviconContext.init();

		// For loading frame scripts. What a (%$(&%$&%$)) stupidity!!!!!
		$._randomID = parseInt(Math.random() * 10000, 10);
		window[$._UID]["RandomID"] = $._randomID;

		$.createPreviewPanel();

		self.tooltipText = self.name + " - ID#: " + self.id.slice(20) +
			"\n\nLeft click: Open options window\t";
		self.onclick = function(aE) {
			if ((aE.button === 0 && !aE.shiftKey && !$.accel(aE) && !aE.altKey)) {
				aE.preventDefault();
				$.openOptions();
			}
			aE.stopPropagation();
		};

		if ("CustomizableUI" in window) {
			if (!window[$._UID]["CustomizableUI"]) {
				window[$._UID]["CustomizableUI"] = true;
				CustomizableUI.addListener({
					onCustomizeEnd: function(aWindow) {
						var thisBtn = aWindow.document.getElementById(self.id);
						setTimeout(function() {
							aWindow[$._UID]["CustomizableUI"] && thisBtn.init();
						}, Math.floor(Math.random() * (1 + 2000 - 200)) + 200);
					}
				});
			}
		}

		addDestructor(function(aReason) {
			if (aReason === "update" || aReason === "delete") {
				// Delete all elements created by this button.
				let selfEls = document.getElementsByAttribute("cb_id", $._UID);
				Array.prototype.slice.call(selfEls).forEach(function(aEl) {
					aEl.parentNode.removeChild(aEl);
				});
			}
			if (aReason === "delete") {
				(Services.prefs.getBranch($.Branch)).deleteBranch("");
				Services.prefs.savePrefFile(null);
				delete window[$._UID];
			}
		});
	},

	createPreviewPanel: function() {
		let popSet = $.popSet;
		if (popSet && !$.prevPanel) {
			let p = popSet.appendChild($.$CNS("panel", {
				id: $._UID + "-preview-panel",
				"xmlns:html": "http://www.w3.org/1999/xhtml",
				cb_id: $._UID,
				orient: "vertical",
				level: "top",
				noautofocus: "true",
				consumeoutsideclicks: "false",
				onclick: "document.getElementById('" + self.id +
					"').ImageResizer.onPreviewPanelClick(event);event.stopPropagation();",
				onpopuphiding: "document.getElementById('" + self.id +
					"').ImageResizer.onPreviewPanelHiding(event);event.stopPropagation();",
				onpopupshowing: "event.stopPropagation();",
			}));
			p.appendChild($.$CNS("img", {
				id: $._UID + "-image",
				hidden: true
			}, xhtmlns));
			p.appendChild($.$CNS("canvas", {
				id: $._UID + "-canvas"
			}, xhtmlns));
			p.style.setProperty("background", "transparent", "important");
			p.style.setProperty("border", "none", "important");
		}
	},

	onPreviewPanelHiding: function(aE) {
		$.canvas.hidden = true;
		$.image.hidden = true;
		let alt = Services.wm.getMostRecentWindow("alert:alert");
		alt && alt.close();
		aE.stopPropagation();
	},

	onPreviewPanelClick: function(aE) {
		$.prevPanel.hidePopup();
		if ($._pCopyToClipboardOnPanelClick)
			$.copyToClipboard($.dataImage);
		aE.stopPropagation();
	},

	convertImageContext: {
		init: function() {
			let inserPoint = $.$("context-sep-copyimage");
			let menu = $.$CNS("menu", {
				id: $._UID + "-context-menu",
				cb_id: $._UID,
				image: self.image,
				label: "Image Resizer",
			});
			inserPoint.parentNode.insertBefore(menu, inserPoint);
			let mPop = menu.appendChild($.$CNS("menupopup", {
				orient: "vertical",
				onpopupshowing: "event.stopPropagation();",
				onclick: "event.stopPropagation();",
				oncommand: "document.getElementById('" + self.id +
					"').ImageResizer.convertImageContext.onContextCommand(event);event.stopPropagation();",
			}));
			mPop.appendChild($.$CNS("menuitem", {
				label: "Convert to Base64",
				tooltiptext: "Convert image to Base64 without resizing it.",
				data: "convert"
			}));
			mPop.appendChild($.$CNS("menuitem", {
				label: "Custom size",
				tooltiptext: "Resize image to a fixed custom size or to a percentage of the original image size.",
				data: "custom"
			}));
			let sizesA = $._pListOfSizesA.replace(/\s+/gm, "").split(",").filter(aSize =>
				aSize !== "" && $.isValidSize(aSize));
			if ($._pSortMenuNumerically) {
				sizesA.sort(function(a, b) {
					return a.split("x")[0] - b.split("x")[0];
				});
			}
			let insPonint;
			if (sizesA.length > 1) {
				$._pShowSizesAsSubMenus || mPop.appendChild($.$CNS("dialogheader", {
					title: "Fixed sizes",
					tooltiptext: "Resize images to a fixed size.",
					description: "",
					style: "margin: 0 0 7px 0;padding: 2px 0 2px 5px;border:none;font-size:smaller;",
				}));
				var a = 0,
					iLen = sizesA.length,
					insPoint = $._pShowSizesAsSubMenus ?
					mPop.appendChild($.$CNS("menu", {
						label: "Fixed sizes",
						tooltiptext: "Resize images to a fixed size.",
					})).appendChild($.$CNS("menupopup", {
						onpopupshowing: "event.stopPropagation();",
						onpopuphiding: "event.stopPropagation();",
					})) :
					mPop;

				for (; a < iLen; a++) {
					insPoint.appendChild($.$CNS("menuitem", {
						label: sizesA[a],
						data: "fixed"
					}));
				}
			}
			let sizesB = $._pListOfSizesB.replace(/\s+/gm, "").split(",").filter(aSize =>
				aSize !== "" && $.isValidSize(aSize));
			if ($._pSortMenuNumerically) {
				sizesB.sort(function(a, b) {
					return a.split("%")[0] - b.split("%")[0];
				});
			}
			if (sizesB.length > 1) {
				$._pShowSizesAsSubMenus || mPop.appendChild($.$CNS("dialogheader", {
					title: "Percentages",
					tooltiptext: "Resize images to a percentage of the original image size.",
					description: "",
					style: "margin: 0 0 7px 0;padding: 2px 0 2px 5px;border:none;font-size:smaller;",
				}));
				var b = 0,
					iLen = sizesB.length,
					insPoint = $._pShowSizesAsSubMenus ?
					mPop.appendChild($.$CNS("menu", {
						label: "Percentages",
						tooltiptext: "Resize images to a percentage of the original image size.",
					})).appendChild($.$CNS("menupopup", {
						onpopupshowing: "event.stopPropagation();",
						onpopuphiding: "event.stopPropagation();",
					})) :
					mPop;
				for (; b < iLen; b++) {
					insPoint.appendChild($.$CNS("menuitem", {
						label: sizesB[b],
						data: "fixed"
					}));
				}
			}
			let contextMenuListener = function() {
				let context = $.$($._UID + "-context-menu");
				if (gContextMenu && context)
					context.hidden = !gContextMenu.onImage;
			};
			let ctx = $.$("contentAreaContextMenu");
			if (ctx)
				ctx.addEventListener("popupshowing", contextMenuListener, false);
			addDestructor(function(aReason) {
				if (aReason === "update" || aReason === "delete") {
					ctx.removeEventListener("popupshowing", contextMenuListener, false);
				}
			});
		},
		onContextCommand: function(aE) {
			let img = gContextMenu.target.src;
			aE.preventDefault();
			let type = aE.target.getAttribute("data");
			if (type === "custom") {
				let value = $.promptme("Enter size in width x height format like this: 128x128\n" +
					"Or enter a percentage like this: 25%", "");
				if (value) {
					if (!$.isValidSize(value)) {
						$.alertme("Your input does not conform to the width x height nor percentage format!!!");
						return false;
					} else
						$.processImage(img, value);
				}
			} else if (type === "fixed") {
				$.processImage(img, aE.target.getAttribute("label"));
			} else if (type === "convert") {
				$.processImage(img, 0);
			}
			aE.stopPropagation();
		},
	},

	getFaviconContext: {
		init: function() {
			let ctx = $.$("contentAreaContextMenu");
			if (ctx) {
				let favItem = $.$CNS("menuitem", {
					id: $._UID + "-view-favicon",
					cb_id: $._UID,
					label: "View current site's favicon",
					onclick: "event.stopPropagation();",
					oncommand: "document.getElementById('" + self.id +
						"').ImageResizer.getFaviconContext.onContextCommand(event);event.stopPropagation();",
				});
				ctx.appendChild(favItem);
			}
		},
		onContextCommand: function(aE) {
			let URL = document.defaultView.top.location.href;
			var done = function(aFavURI) {
				if (!aFavURI)
					aFavURI = gBrowser.selectedTab.image;
				if (aFavURI)
					gBrowser.selectedTab = gBrowser.addTab(aFavURI.spec || aFavURI, null, null);
			};
			try {
				var uri = Services.io.newURI(URL, null, null);
				$.asyncFavicons.getFaviconURLForPage(uri, done);
			} catch (aErr) {
				done();
			}
			aE.stopPropagation();
		},
	},

	isValidSize: function(aData) {
		return (aData.match(/\d/) && aData.match(/^\s*\d*\s*x\s*\d*\s*$/i)) || /^\s*\d*\s*%$/.test(aData);
	},

	copyToClipboard: function(aData) {
		gClipboard.write(aData);
		if ($._pShowNotification) {
			$.notifyme(self.name,
				"Base64 image copied to clipboard.",
				$.getHelp("%AlertImg%"),
				$.alertCallback);
		}
	},

	showImage: function(aDataImage) {
		switch ($._pShowImageAfterConvertion) {
			case 0:
				return true;
			case 1:
				let xPos = (screen.availWidth / 2) - ($.prevPanel.width / 2),
					yPos = (screen.availHeight / 2) - ($.prevPanel.height / 2);
				$.prevPanel.openPopupAtScreen(xPos, yPos);
				break;
			case 2: // New tab foreground
				if (aDataImage.length < 2000000)
					gBrowser.selectedTab = gBrowser.addTab(aDataImage, null, null);
				break;
			case 3: // New tab background
				if (aDataImage.length < 2000000)
					gBrowser.addTab(aDataImage, null, null);
				break;
		}
	},

	processImage: function(aCtxImg, aSize) {
		// Use of the base64 converted image instead of the original image source to avoid Cross-origin crap.
		$.img_to_b64_cback(aCtxImg, function(aImgData) {
			let imgEl = $.image;
			imgEl.src = aImgData;
			imgEl.onload = function() {
				let dataObj = aSize === 0 ? null : $.processSize(imgEl, aSize);
				let canvas = $.canvas;
				if (aSize === 0) { // If just convert to Base64, no resizing.
					if ($._pAutoCopyToClipboard)
						$.copyToClipboard(aImgData);
					$.showImage(aImgData);
					// Show the image (not resized), not the canvas (resized).
					imgEl.hidden = false;
					canvas.hidden = true;
					return true;
				}
				canvas.width = dataObj.width;
				canvas.height = dataObj.height;
				var ctx = canvas.getContext("2d");
				// Show the canvas (resized), not the image (not resized).
				imgEl.hidden = true;
				canvas.hidden = false;
				ctx.drawImage(imgEl, 0, 0, dataObj.width, dataObj.height);
				let dataImage = canvas.toDataURL("image/png");
				if ($._pAutoCopyToClipboard)
					$.copyToClipboard(dataImage);
				$.showImage(dataImage);
			};

		});
	},

	processSize: function(aCtxImg, aSize) {
		var width, height = 0;
		if (/%/.test(aSize)) {
			let percent = parseInt(aSize.split(/%/i)[0] - 0, 10);
			width = (percent * aCtxImg.width) / 100;
			height = (percent * aCtxImg.height) / 100;
		} else {
			let size = aSize.split(/x/i);
			width = parseInt((size[0] || 0) - 0, 10);
			height = parseInt((size[1] || 0) - 0, 10);
		}
		return {
			width: width,
			height: height,
		};
	},

	img_to_b64_cback: function(aURL, aCallback) {
		if (!aURL)
			aCallback(false);
		else {
			let xhr = new XMLHttpRequest(),
				nsIMIMEService = Cc["@mozilla.org/mime;1"].getService(Ci.nsIMIMEService);
			try {
				xhr.open("GET", aURL, true);
			} catch (aErr) {
				aCallback(false);
				return true;
			}
			xhr.responseType = "arraybuffer";
			xhr.onload = function() {
				let mediaType,
					dataURI,
					binary,
					bytes;
				bytes = new Uint8Array(xhr.response);
				binary = [].map.call(bytes, function(aByte) {
					return String.fromCharCode(aByte);
				}).join("");
				mediaType = xhr.getResponseHeader("Content-Type");
				let base64 = btoa(binary);
				if (mediaType.indexOf("image/") !== 0) {
					try {
						mediaType = nsIMIMEService.getTypeFromURI(Services.io.newURI(aURL, null, null));
					} catch (aError) {
						mediaType = "image/png";
					}
				}
				dataURI = "data:" + mediaType + ";base64," + base64;
				aCallback(dataURI);
			};
			xhr.onerror = function() {
				aCallback(false);
			};
			xhr.send(null);
		}
	},

	/**
	 * NEVER CHANGE TO "BRANCH OBSERVER"!!!!
	 */
	HandlePrefObserver: function(aRem) {
		var prefs = $.DefPrefs;
		for (let key in prefs) {
			let pref = $.Branch + key;
			if (prefs.hasOwnProperty(key)) {
				if (aRem)
					Services.prefs.removeObserver(pref, $.prefObserver);
				else
					Services.prefs.addObserver(pref, $.prefObserver, false);
			}
		}
	},

	prefObserver: {
		observe: function(aSubject, aTopic, aPStr) {
			if (aTopic === "nsPref:changed") {
				$["_" + aPStr] = $.gPref(aPStr);
			}
		}
	},

	selfDestroy: function() {
		setTimeout(function() {
			self.destroy("update");
			setTimeout(function() {
				self.init();
			}, 100);
		}, 100);
	},

	openOptions: function() {
		var em = Services.ww.getWindowEnumerator();
		var winName = "image_to_base64_settings_window_" + self.id;
		var index = 1;
		while (em.hasMoreElements()) {
			let win = em.getNext();
			if (win.name === winName) {
				win.focus();
				return;
			}
			index++;
		}
		let xul = $.getHelp("%OptionsWindow%");
		let storage = {
			button: self
		};
		xul = xul.replace(/>\s+</g, "><");
		xul = xul.split("%S_E_L_F_I_D%").join(self.id);
		xul = xul.split("%B_R_A_N_C_H%").join($.Branch);
		let url = "data:application/vnd.mozilla.xul+xml;text/plain," + encodeURIComponent(xul);
		let win = openDialog(url, winName, "chrome, resizable, dependant, dialog, centerscreen, close, alwaysRaised");
		win._storage = storage;
	},

	promptme: function(aMsg, aVal) {
		let retVal = {
			value: aVal
		};
		if (Services.prompt.prompt(null, self.name, aMsg, retVal, null, {}))
			return retVal.value;
		else
			return false;
		return false;
	},

	alertme: function(aMsg) {
		Services.prompt.alert(null, self.name, aMsg);
	},

	notifyme: function(aTitle, aMsg, aImg, aCallback) { // Notification function
		let origin = (Services.prefs.getPrefType("ui.alertNotificationOrigin") !== 0) ?
			Services.prefs.getIntPref("ui.alertNotificationOrigin") :
			null;
		let win = Services.ww.openWindow(null, "chrome://global/content/alerts/alert.xul",
			"_blank", "chrome,titlebar=no,popup=yes", null);
		win.arguments = [aImg, aTitle, aMsg, !!aCallback, "", origin, "", "", null, (!!aCallback ? aCallback : null)];
	},

	getHelp: function(aPlaceholder) { // Get specific data, surrounded by "placeholders", from the Help tab.
		return self.getAttribute("Help").split("<!--" + aPlaceholder + "-->")[1];
	},

	alertCallback: {
		observe: function(aSubject, aTopic, aData) {
			let alt = Services.wm.getMostRecentWindow("alert:alert");
			setTimeout(function() {
				alt.close();
			}, 5000);
			if (aTopic === "alertclickcallback")
				alt.close();
		}
	},

	$: function(aId) { // Return elements by Id
		return document.getElementById(aId);
	},

	$CNS: function(aElName, aAttrs, aNS) { // Creates elements
		var el = aNS ?
			document.createElementNS(aNS, aElName) :
			document.createElement(aElName);
		if (aAttrs)
			Object.keys(aAttrs).forEach(function(n) {
				if (aAttrs[n] !== "")
					el.setAttribute(n, aAttrs[n]);
			});
		aElName === "menu" && el.classList.add("menu-iconic");
		aElName === "menuitem" && el.classList.add("menuitem-iconic");
		return el;
	},

	_UID: "__image_resizer" + self.id.slice(20),
	asyncFavicons: Cc["@mozilla.org/browser/favicon-service;1"].getService(Ci.mozIAsyncFavicons),
	dataImage: null,
	accel: function(aE) {
		let isOSX = Services.appinfo.OS.toLowerCase().startsWith("darwin");
		if (aE)
			return isOSX ? aE.metaKey : aE.ctrlKey;
		return isOSX ? "Command" : "Control";
	},
	get canvas() {
		return $.$($._UID + "-canvas");
	},
	get image() {
		return $.$($._UID + "-image");
	},
	get prevPanel() {
		return $.$($._UID + "-preview-panel");
	},
	get popSet() {
		let pSet = $.$("mainPopupSet") || $.$($._UID + "_popupset");
		if (!pSet) {
			try {
				pSet = $.$("msgcomposeWindow").appendChild($.$CNS("popupset", {
					id: $._UID + "_popupset",
					cb_id: $._UID
				}));
			} catch (aErr) {}
		}
		return pSet;
	},
};

this.ImageResizer.Branch = "CB.ImageResizer.Id" + self.id.slice(20) + ".";

this.ImageResizer.DefPrefs = {
	pListOfSizesA: "16x16,\n32x32,\n64x64,\n128x128,\n256x256",
	pListOfSizesB: "20%,\n40%,\n60%,\n80%",
	pShowImageAfterConvertion: 1,
	pAutoCopyToClipboard: true,
	pCopyToClipboardOnPanelClick: false,
	pSortMenuNumerically: true,
	pShowSizesAsSubMenus: false,
	pShowNotification: true,
	pShowViewFaviconInContext: true,
};

this.ImageResizer.InitPrefs = function() {
	var branch = Services.prefs.getDefaultBranch($.Branch),
		defaults = self.ImageResizer.DefPrefs;
	for (var key in defaults) {
		if (defaults.hasOwnProperty(key)) {
			var val = defaults[key];
			switch (typeof val) {
				case "boolean":
					branch.setBoolPref(key, val);
					break;
				case "number":
					branch.setIntPref(key, val);
					break;
				case "string":
					var str = Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString);
					str.data = val;
					branch.setComplexValue((key),
						Ci.nsISupportsString, str);
					break;
			}
		}
	}
};

this.ImageResizer.gPref = function(aKey) {
	var branch = Services.prefs.getBranch($.Branch);
	switch (typeof self.ImageResizer.DefPrefs[aKey]) {
		case "boolean":
			return branch.getBoolPref(aKey);
		case "number":
			return branch.getIntPref(aKey);
		case "string":
			return branch.getComplexValue(aKey, Ci.nsISupportsString).data;
	}
	return null;
};

this.ImageResizer.sPref = function(aKey, aVal) {
	var branch = Services.prefs.getBranch($.Branch);
	switch (typeof aVal) {
		case "boolean":
			branch.setBoolPref(aKey, aVal);
			break;
		case "number":
			branch.setIntPref(aKey, aVal);
			break;
		case "string":
			var str = Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString);
			str.data = aVal;
			branch.setComplexValue((aKey), Ci.nsISupportsString, str);
			break;
	}
};

this.ImageResizer.Init();]]></initcode>
  <code><![CDATA[/*CODE*/]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help> 
              
     
 If you did any of the previous actions, delete all extra buttons leaving only one version of    and restart your application.


           
    

[,]
/*******************************************************/
/* FROM THIS POINT DOWN DO NOT EDIT/DELETE ANYTHING!!! */
/*******************************************************/

&lt;!--%OptionsWindow%--&gt;&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;?xml-stylesheet href="chrome://global/skin/" ?&gt;
&lt;?xml-stylesheet href="data:text/css;charset=utf-8,
prefwindow * {
	font-family: &amp;quot;Open Sans&amp;quot;, Helvetica, Arial, sans-serif !important;
}
caption .caption-text,
.bold_text {
	font-weight: bold !important;
}
/* Force groupboxes on Linux to have the same appearance than in Windows */
/* Just because it makes effing sence!!!! */
/* Why have elements grouped inside a groupbox and not visually delimited?!?!?! */
groupbox {
	-moz-appearance: groupbox !important;
	border: 2px groove ThreeDFace !important;
	border-radius: 3px !important;
	margin: 3px !important;
	padding: 3px 3px 6px !important;
}
.groupbox-body {
	padding: inherit !important;
}
caption {
	margin: 0 6px !important;
	background-color: -moz-Dialog !important;
}
tabpanels caption {
	-moz-appearance: tabpanel !important;
}
/* !important is needed to override label in global.css */
.caption-text {
	margin: 0 2px !important;
}

" type="text/css" ?&gt;
&lt;prefwindow id="image_to_base64_settings_window_%S_E_L_F_I_D%"
			 xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
			 xmlns:html="http://www.w3.org/1999/xhtml"
			 onload="$.onLoad();"
			 onunload="$.onUnload();"
			 buttons="accept,cancel,extra1"
			 buttonlabelextra1="Apply"
			 ondialogextra1="$.onApply();"
			 title="Image Resizer settings"&gt;
				&lt;script&gt;
		&lt;![CDATA[
var cb_btn = window._storage.button;

function $id(id) {
	return document.getElementById(id)
};
var $ = {
	_initialized: false,
	onLoad: function() {
		this._initialized = true;
		var docElt = document.documentElement;
		this.instantApply = docElt.instantApply;
		window.addEventListener("change", this, false);
		docElt.getButton("extra1").setAttribute("icon", "apply");
		docElt.setAttribute("cancelbuttonlabel", docElt.mStrBundle.GetStringFromName("button-cancel"));
		this.setButtons(true);
	},
	handleEvent: function(aE) {
		switch (aE.type) {
			case "change":
				if (aE.target.localName != "preference")
					return;
				if (!this.instantApply)
					this.updateApplyButton(aE);
				break;
		}
	},
	changes: [],
	updateApplyButton: function(aE) {
		var item = aE.target;
		if (item.localName != "preference")
			return;
		var valueChanged = item.value != item.valueFromPreferences;
		var index = this.changes.indexOf(item);
		if (valueChanged &amp;&amp; index == -1)
			this.changes.push(item);
		else if (!valueChanged &amp;&amp; index &gt; -1)
			this.changes.splice(index, 1);
		this.setButtons(!this.changes.length);
	},
	onApply: function() {
		this.setButtons(true);
		while (this.changes.length) {
			var preference = this.changes.shift();
			preference.batching = true;
			preference.valueFromPreferences = preference.value;
			preference.batching = false;
		}
		cb_btn.ImageResizer.selfDestroy();
	},
	setButtons: function(aDisable) {
		var docElt = document.documentElement;
		// when in instantApply mode apply and accept buttons are hidden except when user
		// change min/max width value
		var applyButton = docElt.getButton("extra1");
		applyButton.disabled = aDisable;
		applyButton.hidden = this.instantApply &amp;&amp; aDisable;
		docElt.getButton("accept").hidden = aDisable;

		var action = aDisable ? "close" : "cancel";
		var cancelButton = docElt.getButton("cancel");
		cancelButton.label = docElt.getAttribute(action + "buttonlabel");
		cancelButton.setAttribute("icon", action);
	},
	setDisabled: function(aItemOrId, aVal) {
		var item = typeof(aItemOrId) == "string" ? $id(aItemOrId) : aItemOrId;
		if (!item)
			return;
		if (item.hasAttribute("inverseDependency"))
			aVal = !aVal;
		// remove disabled when the value is false
		this.setItem(item, "disabled", aVal || null);
	},
	setItem: function(aItemOrId, aAttr, aVal) {
		var el = typeof(aItemOrId) == "string" ? document.getElementById(aItemOrId) : aItemOrId;
		if (el) {
			if (aVal === null || aVal === undefined) {
				el.removeAttribute(aAttr);
				return;
			}
			if (typeof(aVal) == "boolean")
				aVal = aVal ? "true" : "false";

			if (!el.hasAttribute(aAttr) || el.getAttribute(aAttr) != aVal)
				el.setAttribute(aAttr, aVal);
		}
	},
	onUnload: function() {
		window.removeEventListener("change", this, false);
		cb_btn.ImageResizer.selfDestroy();
	},
};
]]&gt;&lt;/script&gt;
	&lt;prefpane&gt;
		&lt;preferences&gt;
			&lt;preference id="pListOfSizesA" name="%B_R_A_N_C_H%pListOfSizesA" type="string"/&gt;
			&lt;preference id="pListOfSizesB" name="%B_R_A_N_C_H%pListOfSizesB" type="string"/&gt;
			&lt;preference id="pSortMenuNumerically" name="%B_R_A_N_C_H%pSortMenuNumerically" type="bool"/&gt;
			&lt;preference id="pShowNotification" name="%B_R_A_N_C_H%pShowNotification" type="bool"/&gt;
			&lt;preference id="pShowViewFaviconInContext" name="%B_R_A_N_C_H%pShowViewFaviconInContext" type="bool"/&gt;
			&lt;preference id="pShowImageAfterConvertion" name="%B_R_A_N_C_H%pShowImageAfterConvertion" type="int"/&gt;
			&lt;preference id="pAutoCopyToClipboard" name="%B_R_A_N_C_H%pAutoCopyToClipboard" type="bool"/&gt;
			&lt;preference id="pCopyToClipboardOnPanelClick" name="%B_R_A_N_C_H%pCopyToClipboardOnPanelClick" type="bool"/&gt;
			&lt;preference id="pShowSizesAsSubMenus" name="%B_R_A_N_C_H%pShowSizesAsSubMenus" type="bool"/&gt;
		&lt;/preferences&gt;
		&lt;vbox flex="1"&gt;
			&lt;grid&gt;
				&lt;columns&gt;
					&lt;column /&gt;
					&lt;column /&gt;
				&lt;/columns&gt;
				&lt;rows&gt;
					&lt;row&gt;
						&lt;checkbox tooltip="tt_2" label="Auto-copy to clipboard" preference="pAutoCopyToClipboard"/&gt;
						&lt;checkbox tooltip="tt_5" label="Copy to clip. on preview click" preference="pCopyToClipboardOnPanelClick"/&gt;
					&lt;/row&gt;
					&lt;row&gt;
						&lt;checkbox tooltip="tt_6" label="Show notification" preference="pShowNotification"/&gt;
						&lt;checkbox tooltip="tt_8" label="Show sizes as sub-menus" preference="pShowSizesAsSubMenus"/&gt;
					&lt;/row&gt;
					&lt;row&gt;
						&lt;checkbox tooltip="tt_4" label="Sort &amp;quot;sizes menu&amp;quot; numerically" preference="pSortMenuNumerically"/&gt;
						&lt;checkbox tooltip="tt_3" label="&amp;quot;View current site&amp;#039;s favicon&amp;quot;" preference="pShowViewFaviconInContext"/&gt;
					&lt;/row&gt;
				&lt;/rows&gt;
			&lt;/grid&gt;
			&lt;groupbox tooltip="tt_7"&gt;
				&lt;caption label="Show image after convertion" /&gt;
				&lt;radiogroup orient="vertical" preference="pShowImageAfterConvertion"&gt;
					&lt;grid&gt;
						&lt;columns&gt;
							&lt;column flex="1"/&gt;
							&lt;column flex="1"/&gt;
						&lt;/columns&gt;
					&lt;rows&gt;
						&lt;row&gt;
							&lt;radio label="Don't show" value="0" /&gt;
							&lt;radio label="Floating" value="1" /&gt;
						&lt;/row&gt;
						&lt;row&gt;
							&lt;radio label="New tab (foreground)" value="2" /&gt;
							&lt;radio label="New tab (background)" value="3" /&gt;
						&lt;/row&gt;
					&lt;/rows&gt;
					&lt;/grid&gt;
				&lt;/radiogroup&gt;
			&lt;/groupbox&gt;
			&lt;grid&gt;
				&lt;columns&gt;
					&lt;column /&gt;
					&lt;column /&gt;
				&lt;/columns&gt;
				&lt;rows&gt;
					&lt;row&gt;
						&lt;groupbox&gt;
							&lt;caption label="List of fixed sizes"/&gt;
							&lt;textbox tooltip="tt_1"  id="list_of_sizes" rows="5" multiline="true" preference="pListOfSizesA"/&gt;
						&lt;/groupbox&gt;
						&lt;groupbox&gt;
							&lt;caption label="List of percentages"/&gt;
							&lt;textbox tooltip="tt_9"  id="list_of_sizes" rows="5" multiline="true" preference="pListOfSizesB"/&gt;
						&lt;/groupbox&gt;
					&lt;/row&gt;
				&lt;/rows&gt;
			&lt;/grid&gt;
		&lt;/vbox&gt;
	&lt;/prefpane&gt;
	&lt;popupset&gt;
		&lt;tooltip id="tt_1"&gt;
			&lt;description&gt;Here are defined the list of fixed sizes that will be used to create the context menu.&lt;/description&gt;
			&lt;description&gt;Sizes must be defined with a number, the letter &amp;quot;x&amp;quot; and another number and separated by a comma. &lt;html:strong&gt;Example: 16x16,32x32&lt;/html:strong&gt;&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;Note:&lt;/html:strong&gt; It doesn't matter if there are spaces and/or line breaks.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_9"&gt;
			&lt;description&gt;Here are defined the list of percentages that will be used to create the context menu.&lt;/description&gt;
			&lt;description&gt;Percentages must be defined with a number and the percent sign and separated by a comma. &lt;html:strong&gt;Example: 25%,55%&lt;/html:strong&gt;&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;Note:&lt;/html:strong&gt; It doesn't matter if there are spaces and/or line breaks.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_2"&gt;
			&lt;description&gt;If &lt;html:strong&gt;enabled/checked&lt;/html:strong&gt;, the resulting Base64 image will be copied to the clipboard after using any option to convert/resize an image.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_3"&gt;
			&lt;description&gt;If &lt;html:strong&gt;enabled/checked&lt;/html:strong&gt;, a new menu item will appear in the page context menu that will open the current site's favicon, if any, in a new tab.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_4"&gt;
			&lt;description&gt;If &lt;html:strong&gt;enabled/checked&lt;/html:strong&gt;, the &amp;quot;sizes menu&amp;quot; in the page context menu will be sorted numerically. If &lt;html:strong&gt;disabled/unchecked&lt;/html:strong&gt;, the menu will be displayed in the order they were defined in the list of sizes options bellow.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_5"&gt;
			&lt;description&gt;If &lt;html:strong&gt;enabled/checked&lt;/html:strong&gt;, the Base64 image will be copied to the clipboard if the floating panel is clicked.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_6"&gt;
			&lt;description&gt;If &lt;html:strong&gt;enabled/checked&lt;/html:strong&gt;, a notification will be displayed after copying the image to the clipboard.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_7"&gt;
			&lt;description&gt;Choose how to display the newly converted/resized image.&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;Do not show:&lt;/html:strong&gt; Do not show image after convertion.&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;Floating:&lt;/html:strong&gt; Show in a floating panel in the middle of the screen.&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;New tab (foreground):&lt;/html:strong&gt; Load the image in a new tab in the foreground.&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;New tab (background):&lt;/html:strong&gt; Load the image in a new tab in the background.&lt;/description&gt;
			&lt;description&gt;&lt;/description&gt;
			&lt;description&gt;&lt;html:strong&gt;Important note:&lt;/html:strong&gt; If the resulting image is bigger than 2MB (aprox.), it will not be loaded in a new tab. This is a fail-safe because Base64 images that big could freeze/crash the browser.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_8"&gt;
			&lt;description&gt;Show the &amp;quot;sizes menu&amp;quot; in the context menu as sub-menus.&lt;/description&gt;
		&lt;/tooltip&gt;
	&lt;/popupset&gt;
&lt;/prefwindow&gt;&lt;!--%OptionsWindow%--&gt;
&lt;!--%AlertImg%--&gt;data:image/png;base64,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&lt;!--%AlertImg%--&gt;</help>
  <attributes/>
</custombutton>