<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/" xmlns:html="http://www.w3.org/1999/xhtml">
<html:head>
	<html:title><![CDATA[Preference Switcher (Advanced)]]></html:title>
	<html:link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACfUlEQVQ4jX2SXUiTYRTH/5KSJmWf5EVZmVLgR4kRFCVSYJAQEggiSF7Iuuqigi4kdN0YFDTmdKjNve+e55UpUwdGG0zm1NSBONMuCqoLwbbQzfmxXpzTd6cbN/xgHvhdPOf8z/8ceA6QIJqf4bAycW1acV//7mo9k5lItytWB88/UCYKPf/Gb5ctOXLKokMgGgJFRi/V+Rw3b2y6i8bkoezyhAbR4YxpcoKiwye2lPHLv8gJIidIGcuai45krpMTFB3JWEhooDhQrwyCDmLLgbZ9jRuu3Ndh9/3eyGiBK2IHReygiA3Khh2eiB1TERuUeH44dzI8cc+y7spXAwCeVyIt/DldDn8CxRnAms+Mu7EBcybcCg9geZfGlh7ufIWjAJAk96FJtmJTtoJkKyjUjzd7t1yzoD5Wl62IhvrxUVWMlLgg1ANNyAIKWUB/ujMr9xrMdpx+FKuvWdAHIAkAUFqK5JUumFfMoBghW55m3wb2orc7NStdGGxX4QhUxUgJmrAcZKA45rSN1S/VNdtTkoKjNVVBc3p4p2aJIaSuRSoAYLETtX4j3i92osdvBPmNoICYTMHenKVgf24gICZTLO8XDtn9At75jajb952+NjQtdIAOwt99QUp4SN5WzPr0IK8eslcPt08P2n7PeFsR8OlBf9tTE1+iR3+l8LfuZN833dWCGW32nXktaF4L+qE7Wz2lzcv62XJKmmnOKdrVJAjCRcbYY875U8bYS4kZGzjnjV3M8MHTUrz5VVeo9AjNbZzzRomJDdxkesE5V3HOKyRJOgeNRnNcEIQCURRLOOflnPMKxliVJElPdsIYq9quPRRFscRgMOSr1epj/wH1iKxbsGBqhgAAAABJRU5ErkJggg=="/>
	<html:style type="text/css"><![CDATA[body{font-size:medium;margin:0}body,code:before,help:before,initcode:before{font-family:"Verdana",sans-serif}#wrapper{position:fixed;top:1em;right:1em;max-width:15%;text-align:center}#button{background-color:#299a0b;border:1px solid #3a7404;border-radius:.5em;padding:0;margin-bottom:1em;box-shadow:1px 2px 3px rgba(0,0,0,.25)}#button a{color:#f0f0f0;font-weight:700;text-shadow:-.5pt -.5px .5pt rgba(0,0,0,1);padding:.8em;text-decoration:none}:-moz-any-link:focus{color:grey;outline-color:transparent;text-decoration:none}#button a,code,code:before,initcode,initcode:before,help,help:before{display:block}#credits{position:fixed;bottom:1em;right:1em;font-size:small}#about{font-size:small}custombutton{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABAElEQVQ4jW2TQXLFMAhDff+b2vEHYw5AF38eVTNdZAIxCEkmw31VptU5T7mvOuepc56K2B2f85TZrEwr99VxptUwm2U2695PZVrH937KfZX76txsVsTus0yrEbEr0/4F4AyQc56eDMiI2F0IbYoj9h9ZSCV2XzXUA1BVL8BvBvSMiN20zWY38VZ5gDEkYtfAYTRToA3qiQJk2hcA7W8gpaxG0nPvp4aiQ5UCzOV2GKAgLUEfpsGCfaBR92TonapmdCoAjHTIgLa6/14gbgow8oj9uwe6SMQ0qTz9P9oDZOgCkfMNJnqWaV8P3ouDRorUXEA4H1wbtMmVjcrQ7TSb9QMtXcwa4wpbXgAAAABJRU5ErkJggg==) fixed #f6f6f1;margin:1em}date,image,mode,accelkey{display:none}name{font-weight:700;font-size:x-large}code:before,help:before,initcode:before{font-weight:700;font-size:large;margin:0 0 1em;padding:.5em}code:before{content:"Code Tab"}help:before{content:"Help Tab"}initcode:before{content:"Initialization Code Tab"}code,initcode,help{background-color:#fcfcfc;font-size:.875em;font-family:Consolas,"Bitstream Vera Sans Mono","Courier New",Courier,monospace!important;margin:1em 2em 1em 0 !important;padding:1em;text-align:left;box-shadow:2px 2px 0 rgba(170,160,130,0.5),4px 4px 0 rgba(200,190,165,0.5);max-width:80%;min-width:80%;white-space:pre-wrap;word-wrap:break-word}]]></html:style>
</html:head>
<html:body>
	<html:div id="wrapper">
		<html:div id="button">
			<html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EPreference%20Switcher%20%28Advanced%29%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACfUlEQVQ4jX2SXUiTYRTH/5KSJmWf5EVZmVLgR4kRFCVSYJAQEggiSF7Iuuqigi4kdN0YFDTmdKjNve+e55UpUwdGG0zm1NSBONMuCqoLwbbQzfmxXpzTd6cbN/xgHvhdPOf8z/8ceA6QIJqf4bAycW1acV//7mo9k5lItytWB88/UCYKPf/Gb5ctOXLKokMgGgJFRi/V+Rw3b2y6i8bkoezyhAbR4YxpcoKiwye2lPHLv8gJIidIGcuai45krpMTFB3JWEhooDhQrwyCDmLLgbZ9jRuu3Ndh9/3eyGiBK2IHReygiA3Khh2eiB1TERuUeH44dzI8cc+y7spXAwCeVyIt/DldDn8CxRnAms+Mu7EBcybcCg9geZfGlh7ufIWjAJAk96FJtmJTtoJkKyjUjzd7t1yzoD5Wl62IhvrxUVWMlLgg1ANNyAIKWUB/ujMr9xrMdpx+FKuvWdAHIAkAUFqK5JUumFfMoBghW55m3wb2orc7NStdGGxX4QhUxUgJmrAcZKA45rSN1S/VNdtTkoKjNVVBc3p4p2aJIaSuRSoAYLETtX4j3i92osdvBPmNoICYTMHenKVgf24gICZTLO8XDtn9At75jajb952+NjQtdIAOwt99QUp4SN5WzPr0IK8eslcPt08P2n7PeFsR8OlBf9tTE1+iR3+l8LfuZN833dWCGW32nXktaF4L+qE7Wz2lzcv62XJKmmnOKdrVJAjCRcbYY875U8bYS4kZGzjnjV3M8MHTUrz5VVeo9AjNbZzzRomJDdxkesE5V3HOKyRJOgeNRnNcEIQCURRLOOflnPMKxliVJElPdsIYq9quPRRFscRgMOSr1epj/wH1iKxbsGBqhgAAAABJRU5ErkJggg%3D%3D%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5Bif%20%28self.parentNode%20%26%26%20/%5Ewrapper-/.test%28self.parentNode.id%29%29%0A%09return%3B%0A%0Avar%20%24%20%3D%20this.PreferenceSwitcher%20%3D%20%7B%0A%09init%3A%20function%28%29%20%7B%0A%09%09if%20%28%21%28%22Services%22%20in%20window%29%29%0A%09%09%09Cu.import%28%22resource%3A//gre/modules/Services.jsm%22%29%3B%0A%0A%09%09if%20%28%21%28%24._UID%20in%20window%29%29%20%7B%0A%09%09%09window%5B%24._UID%5D%20%3D%20%7B%0A%09%09%09%09CustomizableUI%3A%20false%2C%0A%09%09%09%09SwitchTimer%3A%20null%2C%0A%09%09%09%7D%3B%0A%09%09%7D%0A%0A%09%09%24.InitPrefs%28%29%3B%0A%0A%09%09self.oncontextmenu%20%3D%20function%28aE%29%20%7B%0A%09%09%09if%20%28%24.accel%28aE%29%29%0A%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%3B%0A%0A%09%09for%20%28let%20p%20in%20%24.DefPrefs%29%20%7B%0A%09%09%09if%20%28%24.DefPrefs.hasOwnProperty%28p%29%29%0A%09%09%09%09%24%5B%22_%22%20+%20p%5D%20%3D%20%24.gPref%28p%29%3B%0A%09%09%7D%0A%0A%09%09%24._prefType%20%3D%20Services.prefs.getPrefType%28%24._pPrefName%29%3B%0A%0A%09%09self.onclick%20%3D%20function%28aE%29%20%7B%0A%09%09%09if%20%28aE.button%20%21%3D%3D%202%29%0A%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09if%20%28aE.button%20%3D%3D%3D%200%20%26%26%20%21aE.shiftKey%20%26%26%20%21%24.accel%28aE%29%20%26%26%20%21aE.altKey%29%20%7B%0A%09%09%09%09if%20%28%24._pPrefName%20%3D%3D%3D%20%22%22%29%0A%09%09%09%09%09%24.editPreference%28%29%3B%0A%09%09%09%09else%20%7B%0A%09%09%09%09%09%24.setPref%28false%2C%20false%29%3B%0A%09%09%09%09%09if%20%28%24._pExecuteCodeAfterSwtich%20%26%26%20%24._pPseudoCommand%29%20%7B%0A%09%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09%09%24.executeCode%28aE%2C%20%24._pPseudoCommand%29%3B%0A%09%09%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%20else%20if%20%28aE.button%20%3D%3D%3D%200%20%26%26%20%21aE.shiftKey%20%26%26%20%24.accel%28aE%29%20%26%26%20%21aE.altKey%20%7C%7C%0A%09%09%09%09aE.button%20%3D%3D%3D%201%20%26%26%20%21aE.shiftKey%20%26%26%20%21%24.accel%28aE%29%20%26%26%20%21aE.altKey%29%20%7B%0A%09%09%09%09%24.setPref%28true%2C%20false%29%3B%0A%09%09%09%7D%20else%20if%20%28aE.button%20%3D%3D%3D%200%20%26%26%20aE.shiftKey%20%26%26%20%21%24.accel%28aE%29%20%26%26%20%21aE.altKey%29%20%7B%0A%09%09%09%09%24.setPref%28false%2C%20true%29%3B%0A%09%09%09%7D%20else%20if%20%28aE.button%20%3D%3D%3D%202%20%26%26%20%21aE.shiftKey%20%26%26%20%24.accel%28aE%29%20%26%26%20%21aE.altKey%29%20%7B%0A%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%09let%20cBox%20%3D%20custombuttons.confirmBox%28self.name%2C%20%22Are%20you%20sure%20that%20you%20want%20to%20reset%20%22%20+%0A%09%09%09%09%09%22the%20%5C%22%22%20+%20%24._pPrefName%20+%20%22%5C%22%20preference%3F%5Cn%5Cn%22%20+%0A%09%09%09%09%09%22%uD835%uDDEA%uD835%uDDD4%uD835%uDDE5%uD835%uDDE1%uD835%uDDDC%uD835%uDDE1%uD835%uDDDA%21%21%21%5Cn%uD835%uDDE7%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDFD%uD835%uDDFF%uD835%uDDFC%uD835%uDDF0%uD835%uDDF2%uD835%uDE00%uD835%uDE00%20%uD835%uDDF6%uD835%uDE00%20%uD835%uDDF6%uD835%uDDFA%uD835%uDDFA%uD835%uDDF2%uD835%uDDF1%uD835%uDDF6%uD835%uDDEE%uD835%uDE01%uD835%uDDF2%20%uD835%uDDEE%uD835%uDDFB%uD835%uDDF1%20%uD835%uDDF6%uD835%uDDFF%uD835%uDDFF%uD835%uDDF2%uD835%uDE03%uD835%uDDF2%uD835%uDDFF%uD835%uDE00%uD835%uDDF6%uD835%uDDEF%uD835%uDDF9%uD835%uDDF2%21%21%21%5Cn%22%2C%20%22Yes%22%2C%20%22Cancel%22%29%3B%0A%09%09%09%09if%20%28cBox%29%20%7B%0A%09%09%09%09%09Services.prefs.clearUserPref%28%24._pPrefName%29%3B%0A%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09self.init%28%29%3B%0A%09%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%09%7D%20else%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%7D%20else%20if%20%28aE.button%20%3D%3D%3D%202%20%26%26%20aE.shiftKey%20%26%26%20%24.accel%28aE%29%20%26%26%20%21aE.altKey%29%20%7B%0A%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%09%24.editPreference%28%29%3B%0A%09%09%09%7D%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%3B%0A%0A%09%09if%20%28%24._prefType%20%21%3D%3D%200%20%26%26%20%24._prefType%20%21%3D%3D%20128%29%20%7B%0A%09%09%09let%20valImgPairs%20%3D%20JSON.parse%28%24._pValueImagePairs%29%3B%0A%09%09%09if%20%28valImgPairs.length%20%3D%3D%3D%200%29%20%7B%0A%09%09%09%09let%20val%20%3D%20%24._prefType%20%3D%3D%3D%2064%20%3F%0A%09%09%09%09%09Number%28%24.getPref%28%24._pPrefName%29%29%20%3A%0A%09%09%09%09%09String%28%24.getPref%28%24._pPrefName%29%29%3B%0A%09%09%09%09valImgPairs%20%3D%20%5B%0A%09%09%09%09%09%5Bval%2C%20%22%22%5D%0A%09%09%09%09%5D%3B%0A%09%09%09%09%24._pValueImagePairs%20%3D%20JSON.stringify%28valImgPairs%29%3B%0A%09%09%09%7D%0A%09%09%09let%20valList%20%3D%20%5B%5D%2C%0A%09%09%09%09imgList%20%3D%20%5B%5D%3B%0A%09%09%09let%20idx%20%3D%200%2C%0A%09%09%09%09idxLen%20%3D%20valImgPairs.length%3B%0A%09%09%09try%20%7B%0A%09%09%09%09if%20%28idxLen%20%3E%200%29%20%7B%0A%09%09%09%09%09for%20%28%3B%20idx%20%3C%20idxLen%3B%20idx++%29%20%7B%0A%09%09%09%09%09%09valList.push%28%24._prefType%20%3D%3D%3D%2064%20%3F%0A%09%09%09%09%09%09%09Number%28valImgPairs%5Bidx%5D%5B0%5D%29%20%3A%0A%09%09%09%09%09%09%09String%28valImgPairs%5Bidx%5D%5B0%5D%29%29%3B%0A%09%09%09%09%09%09imgList.push%28valImgPairs%5Bidx%5D%5B1%5D%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%20finally%20%7B%0A%09%09%09%09%24._prefValues%20%3D%20valList%3B%0A%09%09%09%09%24._prefImages%20%3D%20imgList%3B%0A%09%09%09%7D%0A%09%09%7D%20else%20%7B%0A%09%09%09%24._prefValues%20%3D%20null%3B%0A%09%09%09%24._prefImages%20%3D%20null%3B%0A%09%09%7D%0A%0A%09%09if%20%28%22CustomizableUI%22%20in%20window%29%20%7B%0A%09%09%09if%20%28%21window%5B%24._UID%5D%5B%22CustomizableUI%22%5D%29%20%7B%0A%09%09%09%09window%5B%24._UID%5D%5B%22CustomizableUI%22%5D%20%3D%20true%3B%0A%09%09%09%09CustomizableUI.addListener%28%7B%0A%09%09%09%09%09onCustomizeEnd%3A%20function%28aWindow%29%20%7B%0A%09%09%09%09%09%09let%20delay%20%3D%20function%28%29%20%7B%0A%09%09%09%09%09%09%09return%20Math.floor%28Math.random%28%29%20*%20%281%20+%202000%20-%20200%29%29%20+%20200%3B%0A%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09%09%24.selfDestroy%28%29%3B%0A%09%09%09%09%09%09%7D%2C%20delay%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09%28Services.prefs.getBranch%28%24.Branch%29%29.deleteBranch%28%22%22%29%3B%0A%09%09%09%09Services.prefs.savePrefFile%28null%29%3B%0A%09%09%09%7D%0A%09%09%7D%29%3B%0A%0A%09%09//%20Have%20to%20use%20stupid%20timeouts%20otherwise%20the%20second%20observer%20is%20not%20loaded.%20%AC%AC%0A%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%24.updateBtnDataAfterSwitch%28false%29%3B%0A%09%09%09%24.observePrefName%28%29%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%24.observeHandledPref%28%29%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%7D%2C%20100%29%3B%0A%09%7D%2C%0A%0A%09selfDestroy%3A%20function%28%29%20%7B%0A%09%09self.destroy%28%22update%22%29%3B%0A%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09self.init%28%29%3B%0A%09%09%7D%2C%20100%29%3B%0A%09%7D%2C%0A%0A%09updateBtnDataAfterSwitch%3A%20function%28aPrefChanged%29%20%7B%0A%09%09%24.setSelfImage%28%29%3B%0A%09%09%24.setSelfTooltip%28%29%3B%0A%09%09if%20%28%24._pShowNotification%20%26%26%20aPrefChanged%20%26%26%20%24._prefType%20%21%3D%3D%200%29%20%7B%0A%09%09%09%24.alertCallback.options%20%3D%20%7B%0A%09%09%09%09footer%3A%200%2C%0A%09%09%09%09centerScreen%3A%20false%2C%0A%09%09%09%7D%3B%0A%09%09%09%24.notifyme%28%24._pPrefName%2C%0A%09%09%09%09%22%uD835%uDDD6%uD835%uDE02%uD835%uDDFF%uD835%uDDFF%uD835%uDDF2%uD835%uDDFB%uD835%uDE01%20%uD835%uDE03%uD835%uDDEE%uD835%uDDF9%uD835%uDE02%uD835%uDDF2%3A%20%22%20+%20String%28%24.getPref%28%24._pPrefName%29%29%2C%0A%09%09%09%09%24.getHelp%28%22%25AlertImg%25%22%29%2C%0A%09%09%09%09%24.alertCallback%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09observePrefName%3A%20function%28%29%20%7B%0A%09%09Services.prefs.addObserver%28%24.Branch%20+%20%22pPrefName%22%2C%20%24.prefNameObserver%2C%20false%29%3B%0A%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22delete%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22update%22%29%20%7B%0A%09%09%09%09Services.prefs.removeObserver%28%24.Branch%20+%20%22pPrefName%22%2C%20%24.prefNameObserver%29%3B%0A%09%09%09%7D%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09prefNameObserver%3A%20%7B%0A%09%09observe%3A%20function%28aSubject%2C%20aTopic%2C%20aPStr%29%20%7B%0A%09%09%09if%20%28aTopic%20%3D%3D%3D%20%22nsPref%3Achanged%22%29%20%7B%0A%09%09%09%09Services.prefs.clearUserPref%28%24.Branch%20+%20%22pValueImagePairs%22%29%3B%0A%09%09%09%09Services.prefs.clearUserPref%28%24.Branch%20+%20%22pIntStrDefaultImage%22%29%3B%0A%09%09%09%09%24._pValueImagePairs%20%3D%20%5B%5D%3B%0A%09%09%09%09%24._pIntStrDefaultImage%20%3D%20%22%22%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09observeHandledPref%3A%20function%28%29%20%7B%0A%09%09if%20%28%24._prefType%20%3D%3D%3D%200%29%0A%09%09%09return%20true%3B%0A%09%09Services.prefs.addObserver%28%24._pPrefName%2C%20%24.handledPrefObserver%2C%20false%29%3B%0A%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22delete%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22update%22%29%20%7B%0A%09%09%09%09Services.prefs.removeObserver%28%24._pPrefName%2C%20%24.handledPrefObserver%29%3B%0A%09%09%09%7D%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09handledPrefObserver%3A%20%7B%0A%09%09observe%3A%20function%28aSubject%2C%20aTopic%2C%20aPStr%29%20%7B%0A%09%09%09if%20%28aTopic%20%3D%3D%3D%20%22nsPref%3Achanged%22%29%20%7B%0A%09%09%09%09%24._prefType%20%3D%20Services.prefs.getPrefType%28%24._pPrefName%29%3B%0A%09%09%09%09%24.updateBtnDataAfterSwitch%28true%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09setPref%3A%20function%28aPrompt%2C%20aInverse%29%20%7B%0A%09%09clearTimeout%28window%5B%24._UID%5D%5B%22SwitchTimer%22%5D%29%3B%0A%09%09if%20%28Services.prefs.prefIsLocked%28%24._pPrefName%29%29%20%7B%0A%09%09%09%24.alertCallback.options%20%3D%20%7B%0A%09%09%09%09footer%3A%202%2C%0A%09%09%09%09centerScreen%3A%20true%2C%0A%09%09%09%7D%3B%0A%09%09%09%24.notifyme%28%24._pPrefName%2C%0A%09%09%09%09%22This%20preference%20is%20%uD835%uDDF9%uD835%uDDFC%uD835%uDDF0%uD835%uDDF8%uD835%uDDF2%uD835%uDDF1.%22%2C%0A%09%09%09%09%24.getHelp%28%22%25WarningImg%25%22%29%2C%0A%09%09%09%09%24.alertCallback%29%3B%0A%09%09%09return%3B%0A%09%09%7D%0A%09%09var%20newValue%20%3D%20null%2C%0A%09%09%09curValue%2C%0A%09%09%09valueList%20%3D%20%24._prefValues%3B%0A%09%09let%20i%20%3D%200%2C%0A%09%09%09iLen%20%3D%20valueList%20%3F%20valueList.length%20%3A%20null%3B%0A%09%09switch%20%28%24._prefType%29%20%7B%0A%09%09%09case%200%3A%0A%09%09%09%09%24.alertCallback.options%20%3D%20%7B%0A%09%09%09%09%09footer%3A%201%2C%0A%09%09%09%09%09centerScreen%3A%20true%2C%0A%09%09%09%09%7D%3B%0A%09%09%09%09%24.notifyme%28%24._pPrefName%2C%0A%09%09%09%09%09%22This%20preference%20%uD835%uDDF1%uD835%uDDFC%uD835%uDDF2%uD835%uDE00%uD835%uDDFB%27%uD835%uDE01%20%uD835%uDDF2%uD835%uDE05%uD835%uDDF6%uD835%uDE00%uD835%uDE01%uD835%uDE00.%22%2C%0A%09%09%09%09%09%24.getHelp%28%22%25WarningImg%25%22%29%2C%0A%09%09%09%09%09%24.alertCallback%29%3B%0A%09%09%09%09return%3B%0A%09%09%09case%2032%3A%0A%09%09%09case%2064%3A%0A%09%09%09%09let%20isNum%20%3D%20%24._prefType%20%3D%3D%3D%2064%3B%0A%09%09%09%09curValue%20%3D%20isNum%20%3F%0A%09%09%09%09%09Services.prefs.getIntPref%28%24._pPrefName%29%20%3A%0A%09%09%09%09%09Services.prefs.getComplexValue%28%24._pPrefName%2C%20Ci.nsISupportsString%29.data%3B%0A%09%09%09%09if%20%28iLen%20%26%26%20iLen%20%3E%201%20%26%26%20%21aPrompt%29%20%7B%0A%09%09%09%09%09for%20%28%3B%20i%20%3C%20iLen%3B%20i++%29%20%7B%0A%09%09%09%09%09%09if%20%28valueList%5Bi%5D%20%3D%3D%3D%20curValue%29%20%7B%0A%09%09%09%09%09%09%09newValue%20%3D%20aInverse%20%3F%20%28valueList%5Bi%20-%201%5D%20%7C%7C%20null%29%20%3A%20%28valueList%5Bi%20+%201%5D%20%7C%7C%20null%29%3B%0A%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20%28%21newValue%29%0A%09%09%09%09%09%09newValue%20%3D%20aInverse%20%3F%20valueList%5BiLen%20-%201%5D%20%3A%20valueList%5B0%5D%3B%0A%09%09%09%09%09isNum%20%3F%0A%09%09%09%09%09%09Services.prefs.setIntPref%28%24._pPrefName%2C%20newValue%29%20%3A%0A%09%09%09%09%09%09Services.prefs.setComplexValue%28%24._pPrefName%2C%20Ci.nsISupportsString%2C%20%24._nsISS%29%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09newValue%20%3D%20%24.promptme%28%24._pPrefName%2C%20curValue%29%3B%0A%09%09%09%09%09if%20%28newValue%29%20%7B%0A%09%09%09%09%09%09isNum%20%3F%0A%09%09%09%09%09%09%09Services.prefs.setIntPref%28%24._pPrefName%2C%20newValue%29%20%3A%0A%09%09%09%09%09%09%09Services.prefs.setComplexValue%28%24._pPrefName%2C%20Ci.nsISupportsString%2C%20%24._nsISS%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09break%3B%0A%09%09%09case%20128%3A%0A%09%09%09%09Services.prefs.setBoolPref%28%24._pPrefName%2C%20%21Services.prefs.getBoolPref%28%24._pPrefName%29%29%3B%0A%09%09%09%09break%3B%0A%09%09%7D%0A%09%09window%5B%24._UID%5D%5B%22SwitchTimer%22%5D%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09Services.prefs.savePrefFile%28null%29%3B%0A%09%09%7D%2C%205000%29%3B%0A%09%7D%2C%0A%0A%09dealWithNonExistentPref%3A%20function%28%29%20%7B%0A%09%09let%20opts%20%3D%20%5B%22Boolean%22%2C%20%22Integer%22%2C%20%22String%22%5D%3B%0A%09%09let%20selected%20%3D%20%7B%7D%3B%0A%09%09let%20result%20%3D%20Services.prompt.select%28null%2C%20self.name%2C%20%22Choose%20the%20preference%20type.%22%2C%20opts.length%2C%0A%09%09%09opts%2C%20selected%29%3B%0A%09%09if%20%28result%29%20%7B%0A%09%09%09switch%20%28selected.value%29%20%7B%0A%09%09%09%09case%200%3A%0A%09%09%09%09%09Services.prefs.setBoolPref%28%24._pPrefName%2C%20false%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%201%3A%0A%09%09%09%09%09Services.prefs.setIntPref%28%24._pPrefName%2C%200%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%202%3A%0A%09%09%09%09%09%24._nsISS.data%20%3D%20%22%22%3B%0A%09%09%09%09%09Services.prefs.setComplexValue%28%24._pPrefName%2C%20Ci.nsISupportsString%2C%20%24._nsISS%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%24.selfDestroy%28%29%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%7D%20else%0A%09%09%09return%3B%0A%09%7D%2C%0A%0A%09setSelfTooltip%3A%20function%28%29%20%7B%0A%09%09let%20pVal%20%3D%20%24.getPref%28%24._pPrefName%29%3B%0A%09%09self.tooltipText%20%3D%20self.name%20+%20%22%5Ct%20ID%3A%20%22%20+%20self.id.slice%2820%29%20+%0A%09%09%09%22%5Cn%5Cn%5Ct%uD835%uDDE3%uD835%uDDFF%uD835%uDDF2%uD835%uDDF3.%20%uD835%uDDFB%uD835%uDDEE%uD835%uDDFA%uD835%uDDF2%3A%20%22%20+%20%24._pPrefName%20+%0A%09%09%09%22%5Cn%5Ct%uD835%uDDE3%uD835%uDDFF%uD835%uDDF2%uD835%uDDF3.%20%uD835%uDE03%uD835%uDDEE%uD835%uDDF9%uD835%uDE02%uD835%uDDF2%3A%20%22%20+%20%28pVal%20%3D%3D%3D%20null%20%3F%20%22%uD835%uDDE3%uD835%uDDFF%uD835%uDDF2%uD835%uDDF3%uD835%uDDF2%uD835%uDDFF%uD835%uDDF2%uD835%uDDFB%uD835%uDDF0%uD835%uDDF2%20%uD835%uDDF1%uD835%uDDFC%uD835%uDDF2%uD835%uDE00%uD835%uDDFB%27%uD835%uDE01%20%uD835%uDDF2%uD835%uDE05%uD835%uDDF6%uD835%uDE00%uD835%uDE01%uD835%uDE00.%22%20%3A%20pVal%29%20+%20%22%5Cn%22%20+%0A%09%09%09%22%5Cn%5Ct%uD835%uDDDF%uD835%uDDF2%uD835%uDDF3%uD835%uDE01%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%3A%20Switch/Set%20pref.%22%20+%0A%09%09%09%22%5Cn%5Ct%uD835%uDDE6%uD835%uDDF5%uD835%uDDF6%uD835%uDDF3%uD835%uDE01%20+%20%uD835%uDDDF%uD835%uDDF2%uD835%uDDF3%uD835%uDE01%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%3A%20Switch/Set%20pref.%20%28Inverse%29%22%20+%0A%09%09%09%22%5Cn%5Ct%uD835%uDDE0%uD835%uDDF6%uD835%uDDF1%uD835%uDDF1%uD835%uDDF9%uD835%uDDF2%20%uD835%uDDFC%uD835%uDDFF%20%22%20+%20%24.accel%28%29%20+%20%22%20+%20%uD835%uDDDF%uD835%uDDF2%uD835%uDDF3%uD835%uDE01%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%3A%20Set%20pref.%20prompt%22%20+%0A%09%09%09%22%5Cn%5Ct%22%20+%20%24.accel%28%29%20+%20%22%20+%20%uD835%uDDE5%uD835%uDDF6%uD835%uDDF4%uD835%uDDF5%uD835%uDE01%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%3A%20Reset%20pref.%22%20+%0A%09%09%09%22%5Cn%5Ct%22%20+%20%24.accel%28%29%20+%20%22%20+%20%uD835%uDDE6%uD835%uDDF5%uD835%uDDF6%uD835%uDDF3%uD835%uDE01%20+%20%uD835%uDDE5%uD835%uDDF6%uD835%uDDF4%uD835%uDDF5%uD835%uDE01%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%3A%20Button%20options%5Cn%5Cn%22%20+%0A%09%09%09%22%5Ct%uD835%uDDE5%uD835%uDDF2%uD835%uDDEE%uD835%uDDF1%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDF5%uD835%uDDF2%uD835%uDDF9%uD835%uDDFD%20%uD835%uDDF3%uD835%uDDFC%uD835%uDDFF%20%uD835%uDE03%uD835%uDDF2%uD835%uDDFF%uD835%uDE06%20%uD835%uDDF6%uD835%uDDFA%uD835%uDDFD%uD835%uDDFC%uD835%uDDFF%uD835%uDE01%uD835%uDDEE%uD835%uDDFB%uD835%uDE01%20%uD835%uDE02%uD835%uDE00%uD835%uDDEE%uD835%uDDF4%uD835%uDDF2%20%uD835%uDDFB%uD835%uDDFC%uD835%uDE01%uD835%uDDF2%uD835%uDE00.%5Ct%5Ct%5Cn%22%20+%0A%09%09%09%22%5CtRight%20click%20on%20button%2C%20%uD835%uDDD5%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDDB%uD835%uDDF2%uD835%uDDF9%uD835%uDDFD%20item.%5Cn%5Cn%22%3B%0A%09%7D%2C%0A%0A%09setSelfImage%3A%20function%28%29%20%7B%0A%09%09if%20%28%24._prefType%20%3D%3D%3D%200%20%7C%7C%20%21%24._pSwitchButtonImage%29%0A%09%09%09return%20true%3B%0A%09%09switch%20%28%24._prefType%29%20%7B%0A%09%09%09case%20128%3A%0A%09%09%09%09if%20%28Services.prefs.getBoolPref%28%24._pPrefName%29%29%0A%09%09%09%09%09self.image%20%3D%20%24._pBoolEnabledImage%3B%0A%09%09%09%09else%0A%09%09%09%09%09self.image%20%3D%20%24._pBoolDisabledImage%3B%0A%09%09%09%09break%3B%0A%09%09%09default%3A%0A%09%09%09%09let%20img%20%3D%20null%3B%0A%09%09%09%09try%20%7B%0A%09%09%09%09%09img%20%3D%20%24._prefImages%5B%24._prefValues.indexOf%28%24.getPref%28%24._pPrefName%29%29%5D%3B%0A%09%09%09%09%7D%20catch%20%28aErr%29%20%7B%7D%0A%09%09%09%09self.image%20%3D%20img%20%3F%20img%20%3A%20%24._pIntStrDefaultImage%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09getPref%3A%20function%28aKey%29%20%7B%0A%09%09switch%20%28%24._prefType%29%20%7B%0A%09%09%09case%20128%3A%0A%09%09%09%09return%20Services.prefs.getBoolPref%28aKey%29%3B%0A%09%09%09case%2064%3A%0A%09%09%09%09return%20Services.prefs.getIntPref%28aKey%29%3B%0A%09%09%09case%2032%3A%0A%09%09%09%09return%20Services.prefs.getComplexValue%28aKey%2C%20Ci.nsISupportsString%29.data%3B%0A%09%09%09default%3A%0A%09%09%09%09return%20null%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09/**%0A%09%20*%20%5BBased%20on%20code%20found%20in%20Custom%20Buttons%20addon.%5D%0A%09%20*%20@param%20%20%7Bobject%7D%20aBtn%20%20%20%20%20The%20button%20to%20which%20the%20menu%20item%20belongs%20used%20to%20build%20the%20execution%20code%20%28So%20it%20seems.%20LOL%29.%0A%09%20*%20@param%20%20%7Bstring%7D%20aURI%20%20%20%20%20%5Bdescription%5D%0A%09%20*%20@param%20%20%7Bobject%7D%20aExecCtx%20Execution%20context%20object.%0A%09%20*%20@return%20%7Bnull%7D%20%20%20%20%20%20%20%20%20%20%20%20Nothing%0A%09%20*/%0A%09buildExecContext%3A%20function%28aURI%2C%20aExecCtx%29%20%7B%0A%09%09var%20utils%20%3D%20%7B%7D%3B%0A%09%09utils%5B%22oButton%22%5D%20%3D%20self%3B%0A%09%09utils%5B%22buttonURI%22%5D%20%3D%20aURI%3B%0A%09%09Cc%5B%22@mozilla.org/moz/jssubscript-loader%3B1%22%5D%0A%09%09%09.getService%28Ci.mozIJSSubScriptLoader%29%0A%09%09%09.loadSubScript%28%22chrome%3A//custombuttons/content/contextBuilder.js%22%2C%20utils%29%3B%0A%09%09delete%20utils.oButton%3B%0A%09%09delete%20utils.buttonURI%3B%0A%09%09for%20%28let%20i%20in%20utils%29%20%7B%0A%09%09%09aExecCtx.argNames%20+%3D%20%22%2C%22%20+%20i%3B%0A%09%09%09aExecCtx.args.push%28utils%5Bi%5D%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09/**%0A%09%20*%20%5BBased%20on%20code%20found%20in%20Custom%20Buttons%20addon.%5D%0A%09%20*%20@param%20%20%7Bevent%7D%20aE%20%20%20%20%20Event%20triggered%20by%20the%20menu%20item.%20It%27s%20always%20a%20click%20event.%0A%09%20*%20@param%20%20%7Bobject%7D%20aBtn%20%20The%20button%20to%20which%20the%20menu%20item%20belongs%20used%20to%20build%20the%20execution%20code%20%28So%20it%20seems.%20LOL%29.%0A%09%20*%20@param%20%20%7Bstring%7D%20aCode%20The%20code%20to%20execute.%0A%09%20*%20@return%20%7Bnull%7D%20%20%20%20%20%20%20%20%20Nothing%0A%09%20*/%0A%09executeCode%3A%20function%28aE%2C%20aCode%29%20%7B%0A%09%09if%20%28aCode%29%20%7B%0A%09%09%09let%20cbService%20%3D%20Cc%5B%22@xsms.nm.ru/custombuttons/cbservice%3B1%22%5D%0A%09%09%09%09.getService%28Ci.cbICustomButtonsService%29%3B%0A%09%09%09var%20execURL%20%3D%20%22chrome%3A//custombuttons-context/content/button.js%3FwindowId%3D%22%3B%0A%09%09%09execURL%20+%3D%20cbService.getWindowId%28document.documentURI%29%20+%20%22%26id%3D%22%3B%0A%09%09%09execURL%20+%3D%20self.id%20+%20%22@%22%3B%0A%09%09%09execURL%20+%3D%20%22pseudoCode%22%3B%0A%09%09%09//%20execURL%20+%3D%20aBtn._initPhase%20%3F%20%22init%22%20%3A%20%22code%22%3B%0A%09%09%09var%20execContext%20%3D%20%7B%7D%3B%0A%09%09%09execContext%5B%22oButton%22%5D%20%3D%20self%3B%0A%09%09%09execContext%5B%22code%22%5D%20%3D%20aCode%3B%0A%09%09%09execContext%5B%22argNames%22%5D%20%3D%20%22event%22%3B%0A%09%09%09execContext%5B%22args%22%5D%20%3D%20%5BaE%5D%3B%0A%09%09%09%24.buildExecContext%28execURL%2C%20execContext%29%3B%0A%09%09%09Cc%5B%22@mozilla.org/moz/jssubscript-loader%3B1%22%5D%0A%09%09%09%09.getService%28Ci.mozIJSSubScriptLoader%29%0A%09%09%09%09.loadSubScript%28execURL%2C%20execContext%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09editPreference%3A%20function%28%29%20%7B%0A%09%09var%20em%20%3D%20Services.ww.getWindowEnumerator%28%29%3B%0A%09%09var%20winName%20%3D%20%24._UID%20+%20%22_edit_preference_window%22%3B%0A%09%09var%20index%20%3D%201%3B%0A%09%09while%20%28em.hasMoreElements%28%29%29%20%7B%0A%09%09%09let%20win%20%3D%20em.getNext%28%29%3B%0A%09%09%09if%20%28win.name%20%3D%3D%3D%20winName%29%20%7B%0A%09%09%09%09win.focus%28%29%3B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09index++%3B%0A%09%09%7D%0A%09%09let%20storage%20%3D%20%7B%0A%09%09%09button%3A%20self%2C%0A%09%09%09custombuttons%3A%20custombuttons%2C%0A%09%09%09prefType%3A%20%24._prefType%2C%0A%09%09%09accel%3A%20%24.accel%2C%0A%09%09%09pPrefName%3A%20%24._pPrefName%2C%0A%09%09%09pSwitchButtonImage%3A%20%24._pSwitchButtonImage%2C%0A%09%09%09pShowNotification%3A%20%24._pShowNotification%2C%0A%09%09%09pBoolEnabledImage%3A%20%24._pBoolEnabledImage%2C%0A%09%09%09pBoolDisabledImage%3A%20%24._pBoolDisabledImage%2C%0A%09%09%09pValueImagePairs%3A%20%24._pValueImagePairs%2C%0A%09%09%09pPseudoCommand%3A%20%24._pPseudoCommand%2C%0A%09%09%09pExecuteCodeAfterSwtich%3A%20%24._pExecuteCodeAfterSwtich%2C%0A%09%09%09pIntStrDefaultImage%3A%20%24._pIntStrDefaultImage%2C%0A%09%09%7D%3B%0A%09%09let%20xul%20%3D%20%24.getHelp%28%22%25OptionsWindow%25%22%29%3B%0A%09%09xul%20%3D%20xul.replace%28/%3E%5Cs+%3C/g%2C%20%22%3E%3C%22%29%3B%0A%09%09xul%20%3D%20xul.split%28%22%25U_I_D%25%22%29.join%28%24._UID%29%3B%0A%09%09let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28xul%29%3B%0A%09%09let%20optWin%20%3D%20openDialog%28url%2C%20winName%2C%20%22chrome%2C%20de%20dialog%3Dno%2C%20centerscreen%2C%20close%2Cresizable%2Cscrollbars%2Cdependent%3Dyes%22%29%3B%0A%09%09optWin._storage%20%3D%20storage%3B%0A%09%7D%2C%0A%0A%09promptme%3A%20function%28aMsg%2C%20aVal%29%20%7B%0A%09%09let%20retVal%20%3D%20%7B%0A%09%09%09value%3A%20aVal%0A%09%09%7D%3B%0A%09%09if%20%28Services.prompt.prompt%28null%2C%20self.name%2C%20aMsg%2C%20retVal%2C%20null%2C%20%7B%7D%29%29%0A%09%09%09return%20retVal.value%3B%0A%09%09else%0A%09%09%09return%20false%3B%0A%09%09return%20false%3B%0A%09%7D%2C%0A%0A%09accel%3A%20function%28aE%29%20%7B%0A%09%09if%20%28aE%29%0A%09%09%09return%20%24._isOSX%20%3F%20aE.metaKey%20%3A%20aE.ctrlKey%3B%0A%09%09return%20%24._isOSX%20%3F%20%22%uD835%uDDD6%uD835%uDDFC%uD835%uDDFA%uD835%uDDFA%uD835%uDDEE%uD835%uDDFB%uD835%uDDF1%22%20%3A%20%22%uD835%uDDD6%uD835%uDDFC%uD835%uDDFB%uD835%uDE01%uD835%uDDFF%uD835%uDDFC%uD835%uDDF9%22%3B%0A%09%7D%2C%0A%0A%09%24CNS%3A%20function%28aElName%2C%20aAttrs%2C%20aNameSpace%29%20%7B%20//%20Creates%20elements%0A%09%09var%20el%20%3D%20aNameSpace%20%3F%0A%09%09%09document.createElementNS%28aNameSpace%2C%20aElName%29%20%3A%0A%09%09%09document.createElement%28aElName%29%3B%0A%09%09if%20%28aAttrs%29%0A%09%09%09Object.keys%28aAttrs%29.forEach%28function%28n%29%20%7B%0A%09%09%09%09if%20%28aAttrs%5Bn%5D%20%21%3D%3D%20%22%22%29%0A%09%09%09%09%09el.setAttribute%28n%2C%20aAttrs%5Bn%5D%29%3B%0A%09%09%09%7D%29%3B%0A%09%09return%20el%3B%0A%09%7D%2C%0A%0A%09img_to_b64_cback%3A%20function%28aURL%2C%20aCallback%29%20%7B%0A%09%09if%20%28%21aURL%29%0A%09%09%09aCallback%28false%29%3B%0A%09%09else%20%7B%0A%09%09%09let%20xhr%20%3D%20new%20XMLHttpRequest%28%29%2C%0A%09%09%09%09nsIMIMEService%20%3D%20Cc%5B%22@mozilla.org/mime%3B1%22%5D.getService%28Ci.nsIMIMEService%29%3B%0A%09%09%09try%20%7B%0A%09%09%09%09xhr.open%28%22GET%22%2C%20aURL%2C%20true%29%3B%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09%09aCallback%28false%29%3B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%0A%09%09%09xhr.responseType%20%3D%20%22arraybuffer%22%3B%0A%09%09%09xhr.onload%20%3D%20function%28%29%20%7B%0A%09%09%09%09let%20mediaType%2C%0A%09%09%09%09%09dataURI%2C%0A%09%09%09%09%09binary%2C%0A%09%09%09%09%09bytes%3B%0A%09%09%09%09bytes%20%3D%20new%20Uint8Array%28xhr.response%29%3B%0A%09%09%09%09binary%20%3D%20%5B%5D.map.call%28bytes%2C%20function%28aByte%29%20%7B%0A%09%09%09%09%09return%20String.fromCharCode%28aByte%29%3B%0A%09%09%09%09%7D%29.join%28%22%22%29%3B%0A%09%09%09%09mediaType%20%3D%20xhr.getResponseHeader%28%22Content-Type%22%29%3B%0A%09%09%09%09let%20base64%20%3D%20btoa%28binary%29%3B%0A%09%09%09%09if%20%28mediaType.indexOf%28%22image/%22%29%20%21%3D%3D%200%29%20%7B%0A%09%09%09%09%09try%20%7B%0A%09%09%09%09%09%09mediaType%20%3D%20nsIMIMEService.getTypeFromURI%28Services.io.newURI%28aURL%2C%20null%2C%20null%29%29%3B%0A%09%09%09%09%09%7D%20catch%20%28aError%29%20%7B%0A%09%09%09%09%09%09mediaType%20%3D%20%22image/png%22%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09dataURI%20%3D%20%22data%3A%22%20+%20mediaType%20+%20%22%3Bbase64%2C%22%20+%20base64%3B%0A%09%09%09%09aCallback%28dataURI%29%3B%0A%09%09%09%7D%3B%0A%09%09%09xhr.onerror%20%3D%20function%28%29%20%7B%0A%09%09%09%09aCallback%28false%29%3B%0A%09%09%09%7D%3B%0A%09%09%09xhr.send%28null%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09getHelp%3A%20function%28aPlaceholder%29%20%7B%20//%20Get%20specific%20data%2C%20surrounded%20by%20%22placeholders%22%2C%20from%20the%20Help%20tab.%0A%09%09return%20document.getElementById%28self.id%29.getAttribute%28%22Help%22%29.split%28%22%3C%21--%22%20+%20aPlaceholder%20+%20%22--%3E%22%29%5B1%5D%3B%0A%09%7D%2C%0A%0A%09notifyme%3A%20function%28aTitle%2C%20aMsg%2C%20aImg%2C%20aCallback%29%20%7B%20//%20Notification%20function%0A%09%09let%20origin%20%3D%20%28Services.prefs.getPrefType%28%22ui.alertNotificationOrigin%22%29%20%21%3D%3D%200%29%20%3F%0A%09%09%09Services.prefs.getIntPref%28%22ui.alertNotificationOrigin%22%29%20%3A%0A%09%09%09null%3B%0A%09%09let%20win%20%3D%20Services.ww.openWindow%28null%2C%20%22chrome%3A//global/content/alerts/alert.xul%22%2C%0A%09%09%09%22_blank%22%2C%20%22chrome%2Ctitlebar%3Dno%2Cpopup%3Dyes%22%2C%20null%29%3B%0A%09%09win.arguments%20%3D%20%5BaImg%2C%20aTitle%2C%20aMsg%2C%20%21%21aCallback%2C%20%22%22%2C%20origin%2C%20%22%22%2C%20%22%22%2C%20null%2C%20%28%21%21aCallback%20%3F%20aCallback%20%3A%20null%29%5D%3B%0A%09%7D%2C%0A%0A%09getNotificationFooter%3A%20function%28aType%29%20%7B%0A%09%09switch%20%28aType%29%20%7B%0A%09%09%09case%201%3A%20//%20Non%20existent%20pref.%0A%09%09%09%09return%20%22%uD835%uDDD6%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%20%uD835%uDDFA%uD835%uDDF2%20%uD835%uDE01%uD835%uDDFC%20%uD835%uDDF0%uD835%uDDFF%uD835%uDDF2%uD835%uDDEE%uD835%uDE01%uD835%uDDF2%22%3B%0A%09%09%09case%202%3A%20//%20Locked%20pref.%0A%09%09%09%09return%20%22%uD835%uDDD6%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%20%uD835%uDDFA%uD835%uDDF2%20%uD835%uDE01%uD835%uDDFC%20%uD835%uDE02%uD835%uDDFB%uD835%uDDF9%uD835%uDDFC%uD835%uDDF0%uD835%uDDF8%22%3B%0A%09%09%09default%3A%0A%09%09%09%09return%20%22%uD835%uDDD6%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%20%uD835%uDDFA%uD835%uDDF2%20%uD835%uDE01%uD835%uDDFC%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDFC%uD835%uDE00%uD835%uDDF2%20%uD835%uDDFA%uD835%uDDF2%22%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09alertCallback%3A%20%7B%0A%09%09options%3A%20%7B%0A%09%09%09footer%3A%20null%2C%0A%09%09%09centerScreen%3A%20null%0A%09%09%7D%2C%0A%09%09observe%3A%20function%28aSubject%2C%20aTopic%2C%20aData%29%20%7B%0A%09%09%09let%20alt%20%3D%20Services.wm.getMostRecentWindow%28%22alert%3Aalert%22%29%3B%0A%09%09%09let%20tBox%20%3D%20alt.document.getElementById%28%22alertTextBox%22%29%3B%0A%09%09%09if%20%28aTopic%20%3D%3D%3D%20%22alertshow%22%29%20%7B%0A%09%09%09%09tBox.appendChild%28%24.%24CNS%28%22label%22%2C%20%7B%0A%09%09%09%09%09flex%3A%201%2C%0A%09%09%09%09%09value%3A%20%24.getNotificationFooter%28this.options.footer%29%2C%0A%09%09%09%09%7D%29%29%3B%0A%09%09%09%09if%20%28this.options.centerScreen%29%20%7B%0A%09%09%09%09%09alt.moveTo%28%28screen.availWidth%20/%202%29%20-%20%28alt.outerWidth%20/%202%29%2C%0A%09%09%09%09%09%09%28screen.availHeight%20/%202%29%20-%20%28alt.outerHeight%20/%202%29%29%3B%0A%09%09%09%09%7D%0A%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09alt.close%28%29%3B%0A%09%09%09%09%7D%2C%20%28this.options.centerScreen%20%3F%2010000%20%3A%203000%29%29%3B%0A%09%09%09%7D%0A%09%09%09if%20%28aTopic%20%3D%3D%3D%20%22alertclickcallback%22%29%20%7B%0A%09%09%09%09alt.close%28%29%3B%0A%09%09%09%09switch%20%28this.options.footer%29%20%7B%0A%09%09%09%09%09case%201%3A%20//%20Non%20existent%20pref.%0A%09%09%09%09%09%09%24.dealWithNonExistentPref%28%24._pPrefName%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%202%3A%20//%20Locked%20pref.%0A%09%09%09%09%09%09Services.prefs.unlockPref%28%24._pPrefName%29%3B%0A%09%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09%09if%20%28Services.prefs.prefIsLocked%28%24._pPrefName%29%29%20%7B%0A%09%09%09%09%09%09%09%09%24.alertCallback.options%20%3D%20%7B%0A%09%09%09%09%09%09%09%09%09footer%3A%200%2C%0A%09%09%09%09%09%09%09%09%09centerScreen%3A%20false%2C%0A%09%09%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%09%09%09%24.notifyme%28%24._pPrefName%2C%0A%09%09%09%09%09%09%09%09%09%22This%20preference%20%uD835%uDDF0%uD835%uDDFC%uD835%uDE02%uD835%uDDF9%uD835%uDDF1%20%uD835%uDDFB%uD835%uDDFC%uD835%uDE01%20be%20%uD835%uDE02%uD835%uDDFB%uD835%uDDF9%uD835%uDDFC%uD835%uDDF0%uD835%uDDF8%uD835%uDDF2%uD835%uDDF1.%22%2C%0A%09%09%09%09%09%09%09%09%09%24.getHelp%28%22%25ErrorImg%25%22%29%2C%0A%09%09%09%09%09%09%09%09%09%24.alertCallback%29%3B%0A%09%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09%09%24.alertCallback.options%20%3D%20%7B%0A%09%09%09%09%09%09%09%09%09footer%3A%200%2C%0A%09%09%09%09%09%09%09%09%09centerScreen%3A%20false%2C%0A%09%09%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%09%09%09%24.notifyme%28%24._pPrefName%2C%0A%09%09%09%09%09%09%09%09%09%22This%20preference%20has%20been%20%uD835%uDE02%uD835%uDDFB%uD835%uDDF9%uD835%uDDFC%uD835%uDDF0%uD835%uDDF8%uD835%uDDF2%uD835%uDDF1.%22%2C%0A%09%09%09%09%09%09%09%09%09%24.getHelp%28%22%25AlertImg%25%22%29%2C%0A%09%09%09%09%09%09%09%09%09%24.alertCallback%29%3B%0A%09%09%09%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09%09%09%09%24.selfDestroy%28%29%3B%0A%09%09%09%09%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09_UID%3A%20%22__preference_switcher_%22%20+%20self.id.slice%2814%29%2C%0A%09_prefType%3A%200%2C%0A%09_nsISS%3A%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%2C%0A%09_isOSX%3A%20Services.appinfo.OS.toLowerCase%28%29.startsWith%28%22darwin%22%29%2C%0A%09_prefValues%3A%20null%2C%0A%09_prefImages%3A%20null%2C%0A%7D%3B%0A%0Athis.PreferenceSwitcher.Branch%20%3D%20%22CB.PreferenceSwitcher.Id%22%20+%20self.id.slice%2820%29%20+%20%22.%22%3B%0A%0Athis.PreferenceSwitcher.DefPrefs%20%3D%20%7B%0A%09pPrefName%3A%20%22%22%2C%0A%09pSwitchButtonImage%3A%20false%2C%0A%09pShowNotification%3A%20true%2C%0A%09pBoolEnabledImage%3A%20%22%22%2C%0A%09pBoolDisabledImage%3A%20%22%22%2C%0A%09pValueImagePairs%3A%20%22%5B%5D%22%2C%0A%09pExecuteCodeAfterSwtich%3A%20false%2C%0A%09pPseudoCommand%3A%20%22%22%2C%0A%09pIntStrDefaultImage%3A%20%22%22%2C%0A%7D%3B%0A%0Athis.PreferenceSwitcher.InitPrefs%20%3D%20function%28%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getDefaultBranch%28self.PreferenceSwitcher.Branch%29%2C%0A%09%09defaults%20%3D%20self.PreferenceSwitcher.DefPrefs%3B%0A%09for%20%28let%20key%20in%20defaults%29%20%7B%0A%09%09if%20%28defaults.hasOwnProperty%28key%29%29%20%7B%0A%09%09%09let%20val%20%3D%20defaults%5Bkey%5D%3B%0A%09%09%09switch%20%28typeof%20val%29%20%7B%0A%09%09%09%09case%20%22boolean%22%3A%0A%09%09%09%09%09branch.setBoolPref%28key%2C%20val%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22number%22%3A%0A%09%09%09%09%09branch.setIntPref%28key%2C%20val%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22string%22%3A%0A%09%09%09%09%09let%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%09%09%09%09%09str.data%20%3D%20val%3B%0A%09%09%09%09%09branch.setComplexValue%28%28key%29%2C%0A%09%09%09%09%09%09Ci.nsISupportsString%2C%20str%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%7D%3B%0A%0Athis.PreferenceSwitcher.gPref%20%3D%20function%28aKey%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getBranch%28self.PreferenceSwitcher.Branch%29%3B%0A%09switch%20%28typeof%20self.PreferenceSwitcher.DefPrefs%5BaKey%5D%29%20%7B%0A%09%09case%20%22boolean%22%3A%0A%09%09%09return%20branch.getBoolPref%28aKey%29%3B%0A%09%09case%20%22number%22%3A%0A%09%09%09return%20branch.getIntPref%28aKey%29%3B%0A%09%09case%20%22string%22%3A%0A%09%09%09return%20branch.getComplexValue%28aKey%2C%20Ci.nsISupportsString%29.data%3B%0A%09%7D%0A%09return%20null%3B%0A%7D%3B%0A%0Athis.PreferenceSwitcher.sPref%20%3D%20function%28aKey%2C%20aVal%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getBranch%28self.PreferenceSwitcher.Branch%29%3B%0A%09switch%20%28typeof%20aVal%29%20%7B%0A%09%09case%20%22boolean%22%3A%0A%09%09%09branch.setBoolPref%28aKey%2C%20aVal%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22number%22%3A%0A%09%09%09branch.setIntPref%28aKey%2C%20aVal%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22string%22%3A%0A%09%09%09let%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%09%09%09str.data%20%3D%20aVal%3B%0A%09%09%09branch.setComplexValue%28%28aKey%29%2C%20Ci.nsISupportsString%2C%20str%29%3B%0A%09%09%09break%3B%0A%09%7D%0A%7D%3B%0A%0Athis.PreferenceSwitcher.init%28%29%3B%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5Bif%20%28%21event.target%20%26%26%20%21this.disabled%29%0A%09this.setPref%28false%2C%20false%29%3B%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%uD835%uDDE8%uD835%uDE00%uD835%uDDEE%uD835%uDDF4%uD835%uDDF2%0A%u26AB%20After%20intalled%2C%20click%20the%20button.%20The%20%uD835%uDDE3%uD835%uDDFF%uD835%uDDF2%uD835%uDDF3%uD835%uDDF2%uD835%uDDFF%uD835%uDDF2%uD835%uDDFB%uD835%uDDF0%uD835%uDDF2%20%uD835%uDDE6%uD835%uDE04%uD835%uDDF6%uD835%uDE01%uD835%uDDF0%uD835%uDDF5%uD835%uDDF2%uD835%uDDFF%20options%20window%20will%20appear.%0A%u26AB%20Set%20the%20name%20of%20the%20preference%20that%20you%20want%20to%20control/switch%20and%20save%20the%20changes.%0A%u26AB%20Done.%0A%0A%uD835%uDDDC%uD835%uDDFA%uD835%uDDFD%uD835%uDDFC%uD835%uDDFF%uD835%uDE01%uD835%uDDEE%uD835%uDDFB%uD835%uDE01%20%uD835%uDDFB%uD835%uDDFC%uD835%uDE01%uD835%uDDF2%uD835%uDE00%0A%u26AB%20This%20button%20can%20be%20cloned/installed%20countless%20times%20to%20control/switch%20any%20preference%20of%20any%20type.%0A%u26AB%20If%20the%20preference%20you%20wish%20to%20control/switch%20doesn%27t%20exists%2C%20click%20the%20button%20once%20and%20you%20will%20be%20asked%20to%20create%20it%20on%20the%20fly.%20Follow%20the%20instructions.%0A%u26AB%20If%20the%20preference%20you%20wish%20to%20control/switch%20is%20locked%2C%20you%20will%20be%20asked%20to%20unlock%20it%20on%20the%20fly.%0A%0A%5B%2C%5D%0A%0A%0A%26lt%3B%21--%25OptionsWindow%25--%26gt%3B%26lt%3B%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%20%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22data%3Atext/css%3Bcharset%3Dutf-8%2C%0Awindow%20*%20%7B%0A%09font-family%3A%20%26amp%3Bquot%3BOpen%20Sans%26amp%3Bquot%3B%2C%20Helvetica%2C%20Arial%2C%20sans-serif%20%21important%3B%0A%7D%0Acaption%20.caption-text%2C%0A.bold_text%20%7B%0A%09font-weight%3A%20bold%20%21important%3B%0A%7D%0Abutton%20%7B%0A%09min-width%3A%200%20%21important%3B%0A%7D%0Abutton%20.button-text%20%7B%0A%09display%3A%20inline-block%20%21important%3B%0A%09text-align%3A%20left%20%21important%3B%0A%7D%0A/*%20Force%20groupboxes%20on%20Linux%20to%20have%20the%20same%20appearance%20than%20in%20Windows%20*/%0A/*%20Just%20because%20it%20makes%20effing%20sence%21%21%21%21%20*/%0A/*%20Why%20have%20elements%20grouped%20inside%20a%20groupbox%20and%20not%20visually%20delimited%3F%21%3F%21%3F%21%20*/%0Agroupbox%20%7B%0A%09-moz-appearance%3A%20groupbox%20%21important%3B%0A%09border%3A%202px%20groove%20ThreeDFace%20%21important%3B%0A%09border-radius%3A%203px%20%21important%3B%0A%09margin%3A%203px%20%21important%3B%0A%09padding%3A%203px%203px%206px%20%21important%3B%0A%7D%0Agroupbox.optional-groupbox%20%7B%0A%09border%3A%202px%20groove%20green%20%21important%3B%0A%7D%0A.groupbox-body%20%7B%0A%09padding%3A%20inherit%20%21important%3B%0A%7D%0Acaption%20%7B%0A%09margin%3A%200%206px%20%21important%3B%0A%09background-color%3A%20-moz-Dialog%20%21important%3B%0A%7D%0A.caption-text%20%7B%0A%09margin%3A%200%202px%20%21important%3B%0A%7D%0A.optional-textbox%20%7B%0A%09outline%3A%202px%20solid%20green%20%21important%3B%0A%7D%0A.optional-text%20%7B%0A%09background-color%3A%20green%20%21important%3B%0A%09color%3A%20white%20%21important%3B%0A%09font-weight%3A%20bold%20%21important%3B%0A%09padding%3A%200%204px%200%204px%20%21important%3B%0A%7D%0A.required-textbox%20%7B%0A%09outline%3A%202px%20solid%20orange%20%21important%3B%0A%7D%0A.required-text%20%7B%0A%09background-color%3A%20orange%20%21important%3B%0A%09color%3A%20black%20%21important%3B%0A%09font-weight%3A%20bold%20%21important%3B%0A%09padding%3A%200%204px%200%204px%20%21important%3B%0A%7D%0A.delete-pair%20%7B%0A%09list-style-image%3A%20url%28%26amp%3Bquot%3Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAABVklEQVQokWNgoAT8//+f+////9xofB5cigXmGemnz9LRyX97+zbf29u3+Wbp6OTPN9TP+P//vwCGyavsrdLm8HH+XCDA/X6Fo33aSif71AUC3O/n8HH+XGFnmY5i0////7n3piTVH1aVfXFAVuT/aknB96skBd8fkBX5f0RV9sXelJQGZKdCNH3+LPaot7P2vL7yi1MaUv9PaUj9P6+v/OJxT0fd/8+fxTD9cPs23/6YoPSTJipvrxsr/L9urPD/pInK2/2xgRn/b9/mw/DDDh+7/AMGcu/vWKv9f+is++Khs+6LO9Zq/w8ayL3f4W1bgOKk////89yb0F763FPv22tfkxcfF0yo+7xwYu1rX5MXzz31vj2Y0F6KEbz///+X/r16Tsn3ma21/7+8FP//+bPY95mttT9WzS79//+/NK64EPv//7/E////GaFY4v///+JYFRMLAKUewtoAYB96AAAAAElFTkSuQmCC%26amp%3Bquot%3B%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0A.save_changes%20%7B%0A%09list-style-image%3A%20url%28%26amp%3Bquot%3Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACdElEQVQ4jWNgIBGE/mdgZvjPwEiqPgYGBgaGpCOGUhX3XFO630Zapp0xZiVJc/QSFb78aw4dXe/C3k/8lnCj73OkfcN/BiaiNEfsUpfKPGfV0fDE/33jc///PR8i/nW9iz5Rez/QnoGBgYHBYT4Dh/cGNdugHZqS6Jq9l8oJppyw6ml8FvCx6Lbz/7iThv8zL1n9r37k+6fgusdGBoYGBqbQvXpOmeecbqecsu33XKUiCtNsPJOBNXiHfm/NQ78veTcd/wcf0vofsF/9f+BBjX/RR40fxBwx8WNIOWinWHnPd3/di8B/1Q/93yYcse6yWSonqDddXCxgi/bkyge+XzOu2f332qv632238n+P3Sr//XZr3wnaoRvlOUmFnaHgivu2kocevz32qf5PvGT1r+Ke/2fvDdqz3NapL25+Efol8ZLVf8edCv9tt8n+t9sm999lu9oZv42adtqrtNkYGBgYGKy2yW212S73w2Sz5D+LrTL/k6/a/C+74/u/7I7P/9gLFv9NNknC8F+LdbIX7NcqO6IEkvpyLimdNcKLtdaK/tBaK/LfYKPE//Bzpv+DThn9198g/l9rrch/7TWif3SXS14wWSLvaTyTATP+pZYLycqvFFijuJL/p+JKgf9KqwT/K60U+K+4UuC/4gqBvyoLRS6oTRW1wZsCBRdxykks5loovoT7k/gS7v/iS7j/iy/i+S81i/eCTL+gJwMDEcmXdy6DOt88toW8C9h+8s1l+88/keOMSCuPI0MaFmfjAIwM/QwKbNMY1rJ0Mp5kKGOwIFYjDLAyCDAI8ITyaHH7cOszSDMIMzAQbzuqS4jxMwMDAwDtNu92OyP2UwAAAABJRU5ErkJggg%3D%3D%26amp%3Bquot%3B%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0A.cancel_changes%20%7B%0A%09list-style-image%3A%20url%28%26amp%3Bquot%3Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADdklEQVQ4jXVTb0yUBRx+3n+8977vve/BcXhIBzg5CMZRCAvGSIZQMCXpRFhkagRjTkjStdr6M9bW1/rCt1tZ0vDUU1E4QMHrAMk7F4zDY4qYRBdkyzJK0eMC9+sLOGnr+fo8z2+/Pc8eYBVtgHZSH2NzqqoJ/4Muk0l1WSxZLovFuI4oAKTjVXu2Tbd++tmNhsbac9HR0f81d8CoTVZUVk01t3x+vGJ3+U5AXuOi7BbL9q79jRf/cp5duvNRa9Cfld3YqaqxawIXNOPlrOy6UPORwJ9tX0Z69tV7X0vc9CoAHarzi2u/2P3GlZm6g0sP322lB4c/WAlVVk+NbEpp+QZQHIDcn7y5aXa7/fr95vdWHh75mGbr3444il4e3ZWZ+ybeyi89PdBwKLywrYLu5hfTvXI7LVbtodmcvJ/G8l9850p2dtN0uu3H+6U76Peicrr7wlb6e2sZ9ReWRRqyCvtRkbblpQMZz53tS9z8IGTaQLfNCfSb7XlaTH2W7lVW/fpHUfH8gmkD3TEn0A8xsRSKNpInLv7RgbiN/fbEDDsACGmCkNek6DvcmmFxVBRpWBDopiDQgiWJfjbF0QTL0iDDkJ/jyC1EhQ/xUefTgWIAurWcuAIgvUXQdZxStMcXeIHOAdQHhroB6gSoh2HIyfGPDzPc+RIgBwC/rqYagHsfyOvOsA0PWJLoGMfRUYCOAvQVw5A72kiuBEvwQ6C8BuDWmdsA8YQk5Z9R9Kd6FH3YxfPUDpCTYegEy1I7QCd5ntx6/cppWd/ZLkkFn6y97wAEF8+XXFDUbo8kh3tZjnoA8jAMjcYYadwcT98yDPUC1Mdy5JHkcK+i9BwTxTIHIOD7fXU7v0uxDg6K4pKXZWkEoHGWpRuSRBMJlvlgivX2TVmmwCrnZVkaEnVLg0bTiDstw47x6tquyS05ER/H0RhA0yxLIVlevqaqtwZEsXlA0e29ZjAEQ6r6z61VjY/jacK8cdmfneuFL7egxm8yXbouSY/mFIV+0bTlSU0LDIniwUuAwQHIHp1ubzDG4JtX1chcVBRNSfLSVVX1X7Va6/E1oBvmUTKT+Ez3fGFheNJqDfgEYb8HeLKFPkAbkaRd43GxvrlUa2TGbPaOcNwr/YDyJEh3UlLpZZvtzFRm5utjTy3tqSNiID5+x1BqivNicnJFGyACwL8fh1x5BGHtQgAAAABJRU5ErkJggg%3D%3D%26amp%3Bquot%3B%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0A.warning%7B%0A%09font-weight%3A%20bold%20%21important%3B%0A%09color%3A%20red%20%21important%3B%0A%7D%0A%22%20type%3D%22text/css%22%20%3F%26gt%3B%0A%26lt%3Bwindow%20id%3D%22%25U_I_D%25_edit_preference_window%22%0A%09%20%20%20%20onload%3D%22%24.onLoad%28%29%3B%22%0A%09%20%20%20%20onunload%3D%22%24.onUnload%28%29%3B%22%0A%09%20%20%20%20minwidth%3D%22600%22%0A%09%20%20%20%20title%3D%22Preference%20Switcher%22%0A%09%20%20%20%20xmlns%3Ahtml%3D%22http%3A//www.w3.org/1999/xhtml%22%0A%09%20%20%20%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%26gt%3B%0A%26lt%3Bscript%26gt%3B%26lt%3B%21%5BCDATA%5B%0Avar%20Cc%20%3D%20Components.classes%3B%0Avar%20Ci%20%3D%20Components.interfaces%3B%0Avar%20Cu%20%3D%20Components.utils%3B%0ACu.import%28%22resource%3A//gre/modules/Services.jsm%22%29%3B%0Avar%20stg%20%3D%20window._storage%3B%0Avar%20cb_btn%20%3D%20stg.button%3B%0Avar%20initialPrefName%20%3D%20stg.pPrefName%3B%0A%0Afunction%20%24id%28aID%2C%20aParent%29%20%7B%0A%09if%20%28%21aParent%29%0A%09%09return%20document.getElementById%28aID%29%3B%0A%09return%20aParent.getElementById%28aID%29%3B%0A%7D%0Avar%20%24%20%3D%20%7B%0A%09onLoad%3A%20function%28%29%20%7B%0A%09%09%24.populatefields%28%29%3B%0A%09%09%24.populateValImgPairBox%28%29%3B%0A%09%09window.addEventListener%28%22focus%22%2C%20%24%2C%20false%29%3B%0A%09%09window.addEventListener%28%22blur%22%2C%20%24%2C%20false%29%3B%0A%09%09%24.highlightButton%28cb_btn%2C%201%29%3B%0A%09%7D%2C%0A%09onUnload%3A%20function%28%29%20%7B%0A%09%09%24.highlightButton%28cb_btn%29%3B%0A%09%09window.removeEventListener%28%22focus%22%2C%20%24%2C%20false%29%3B%0A%09%09window.removeEventListener%28%22blur%22%2C%20%24%2C%20false%29%3B%0A%09%09cb_btn.PreferenceSwitcher.selfDestroy%28%29%3B%0A%09%7D%2C%0A%09populatefields%3A%20function%28%29%20%7B%0A%09%09Array.prototype.slice.call%28document.getElementsByAttribute%28%22preference%22%2C%20%22*%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09let%20pref%20%3D%20aEl.getAttribute%28%22preference%22%29%3B%0A%09%09%09switch%20%28aEl.nodeName.toLowerCase%28%29%29%20%7B%0A%09%09%09%09case%20%22textbox%22%3A%0A%09%09%09%09%09aEl.value%20%3D%20stg%5Bpref%5D%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22checkbox%22%3A%0A%09%09%09%09%09aEl.checked%20%3D%20stg%5Bpref%5D%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D%29%3B%0A%09%09%24.setElementsVisibility%28%29%3B%0A%09%09%24.setElementsAvailability%28%29%3B%0A%09%7D%2C%0A%09_timer1%3A%20null%2C%0A%09setElementsAvailability%3A%20function%28%29%20%7B%0A%09%09clearTimeout%28%24._timer1%29%3B%0A%09%09%24._timer1%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09let%20swticImgOn%20%3D%20document.getElementsByAttribute%28%22preference%22%2C%20%22pSwitchButtonImage%22%29%5B0%5D.checked%3B%0A%09%09%09let%20useCodeOn%20%3D%20document.getElementsByAttribute%28%22preference%22%2C%20%22pExecuteCodeAfterSwtich%22%29%5B0%5D.checked%3B%0A%09%09%09Array.prototype.slice.call%28document.getElementsByAttribute%28%22data-disabled%22%2C%20%22switch-image%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09aEl.disabled%20%3D%20%21swticImgOn%3B%0A%09%09%09%7D%29%3B%0A%09%09%09Array.prototype.slice.call%28document.getElementsByAttribute%28%22data-disabled%22%2C%20%22command%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09aEl.disabled%20%3D%20%21useCodeOn%3B%0A%09%09%09%7D%29%3B%0A%09%09%7D%2C%20200%29%3B%0A%09%7D%2C%0A%09setElementsVisibility%3A%20function%28%29%20%7B%0A%09%09let%20boolContainer%20%3D%20%24id%28%22bool-image-container%22%29%3B%0A%09%09let%20intStrContainer%20%3D%20%24id%28%22value-image-pair-container%22%29%3B%0A%09%09switch%20%28stg.prefType%29%20%7B%0A%09%09%09case%200%3A%0A%09%09%09%09boolContainer.hidden%20%3D%20true%3B%0A%09%09%09%09intStrContainer.hidden%20%3D%20true%3B%0A%09%09%09%09return%3B%0A%09%09%09case%2032%3A%0A%09%09%09case%2064%3A%0A%09%09%09%09boolContainer.hidden%20%3D%20true%3B%0A%09%09%09%09intStrContainer.hidden%20%3D%20false%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20128%3A%0A%09%09%09%09boolContainer.hidden%20%3D%20false%3B%0A%09%09%09%09intStrContainer.hidden%20%3D%20true%3B%0A%09%09%09%09break%3B%0A%09%09%7D%0A%09%7D%2C%0A%09handleEvent%3A%20function%28aE%29%20%7B%0A%09%09switch%20%28aE.type%29%20%7B%0A%09%09%09case%20%22focus%22%3A%0A%09%09%09%09%24.highlightButton%28cb_btn%2C%201%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22blur%22%3A%0A%09%09%09%09%24.highlightButton%28cb_btn%2C%202%29%3B%0A%09%09%09%09break%3B%0A%09%09%7D%0A%09%7D%2C%0A%09highlightButtonTimer%3A%20null%2C%0A%09highlightButton%3A%20function%28aEl%2C%20aStyle%29%20%7B%0A%09%09aEl.style.removeProperty%28%22border-color%22%29%3B%0A%09%09aEl.style.removeProperty%28%22box-shadow%22%29%3B%0A%09%09aEl.style.removeProperty%28%22outline%22%29%3B%0A%09%09aEl.style.removeProperty%28%22outline-offset%22%29%3B%0A%09%09aEl.style.removeProperty%28%22transition-duration%22%29%3B%0A%09%09if%20%28%21aStyle%29%0A%09%09%09return%20true%3B%0A%09%09clearTimeout%28%24.highlightButtonTimer%29%3B%0A%09%09%24.highlightButtonTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09switch%20%28aStyle%29%20%7B%0A%09%09%09%09case%201%3A%0A%09%09%09%09%09aEl.style.setProperty%28%22border-color%22%2C%20%22rgba%280%2C200%2C0%2C1%29%22%2C%20%22important%22%29%3B%0A%09%09%09%09%09aEl.style.setProperty%28%22box-shadow%22%2C%20%220%200%201px%201px%20rgba%280%2C200%2C0%2C1%29%22%2C%20%22important%22%29%3B%0A%09%09%09%09%09aEl.style.setProperty%28%22outline%22%2C%20%222px%20solid%20rgba%280%2C200%2C0%2C1%29%22%2C%20%22important%22%29%3B%0A%09%09%09%09%09aEl.style.setProperty%28%22outline-offset%22%2C%20%22-2px%22%2C%20%22important%22%29%3B%0A%09%09%09%09%09aEl.style.setProperty%28%22transition-duration%22%2C%20%2210ms%22%2C%20%22important%22%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%202%3A%0A%09%09%09%09%09aEl.style.setProperty%28%22border-color%22%2C%20%22rgba%280%2C200%2C0%2C.2%29%22%2C%20%22important%22%29%3B%0A%09%09%09%09%09aEl.style.setProperty%28%22box-shadow%22%2C%20%220%200%201px%201px%20rgba%280%2C200%2C0%2C.5%29%22%2C%20%22important%22%29%3B%0A%09%09%09%09%09aEl.style.setProperty%28%22outline%22%2C%20%222px%20dotted%20rgba%280%2C200%2C0%2C.5%29%22%2C%20%22important%22%29%3B%0A%09%09%09%09%09aEl.style.setProperty%28%22outline-offset%22%2C%20%22-2px%22%2C%20%22important%22%29%3B%0A%09%09%09%09%09aEl.style.setProperty%28%22transition-duration%22%2C%20%2210ms%22%2C%20%22important%22%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D%2C%2010%29%3B%0A%09%7D%2C%0A%09populateValImgPairBox%3A%20function%28%29%20%7B%0A%09%09if%20%28%21%28stg.prefType%20%3D%3D%3D%2032%20%7C%7C%20stg.prefType%20%3D%3D%3D%2064%29%29%0A%09%09%09return%20true%3B%0A%09%09let%20box%20%3D%20%24id%28%22value-image-pair-box%22%29%3B%0A%09%09let%20valImgPairs%20%3D%20JSON.parse%28stg%5B%22pValueImagePairs%22%5D%29%3B%0A%09%09Array.prototype.slice.call%28valImgPairs%29.forEach%28function%28aPair%29%20%7B%0A%09%09%09%24.addNewRow%28aPair%2C%20box%29%3B%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%09addNewRow%3A%20function%28aPair%2C%20aBox%29%20%7B%0A%09%09let%20hBox%20%3D%20aBox.appendChild%28%24.%24CNS%28%22hbox%22%2C%20%7B%0A%09%09%09align%3A%20%22center%22%2C%0A%09%09%09%22data-hbox%22%3A%20%22true%22%0A%09%09%7D%29%29%3B%0A%09%09hBox.appendChild%28%24.%24CNS%28%22label%22%2C%20%7B%0A%09%09%09value%3A%20%22Value%22%2C%0A%09%09%09class%3A%20%22bold_text%22%2C%0A%09%09%7D%29%29%3B%0A%09%09hBox.appendChild%28%24.%24CNS%28%22textbox%22%2C%20%7B%0A%09%09%09value%3A%20aPair%5B0%5D%2C%0A%09%09%09tooltip%3A%20%22%22%2C%0A%09%09%09%22data-value%22%3A%20%22value%22%2C%0A%09%09%09flex%3A%201%0A%09%09%7D%29%29%3B%0A%09%09hBox.appendChild%28%24.%24CNS%28%22label%22%2C%20%7B%0A%09%09%09value%3A%20%22Image%22%2C%0A%09%09%09class%3A%20%22bold_text%22%2C%0A%09%09%7D%29%29%3B%0A%09%09hBox.appendChild%28%24.%24CNS%28%22spacer%22%29%29%3B%0A%0A%09%09let%20hBox2%20%3D%20hBox.appendChild%28%24.%24CNS%28%22hbox%22%2C%20%7B%0A%09%09%09align%3A%20%22center%22%2C%0A%09%09%09flex%3A%201%0A%09%09%7D%29%29%3B%0A%09%09hBox2.appendChild%28%24.%24CNS%28%22textbox%22%2C%20%7B%0A%09%09%09value%3A%20aPair%5B1%5D%2C%0A%09%09%09%22data-disabled%22%3A%20%22switch-image%22%2C%0A%09%09%09%22data-tooltip%22%3A%20%22Image%20for%20this%20button%20when%20the%20preference%20is%20set%20to%20the%20value%20found%20to%20the%20left.%20Leave%20it%20blank%20to%20use%20the%20default%20image%20set%20above.%22%2C%0A%09%09%09tooltip%3A%20%22dynamic_tt%22%2C%0A%09%09%09%22data-image%22%3A%20%22image%22%2C%0A%09%09%09flex%3A%20100%0A%09%09%7D%29%29%3B%0A%09%09hBox2.appendChild%28%24.%24CNS%28%22hbox%22%2C%20%7B%0A%09%09%09align%3A%20%22center%22%2C%0A%09%09%09flex%3A%201%0A%09%09%7D%29%29%3B%0A%09%09hBox2.appendChild%28%24.%24CNS%28%22button%22%2C%20%7B%0A%09%09%09label%3A%20%22...%22%2C%0A%09%09%09%22data-disabled%22%3A%20%22switch-image%22%2C%0A%09%09%09tooltip%3A%20%22tt_6%22%2C%0A%09%09%09oncommand%3A%20%22%24.selectLocalImage%28this%29%3B%22%0A%09%09%7D%29%29%3B%0A%09%09hBox2.appendChild%28%24.%24CNS%28%22button%22%2C%20%7B%0A%09%09%09label%3A%20%22B64%22%2C%0A%09%09%09%22data-disabled%22%3A%20%22switch-image%22%2C%0A%09%09%09tooltip%3A%20%22tt_7%22%2C%0A%09%09%09oncommand%3A%20%22%24.img_to_b64%28this%29%3B%22%0A%09%09%7D%29%29%3B%0A%09%09hBox.appendChild%28%24.%24CNS%28%22button%22%2C%20%7B%0A%09%09%09class%3A%20%22delete-pair%22%2C%0A%09%09%09tooltiptext%3A%20%22Delete%20value-image%20pair.%22%2C%0A%09%09%09oncommand%3A%20%22%24.removePair%28event%2C%20this%29%3B%22%0A%09%09%7D%29%29%3B%0A%09%7D%2C%0A%09addNewPair%3A%20function%28%29%20%7B%0A%09%09let%20box%20%3D%20%24id%28%22value-image-pair-box%22%29%3B%0A%09%09%24.addNewRow%28%5B%22%22%2C%20%22%22%5D%2C%20box%29%3B%0A%09%7D%2C%0A%09onAccept%3A%20function%28%29%20%7B%0A%09%09let%20box%20%3D%20%24id%28%22value-image-pair-box%22%29%3B%0A%09%09let%20skipSaving%20%3D%20initialPrefName%20%21%3D%3D%20%22%22%20%26amp%3B%26amp%3B%0A%09%09%09initialPrefName%20%21%3D%3D%20%24id%28%22pref_name_textbox%22%29.value%3B%0A%09%09let%20newPairs%20%3D%20%5B%5D%3B%0A%09%09try%20%7B%0A%09%09%09let%20prefs%20%3D%20document.getElementsByAttribute%28%22preference%22%2C%20%22*%22%29%3B%0A%09%09%09let%20i%20%3D%200%2C%0A%09%09%09%09iLen%20%3D%20prefs.length%3B%0A%09%09%09for%20%28%3B%20i%20%26lt%3B%20iLen%3B%20i++%29%20%7B%0A%09%09%09%09let%20pref%20%3D%20prefs%5Bi%5D.getAttribute%28%22preference%22%29%3B%0A%09%09%09%09//%20If%20the%20pref.%20name%20is%20changed%2C%20do%20not%20set%20pIntStrDefaultImage%0A%09%09%09%09//%20because%20it%20will%20be%20reseted.%0A%09%09%09%09if%20%28skipSaving%20%26amp%3B%26amp%3B%20pref%20%3D%3D%3D%20%22pIntStrDefaultImage%22%29%0A%09%09%09%09%09continue%3B%0A%09%09%09%09switch%20%28prefs%5Bi%5D.nodeName.toLowerCase%28%29%29%20%7B%0A%09%09%09%09%09case%20%22textbox%22%3A%0A%09%09%09%09%09%09cb_btn.PreferenceSwitcher.sPref%28pref%2C%20prefs%5Bi%5D.value%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22checkbox%22%3A%0A%09%09%09%09%09%09cb_btn.PreferenceSwitcher.sPref%28pref%2C%20prefs%5Bi%5D.checked%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09Array.prototype.slice.call%28box.getElementsByAttribute%28%22data-hbox%22%2C%20%22*%22%29%29.forEach%28function%28aHBox%29%20%7B%0A%09%09%09%09newPairs.push%28%5BaHBox.getElementsByAttribute%28%22data-value%22%2C%20%22value%22%29%5B0%5D.value%2C%0A%09%09%09%09%09aHBox.getElementsByAttribute%28%22data-image%22%2C%20%22image%22%29%5B0%5D.value%0A%09%09%09%09%5D%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%7D%20finally%20%7B%0A%09%09%09if%20%28newPairs.length%20%3D%3D%3D%200%29%0A%09%09%09%09newPairs%20%3D%20%5B%0A%09%09%09%09%09%5B%22%22%2C%20%22%22%5D%0A%09%09%09%09%5D%3B%0A%09%09%09try%20%7B%0A%09%09%09%09//%20Do%20not%20set%20pValueImagePairs%20because%20it%20will%20be%20reseted.%0A%09%09%09%09if%20%28%21skipSaving%29%20%7B%0A%09%09%09%09%09let%20prefVal%20%3D%20JSON.stringify%28newPairs%29%3B%0A%09%09%09%09%09cb_btn.PreferenceSwitcher.sPref%28%22pValueImagePairs%22%2C%20prefVal%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%20finally%20%7B%0A%09%09%09%09window.close%28%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%09removePair%3A%20function%28aE%2C%20aNode%29%20%7B%0A%09%09if%20%28stg.accel%28aE%29%29%20%7B%0A%09%09%09aNode.parentNode.parentNode.removeChild%28aNode.parentNode%29%3B%0A%09%09%09return%20true%3B%0A%09%09%7D%0A%09%09let%20cBox%20%3D%20stg.custombuttons.confirmBox%28%22Preference%20Switcher%22%2C%20%22Delete%20Value-Image%20pair%3F%5Cn%5Cn%22%20+%0A%09%09%09%22Keep%20the%20%22%20+%20stg.accel%28%29%20+%20%22%20key%20pressed%20to%20delete%20items%20without%20confirmation.%22%2C%20%22Yes%22%2C%20%22Cancel%22%29%3B%0A%09%09if%20%28cBox%29%20%7B%0A%09%09%09aNode.parentNode.parentNode.removeChild%28aNode.parentNode%29%3B%0A%09%09%7D%20else%0A%09%09%09return%20false%3B%0A%09%7D%2C%0A%09img_to_b64%3A%20function%28aNode%29%20%7B%0A%09%09let%20imgURL%20%3D%20aNode.parentNode.firstChild.value%3B%0A%09%09if%20%28imgURL.search%28/%5Edata%3Aimage/%29%20%3D%3D%3D%200%20%7C%7C%20imgURL%20%3D%3D%3D%20%22%22%29%0A%09%09%09return%20true%3B%0A%09%09cb_btn.PreferenceSwitcher.img_to_b64_cback%28imgURL%2C%20function%28aImgData%29%20%7B%0A%09%09%09aImgData%20%26amp%3B%26amp%3B%20%28aNode.parentNode.firstChild.value%20%3D%20aImgData%29%3B%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%09selectLocalImage%3A%20function%28aNode%29%20%7B%0A%09%09var%20fp%20%3D%20Cc%5B%22@mozilla.org/filepicker%3B1%22%5D.createInstance%28Ci.nsIFilePicker%29%3B%0A%09%09fp.init%28window%2C%20%22Select%20an%20image%20file%22%2C%200%29%3B%0A%09%09fp.appendFilters%28fp.filterImages%29%3B%0A%09%09var%20res%20%3D%20fp.show%28%29%3B%0A%09%09if%20%28res%20%3D%3D%20fp.returnOK%29%20%7B%0A%09%09%09aNode.parentNode.firstChild.value%20%3D%20fp.fileURL.spec%3B%0A%09%09%7D%0A%09%7D%2C%0A%09onDynamicTTShowing%3A%20function%28aE%29%20%7B%0A%09%09let%20n%20%3D%20aE.target.firstChild.nextSibling%3B%0A%09%09n.innerHTML%20%3D%20aE.target.triggerNode.getAttribute%28%22data-tooltip%22%29%3B%0A%09%09aE.stopPropagation%28%29%3B%0A%09%7D%2C%0A%09%24CNS%3A%20function%28aElName%2C%20aAttrs%2C%20aNameSpace%29%20%7B%20//%20Creates%20elements%0A%09%09var%20el%20%3D%20aNameSpace%20%3F%0A%09%09%09document.createElementNS%28aNameSpace%2C%20aElName%29%20%3A%0A%09%09%09document.createElement%28aElName%29%3B%0A%09%09if%20%28aAttrs%29%0A%09%09%09Object.keys%28aAttrs%29.forEach%28function%28n%29%20%7B%0A%09%09%09%09if%20%28aAttrs%5Bn%5D%20%21%3D%3D%20%22%22%29%0A%09%09%09%09%09el.setAttribute%28n%2C%20aAttrs%5Bn%5D%29%3B%0A%09%09%09%7D%29%3B%0A%09%09return%20el%3B%0A%09%7D%2C%0A%7D%3B%0A%5D%5D%26gt%3B%26lt%3B/script%26gt%3B%0A%09%26lt%3Bvbox%20flex%3D%221%22%26gt%3B%0A%09%09%26lt%3Bhbox%20align%3D%22center%22%20flex%3D%221%22%20%26gt%3B%0A%09%09%09%26lt%3Blabel%20value%3D%22Preference%20name%22%20/%26gt%3B%0A%09%09%09%26lt%3Btextbox%20id%3D%22pref_name_textbox%22%20class%3D%22required-textbox%22%20flex%3D%221%22%20preference%3D%22pPrefName%22%20tooltip%3D%22tt_1%22/%26gt%3B%0A%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%26lt%3Bgrid%20flex%3D%221%22%26gt%3B%0A%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%26lt%3Brow%20flex%3D%221%22%26gt%3B%0A%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Switch%20button%20image%20along%20with%20pref.%20value%22%20preference%3D%22pSwitchButtonImage%22%20onclick%3D%22%24.setElementsAvailability%28%29%3B%22%20tooltip%3D%22tt_2%22/%26gt%3B%0A%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Show%20notification%20after%20pref.%20switch%22%20preference%3D%22pShowNotification%22%20tooltip%3D%22tt_3%22/%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%26lt%3B/grid%26gt%3B%0A%09%09%26lt%3Bgroupbox%20flex%3D%221%22%20class%3D%22optional-groupbox%22%20%26gt%3B%0A%09%09%09%26lt%3Bcaption%26gt%3B%0A%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Execute%20code%20after%20switching%20pref.%20value%22%20onclick%3D%22%24.setElementsAvailability%28%29%3B%22%20preference%3D%22pExecuteCodeAfterSwtich%22%20tooltip%3D%22tt_11%22/%26gt%3B%0A%09%09%09%26lt%3B/caption%26gt%3B%0A%09%09%09%26lt%3Btextbox%20flex%3D%221%22%0A%09%09%09%09%09%20tooltip%3D%22tt_10%22%0A%09%09%09%09%09%20data-disabled%3D%22command%22%0A%09%09%09%09%09%20multiline%3D%22true%22%0A%09%09%09%09%09%20newlines%3D%22pasteintact%22%0A%09%09%09%09%09%20rows%3D%223%22%0A%09%09%09%09%09%20preference%3D%22pPseudoCommand%22/%26gt%3B%0A%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%26lt%3Bgroupbox%20flex%3D%221%22%20class%3D%22optional-groupbox%22%20id%3D%22bool-image-container%22%20orient%3D%22vertical%22%20%26gt%3B%0A%09%09%09%26lt%3Bcaption%20label%3D%22Images%20for%20boolean%20type%20preferences%22/%26gt%3B%0A%09%09%09%26lt%3Bgrid%20flex%3D%221%22%26gt%3B%0A%09%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%09%26lt%3Brows%20flex%3D%221%22%26gt%3B%0A%09%09%09%09%09%26lt%3Brow%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Image%20%28true%29%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bhbox%20align%3D%22center%22%20flex%3D%221%22%20%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%0A%09%09%09%09%09%09%09%09%09%20preference%3D%22pBoolEnabledImage%22%0A%09%09%09%09%09%09%09%09%09%20data-disabled%3D%22switch-image%22%0A%09%09%09%09%09%09%09%09%09%20data-tooltip%3D%22Image%20for%20this%20button%20when%20the%20preference%20is%20set%20to%20%26amp%3Blt%3Bhtml%3Ab%26amp%3Bgt%3Btrue%26amp%3Blt%3B/html%3Ab%26amp%3Bgt%3B.%22%0A%09%09%09%09%09%09%09%09%09%20tooltip%3D%22dynamic_tt%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bbutton%20label%3D%22...%22%20data-disabled%3D%22switch-image%22%20oncommand%3D%22%24.selectLocalImage%28this%29%3B%22%20tooltip%3D%22tt_6%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bbutton%20label%3D%22B64%22%20data-disabled%3D%22switch-image%22%20oncommand%3D%22%24.img_to_b64%28this%29%3B%22%20tooltip%3D%22tt_7%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%09%26lt%3Brow%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%09%26lt%3Blabel%20value%3D%22Image%20%28false%29%22%20/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Bhbox%20align%3D%22center%22%20flex%3D%221%22%20%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%0A%09%09%09%09%09%09%09%09%09%20preference%3D%22pBoolDisabledImage%22%0A%09%09%09%09%09%09%09%09%09%20data-disabled%3D%22switch-image%22%0A%09%09%09%09%09%09%09%09%09%20data-tooltip%3D%22Image%20for%20this%20button%20when%20the%20preference%20is%20set%20to%20%26amp%3Blt%3Bhtml%3Ab%26amp%3Bgt%3Bfalse%26amp%3Blt%3B/html%3Ab%26amp%3Bgt%3B.%22%0A%09%09%09%09%09%09%09%09%09%20tooltip%3D%22dynamic_tt%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bbutton%20label%3D%22...%22%20data-disabled%3D%22switch-image%22%20oncommand%3D%22%24.selectLocalImage%28this%29%3B%22%20tooltip%3D%22tt_6%22/%26gt%3B%0A%09%09%09%09%09%09%09%26lt%3Bbutton%20label%3D%22B64%22%20data-disabled%3D%22switch-image%22%20oncommand%3D%22%24.img_to_b64%28this%29%3B%22%20tooltip%3D%22tt_7%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%09%26lt%3B/grid%26gt%3B%0A%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%26lt%3Bvbox%20flex%3D%221000000%22%20id%3D%22value-image-pair-container%22%20minheight%3D%22120%22%26gt%3B%0A%09%09%09%26lt%3Bvbox%20style%3D%22overflow-x%3A%20auto%20%21important%3B%22%20%20flex%3D%22100000%22%20tooltip%3D%22tt_8%22%26gt%3B%0A%09%09%09%09%26lt%3Bgroupbox%20class%3D%22optional-groupbox%22%20flex%3D%22100000%22%20id%3D%22value-image-pair-box%22%20orient%3D%22vertical%22%20%26gt%3B%0A%09%09%09%09%09%26lt%3Bcaption%20label%3D%22Value-Image%20for%20integer%20and%20string%20type%20preferences%22/%26gt%3B%0A%09%09%09%26lt%3Bhbox%20align%3D%22center%22%20%26gt%3B%0A%09%09%09%09%26lt%3Blabel%20value%3D%22Default%20image%22%20/%26gt%3B%0A%09%09%09%09%26lt%3Bhbox%20align%3D%22center%22%20flex%3D%221%22%20%26gt%3B%0A%09%09%09%09%09%26lt%3Btextbox%20class%3D%22optional-textbox%22%0A%09%09%09%09%09%09%09%20flex%3D%221%22%0A%09%09%09%09%09%09%09%20data-disabled%3D%22switch-image%22%0A%09%09%09%09%09%09%09%20preference%3D%22pIntStrDefaultImage%22%0A%09%09%09%09%09%09%09%20data-tooltip%3D%22Image%20for%20this%20button%20when%20the%20preference%20is%20set%20to%20neighter%20of%20the%20values%20defined%20bellow.%20Or%20when%20you%20want%20to%20use%20the%20same%20image%20for%20different%20values.%22%0A%09%09%09%09%09%09%09%20tooltip%3D%22dynamic_tt%22/%26gt%3B%0A%09%09%09%09%09%26lt%3Bbutton%20label%3D%22...%22%20data-disabled%3D%22switch-image%22%20oncommand%3D%22%24.selectLocalImage%28this%29%3B%22%20tooltip%3D%22tt_6%22/%26gt%3B%0A%09%09%09%09%09%26lt%3Bbutton%20label%3D%22B64%22%20data-disabled%3D%22switch-image%22%20oncommand%3D%22%24.img_to_b64%28this%29%3B%22%20tooltip%3D%22tt_7%22/%26gt%3B%0A%09%09%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%09%26lt%3B/vbox%26gt%3B%0A%09%09%09%26lt%3Bspacer%20flex%3D%2210000000%22/%26gt%3B%0A%09%09%09%26lt%3Bhbox%26gt%3B%0A%09%09%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%26lt%3Bbutton%20label%3D%22Add%20new%20Value-Image%20pair%22%20tooltip%3D%22tt_9%22%20oncommand%3D%22%24.addNewPair%28%29%3B%22/%26gt%3B%0A%09%09%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%26lt%3B/vbox%26gt%3B%0A%09%09%26lt%3Bseparator/%26gt%3B%0A%09%09%26lt%3Bhbox%26gt%3B%0A%09%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%09%26lt%3Bbutton%20label%3D%22Save%20changes%22%20class%3D%22save_changes%22%20oncommand%3D%22%24.onAccept%28%29%3B%22/%26gt%3B%0A%09%09%09%26lt%3Bbutton%20label%3D%22Cancel%22%20class%3D%22cancel_changes%22%20oncommand%3D%22close%28%29%3B%22/%26gt%3B%0A%09%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%26lt%3Bseparator/%26gt%3B%0A%09%26lt%3B/vbox%26gt%3B%0A%09%26lt%3Bpopupset%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_1%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Aspan%20class%3D%22required-text%22%26gt%3BRequired%26lt%3B/html%3Aspan%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BPreference%20name%20to%20be%20controled/switched%20with%20this%20button.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%20class%3D%22warning%22%26gt%3BWARNING%21%21%21%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20you%20change%20the%20current%20preference%20handled%20by%20this%20button%20%2C%20you%20will%20loose%20all%20values%20and%20images%20specified%20on%20the%20respective%20fields.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_2%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Ab%26gt%3BEnable/Disable%26lt%3B/html%3Ab%26gt%3B%20the%20ability%20to%20switch%20this%20button%20image%20depending%20on%20the%20preference%20current%20value.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_3%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BShow%20a%20notification%20every%20time%20the%20preference%20value%20is%20switched.%20If%20%26lt%3Bhtml%3Ab%26gt%3BEnabled%26lt%3B/html%3Ab%26gt%3B%2C%20the%20notification%20will%20be%20shown%20even%20if%20the%20preference%20value%20is%20changed%20from%20any%20other%20place%20other%20than%20by%20this%20button.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_4%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Aspan%20class%3D%22optional-text%22%26gt%3BOptional%26lt%3B/html%3Aspan%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BImage%20for%20this%20button%20when%20the%20preference%20is%20set%20to%20true.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_5%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Aspan%20class%3D%22optional-text%22%26gt%3BOptional%26lt%3B/html%3Aspan%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BImage%20for%20this%20button%20when%20the%20preference%20is%20set%20to%20false.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_6%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BUse%20a%20local%20image.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_7%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BConvert%20image%20to%20Base64.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_8%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Aspan%20class%3D%22optional-text%22%26gt%3BOptional%26lt%3B/html%3Aspan%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BEvery%20time%20%26lt%3Bhtml%3Ab%26gt%3BPreference%20Switcher%26lt%3B/html%3Ab%26gt%3B%20button%20is%20clicked%2C%20the%20preference%20will%20switch%20its%20value%20between%20the%20values%20defined%20here%20and%20change%20the%20button%20image%20to%20the%20image%20asigned%20to%20a%20value.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_9%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BAdd%20a%20new%20value/image%20pair.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_11%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Aspan%20class%3D%22optional-text%22%26gt%3BOptional%26lt%3B/html%3Aspan%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Ab%26gt%3BEnable/Disable%26lt%3B/html%3Ab%26gt%3B%20the%20ability%20to%20run/execute%20code%20every%20time%20the%20preference%20handled%20by%20%26lt%3Bhtml%3Ab%26gt%3BPreference%20Switcher%26lt%3B/html%3Ab%26gt%3B%20is%20switched.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_10%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Aspan%20class%3D%22optional-text%22%26gt%3BOptional%26lt%3B/html%3Aspan%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BCode%20that%20will%20be%20executed%20when%20the%20preference%20handled%20by%20this%20button%20is%20switched.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%20class%3D%22bold_text%22%26gt%3BNotes%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BThis%20code%20will%20be%20executed%20%26lt%3Bhtml%3Ab%26gt%3BONLY%26lt%3B/html%3Ab%26gt%3B%20if%20the%20preference%20is%20changed%20from%20%26lt%3Bhtml%3Ab%26gt%3BPreference%20Switcher%26lt%3B/html%3Ab%26gt%3B%20button%20itself%2C%20not%20if%20it%27s%20changed%20from%20any%20other%20place.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BYou%20can%20consider%20this%20field%20like%20the%20%26lt%3Bhtml%3Ab%26gt%3BCode%20tab%26lt%3B/html%3Ab%26gt%3B%20of%20a%20Custom%20Button.%20The%20only%20difference%20is%20that%20the%20code%20in%20this%20field%20is%20triggered%20by%20a%20%26amp%3Bquot%3Bclick%26amp%3Bquot%3B%20%26lt%3Bhtml%3Ab%26gt%3Bevent%26lt%3B/html%3Ab%26gt%3B%2C%20while%20the%20code%20in%20a%20%26lt%3Bhtml%3Ab%26gt%3BCode%20tab%26lt%3B/html%3Ab%26gt%3B%20of%20a%20Custom%20Button%20is%20triggered%20by%20a%20%26amp%3Bquot%3Bcommand%26amp%3Bquot%3B%20%26lt%3Bhtml%3Ab%26gt%3Bevent%26lt%3B/html%3Ab%26gt%3B.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BAdditionally%2C%20all%20variables/objects%20that%20are%20available%20on%20the%20execution%20context%20of%20any%20button%2C%20like%20%26lt%3Bhtml%3Ab%26gt%3Bself%26lt%3B/html%3Ab%26gt%3B%2C%20%26lt%3Bhtml%3Ab%26gt%3BCc%26lt%3B/html%3Ab%26gt%3B%2C%20%26lt%3Bhtml%3Ab%26gt%3BCi%26lt%3B/html%3Ab%26gt%3B%2C%20etc%2C%20are%20also%20available%20on%20the%20execution%20context%20of%20the%20code%20defined%20on%20this%20field.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%20class%3D%22warning%22%26gt%3BWARNING%21%21%21%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BThe%20global%20object%20%28%26lt%3Bhtml%3Ab%26gt%3Bthis%26lt%3B/html%3Ab%26gt%3B%29%20is%20%26lt%3Bhtml%3Ab%26gt%3BPreference%20Switcher%26lt%3B/html%3Ab%26gt%3B%20button%20itself.%20So%20be%20very%20carefull%20NOT%20to%20override%20properties%20of%20the%20global%20object.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22dynamic_tt%22%20onpopupshowing%3D%22%24.onDynamicTTShowing%28event%29%3B%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Aspan%20class%3D%22optional-text%22%26gt%3BOptional%26lt%3B/html%3Aspan%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BAn%20image%20can%20be%3A%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3Bhtml%3Aul%26gt%3B%0A%09%09%09%09%26lt%3Bhtml%3Ali%26gt%3BAn%20URL%20containing%20an%20online%20image%2C%20e.g.%2C%20%26amp%3Bquot%3Bhttps%3A//duckduckgo.com/favicon.ico%26amp%3Bquot%3B.%26lt%3B/html%3Ali%26gt%3B%0A%09%09%09%09%26lt%3Bhtml%3Ali%26gt%3BA%20%26amp%3Bquot%3Bchrome%26amp%3Bquot%3B%20URL%2C%20e.g.%2C%20%26amp%3Bquot%3Bchrome%3A//branding/content/icon32.png%26amp%3Bquot%3B.%26lt%3B/html%3Ali%26gt%3B%0A%09%09%09%09%26lt%3Bhtml%3Ali%26gt%3BA%20%26amp%3Bquot%3Bfile%3A///%26amp%3Bquot%3B%20URI%2C%20e.g.%2C%20%26amp%3Bquot%3Bfile%3A///C%3A/Users/UserName/Desktop/Image.png%26amp%3Bquot%3B%2C%20%26amp%3Bquot%3Bfile%3A///home/UserName/%20Pictures/%20Image.png%26amp%3Bquot%3B.%26lt%3B/html%3Ali%26gt%3B%0A%09%09%09%09%26lt%3Bhtml%3Ali%26gt%3BA%20data%20URI%2C%20e.g.%2C%20%26amp%3Bquot%3Bdata%3Aimage/png%3Bbase64%2C...base64%20code...%26amp%3Bquot%3B.%26lt%3B/html%3Ali%26gt%3B%0A%09%09%09%09%26lt%3Bhtml%3Ali%26gt%3BA%20%26amp%3Bquot%3Bmoz-icon%26amp%3Bquot%3B%2C%20e.g.%2C%20%26amp%3Bquot%3Bmoz-icon%3A//.png%3Fsize%3D16%26amp%3Bquot%3B.%26lt%3B/html%3Ali%26gt%3B%0A%09%09%09%26lt%3B/html%3Aul%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3B/popupset%26gt%3B%0A%26lt%3B/window%26gt%3B%26lt%3B%21--%25OptionsWindow%25--%26gt%3B%0A%0A%0A%26lt%3B%21--%25AlertImg%25--%26gt%3Bdata%3Aimage/png%3Bbase64%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%26lt%3B%21--%25AlertImg%25--%26gt%3B%0A%26lt%3B%21--%25WarningImg%25--%26gt%3Bdata%3Aimage/png%3Bbase64%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%3D%3D%26lt%3B%21--%25WarningImg%25--%26gt%3B%0A%26lt%3B%21--%25ErrorImg%25--%26gt%3Bdata%3Aimage/png%3Bbase64%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%3D%26lt%3B%21--%25ErrorImg%25--%26gt%3B%0A%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" rel="nofollow" title="Install Preference Switcher (Advanced)">
				<![CDATA[Install this button]]>
			</html:a>
		</html:div>
		<html:a id="about" href="https://addons.mozilla.org/addon/custom-buttons/">
			<![CDATA[About CustomButtons]]>
		</html:a>
		<html:div id="credits">
			<html:a href="http://custombuttons.sourceforge.net/forum/viewtopic.php?t=3599">
				<![CDATA[XML created with]]>
				<html:br/>
				<![CDATA[CB Context Menu Extended]]>
			</html:a>
		</html:div>
	</html:div>
</html:body>
  <name>Preference Switcher (Advanced)</name>
  <image><![CDATA[data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACfUlEQVQ4jX2SXUiTYRTH/5KSJmWf5EVZmVLgR4kRFCVSYJAQEggiSF7Iuuqigi4kdN0YFDTmdKjNve+e55UpUwdGG0zm1NSBONMuCqoLwbbQzfmxXpzTd6cbN/xgHvhdPOf8z/8ceA6QIJqf4bAycW1acV//7mo9k5lItytWB88/UCYKPf/Gb5ctOXLKokMgGgJFRi/V+Rw3b2y6i8bkoezyhAbR4YxpcoKiwye2lPHLv8gJIidIGcuai45krpMTFB3JWEhooDhQrwyCDmLLgbZ9jRuu3Ndh9/3eyGiBK2IHReygiA3Khh2eiB1TERuUeH44dzI8cc+y7spXAwCeVyIt/DldDn8CxRnAms+Mu7EBcybcCg9geZfGlh7ufIWjAJAk96FJtmJTtoJkKyjUjzd7t1yzoD5Wl62IhvrxUVWMlLgg1ANNyAIKWUB/ujMr9xrMdpx+FKuvWdAHIAkAUFqK5JUumFfMoBghW55m3wb2orc7NStdGGxX4QhUxUgJmrAcZKA45rSN1S/VNdtTkoKjNVVBc3p4p2aJIaSuRSoAYLETtX4j3i92osdvBPmNoICYTMHenKVgf24gICZTLO8XDtn9At75jajb952+NjQtdIAOwt99QUp4SN5WzPr0IK8eslcPt08P2n7PeFsR8OlBf9tTE1+iR3+l8LfuZN833dWCGW32nXktaF4L+qE7Wz2lzcv62XJKmmnOKdrVJAjCRcbYY875U8bYS4kZGzjnjV3M8MHTUrz5VVeo9AjNbZzzRomJDdxkesE5V3HOKyRJOgeNRnNcEIQCURRLOOflnPMKxliVJElPdsIYq9quPRRFscRgMOSr1epj/wH1iKxbsGBqhgAAAABJRU5ErkJggg==]]></image>
  <mode>0</mode>
  <initcode><![CDATA[if (self.parentNode && /^wrapper-/.test(self.parentNode.id))
	return;

var $ = this.PreferenceSwitcher = {
	init: function() {
		if (!("Services" in window))
			Cu.import("resource://gre/modules/Services.jsm");

		if (!($._UID in window)) {
			window[$._UID] = {
				CustomizableUI: false,
				SwitchTimer: null,
			};
		}

		$.InitPrefs();

		self.oncontextmenu = function(aE) {
			if ($.accel(aE))
				aE.preventDefault();
			aE.stopPropagation();
		};

		for (let p in $.DefPrefs) {
			if ($.DefPrefs.hasOwnProperty(p))
				$["_" + p] = $.gPref(p);
		}

		$._prefType = Services.prefs.getPrefType($._pPrefName);

		self.onclick = function(aE) {
			if (aE.button !== 2)
				aE.preventDefault();
			if (aE.button === 0 && !aE.shiftKey && !$.accel(aE) && !aE.altKey) {
				if ($._pPrefName === "")
					$.editPreference();
				else {
					$.setPref(false, false);
					if ($._pExecuteCodeAfterSwtich && $._pPseudoCommand) {
						setTimeout(function() {
							$.executeCode(aE, $._pPseudoCommand);
						}, 100);
					}
				}
			} else if (aE.button === 0 && !aE.shiftKey && $.accel(aE) && !aE.altKey ||
				aE.button === 1 && !aE.shiftKey && !$.accel(aE) && !aE.altKey) {
				$.setPref(true, false);
			} else if (aE.button === 0 && aE.shiftKey && !$.accel(aE) && !aE.altKey) {
				$.setPref(false, true);
			} else if (aE.button === 2 && !aE.shiftKey && $.accel(aE) && !aE.altKey) {
				aE.preventDefault();
				let cBox = custombuttons.confirmBox(self.name, "Are you sure that you want to reset " +
					"the \"" + $._pPrefName + "\" preference?\n\n" +
					"𝗪𝗔𝗥𝗡𝗜𝗡𝗚!!!\n𝗧𝗵𝗶𝘀 𝗽𝗿𝗼𝗰𝗲𝘀𝘀 𝗶𝘀 𝗶𝗺𝗺𝗲𝗱𝗶𝗮𝘁𝗲 𝗮𝗻𝗱 𝗶𝗿𝗿𝗲𝘃𝗲𝗿𝘀𝗶𝗯𝗹𝗲!!!\n", "Yes", "Cancel");
				if (cBox) {
					Services.prefs.clearUserPref($._pPrefName);
					setTimeout(function() {
						self.init();
					}, 100);
				} else
					return false;
			} else if (aE.button === 2 && aE.shiftKey && $.accel(aE) && !aE.altKey) {
				aE.preventDefault();
				$.editPreference();
			}
			aE.stopPropagation();
		};

		if ($._prefType !== 0 && $._prefType !== 128) {
			let valImgPairs = JSON.parse($._pValueImagePairs);
			if (valImgPairs.length === 0) {
				let val = $._prefType === 64 ?
					Number($.getPref($._pPrefName)) :
					String($.getPref($._pPrefName));
				valImgPairs = [
					[val, ""]
				];
				$._pValueImagePairs = JSON.stringify(valImgPairs);
			}
			let valList = [],
				imgList = [];
			let idx = 0,
				idxLen = valImgPairs.length;
			try {
				if (idxLen > 0) {
					for (; idx < idxLen; idx++) {
						valList.push($._prefType === 64 ?
							Number(valImgPairs[idx][0]) :
							String(valImgPairs[idx][0]));
						imgList.push(valImgPairs[idx][1]);
					}
				}
			} finally {
				$._prefValues = valList;
				$._prefImages = imgList;
			}
		} else {
			$._prefValues = null;
			$._prefImages = null;
		}

		if ("CustomizableUI" in window) {
			if (!window[$._UID]["CustomizableUI"]) {
				window[$._UID]["CustomizableUI"] = true;
				CustomizableUI.addListener({
					onCustomizeEnd: function(aWindow) {
						let delay = function() {
							return Math.floor(Math.random() * (1 + 2000 - 200)) + 200;
						};
						setTimeout(function() {
							$.selfDestroy();
						}, delay);
					}
				});
			}
		}

		addDestructor(function(aReason) {
			if (aReason === "delete") {
				(Services.prefs.getBranch($.Branch)).deleteBranch("");
				Services.prefs.savePrefFile(null);
			}
		});

		// Have to use stupid timeouts otherwise the second observer is not loaded. ¬¬
		setTimeout(function() {
			$.updateBtnDataAfterSwitch(false);
			$.observePrefName();
			setTimeout(function() {
				$.observeHandledPref();
			}, 100);
		}, 100);
	},

	selfDestroy: function() {
		self.destroy("update");
		setTimeout(function() {
			self.init();
		}, 100);
	},

	updateBtnDataAfterSwitch: function(aPrefChanged) {
		$.setSelfImage();
		$.setSelfTooltip();
		if ($._pShowNotification && aPrefChanged && $._prefType !== 0) {
			$.alertCallback.options = {
				footer: 0,
				centerScreen: false,
			};
			$.notifyme($._pPrefName,
				"𝗖𝘂𝗿𝗿𝗲𝗻𝘁 𝘃𝗮𝗹𝘂𝗲: " + String($.getPref($._pPrefName)),
				$.getHelp("%AlertImg%"),
				$.alertCallback);
		}
	},

	observePrefName: function() {
		Services.prefs.addObserver($.Branch + "pPrefName", $.prefNameObserver, false);
		addDestructor(function(aReason) {
			if (aReason === "delete" || aReason === "update") {
				Services.prefs.removeObserver($.Branch + "pPrefName", $.prefNameObserver);
			}
		});
	},

	prefNameObserver: {
		observe: function(aSubject, aTopic, aPStr) {
			if (aTopic === "nsPref:changed") {
				Services.prefs.clearUserPref($.Branch + "pValueImagePairs");
				Services.prefs.clearUserPref($.Branch + "pIntStrDefaultImage");
				$._pValueImagePairs = [];
				$._pIntStrDefaultImage = "";
			}
		}
	},

	observeHandledPref: function() {
		if ($._prefType === 0)
			return true;
		Services.prefs.addObserver($._pPrefName, $.handledPrefObserver, false);
		addDestructor(function(aReason) {
			if (aReason === "delete" || aReason === "update") {
				Services.prefs.removeObserver($._pPrefName, $.handledPrefObserver);
			}
		});
	},

	handledPrefObserver: {
		observe: function(aSubject, aTopic, aPStr) {
			if (aTopic === "nsPref:changed") {
				$._prefType = Services.prefs.getPrefType($._pPrefName);
				$.updateBtnDataAfterSwitch(true);
			}
		}
	},

	setPref: function(aPrompt, aInverse) {
		clearTimeout(window[$._UID]["SwitchTimer"]);
		if (Services.prefs.prefIsLocked($._pPrefName)) {
			$.alertCallback.options = {
				footer: 2,
				centerScreen: true,
			};
			$.notifyme($._pPrefName,
				"This preference is 𝗹𝗼𝗰𝗸𝗲𝗱.",
				$.getHelp("%WarningImg%"),
				$.alertCallback);
			return;
		}
		var newValue = null,
			curValue,
			valueList = $._prefValues;
		let i = 0,
			iLen = valueList ? valueList.length : null;
		switch ($._prefType) {
			case 0:
				$.alertCallback.options = {
					footer: 1,
					centerScreen: true,
				};
				$.notifyme($._pPrefName,
					"This preference 𝗱𝗼𝗲𝘀𝗻'𝘁 𝗲𝘅𝗶𝘀𝘁𝘀.",
					$.getHelp("%WarningImg%"),
					$.alertCallback);
				return;
			case 32:
			case 64:
				let isNum = $._prefType === 64;
				curValue = isNum ?
					Services.prefs.getIntPref($._pPrefName) :
					Services.prefs.getComplexValue($._pPrefName, Ci.nsISupportsString).data;
				if (iLen && iLen > 1 && !aPrompt) {
					for (; i < iLen; i++) {
						if (valueList[i] === curValue) {
							newValue = aInverse ? (valueList[i - 1] || null) : (valueList[i + 1] || null);
							continue;
						}
					}
					if (!newValue)
						newValue = aInverse ? valueList[iLen - 1] : valueList[0];
					isNum ?
						Services.prefs.setIntPref($._pPrefName, newValue) :
						Services.prefs.setComplexValue($._pPrefName, Ci.nsISupportsString, $._nsISS);
				} else {
					newValue = $.promptme($._pPrefName, curValue);
					if (newValue) {
						isNum ?
							Services.prefs.setIntPref($._pPrefName, newValue) :
							Services.prefs.setComplexValue($._pPrefName, Ci.nsISupportsString, $._nsISS);
					}
				}
				break;
			case 128:
				Services.prefs.setBoolPref($._pPrefName, !Services.prefs.getBoolPref($._pPrefName));
				break;
		}
		window[$._UID]["SwitchTimer"] = setTimeout(function() {
			Services.prefs.savePrefFile(null);
		}, 5000);
	},

	dealWithNonExistentPref: function() {
		let opts = ["Boolean", "Integer", "String"];
		let selected = {};
		let result = Services.prompt.select(null, self.name, "Choose the preference type.", opts.length,
			opts, selected);
		if (result) {
			switch (selected.value) {
				case 0:
					Services.prefs.setBoolPref($._pPrefName, false);
					break;
				case 1:
					Services.prefs.setIntPref($._pPrefName, 0);
					break;
				case 2:
					$._nsISS.data = "";
					Services.prefs.setComplexValue($._pPrefName, Ci.nsISupportsString, $._nsISS);
					break;
			}
			setTimeout(function() {
				$.selfDestroy();
			}, 100);
		} else
			return;
	},

	setSelfTooltip: function() {
		let pVal = $.getPref($._pPrefName);
		self.tooltipText = self.name + "\t ID: " + self.id.slice(20) +
			"\n\n\t𝗣𝗿𝗲𝗳. 𝗻𝗮𝗺𝗲: " + $._pPrefName +
			"\n\t𝗣𝗿𝗲𝗳. 𝘃𝗮𝗹𝘂𝗲: " + (pVal === null ? "𝗣𝗿𝗲𝗳𝗲𝗿𝗲𝗻𝗰𝗲 𝗱𝗼𝗲𝘀𝗻'𝘁 𝗲𝘅𝗶𝘀𝘁𝘀." : pVal) + "\n" +
			"\n\t𝗟𝗲𝗳𝘁 𝗰𝗹𝗶𝗰𝗸: Switch/Set pref." +
			"\n\t𝗦𝗵𝗶𝗳𝘁 + 𝗟𝗲𝗳𝘁 𝗰𝗹𝗶𝗰𝗸: Switch/Set pref. (Inverse)" +
			"\n\t𝗠𝗶𝗱𝗱𝗹𝗲 𝗼𝗿 " + $.accel() + " + 𝗟𝗲𝗳𝘁 𝗰𝗹𝗶𝗰𝗸: Set pref. prompt" +
			"\n\t" + $.accel() + " + 𝗥𝗶𝗴𝗵𝘁 𝗰𝗹𝗶𝗰𝗸: Reset pref." +
			"\n\t" + $.accel() + " + 𝗦𝗵𝗶𝗳𝘁 + 𝗥𝗶𝗴𝗵𝘁 𝗰𝗹𝗶𝗰𝗸: Button options\n\n" +
			"\t𝗥𝗲𝗮𝗱 𝘁𝗵𝗶𝘀 𝗯𝘂𝘁𝘁𝗼𝗻 𝗵𝗲𝗹𝗽 𝗳𝗼𝗿 𝘃𝗲𝗿𝘆 𝗶𝗺𝗽𝗼𝗿𝘁𝗮𝗻𝘁 𝘂𝘀𝗮𝗴𝗲 𝗻𝗼𝘁𝗲𝘀.\t\t\n" +
			"\tRight click on button, 𝗕𝘂𝘁𝘁𝗼𝗻 𝗛𝗲𝗹𝗽 item.\n\n";
	},

	setSelfImage: function() {
		if ($._prefType === 0 || !$._pSwitchButtonImage)
			return true;
		switch ($._prefType) {
			case 128:
				if (Services.prefs.getBoolPref($._pPrefName))
					self.image = $._pBoolEnabledImage;
				else
					self.image = $._pBoolDisabledImage;
				break;
			default:
				let img = null;
				try {
					img = $._prefImages[$._prefValues.indexOf($.getPref($._pPrefName))];
				} catch (aErr) {}
				self.image = img ? img : $._pIntStrDefaultImage;
		}
	},

	getPref: function(aKey) {
		switch ($._prefType) {
			case 128:
				return Services.prefs.getBoolPref(aKey);
			case 64:
				return Services.prefs.getIntPref(aKey);
			case 32:
				return Services.prefs.getComplexValue(aKey, Ci.nsISupportsString).data;
			default:
				return null;
		}
	},

	/**
	 * [Based on code found in Custom Buttons addon.]
	 * @param  {object} aBtn     The button to which the menu item belongs used to build the execution code (So it seems. LOL).
	 * @param  {string} aURI     [description]
	 * @param  {object} aExecCtx Execution context object.
	 * @return {null}            Nothing
	 */
	buildExecContext: function(aURI, aExecCtx) {
		var utils = {};
		utils["oButton"] = self;
		utils["buttonURI"] = aURI;
		Cc["@mozilla.org/moz/jssubscript-loader;1"]
			.getService(Ci.mozIJSSubScriptLoader)
			.loadSubScript("chrome://custombuttons/content/contextBuilder.js", utils);
		delete utils.oButton;
		delete utils.buttonURI;
		for (let i in utils) {
			aExecCtx.argNames += "," + i;
			aExecCtx.args.push(utils[i]);
		}
	},

	/**
	 * [Based on code found in Custom Buttons addon.]
	 * @param  {event} aE     Event triggered by the menu item. It's always a click event.
	 * @param  {object} aBtn  The button to which the menu item belongs used to build the execution code (So it seems. LOL).
	 * @param  {string} aCode The code to execute.
	 * @return {null}         Nothing
	 */
	executeCode: function(aE, aCode) {
		if (aCode) {
			let cbService = Cc["@xsms.nm.ru/custombuttons/cbservice;1"]
				.getService(Ci.cbICustomButtonsService);
			var execURL = "chrome://custombuttons-context/content/button.js?windowId=";
			execURL += cbService.getWindowId(document.documentURI) + "&id=";
			execURL += self.id + "@";
			execURL += "pseudoCode";
			// execURL += aBtn._initPhase ? "init" : "code";
			var execContext = {};
			execContext["oButton"] = self;
			execContext["code"] = aCode;
			execContext["argNames"] = "event";
			execContext["args"] = [aE];
			$.buildExecContext(execURL, execContext);
			Cc["@mozilla.org/moz/jssubscript-loader;1"]
				.getService(Ci.mozIJSSubScriptLoader)
				.loadSubScript(execURL, execContext);
		}
	},

	editPreference: function() {
		var em = Services.ww.getWindowEnumerator();
		var winName = $._UID + "_edit_preference_window";
		var index = 1;
		while (em.hasMoreElements()) {
			let win = em.getNext();
			if (win.name === winName) {
				win.focus();
				return;
			}
			index++;
		}
		let storage = {
			button: self,
			custombuttons: custombuttons,
			prefType: $._prefType,
			accel: $.accel,
			pPrefName: $._pPrefName,
			pSwitchButtonImage: $._pSwitchButtonImage,
			pShowNotification: $._pShowNotification,
			pBoolEnabledImage: $._pBoolEnabledImage,
			pBoolDisabledImage: $._pBoolDisabledImage,
			pValueImagePairs: $._pValueImagePairs,
			pPseudoCommand: $._pPseudoCommand,
			pExecuteCodeAfterSwtich: $._pExecuteCodeAfterSwtich,
			pIntStrDefaultImage: $._pIntStrDefaultImage,
		};
		let xul = $.getHelp("%OptionsWindow%");
		xul = xul.replace(/>\s+</g, "><");
		xul = xul.split("%U_I_D%").join($._UID);
		let url = "data:application/vnd.mozilla.xul+xml;text/plain," + encodeURIComponent(xul);
		let optWin = openDialog(url, winName, "chrome, de dialog=no, centerscreen, close,resizable,scrollbars,dependent=yes");
		optWin._storage = storage;
	},

	promptme: function(aMsg, aVal) {
		let retVal = {
			value: aVal
		};
		if (Services.prompt.prompt(null, self.name, aMsg, retVal, null, {}))
			return retVal.value;
		else
			return false;
		return false;
	},

	accel: function(aE) {
		if (aE)
			return $._isOSX ? aE.metaKey : aE.ctrlKey;
		return $._isOSX ? "𝗖𝗼𝗺𝗺𝗮𝗻𝗱" : "𝗖𝗼𝗻𝘁𝗿𝗼𝗹";
	},

	$CNS: function(aElName, aAttrs, aNameSpace) { // Creates elements
		var el = aNameSpace ?
			document.createElementNS(aNameSpace, aElName) :
			document.createElement(aElName);
		if (aAttrs)
			Object.keys(aAttrs).forEach(function(n) {
				if (aAttrs[n] !== "")
					el.setAttribute(n, aAttrs[n]);
			});
		return el;
	},

	img_to_b64_cback: function(aURL, aCallback) {
		if (!aURL)
			aCallback(false);
		else {
			let xhr = new XMLHttpRequest(),
				nsIMIMEService = Cc["@mozilla.org/mime;1"].getService(Ci.nsIMIMEService);
			try {
				xhr.open("GET", aURL, true);
			} catch (aErr) {
				aCallback(false);
				return true;
			}
			xhr.responseType = "arraybuffer";
			xhr.onload = function() {
				let mediaType,
					dataURI,
					binary,
					bytes;
				bytes = new Uint8Array(xhr.response);
				binary = [].map.call(bytes, function(aByte) {
					return String.fromCharCode(aByte);
				}).join("");
				mediaType = xhr.getResponseHeader("Content-Type");
				let base64 = btoa(binary);
				if (mediaType.indexOf("image/") !== 0) {
					try {
						mediaType = nsIMIMEService.getTypeFromURI(Services.io.newURI(aURL, null, null));
					} catch (aError) {
						mediaType = "image/png";
					}
				}
				dataURI = "data:" + mediaType + ";base64," + base64;
				aCallback(dataURI);
			};
			xhr.onerror = function() {
				aCallback(false);
			};
			xhr.send(null);
		}
	},

	getHelp: function(aPlaceholder) { // Get specific data, surrounded by "placeholders", from the Help tab.
		return document.getElementById(self.id).getAttribute("Help").split("<!--" + aPlaceholder + "-->")[1];
	},

	notifyme: function(aTitle, aMsg, aImg, aCallback) { // Notification function
		let origin = (Services.prefs.getPrefType("ui.alertNotificationOrigin") !== 0) ?
			Services.prefs.getIntPref("ui.alertNotificationOrigin") :
			null;
		let win = Services.ww.openWindow(null, "chrome://global/content/alerts/alert.xul",
			"_blank", "chrome,titlebar=no,popup=yes", null);
		win.arguments = [aImg, aTitle, aMsg, !!aCallback, "", origin, "", "", null, (!!aCallback ? aCallback : null)];
	},

	getNotificationFooter: function(aType) {
		switch (aType) {
			case 1: // Non existent pref.
				return "𝗖𝗹𝗶𝗰𝗸 𝗺𝗲 𝘁𝗼 𝗰𝗿𝗲𝗮𝘁𝗲";
			case 2: // Locked pref.
				return "𝗖𝗹𝗶𝗰𝗸 𝗺𝗲 𝘁𝗼 𝘂𝗻𝗹𝗼𝗰𝗸";
			default:
				return "𝗖𝗹𝗶𝗰𝗸 𝗺𝗲 𝘁𝗼 𝗰𝗹𝗼𝘀𝗲 𝗺𝗲";
		}
	},

	alertCallback: {
		options: {
			footer: null,
			centerScreen: null
		},
		observe: function(aSubject, aTopic, aData) {
			let alt = Services.wm.getMostRecentWindow("alert:alert");
			let tBox = alt.document.getElementById("alertTextBox");
			if (aTopic === "alertshow") {
				tBox.appendChild($.$CNS("label", {
					flex: 1,
					value: $.getNotificationFooter(this.options.footer),
				}));
				if (this.options.centerScreen) {
					alt.moveTo((screen.availWidth / 2) - (alt.outerWidth / 2),
						(screen.availHeight / 2) - (alt.outerHeight / 2));
				}
				setTimeout(function() {
					alt.close();
				}, (this.options.centerScreen ? 10000 : 3000));
			}
			if (aTopic === "alertclickcallback") {
				alt.close();
				switch (this.options.footer) {
					case 1: // Non existent pref.
						$.dealWithNonExistentPref($._pPrefName);
						break;
					case 2: // Locked pref.
						Services.prefs.unlockPref($._pPrefName);
						setTimeout(function() {
							if (Services.prefs.prefIsLocked($._pPrefName)) {
								$.alertCallback.options = {
									footer: 0,
									centerScreen: false,
								};
								$.notifyme($._pPrefName,
									"This preference 𝗰𝗼𝘂𝗹𝗱 𝗻𝗼𝘁 be 𝘂𝗻𝗹𝗼𝗰𝗸𝗲𝗱.",
									$.getHelp("%ErrorImg%"),
									$.alertCallback);
							} else {
								$.alertCallback.options = {
									footer: 0,
									centerScreen: false,
								};
								$.notifyme($._pPrefName,
									"This preference has been 𝘂𝗻𝗹𝗼𝗰𝗸𝗲𝗱.",
									$.getHelp("%AlertImg%"),
									$.alertCallback);
								setTimeout(function() {
									$.selfDestroy();
								}, 100);
							}
						}, 100);
						break;
				}
			}
		}
	},

	_UID: "__preference_switcher_" + self.id.slice(14),
	_prefType: 0,
	_nsISS: Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString),
	_isOSX: Services.appinfo.OS.toLowerCase().startsWith("darwin"),
	_prefValues: null,
	_prefImages: null,
};

this.PreferenceSwitcher.Branch = "CB.PreferenceSwitcher.Id" + self.id.slice(20) + ".";

this.PreferenceSwitcher.DefPrefs = {
	pPrefName: "",
	pSwitchButtonImage: false,
	pShowNotification: true,
	pBoolEnabledImage: "",
	pBoolDisabledImage: "",
	pValueImagePairs: "[]",
	pExecuteCodeAfterSwtich: false,
	pPseudoCommand: "",
	pIntStrDefaultImage: "",
};

this.PreferenceSwitcher.InitPrefs = function() {
	let branch = Services.prefs.getDefaultBranch(self.PreferenceSwitcher.Branch),
		defaults = self.PreferenceSwitcher.DefPrefs;
	for (let key in defaults) {
		if (defaults.hasOwnProperty(key)) {
			let val = defaults[key];
			switch (typeof val) {
				case "boolean":
					branch.setBoolPref(key, val);
					break;
				case "number":
					branch.setIntPref(key, val);
					break;
				case "string":
					let str = Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString);
					str.data = val;
					branch.setComplexValue((key),
						Ci.nsISupportsString, str);
					break;
			}
		}
	}
};

this.PreferenceSwitcher.gPref = function(aKey) {
	let branch = Services.prefs.getBranch(self.PreferenceSwitcher.Branch);
	switch (typeof self.PreferenceSwitcher.DefPrefs[aKey]) {
		case "boolean":
			return branch.getBoolPref(aKey);
		case "number":
			return branch.getIntPref(aKey);
		case "string":
			return branch.getComplexValue(aKey, Ci.nsISupportsString).data;
	}
	return null;
};

this.PreferenceSwitcher.sPref = function(aKey, aVal) {
	let branch = Services.prefs.getBranch(self.PreferenceSwitcher.Branch);
	switch (typeof aVal) {
		case "boolean":
			branch.setBoolPref(aKey, aVal);
			break;
		case "number":
			branch.setIntPref(aKey, aVal);
			break;
		case "string":
			let str = Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString);
			str.data = aVal;
			branch.setComplexValue((aKey), Ci.nsISupportsString, str);
			break;
	}
};

this.PreferenceSwitcher.init();]]></initcode>
  <code><![CDATA[if (!event.target && !this.disabled)
	this.setPref(false, false);]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help>𝗨𝘀𝗮𝗴𝗲
⚫ After intalled, click the button. The 𝗣𝗿𝗲𝗳𝗲𝗿𝗲𝗻𝗰𝗲 𝗦𝘄𝗶𝘁𝗰𝗵𝗲𝗿 options window will appear.
⚫ Set the name of the preference that you want to control/switch and save the changes.
⚫ Done.

𝗜𝗺𝗽𝗼𝗿𝘁𝗮𝗻𝘁 𝗻𝗼𝘁𝗲𝘀
⚫ This button can be cloned/installed countless times to control/switch any preference of any type.
⚫ If the preference you wish to control/switch doesn't exists, click the button once and you will be asked to create it on the fly. Follow the instructions.
⚫ If the preference you wish to control/switch is locked, you will be asked to unlock it on the fly.

[,]


&lt;!--%OptionsWindow%--&gt;&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;?xml-stylesheet href="chrome://global/skin/" ?&gt;
&lt;?xml-stylesheet href="data:text/css;charset=utf-8,
window * {
	font-family: &amp;quot;Open Sans&amp;quot;, Helvetica, Arial, sans-serif !important;
}
caption .caption-text,
.bold_text {
	font-weight: bold !important;
}
button {
	min-width: 0 !important;
}
button .button-text {
	display: inline-block !important;
	text-align: left !important;
}
/* Force groupboxes on Linux to have the same appearance than in Windows */
/* Just because it makes effing sence!!!! */
/* Why have elements grouped inside a groupbox and not visually delimited?!?!?! */
groupbox {
	-moz-appearance: groupbox !important;
	border: 2px groove ThreeDFace !important;
	border-radius: 3px !important;
	margin: 3px !important;
	padding: 3px 3px 6px !important;
}
groupbox.optional-groupbox {
	border: 2px groove green !important;
}
.groupbox-body {
	padding: inherit !important;
}
caption {
	margin: 0 6px !important;
	background-color: -moz-Dialog !important;
}
.caption-text {
	margin: 0 2px !important;
}
.optional-textbox {
	outline: 2px solid green !important;
}
.optional-text {
	background-color: green !important;
	color: white !important;
	font-weight: bold !important;
	padding: 0 4px 0 4px !important;
}
.required-textbox {
	outline: 2px solid orange !important;
}
.required-text {
	background-color: orange !important;
	color: black !important;
	font-weight: bold !important;
	padding: 0 4px 0 4px !important;
}
.delete-pair {
	list-style-image: url(&amp;quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAABVklEQVQokWNgoAT8//+f+////9xofB5cigXmGemnz9LRyX97+zbf29u3+Wbp6OTPN9TP+P//vwCGyavsrdLm8HH+XCDA/X6Fo33aSif71AUC3O/n8HH+XGFnmY5i0////7n3piTVH1aVfXFAVuT/aknB96skBd8fkBX5f0RV9sXelJQGZKdCNH3+LPaot7P2vL7yi1MaUv9PaUj9P6+v/OJxT0fd/8+fxTD9cPs23/6YoPSTJipvrxsr/L9urPD/pInK2/2xgRn/b9/mw/DDDh+7/AMGcu/vWKv9f+is++Khs+6LO9Zq/w8ayL3f4W1bgOKk////89yb0F763FPv22tfkxcfF0yo+7xwYu1rX5MXzz31vj2Y0F6KEbz///+X/r16Tsn3ma21/7+8FP//+bPY95mttT9WzS79//+/NK64EPv//7/E////GaFY4v///+JYFRMLAKUewtoAYB96AAAAAElFTkSuQmCC&amp;quot;) !important;
	-moz-image-region: auto !important;
}
.save_changes {
	list-style-image: url(&amp;quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACdElEQVQ4jWNgIBGE/mdgZvjPwEiqPgYGBgaGpCOGUhX3XFO630Zapp0xZiVJc/QSFb78aw4dXe/C3k/8lnCj73OkfcN/BiaiNEfsUpfKPGfV0fDE/33jc///PR8i/nW9iz5Rez/QnoGBgYHBYT4Dh/cGNdugHZqS6Jq9l8oJppyw6ml8FvCx6Lbz/7iThv8zL1n9r37k+6fgusdGBoYGBqbQvXpOmeecbqecsu33XKUiCtNsPJOBNXiHfm/NQ78veTcd/wcf0vofsF/9f+BBjX/RR40fxBwx8WNIOWinWHnPd3/di8B/1Q/93yYcse6yWSonqDddXCxgi/bkyge+XzOu2f332qv632238n+P3Sr//XZr3wnaoRvlOUmFnaHgivu2kocevz32qf5PvGT1r+Ke/2fvDdqz3NapL25+Efol8ZLVf8edCv9tt8n+t9sm999lu9oZv42adtqrtNkYGBgYGKy2yW212S73w2Sz5D+LrTL/k6/a/C+74/u/7I7P/9gLFv9NNknC8F+LdbIX7NcqO6IEkvpyLimdNcKLtdaK/tBaK/LfYKPE//Bzpv+DThn9198g/l9rrch/7TWif3SXS14wWSLvaTyTATP+pZYLycqvFFijuJL/p+JKgf9KqwT/K60U+K+4UuC/4gqBvyoLRS6oTRW1wZsCBRdxykks5loovoT7k/gS7v/iS7j/iy/i+S81i/eCTL+gJwMDEcmXdy6DOt88toW8C9h+8s1l+88/keOMSCuPI0MaFmfjAIwM/QwKbNMY1rJ0Mp5kKGOwIFYjDLAyCDAI8ITyaHH7cOszSDMIMzAQbzuqS4jxMwMDAwDtNu92OyP2UwAAAABJRU5ErkJggg==&amp;quot;) !important;
	-moz-image-region: auto !important;
}
.cancel_changes {
	list-style-image: url(&amp;quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADdklEQVQ4jXVTb0yUBRx+3n+8977vve/BcXhIBzg5CMZRCAvGSIZQMCXpRFhkagRjTkjStdr6M9bW1/rCt1tZ0vDUU1E4QMHrAMk7F4zDY4qYRBdkyzJK0eMC9+sLOGnr+fo8z2+/Pc8eYBVtgHZSH2NzqqoJ/4Muk0l1WSxZLovFuI4oAKTjVXu2Tbd++tmNhsbac9HR0f81d8CoTVZUVk01t3x+vGJ3+U5AXuOi7BbL9q79jRf/cp5duvNRa9Cfld3YqaqxawIXNOPlrOy6UPORwJ9tX0Z69tV7X0vc9CoAHarzi2u/2P3GlZm6g0sP322lB4c/WAlVVk+NbEpp+QZQHIDcn7y5aXa7/fr95vdWHh75mGbr3444il4e3ZWZ+ybeyi89PdBwKLywrYLu5hfTvXI7LVbtodmcvJ/G8l9850p2dtN0uu3H+6U76Peicrr7wlb6e2sZ9ReWRRqyCvtRkbblpQMZz53tS9z8IGTaQLfNCfSb7XlaTH2W7lVW/fpHUfH8gmkD3TEn0A8xsRSKNpInLv7RgbiN/fbEDDsACGmCkNek6DvcmmFxVBRpWBDopiDQgiWJfjbF0QTL0iDDkJ/jyC1EhQ/xUefTgWIAurWcuAIgvUXQdZxStMcXeIHOAdQHhroB6gSoh2HIyfGPDzPc+RIgBwC/rqYagHsfyOvOsA0PWJLoGMfRUYCOAvQVw5A72kiuBEvwQ6C8BuDWmdsA8YQk5Z9R9Kd6FH3YxfPUDpCTYegEy1I7QCd5ntx6/cppWd/ZLkkFn6y97wAEF8+XXFDUbo8kh3tZjnoA8jAMjcYYadwcT98yDPUC1Mdy5JHkcK+i9BwTxTIHIOD7fXU7v0uxDg6K4pKXZWkEoHGWpRuSRBMJlvlgivX2TVmmwCrnZVkaEnVLg0bTiDstw47x6tquyS05ER/H0RhA0yxLIVlevqaqtwZEsXlA0e29ZjAEQ6r6z61VjY/jacK8cdmfneuFL7egxm8yXbouSY/mFIV+0bTlSU0LDIniwUuAwQHIHp1ubzDG4JtX1chcVBRNSfLSVVX1X7Va6/E1oBvmUTKT+Ez3fGFheNJqDfgEYb8HeLKFPkAbkaRd43GxvrlUa2TGbPaOcNwr/YDyJEh3UlLpZZvtzFRm5utjTy3tqSNiID5+x1BqivNicnJFGyACwL8fh1x5BGHtQgAAAABJRU5ErkJggg==&amp;quot;) !important;
	-moz-image-region: auto !important;
}
.warning{
	font-weight: bold !important;
	color: red !important;
}
" type="text/css" ?&gt;
&lt;window id="%U_I_D%_edit_preference_window"
	    onload="$.onLoad();"
	    onunload="$.onUnload();"
	    minwidth="600"
	    title="Preference Switcher"
	    xmlns:html="http://www.w3.org/1999/xhtml"
	    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"&gt;
&lt;script&gt;&lt;![CDATA[
var Cc = Components.classes;
var Ci = Components.interfaces;
var Cu = Components.utils;
Cu.import("resource://gre/modules/Services.jsm");
var stg = window._storage;
var cb_btn = stg.button;
var initialPrefName = stg.pPrefName;

function $id(aID, aParent) {
	if (!aParent)
		return document.getElementById(aID);
	return aParent.getElementById(aID);
}
var $ = {
	onLoad: function() {
		$.populatefields();
		$.populateValImgPairBox();
		window.addEventListener("focus", $, false);
		window.addEventListener("blur", $, false);
		$.highlightButton(cb_btn, 1);
	},
	onUnload: function() {
		$.highlightButton(cb_btn);
		window.removeEventListener("focus", $, false);
		window.removeEventListener("blur", $, false);
		cb_btn.PreferenceSwitcher.selfDestroy();
	},
	populatefields: function() {
		Array.prototype.slice.call(document.getElementsByAttribute("preference", "*")).forEach(function(aEl) {
			let pref = aEl.getAttribute("preference");
			switch (aEl.nodeName.toLowerCase()) {
				case "textbox":
					aEl.value = stg[pref];
					break;
				case "checkbox":
					aEl.checked = stg[pref];
					break;
			}
		});
		$.setElementsVisibility();
		$.setElementsAvailability();
	},
	_timer1: null,
	setElementsAvailability: function() {
		clearTimeout($._timer1);
		$._timer1 = setTimeout(function() {
			let swticImgOn = document.getElementsByAttribute("preference", "pSwitchButtonImage")[0].checked;
			let useCodeOn = document.getElementsByAttribute("preference", "pExecuteCodeAfterSwtich")[0].checked;
			Array.prototype.slice.call(document.getElementsByAttribute("data-disabled", "switch-image")).forEach(function(aEl) {
				aEl.disabled = !swticImgOn;
			});
			Array.prototype.slice.call(document.getElementsByAttribute("data-disabled", "command")).forEach(function(aEl) {
				aEl.disabled = !useCodeOn;
			});
		}, 200);
	},
	setElementsVisibility: function() {
		let boolContainer = $id("bool-image-container");
		let intStrContainer = $id("value-image-pair-container");
		switch (stg.prefType) {
			case 0:
				boolContainer.hidden = true;
				intStrContainer.hidden = true;
				return;
			case 32:
			case 64:
				boolContainer.hidden = true;
				intStrContainer.hidden = false;
				break;
			case 128:
				boolContainer.hidden = false;
				intStrContainer.hidden = true;
				break;
		}
	},
	handleEvent: function(aE) {
		switch (aE.type) {
			case "focus":
				$.highlightButton(cb_btn, 1);
				break;
			case "blur":
				$.highlightButton(cb_btn, 2);
				break;
		}
	},
	highlightButtonTimer: null,
	highlightButton: function(aEl, aStyle) {
		aEl.style.removeProperty("border-color");
		aEl.style.removeProperty("box-shadow");
		aEl.style.removeProperty("outline");
		aEl.style.removeProperty("outline-offset");
		aEl.style.removeProperty("transition-duration");
		if (!aStyle)
			return true;
		clearTimeout($.highlightButtonTimer);
		$.highlightButtonTimer = setTimeout(function() {
			switch (aStyle) {
				case 1:
					aEl.style.setProperty("border-color", "rgba(0,200,0,1)", "important");
					aEl.style.setProperty("box-shadow", "0 0 1px 1px rgba(0,200,0,1)", "important");
					aEl.style.setProperty("outline", "2px solid rgba(0,200,0,1)", "important");
					aEl.style.setProperty("outline-offset", "-2px", "important");
					aEl.style.setProperty("transition-duration", "10ms", "important");
					break;
				case 2:
					aEl.style.setProperty("border-color", "rgba(0,200,0,.2)", "important");
					aEl.style.setProperty("box-shadow", "0 0 1px 1px rgba(0,200,0,.5)", "important");
					aEl.style.setProperty("outline", "2px dotted rgba(0,200,0,.5)", "important");
					aEl.style.setProperty("outline-offset", "-2px", "important");
					aEl.style.setProperty("transition-duration", "10ms", "important");
					break;
			}
		}, 10);
	},
	populateValImgPairBox: function() {
		if (!(stg.prefType === 32 || stg.prefType === 64))
			return true;
		let box = $id("value-image-pair-box");
		let valImgPairs = JSON.parse(stg["pValueImagePairs"]);
		Array.prototype.slice.call(valImgPairs).forEach(function(aPair) {
			$.addNewRow(aPair, box);
		});
	},
	addNewRow: function(aPair, aBox) {
		let hBox = aBox.appendChild($.$CNS("hbox", {
			align: "center",
			"data-hbox": "true"
		}));
		hBox.appendChild($.$CNS("label", {
			value: "Value",
			class: "bold_text",
		}));
		hBox.appendChild($.$CNS("textbox", {
			value: aPair[0],
			tooltip: "",
			"data-value": "value",
			flex: 1
		}));
		hBox.appendChild($.$CNS("label", {
			value: "Image",
			class: "bold_text",
		}));
		hBox.appendChild($.$CNS("spacer"));

		let hBox2 = hBox.appendChild($.$CNS("hbox", {
			align: "center",
			flex: 1
		}));
		hBox2.appendChild($.$CNS("textbox", {
			value: aPair[1],
			"data-disabled": "switch-image",
			"data-tooltip": "Image for this button when the preference is set to the value found to the left. Leave it blank to use the default image set above.",
			tooltip: "dynamic_tt",
			"data-image": "image",
			flex: 100
		}));
		hBox2.appendChild($.$CNS("hbox", {
			align: "center",
			flex: 1
		}));
		hBox2.appendChild($.$CNS("button", {
			label: "...",
			"data-disabled": "switch-image",
			tooltip: "tt_6",
			oncommand: "$.selectLocalImage(this);"
		}));
		hBox2.appendChild($.$CNS("button", {
			label: "B64",
			"data-disabled": "switch-image",
			tooltip: "tt_7",
			oncommand: "$.img_to_b64(this);"
		}));
		hBox.appendChild($.$CNS("button", {
			class: "delete-pair",
			tooltiptext: "Delete value-image pair.",
			oncommand: "$.removePair(event, this);"
		}));
	},
	addNewPair: function() {
		let box = $id("value-image-pair-box");
		$.addNewRow(["", ""], box);
	},
	onAccept: function() {
		let box = $id("value-image-pair-box");
		let skipSaving = initialPrefName !== "" &amp;&amp;
			initialPrefName !== $id("pref_name_textbox").value;
		let newPairs = [];
		try {
			let prefs = document.getElementsByAttribute("preference", "*");
			let i = 0,
				iLen = prefs.length;
			for (; i &lt; iLen; i++) {
				let pref = prefs[i].getAttribute("preference");
				// If the pref. name is changed, do not set pIntStrDefaultImage
				// because it will be reseted.
				if (skipSaving &amp;&amp; pref === "pIntStrDefaultImage")
					continue;
				switch (prefs[i].nodeName.toLowerCase()) {
					case "textbox":
						cb_btn.PreferenceSwitcher.sPref(pref, prefs[i].value);
						break;
					case "checkbox":
						cb_btn.PreferenceSwitcher.sPref(pref, prefs[i].checked);
						break;
				}
			}
			Array.prototype.slice.call(box.getElementsByAttribute("data-hbox", "*")).forEach(function(aHBox) {
				newPairs.push([aHBox.getElementsByAttribute("data-value", "value")[0].value,
					aHBox.getElementsByAttribute("data-image", "image")[0].value
				]);
			});
		} finally {
			if (newPairs.length === 0)
				newPairs = [
					["", ""]
				];
			try {
				// Do not set pValueImagePairs because it will be reseted.
				if (!skipSaving) {
					let prefVal = JSON.stringify(newPairs);
					cb_btn.PreferenceSwitcher.sPref("pValueImagePairs", prefVal);
				}
			} finally {
				window.close();
			}
		}
	},
	removePair: function(aE, aNode) {
		if (stg.accel(aE)) {
			aNode.parentNode.parentNode.removeChild(aNode.parentNode);
			return true;
		}
		let cBox = stg.custombuttons.confirmBox("Preference Switcher", "Delete Value-Image pair?\n\n" +
			"Keep the " + stg.accel() + " key pressed to delete items without confirmation.", "Yes", "Cancel");
		if (cBox) {
			aNode.parentNode.parentNode.removeChild(aNode.parentNode);
		} else
			return false;
	},
	img_to_b64: function(aNode) {
		let imgURL = aNode.parentNode.firstChild.value;
		if (imgURL.search(/^data:image/) === 0 || imgURL === "")
			return true;
		cb_btn.PreferenceSwitcher.img_to_b64_cback(imgURL, function(aImgData) {
			aImgData &amp;&amp; (aNode.parentNode.firstChild.value = aImgData);
		});
	},
	selectLocalImage: function(aNode) {
		var fp = Cc["@mozilla.org/filepicker;1"].createInstance(Ci.nsIFilePicker);
		fp.init(window, "Select an image file", 0);
		fp.appendFilters(fp.filterImages);
		var res = fp.show();
		if (res == fp.returnOK) {
			aNode.parentNode.firstChild.value = fp.fileURL.spec;
		}
	},
	onDynamicTTShowing: function(aE) {
		let n = aE.target.firstChild.nextSibling;
		n.innerHTML = aE.target.triggerNode.getAttribute("data-tooltip");
		aE.stopPropagation();
	},
	$CNS: function(aElName, aAttrs, aNameSpace) { // Creates elements
		var el = aNameSpace ?
			document.createElementNS(aNameSpace, aElName) :
			document.createElement(aElName);
		if (aAttrs)
			Object.keys(aAttrs).forEach(function(n) {
				if (aAttrs[n] !== "")
					el.setAttribute(n, aAttrs[n]);
			});
		return el;
	},
};
]]&gt;&lt;/script&gt;
	&lt;vbox flex="1"&gt;
		&lt;hbox align="center" flex="1" &gt;
			&lt;label value="Preference name" /&gt;
			&lt;textbox id="pref_name_textbox" class="required-textbox" flex="1" preference="pPrefName" tooltip="tt_1"/&gt;
		&lt;/hbox&gt;
		&lt;grid flex="1"&gt;
			&lt;columns&gt;
				&lt;column flex="1"/&gt;
				&lt;column flex="1"/&gt;
			&lt;/columns&gt;
			&lt;rows&gt;
				&lt;row flex="1"&gt;
					&lt;checkbox label="Switch button image along with pref. value" preference="pSwitchButtonImage" onclick="$.setElementsAvailability();" tooltip="tt_2"/&gt;
					&lt;checkbox label="Show notification after pref. switch" preference="pShowNotification" tooltip="tt_3"/&gt;
				&lt;/row&gt;
			&lt;/rows&gt;
		&lt;/grid&gt;
		&lt;groupbox flex="1" class="optional-groupbox" &gt;
			&lt;caption&gt;
				&lt;checkbox label="Execute code after switching pref. value" onclick="$.setElementsAvailability();" preference="pExecuteCodeAfterSwtich" tooltip="tt_11"/&gt;
			&lt;/caption&gt;
			&lt;textbox flex="1"
					 tooltip="tt_10"
					 data-disabled="command"
					 multiline="true"
					 newlines="pasteintact"
					 rows="3"
					 preference="pPseudoCommand"/&gt;
		&lt;/groupbox&gt;
		&lt;groupbox flex="1" class="optional-groupbox" id="bool-image-container" orient="vertical" &gt;
			&lt;caption label="Images for boolean type preferences"/&gt;
			&lt;grid flex="1"&gt;
				&lt;columns&gt;
					&lt;column /&gt;
					&lt;column flex="1"/&gt;
				&lt;/columns&gt;
				&lt;rows flex="1"&gt;
					&lt;row align="center"&gt;
						&lt;label value="Image (true)" /&gt;
						&lt;hbox align="center" flex="1" &gt;
							&lt;textbox flex="1"
									 preference="pBoolEnabledImage"
									 data-disabled="switch-image"
									 data-tooltip="Image for this button when the preference is set to &amp;lt;html:b&amp;gt;true&amp;lt;/html:b&amp;gt;."
									 tooltip="dynamic_tt"/&gt;
							&lt;button label="..." data-disabled="switch-image" oncommand="$.selectLocalImage(this);" tooltip="tt_6"/&gt;
							&lt;button label="B64" data-disabled="switch-image" oncommand="$.img_to_b64(this);" tooltip="tt_7"/&gt;
						&lt;/hbox&gt;
					&lt;/row&gt;
					&lt;row align="center"&gt;
						&lt;label value="Image (false)" /&gt;
						&lt;hbox align="center" flex="1" &gt;
							&lt;textbox flex="1"
									 preference="pBoolDisabledImage"
									 data-disabled="switch-image"
									 data-tooltip="Image for this button when the preference is set to &amp;lt;html:b&amp;gt;false&amp;lt;/html:b&amp;gt;."
									 tooltip="dynamic_tt"/&gt;
							&lt;button label="..." data-disabled="switch-image" oncommand="$.selectLocalImage(this);" tooltip="tt_6"/&gt;
							&lt;button label="B64" data-disabled="switch-image" oncommand="$.img_to_b64(this);" tooltip="tt_7"/&gt;
						&lt;/hbox&gt;
					&lt;/row&gt;
				&lt;/rows&gt;
			&lt;/grid&gt;
		&lt;/groupbox&gt;
		&lt;vbox flex="1000000" id="value-image-pair-container" minheight="120"&gt;
			&lt;vbox style="overflow-x: auto !important;"  flex="100000" tooltip="tt_8"&gt;
				&lt;groupbox class="optional-groupbox" flex="100000" id="value-image-pair-box" orient="vertical" &gt;
					&lt;caption label="Value-Image for integer and string type preferences"/&gt;
			&lt;hbox align="center" &gt;
				&lt;label value="Default image" /&gt;
				&lt;hbox align="center" flex="1" &gt;
					&lt;textbox class="optional-textbox"
							 flex="1"
							 data-disabled="switch-image"
							 preference="pIntStrDefaultImage"
							 data-tooltip="Image for this button when the preference is set to neighter of the values defined bellow. Or when you want to use the same image for different values."
							 tooltip="dynamic_tt"/&gt;
					&lt;button label="..." data-disabled="switch-image" oncommand="$.selectLocalImage(this);" tooltip="tt_6"/&gt;
					&lt;button label="B64" data-disabled="switch-image" oncommand="$.img_to_b64(this);" tooltip="tt_7"/&gt;
				&lt;/hbox&gt;
			&lt;/hbox&gt;
				&lt;/groupbox&gt;
			&lt;/vbox&gt;
			&lt;spacer flex="10000000"/&gt;
			&lt;hbox&gt;
				&lt;spacer flex="1"/&gt;
				&lt;button label="Add new Value-Image pair" tooltip="tt_9" oncommand="$.addNewPair();"/&gt;
				&lt;spacer flex="1"/&gt;
			&lt;/hbox&gt;
		&lt;/vbox&gt;
		&lt;separator/&gt;
		&lt;hbox&gt;
			&lt;spacer flex="1"/&gt;
			&lt;button label="Save changes" class="save_changes" oncommand="$.onAccept();"/&gt;
			&lt;button label="Cancel" class="cancel_changes" oncommand="close();"/&gt;
			&lt;spacer flex="1"/&gt;
		&lt;/hbox&gt;
		&lt;separator/&gt;
	&lt;/vbox&gt;
	&lt;popupset&gt;
		&lt;tooltip id="tt_1"&gt;
			&lt;description&gt;&lt;html:span class="required-text"&gt;Required&lt;/html:span&gt;&lt;/description&gt;
			&lt;description&gt;Preference name to be controled/switched with this button.&lt;/description&gt;
			&lt;description&gt;&lt;/description&gt;
			&lt;description class="warning"&gt;WARNING!!!&lt;/description&gt;
			&lt;description&gt;If you change the current preference handled by this button , you will loose all values and images specified on the respective fields.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_2"&gt;
			&lt;description&gt;&lt;html:b&gt;Enable/Disable&lt;/html:b&gt; the ability to switch this button image depending on the preference current value.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_3"&gt;
			&lt;description&gt;Show a notification every time the preference value is switched. If &lt;html:b&gt;Enabled&lt;/html:b&gt;, the notification will be shown even if the preference value is changed from any other place other than by this button.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_4"&gt;
			&lt;description&gt;&lt;html:span class="optional-text"&gt;Optional&lt;/html:span&gt;&lt;/description&gt;
			&lt;description&gt;Image for this button when the preference is set to true.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_5"&gt;
			&lt;description&gt;&lt;html:span class="optional-text"&gt;Optional&lt;/html:span&gt;&lt;/description&gt;
			&lt;description&gt;Image for this button when the preference is set to false.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_6"&gt;
			&lt;description&gt;Use a local image.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_7"&gt;
			&lt;description&gt;Convert image to Base64.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_8"&gt;
			&lt;description&gt;&lt;html:span class="optional-text"&gt;Optional&lt;/html:span&gt;&lt;/description&gt;
			&lt;description&gt;Every time &lt;html:b&gt;Preference Switcher&lt;/html:b&gt; button is clicked, the preference will switch its value between the values defined here and change the button image to the image asigned to a value.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_9"&gt;
			&lt;description&gt;Add a new value/image pair.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_11"&gt;
			&lt;description&gt;&lt;html:span class="optional-text"&gt;Optional&lt;/html:span&gt;&lt;/description&gt;
			&lt;description&gt;&lt;html:b&gt;Enable/Disable&lt;/html:b&gt; the ability to run/execute code every time the preference handled by &lt;html:b&gt;Preference Switcher&lt;/html:b&gt; is switched.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_10"&gt;
			&lt;description&gt;&lt;html:span class="optional-text"&gt;Optional&lt;/html:span&gt;&lt;/description&gt;
			&lt;description&gt;Code that will be executed when the preference handled by this button is switched.&lt;/description&gt;
			&lt;description&gt;&lt;/description&gt;
			&lt;description class="bold_text"&gt;Notes&lt;/description&gt;
			&lt;description&gt;This code will be executed &lt;html:b&gt;ONLY&lt;/html:b&gt; if the preference is changed from &lt;html:b&gt;Preference Switcher&lt;/html:b&gt; button itself, not if it's changed from any other place.&lt;/description&gt;
			&lt;description&gt;You can consider this field like the &lt;html:b&gt;Code tab&lt;/html:b&gt; of a Custom Button. The only difference is that the code in this field is triggered by a &amp;quot;click&amp;quot; &lt;html:b&gt;event&lt;/html:b&gt;, while the code in a &lt;html:b&gt;Code tab&lt;/html:b&gt; of a Custom Button is triggered by a &amp;quot;command&amp;quot; &lt;html:b&gt;event&lt;/html:b&gt;.&lt;/description&gt;
			&lt;description&gt;Additionally, all variables/objects that are available on the execution context of any button, like &lt;html:b&gt;self&lt;/html:b&gt;, &lt;html:b&gt;Cc&lt;/html:b&gt;, &lt;html:b&gt;Ci&lt;/html:b&gt;, etc, are also available on the execution context of the code defined on this field.&lt;/description&gt;
			&lt;description&gt;&lt;/description&gt;
			&lt;description class="warning"&gt;WARNING!!!&lt;/description&gt;
			&lt;description&gt;The global object (&lt;html:b&gt;this&lt;/html:b&gt;) is &lt;html:b&gt;Preference Switcher&lt;/html:b&gt; button itself. So be very carefull NOT to override properties of the global object.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="dynamic_tt" onpopupshowing="$.onDynamicTTShowing(event);"&gt;
			&lt;description&gt;&lt;html:span class="optional-text"&gt;Optional&lt;/html:span&gt;&lt;/description&gt;
			&lt;description&gt;&lt;/description&gt;
			&lt;description&gt;An image can be:&lt;/description&gt;
			&lt;html:ul&gt;
				&lt;html:li&gt;An URL containing an online image, e.g., &amp;quot;https://duckduckgo.com/favicon.ico&amp;quot;.&lt;/html:li&gt;
				&lt;html:li&gt;A &amp;quot;chrome&amp;quot; URL, e.g., &amp;quot;chrome://branding/content/icon32.png&amp;quot;.&lt;/html:li&gt;
				&lt;html:li&gt;A &amp;quot;file:///&amp;quot; URI, e.g., &amp;quot;file:///C:/Users/UserName/Desktop/Image.png&amp;quot;, &amp;quot;file:///home/UserName/ Pictures/ Image.png&amp;quot;.&lt;/html:li&gt;
				&lt;html:li&gt;A data URI, e.g., &amp;quot;data:image/png;base64,...base64 code...&amp;quot;.&lt;/html:li&gt;
				&lt;html:li&gt;A &amp;quot;moz-icon&amp;quot;, e.g., &amp;quot;moz-icon://.png?size=16&amp;quot;.&lt;/html:li&gt;
			&lt;/html:ul&gt;
		&lt;/tooltip&gt;
	&lt;/popupset&gt;
&lt;/window&gt;&lt;!--%OptionsWindow%--&gt;


&lt;!--%AlertImg%--&gt;data:image/png;base64,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&lt;!--%AlertImg%--&gt;
&lt;!--%WarningImg%--&gt;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAHFUlEQVRoge2ZX0xT9wLHfVoWX+6D+GeSXReK5Iq9SFLN/lDMEu0evJ0xHdzELDy4ZZjcrUs26UzxT7bh7RXGv7UbG6Urqz3UuVJu+FuuEyRQ5sSWpS3WxfTUS2k7CsUrcpSYPnzvQz3H1nLOaY8yffAknwdOfn8+n3N62qasWfPseHY83sPdewKLnu8Qv2F9qlj0fAd37wlwyo9YqnDPU4fl8cOgLpSBGjrIcHfkjyV5b+pCGZbHD+Oepw4jlir2iN/HaxPibKxi0MPCbPw+XssesOw8nnHAqsLhsOw8zh5w97LqsQXc/E8qjyvg7mWVwAAe2UhvOSK95SCtClwl5CtCWhXMON4oIQF3fv4IS4P7MwqgpUmrAp4zB+DuPQHS1YtYxA/q9gIoikI8Hkc8HgdFUaBuLyAW8YN09cLdewKeMweYoBVjVnBYGtyPOz9/xB5Ajb6PpcH9vBG0uJOowA3PedxbvpMqywE97t7yHdzwnIeTqGBC+OSXBveDGn2fO2Cx/28MDy8y31eO6U4FXMYDmL46krE0X8z01ZHEmp0KzPeVp+2b4pRNQHLEfF85/BY5nLajoG4vpInTMkKhbi/AaTsKv0WeEpHmwxWwdPHdtAmLAwrEuhMPoau/7pFF+XD11+EqIUesW47FAUWaz9LFd7kDbvXIUibQ8r8ONq26PM2vg00PIpJcbvXIuAOooYO41SNjImLdcpCEDGPth7KWCHhHQWjKQGjKEPCOZj1/rP0QSELGRNBe1NBB7oD/dcsYZs69gUs6KW5Gg1kLnK19C0PNr2Oo+XWcrX0r6/k3o0Fc0kkxc+6NFCfegAXbHgafQYpJu1bQy6Dj2E74LXL4LXJ0HNspaI1JuxY+gzTFiTNgcUCBmLUUC7Y9CBNSXNJJEQ5MCQ4gCRlIQiY4IByYSjgQiYiYtRSLAwr+gJi1FKRpN+xN+wQ/iI8jIB6Pw960D6RpN+PFGRDrljMDfQYpRixVTzzgorkKPoOU8Yp1y/kDwoQUkzoJxqynnnjAmPUUJnUShAkpf8CCbQ9iP7yMiHkXJnUSOLoaBH9N6FDvAGnaDdK0Gx3qHYLXcXQ1YFInQcS8C7EfXsaCbQ93wJw5MXiiqRj9eqXgjc1Hd+C6sRTXjaUwHxUe0GdQYaKpGBHzLsyZJZkHTOok+FHzpuCNf9JXMgE/6SsFr2NrfJu5A7wB85YSJsD7VfEjXblo8BpcZz+A6+wHiAavCVojFouh49hOeL96cAfmLSX8AXNmCfytxehUF8Az3vPIX5e5BLlwO7rQqS6Av7WY8eIMmDNLEDUVIWoqQsggwXjtdpg/3ce7ERue8R54xnsEz7c1vo1RzTb4W4sZrzmzhDtg1ihG1FSEcFshprTb0XFEJEhiwKhGmzIfbcp8DBjVguLblPmY0m5HuK0QUVMRZo1i7oBZoxg0UVMRAq1FGNVsg15VgnBgKisBc/UrcDWK4WoUw1z9SlZzQ8EA2j6WYFSzDYGWQiR7zRrF7AHhtkLQzBrFzF3oqS5A+3EZQsFAxhJO+7dMgNP+bebyoRAITRk61QXM1addaFgDIq1bQUPX0hHWT/JBaMoQCoV4BUKhUOIhjfgTv1JQFHOek2AAhKYMHUdEcDWKGflZoxjJbhkFRFq3plS7GsWwfpIPvaoE7kuDGQk9HMWFd2IIelUJIx9oebD3w16CAug7cf6kCLpKEfoMqsyuKg+BAAn79yehqxShp7ogTT6rgJmWPNBwRThqRLBqDjyS+G/eK+gzqKCrFMH4jz/DUSNiXvMrySe7sQdoczGjzU2LSA4JtBTCUSOC29GVJkVevwZHvxEuRx+8zjGQ168hECDhc1+Gy9EHR78R//5aCb2qBE2HNuPMhy/i/EkRJuu3gtTmsV51Rv6+H38AS8hMSx689Xmw//M15vbT+NyXoVeVoLVyM3TvvADdOy+gvmIT6is2oelQ4lxrZUK6v3oLHDUieOvzQGrTLxabePYBSSGkNiF/4dRfEQ5MpQRc+LERukoRbEdyMaF5CROal+CoEWHssy0M9HlvfV6KOCcsPlkHeGtzMfbZFlzp0uBmNJh413COwW7+HHpVCfTvrcegejO8tbmMGKlNhVeWRzrjgOmGdZhuWIdg80bMaHPhb9iEYXUO2j6W4Nzpv6P9uAxfHv4LGivWQf/eenQf2YRfPk/I3/jyxYwEsiXYvJHx4gxIHkjj/2IDrtRswEBVDsOwOgeOk4nz3tpE5GpKJxNs3sgesNIEOsL3rxz4Tq+H7/R6+L/YwMA2ZzVhDRhW5zwRoWwYVuewByj3rmUG/rfuTyuy2oJ8+yr3rmUPeP65NVDuXYthdc6KnwcM3xRi5psHHzohgySFcPurCYjEr2r032nj7s+n1+N6RxpW50C5dy2ef24N9z+77x94Snl2PHXH/wHCZc8qFC4ctgAAAABJRU5ErkJggg==&lt;!--%WarningImg%--&gt;
&lt;!--%ErrorImg%--&gt;data:image/png;base64,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&lt;!--%ErrorImg%--&gt;
</help>
  <attributes/>
</custombutton>