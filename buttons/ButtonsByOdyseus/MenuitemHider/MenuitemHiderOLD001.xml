<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/" xmlns:html="http://www.w3.org/1999/xhtml">
<html:head>
	<html:title><![CDATA[Menuitem Hider]]></html:title>
	<html:link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACMklEQVQ4ja2TT2iSYRzHHzpV993qUCCsDt29hFcPHky8dJVRTAK12EElDQ+BwUZRsByDvQ5C0fHmGHu1Md9X3leR1Pd9/D/ZskNvMyYhFXu3IfjtMHxLIjaoH3z48fs+D5/L73kI+R+VTCYNiUQicF7i8fjMhCAWiz0ZjUY4L41GA4SQC7qAYZinJycn2NvbQzabRa/XA8/zqNfreh8OhxBFEe12G1RRYDKZLuqC5eXl8OHhISiloJRC0zSwLAtVVVGtVvVse3sblFKUy2VYLJbLhBBCbix+MNxZlKR5aR/z0j4W8r2/Mr7jfVvDrVetWUIIIdPP24GljxoiXQ3r+8d4PxhO9DHj80hXw+uuBke6B0IIIddDSsCd/wqH0MeL+jcwnR9wCH28+6QhWBqAV4/0jFePEGl9h0Pow/qmeyq44soH7q5/hpVVMccfYI4/gJVVsUQH+vx79mDrC6ysCtPL5qlg6l7OYPIkJf+qAu9KGT6mAl9Uhj8qw7+qnBKV4YvK8DIVeFfKuL+whaszmVl9C6FQKLy7u4tCoYDNzU3IsgyO4yBJEjiOgyiK6HQ6yGQyKJVK2NjY+LUFQggJBoPhnZ0d8DwPQRDQarWwtraGSqWCXC4HQRDQbDaRTqdRLBaRSqUmBY/9/nCtVoOiKKCUolqt/gGlFIqiQJZlJBOJSYHT6bz90ONJuV0u/kzc7q1HHs+ziZdoNBovWSyWa3a7/eZZ2Gy2abPZPDXxF/6lfgIqYzmea1VBiAAAAABJRU5ErkJggg=="/>
	<html:style type="text/css"><![CDATA[body{font-size:medium;margin:0}body,code:before,help:before,initcode:before{font-family:"Verdana",sans-serif}#wrapper{position:fixed;top:1em;right:1em;max-width:15%;text-align:center}#button{background-color:#299a0b;border:1px solid #3a7404;border-radius:.5em;padding:0;margin-bottom:1em;box-shadow:1px 2px 3px rgba(0,0,0,.25)}#button a{color:#f0f0f0;font-weight:700;text-shadow:-.5pt -.5px .5pt rgba(0,0,0,1);padding:.8em;text-decoration:none}:-moz-any-link:focus{color:grey;outline-color:transparent;text-decoration:none}#button a,code,code:before,initcode,initcode:before,help,help:before{display:block}#credits{position:fixed;bottom:1em;right:1em;font-size:small}#about{font-size:small}custombutton{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABAElEQVQ4jW2TQXLFMAhDff+b2vEHYw5AF38eVTNdZAIxCEkmw31VptU5T7mvOuepc56K2B2f85TZrEwr99VxptUwm2U2695PZVrH937KfZX76txsVsTus0yrEbEr0/4F4AyQc56eDMiI2F0IbYoj9h9ZSCV2XzXUA1BVL8BvBvSMiN20zWY38VZ5gDEkYtfAYTRToA3qiQJk2hcA7W8gpaxG0nPvp4aiQ5UCzOV2GKAgLUEfpsGCfaBR92TonapmdCoAjHTIgLa6/14gbgow8oj9uwe6SMQ0qTz9P9oDZOgCkfMNJnqWaV8P3ouDRorUXEA4H1wbtMmVjcrQ7TSb9QMtXcwa4wpbXgAAAABJRU5ErkJggg==) fixed #f6f6f1;margin:1em}date,image,mode,accelkey{display:none}name{font-weight:700;font-size:x-large}code:before,help:before,initcode:before{font-weight:700;font-size:large;margin:0 0 1em;padding:.5em}code:before{content:"Code Tab"}help:before{content:"Help Tab"}initcode:before{content:"Initialization Code Tab"}code,initcode,help{background-color:#fcfcfc;font-size:.875em;font-family:Consolas,"Bitstream Vera Sans Mono","Courier New",Courier,monospace!important;margin:1em 2em 1em 0 !important;padding:1em;text-align:left;box-shadow:2px 2px 0 rgba(170,160,130,0.5),4px 4px 0 rgba(200,190,165,0.5);max-width:80%;min-width:80%;white-space:pre-wrap;word-wrap:break-word}]]></html:style>
</html:head>
<html:body>
	<html:div id="wrapper">
		<html:div id="button">
			<html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EMenuitem%20Hider%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACMklEQVQ4ja2TT2iSYRzHHzpV993qUCCsDt29hFcPHky8dJVRTAK12EElDQ+BwUZRsByDvQ5C0fHmGHu1Md9X3leR1Pd9/D/ZskNvMyYhFXu3IfjtMHxLIjaoH3z48fs+D5/L73kI+R+VTCYNiUQicF7i8fjMhCAWiz0ZjUY4L41GA4SQC7qAYZinJycn2NvbQzabRa/XA8/zqNfreh8OhxBFEe12G1RRYDKZLuqC5eXl8OHhISiloJRC0zSwLAtVVVGtVvVse3sblFKUy2VYLJbLhBBCbix+MNxZlKR5aR/z0j4W8r2/Mr7jfVvDrVetWUIIIdPP24GljxoiXQ3r+8d4PxhO9DHj80hXw+uuBke6B0IIIddDSsCd/wqH0MeL+jcwnR9wCH28+6QhWBqAV4/0jFePEGl9h0Pow/qmeyq44soH7q5/hpVVMccfYI4/gJVVsUQH+vx79mDrC6ysCtPL5qlg6l7OYPIkJf+qAu9KGT6mAl9Uhj8qw7+qnBKV4YvK8DIVeFfKuL+whaszmVl9C6FQKLy7u4tCoYDNzU3IsgyO4yBJEjiOgyiK6HQ6yGQyKJVK2NjY+LUFQggJBoPhnZ0d8DwPQRDQarWwtraGSqWCXC4HQRDQbDaRTqdRLBaRSqUmBY/9/nCtVoOiKKCUolqt/gGlFIqiQJZlJBOJSYHT6bz90ONJuV0u/kzc7q1HHs+ziZdoNBovWSyWa3a7/eZZ2Gy2abPZPDXxF/6lfgIqYzmea1VBiAAAAABJRU5ErkJggg%3D%3D%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5Bvar%20%24%20%3D%20this.MenuItemHider%20%3D%20%7B%0A%09init%3A%20function%28%29%20%7B%0A%09%09if%20%28%21%28%22Services%22%20in%20window%29%29%0A%09%09%09Cu.import%28%22resource%3A//gre/modules/Services.jsm%22%29%3B%0A%0A%09%09%24.initPrefs%28%29%3B%0A%0A%09%09if%20%28%21%28%24._UID%20in%20window%29%29%20%7B%0A%09%09%09window%5B%24._UID%5D%20%3D%20%7B%0A%09%09%09%09StyleSheet%3A%20false%2C%0A%09%09%09%09CustomizableUI%3A%20false%2C%0A%09%09%09%7D%3B%0A%09%09%7D%0A%0A%09%09self.setAttribute%28%22popup%22%2C%20%24._UID%20+%20%22_options_menu%22%29%3B%0A%0A%09%09self.tooltipText%20%3D%20self.name%20+%20%22%20-%20ID%23%3A%20%22%20+%20self.id.slice%2820%29%20+%0A%09%09%09%22%5Cn%5Cn%uD835%uDDDF%uD835%uDDF2%uD835%uDDF3%uD835%uDE01%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%3A%20Open%20options%20menu%5Ct%5Cn%5Cn%22%20+%0A%09%09%09%22%uD835%uDDE6%uD835%uDDF5%uD835%uDDFC%uD835%uDDFF%uD835%uDE01%uD835%uDDF0%uD835%uDE02%uD835%uDE01%3A%20%22%20+%20%24.getShortcut%28%29%20+%20%22%5Ct%5Cn%5Cn%22%20+%0A%09%09%09%22%uD835%uDDE5%uD835%uDDF2%uD835%uDDEE%uD835%uDDF1%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDF5%uD835%uDDF2%uD835%uDDF9%uD835%uDDFD%20%uD835%uDDF3%uD835%uDDFC%uD835%uDDFF%20%uD835%uDE03%uD835%uDDF2%uD835%uDDFF%uD835%uDE06%20%uD835%uDDF6%uD835%uDDFA%uD835%uDDFD%uD835%uDDFC%uD835%uDDFF%uD835%uDE01%uD835%uDDEE%uD835%uDDFB%uD835%uDE01%20%uD835%uDE02%uD835%uDE00%uD835%uDDEE%uD835%uDDF4%uD835%uDDF2%20%uD835%uDDFB%uD835%uDDFC%uD835%uDE01%uD835%uDDF2%uD835%uDE00.%5Cn%22%20+%0A%09%09%09%22%uD835%uDDE5%uD835%uDDF6%uD835%uDDF4%uD835%uDDF5%uD835%uDE01%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDF6%uD835%uDDF0%uD835%uDDF8%20%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%2C%20%5C%22%uD835%uDDD5%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDDB%uD835%uDDF2%uD835%uDDF9%uD835%uDDFD%5C%22%20%uD835%uDDF6%uD835%uDE01%uD835%uDDF2%uD835%uDDFA.%22%3B%0A%0A%09%09%24.handleCSS%28%29%3B%0A%09%09%24.createElements%28%29%3B%0A%09%09%24.handlePrefObserver%28%29%3B%0A%09%09%24.dealWithModsRequirements%28%29%3B%0A%09%09%24.createHotkeys%28%29%3B%0A%0A%09%09if%20%28%24.gPref%28%22pShortcutActive%22%29%29%20%7B%0A%09%09%09%24.winEvts.forEach%28function%28aLi%29%20%7B%0A%09%09%09%09window.addEventListener%28aLi%2C%20%24.onClick%2C%20false%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09%24.winEvts.forEach%28function%28aLi%29%20%7B%0A%09%09%09%09window.removeEventListener%28aLi%2C%20%24.onClick%2C%20false%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%7D%0A%0A%09%09if%20%28%22CustomizableUI%22%20in%20window%29%20%7B%0A%09%09%09if%20%28%21window%5B%24._UID%5D%5B%22CustomizableUI%22%5D%29%20%7B%0A%09%09%09%09window%5B%24._UID%5D%5B%22CustomizableUI%22%5D%20%3D%20true%3B%0A%09%09%09%09CustomizableUI.addListener%28%7B%0A%09%09%09%09%09onCustomizeEnd%3A%20function%28aWindow%29%20%7B%0A%09%09%09%09%09%09var%20thisBtn%20%3D%20aWindow.document.getElementById%28self.id%29%3B%0A%09%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09%09aWindow%5B%24._UID%5D%5B%22CustomizableUI%22%5D%20%26%26%20thisBtn.MenuItemHider.selfDestroy%28%29%3B%0A%09%09%09%09%09%09%7D%2C%20Math.floor%28Math.random%28%29%20*%20%281%20+%202000%20-%20200%29%29%20+%20200%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22delete%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22update%22%29%20%7B%0A%09%09%09%09%24.handlePrefObserver%28true%29%3B%0A%09%09%09%09%24.winEvts.forEach%28function%28aLi%29%20%7B%0A%09%09%09%09%09window.removeEventListener%28aLi%2C%20%24.onClick%2C%20false%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09%24.handleCSS%28%29%3B%0A%09%09%09%09let%20selfEls%20%3D%20document.getElementsByAttribute%28%22cb_id%22%2C%20%24._UID%29%3B%0A%09%09%09%09Array.prototype.slice.call%28selfEls%29.forEach%28function%28aEl%29%20%7B%20//%20Delete%20all%20elements%20created%20by%20this%20button.%0A%09%09%09%09%09aEl%20%26%26%20aEl.parentNode.removeChild%28aEl%29%3B%0A%09%09%09%09%7D%29%3B%0A%0A%09%09%09%7D%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09%28Services.prefs.getBranch%28%24.Branch%29%29.deleteBranch%28%22%22%29%3B%20//%20Clear%20prefs.%0A%09%09%09%09Services.prefs.savePrefFile%28null%29%3B%0A%09%09%09%09delete%20window%5B%24._UID%5D%3B%0A%09%09%09%7D%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09getShortcut%3A%20function%28%29%20%7B%0A%09%09let%20mods%20%3D%20%22%22%3B%0A%09%09let%20btn%3B%0A%09%09if%20%28%24.gPref%28%22pShortcutButton%22%29%20%21%3D%3D%201%29%20%7B%0A%09%09%09if%20%28%24.gPref%28%22pShortcutRequireCtrl%22%29%29%0A%09%09%09%09mods%20+%3D%20%24.accel%28%29%20+%20%22%20+%20%22%3B%0A%09%09%09if%20%28%24.gPref%28%22pShortcutRequireShift%22%29%29%0A%09%09%09%09mods%20+%3D%20%22Shift%20+%20%22%3B%0A%09%09%09if%20%28%24.gPref%28%22pShortcutRequireAlt%22%29%29%0A%09%09%09%09mods%20+%3D%20%22Alt%20+%20%22%3B%0A%09%09%7D%0A%09%09switch%20%28%24.gPref%28%22pShortcutButton%22%29%29%20%7B%0A%09%09%09case%200%3A%0A%09%09%09%09btn%20%3D%20%22Left%22%3B%0A%09%09%09%09break%3B%0A%09%09%09case%201%3A%0A%09%09%09%09btn%20%3D%20%22Middle%22%3B%0A%09%09%09%09break%3B%0A%09%09%09case%202%3A%0A%09%09%09%09btn%20%3D%20%22Right%22%3B%0A%09%09%09%09break%3B%0A%09%09%7D%0A%0A%09%09return%20mods%20+%20btn%20+%20%22%20click%22%3B%0A%09%7D%2C%0A%0A%09onClick%3A%20function%28aE%29%20%7B%0A%09%09if%20%28aE.button%20%21%3D%3D%20%24.gPref%28%22pShortcutButton%22%29%29%0A%09%09%09return%20true%3B%0A%09%09if%20%28aE.button%20%21%3D%3D%201%20%26%26%20%21%24.requiredMods%28aE%29%29%0A%09%09%09return%20true%3B%0A%09%09let%20target%20%3D%20aE.target%3B%0A%09%09let%20nn%20%3D%20target.nodeName%3B%0A%09%09if%20%28nn%20%21%3D%3D%20%22menuitem%22%20%26%26%20nn%20%21%3D%3D%20%22menu%22%20%26%26%20nn%20%21%3D%3D%20%22menuseparator%22%29%0A%09%09%09return%3B%0A%09%09if%20%28aE.type%20%21%3D%3D%20%22click%22%29%20%7B%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%09return%20false%3B%0A%09%09%7D%0A%09%09let%20id%20%3D%20target.id%3B%0A%09%09if%20%28%21id%29%20%7B%0A%09%09%09id%20%3D%20target.parentNode.id%3B%0A%09%09%09if%20%28id%29%0A%09%09%09%09nn%20%3D%20%22%23%22%20+%20id%20+%20%22%20%3E%20%22%20+%20nn%3B%0A%09%09%09if%20%28target.attributes.length%20%3E%201%20%7C%7C%0A%09%09%09%09%28target.attributes.length%20%3D%3D%3D%201%20%26%26%20target.attributes%5B0%5D.name%20%21%3D%3D%20%22class%22%29%29%20%7B%0A%09%09%09%09for%20%28let%20i%20%3D%20target.attributes.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%29%20%7B%0A%09%09%09%09%09if%20%28%21/%5E_moz/.test%28target.attributes%5Bi%5D.name%29%29%0A%09%09%09%09%09%09nn%20+%3D%20%22%5B%22%20+%20target.attributes%5Bi%5D.name%20+%20%22%3D%5C%22%22%20+%20target.attributes%5Bi%5D.value%20+%20%22%5C%22%5D%22%3B%0A%09%09%09%09%7D%0A%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09gClipboard.write%28nn%29%3B%0A%09%09%09%09%09Services.prompt.alert%28null%2C%20self.name%2C%0A%09%09%09%09%09%09%22The%20element%20chosen%20to%20be%20hidden%20doesn%27t%20have%20an%20ID.%5Cn%22%20+%0A%09%09%09%09%09%09%22A%20%27probably%20unique%20selector%27%20has%20been%20generated%20and%20copied%20to%20the%20clipboard.%5Cn%5Cn%22%20+%0A%09%09%09%09%09%09%22Note%3A%20This%20selector%20can%20be%20used%20with%20the%20%27Custom%20Selectors%27%20option%20%22%20+%0A%09%09%09%09%09%09%22in%20Menu%20Items%20Hider%27s%20options%20window.%5Cn%5Cn%22%20+%0A%09%09%09%09%09%09%22If%20the%20element%20has%20already%20been%20hidden%20by%20Menu%20Item%20Hider%2C%20you%20probably%20%22%20+%0A%09%09%09%09%09%09%22%20used%20a%20custom%20selector.%20In%20which%20case%2C%20you%20will%20have%20to%20edit%20the%20%27Custom%20selectors%27%22%20+%0A%09%09%09%09%09%09%22%20field%20in%20Menu%20Item%20Hider%27s%20options%20window.%22%29%3B%0A%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%7D%0A%09%09%09return%3B%0A%09%09%7D%0A%09%09%24.handleElement%28%22%23%22%20+%20id%29%3B%0A%09%09aE.stopPropagation%28%29%3B%0A%09%7D%2C%0A%0A%09dealWithModsRequirements%3A%20function%28%29%20%7B%0A%09%09if%20%28%24.gPref%28%22pShortcutButton%22%29%20%21%3D%3D%201%20%26%26%0A%09%09%09%21%24.gPref%28%22pShortcutRequireCtrl%22%29%20%26%26%0A%09%09%09%21%24.gPref%28%22pShortcutRequireShift%22%29%20%26%26%0A%09%09%09%21%24.gPref%28%22pShortcutRequireAlt%22%29%29%0A%09%09%09%24.sPref%28%22pShortcutRequireCtrl%22%2C%20true%29%3B%0A%09%7D%2C%0A%0A%09toggleActive%3A%20function%28%29%20%7B%0A%09%09%24.sPref%28%22pHiderEnabled%22%2C%20%21%24.gPref%28%22pHiderEnabled%22%29%29%3B%0A%09%7D%2C%0A%0A%09toggleShortcut%3A%20function%28%29%20%7B%0A%09%09%24.sPref%28%22pShortcutActive%22%2C%20%21%24.gPref%28%22pShortcutActive%22%29%29%3B%0A%09%7D%2C%0A%0A%09createElements%3A%20function%28%29%20%7B%0A%09%09var%20popSet%20%3D%20%24.popSet%3B%0A%09%09var%20m%20%3D%20%24.%24%28%24._UID%20+%20%22_options_menu%22%29%3B%0A%09%09if%20%28popSet%20%26%26%20%21m%29%20%7B%0A%09%09%09popSet.appendChild%28%24.%24CNS%28%22menupopup%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22_options_menu%22%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09position%3A%20%22after_start%22%2C%0A%09%09%09%09onclick%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopupshowing%3A%20%24.that%20+%20%22populateOptionsMenu%28this%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%0A%09%09let%20keyset%20%3D%20%24.%24%28%24._UID%20+%20%22_keyset%22%29%3B%0A%09%09if%20%28popSet%20%26%26%20%21keyset%29%20%7B%20//%20Using%20%22my%20own%22%20keyset%20seems%20to%20minimize%20hotkeys%20erratic%20behaivor.%0A%09%09%09popSet.parentNode.appendChild%28%24.%24CNS%28%22keyset%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22_keyset%22%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%0A%09%09//%20%24.handleHotkeys%28%29%3B%0A%09%7D%2C%0A%0A%09populateOptionsMenu%3A%20function%28aN%29%20%7B%0A%09%09aN.textContent%20%3D%20%22%22%3B%0A%0A%09%09aN.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09label%3A%20%22Menuitem%20Hider%20enabled%22%2C%0A%09%09%09type%3A%20%22checkbox%22%2C%0A%09%09%09closemenu%3A%20%22none%22%2C%0A%09%09%09key%3A%20%24.gPref%28%22pHotkeyToggleEnabled%22%29%20%3F%20%22key%22%20+%20%24._UID%20+%20%22_toogle%22%20%3A%20%22%22%2C%0A%09%09%09tooltiptext%3A%20%22If%20disabled/unchecked%2C%20it%20will%20display%20all%20hidden%20items.%22%2C%0A%09%09%09checked%3A%20%24.gPref%28%22pHiderEnabled%22%29%2C%0A%09%09%09oncommand%3A%20%24.that%20+%20%22sPref%28%27pHiderEnabled%27%2C%20%21%22%20+%20%24.that%20+%0A%09%09%09%09%22gPref%28%27pHiderEnabled%27%29%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%7D%29%29%3B%0A%09%09aN.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09label%3A%20%22Shortcut%20enabled%22%2C%0A%09%09%09type%3A%20%22checkbox%22%2C%0A%09%09%09closemenu%3A%20%22none%22%2C%0A%09%09%09key%3A%20%24.gPref%28%22pHotkeyShortcutEnabled%22%29%20%3F%20%22key%22%20+%20%24._UID%20+%20%22_shortcut%22%20%3A%20%22%22%2C%0A%09%09%09tooltiptext%3A%20%22If%20enabled/checked%2C%20it%20will%20enable%20the%20shortcut%20that%20%22%20+%0A%09%09%09%09%22allows%20you%20to%20hide%20%27menu%27%2C%20%27menuitem%27%20and%20%27menuseparator%27%20elements.%5Cn%5Cn%22%20+%0A%09%09%09%09%22%uD835%uDDDE%uD835%uDDF2%uD835%uDDF2%uD835%uDDFD%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDFC%uD835%uDDFD%uD835%uDE01%uD835%uDDF6%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDF1%uD835%uDDF6%uD835%uDE00%uD835%uDDEE%uD835%uDDEF%uD835%uDDF9%uD835%uDDF2%uD835%uDDF1%20%uD835%uDDF1%uD835%uDE02%uD835%uDDFF%uD835%uDDF6%uD835%uDDFB%uD835%uDDF4%20%uD835%uDDFB%uD835%uDDFC%uD835%uDDFF%uD835%uDDFA%uD835%uDDEE%uD835%uDDF9%20%uD835%uDE02%uD835%uDE00%uD835%uDDF2.%20%uD835%uDDDC%uD835%uDE01%20%uD835%uDDFA%uD835%uDDEE%uD835%uDE06%20%uD835%uDDF6%uD835%uDDFB%uD835%uDE01%uD835%uDDF2%uD835%uDDFF%uD835%uDDF3%uD835%uDDF2%uD835%uDDFF%uD835%uDDF2%20%uD835%uDE04%uD835%uDDF6%uD835%uDE01%uD835%uDDF5%20%uD835%uDE00%uD835%uDDFC%uD835%uDDFA%uD835%uDDF2%20%22%20+%0A%09%09%09%09%22%uD835%uDDF2%uD835%uDDF9%uD835%uDDF2%uD835%uDDFA%uD835%uDDF2%uD835%uDDFB%uD835%uDE01%uD835%uDE00%20%uD835%uDDEE%uD835%uDDF0%uD835%uDE01%uD835%uDDF6%uD835%uDE03%uD835%uDDEE%uD835%uDE01%uD835%uDDF6%uD835%uDDFC%uD835%uDDFB.%22%2C%0A%09%09%09checked%3A%20%24.gPref%28%22pShortcutActive%22%29%2C%0A%09%09%09oncommand%3A%20%24.that%20+%20%22sPref%28%27pShortcutActive%27%2C%20%21%22%20+%20%24.that%20+%0A%09%09%09%09%22gPref%28%27pShortcutActive%27%29%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%7D%29%29%3B%0A%0A%09%09aN.appendChild%28%24.%24CNS%28%22menuseparator%22%29%29%3B%0A%09%09aN.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09label%3A%20%22More%20options%22%2C%0A%09%09%09tooltiptext%3A%20%22Open%20Menuitem%20Hider%20options%20page.%5Cn%5CnNote%3A%20Preferences%20prefixed%20with%20%22%20+%0A%09%09%09%09%22%5C%22z%5C%22%20%28the%20letter%20ZED%29%20can%20already%20be%20changed%20from%20this%20popup%20and%20some%20are%20used%20internally.%20%22%20+%0A%09%09%09%09%22So%20there%20is%20no%20need%20to%20change%20them%20manually.%22%2C%0A%09%09%09oncommand%3A%20%24.that%20+%20%22openOptions%28%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%7D%29%29%3B%0A%09%7D%2C%0A%0A%09getCombo%3A%20function%28aHKStr%29%20%7B%0A%09%09var%20prefix%20%3D%20%22%22%3B%0A%09%09if%20%28aHKStr.search%28%22Alt+%22%29%20%21%3D%3D%20-1%29%0A%09%09%09prefix%20+%3D%20%22alt-%22%3B%0A%09%09if%20%28aHKStr.search%28%22Ctrl+%22%29%20%21%3D%3D%20-1%29%0A%09%09%09prefix%20+%3D%20%22control-%22%3B%0A%09%09if%20%28aHKStr.search%28%22Shift+%22%29%20%21%3D%3D%20-1%29%0A%09%09%09prefix%20+%3D%20%22shift-%22%3B%0A%09%09if%20%28aHKStr.search%28%22Meta+%22%29%20%21%3D%3D%20-1%29%0A%09%09%09prefix%20+%3D%20%22meta-%22%3B%0A%09%09return%20prefix%20+%20aHKStr.substring%28aHKStr.lastIndexOf%28%22+%22%29%20+%201%2C%20aHKStr.length%29%3B%0A%09%7D%2C%0A%0A%09createHotkeys%3A%20function%28%29%20%7B%0A%09%09if%20%28%21%24.gPref%28%22pHotkeyToggleEnabled%22%29%20%26%26%20%21%24.gPref%28%22pHotkeyShortcutEnabled%22%29%29%0A%09%09%09return%20true%3B%0A%0A%09%09let%20hotKeys%20%3D%20%5B%7B%0A%09%09%09id%3A%20%22key%22%20+%20%24._UID%20+%20%22_toogle%22%2C%0A%09%09%09combo%3A%20%24.gPref%28%22pHotkeyToggle%22%29%2C%0A%09%09%09enabled%3A%20%24.gPref%28%22pHotkeyToggleEnabled%22%29%2C%0A%09%09%09cmd%3A%20%24.that%20+%20%22sPref%28%27pHiderEnabled%27%2C%20%21%22%20+%20%24.that%20+%0A%09%09%09%09%22gPref%28%27pHiderEnabled%27%29%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%7D%2C%20%7B%0A%09%09%09id%3A%20%22key%22%20+%20%24._UID%20+%20%22_shortcut%22%2C%0A%09%09%09combo%3A%20%24.gPref%28%22pHotkeyShortcut%22%29%2C%0A%09%09%09enabled%3A%20%24.gPref%28%22pHotkeyShortcutEnabled%22%29%2C%0A%09%09%09cmd%3A%20%24.that%20+%20%22sPref%28%27pShortcutActive%27%2C%20%21%22%20+%20%24.that%20+%0A%09%09%09%09%22gPref%28%27pShortcutActive%27%29%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%7D%5D%3B%0A%09%09var%20keyset%20%3D%20%24.%24%28%24._UID%20+%20%22_keyset%22%29%3B%0A%09%09var%20popSet%20%3D%20%24.popSet%3B%0A%09%09try%20%7B%0A%09%09%09if%20%28popSet%20%26%26%20%21keyset%29%20%7B%20//%20Using%20%22my%20own%22%20keyset%20seems%20to%20minimize%20hotkeys%20erratic%20behaivor.%0A%09%09%09%09keyset%20%3D%20popSet.parentNode.appendChild%28%24.%24CNS%28%22keyset%22%2C%20%7B%0A%09%09%09%09%09id%3A%20%24._UID%20+%20%22_keyset%22%2C%0A%09%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09%7D%29%29%3B%0A%09%09%09%7D%0A%09%09%7D%20finally%20%7B%0A%09%09%09for%20%28let%20i%20%3D%20hotKeys.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%29%20%7B%0A%09%09%09%09let%20hk%20%3D%20hotKeys%5Bi%5D%3B%0A%09%09%09%09if%20%28%21hk%5B%22enabled%22%5D%29%0A%09%09%09%09%09continue%3B%0A%09%09%09%09let%20combo%20%3D%20%24.getCombo%28hk%5B%22combo%22%5D.trim%28%29%29%3B%0A%09%09%09%09let%20key%20%3D%20combo.substring%28combo.lastIndexOf%28%22-%22%29%20+%201%2C%20combo.length%29%3B%0A%09%09%09%09let%20modifiers%20%3D%20combo.slice%280%2C%20-%28key.length%20+%201%29%29.split%28%22-%22%29.join%28%22%2C%22%29%3B%0A%09%09%09%09if%20%28key%20%26%26%20modifiers%20%26%26%20keyset%29%20%7B%0A%09%09%09%09%09let%20attr%20%3D%20key.length%20%3D%3D%3D%201%20%3F%20%22key%22%20%3A%20%22keycode%22%3B%0A%09%09%09%09%09let%20hotKey%20%3D%20keyset.appendChild%28%24.%24CNS%28%22key%22%2C%20%7B%0A%09%09%09%09%09%09id%3A%20hk%5B%22id%22%5D%2C%0A%09%09%09%09%09%09modifiers%3A%20modifiers%2C%0A%09%09%09%09%09%09oncommand%3A%20hk%5B%22cmd%22%5D%2C%0A%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%09hotKey.setAttribute%28attr%2C%20key.length%20%3D%3D%3D%201%20%3F%20key%20%3A%20%22VK_%22%20+%20key%29%3B%20//%20Set%20%22keycode%22%20or%20%22key%22%20attribute.%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09openOptions%3A%20function%28%29%20%7B%0A%09%09var%20em%20%3D%20Services.ww.getWindowEnumerator%28%29%3B%0A%09%09var%20winName%20%3D%20%24._UID%20+%20%22_settings_window%22%3B%0A%09%09var%20index%20%3D%201%3B%0A%09%09while%20%28em.hasMoreElements%28%29%29%20%7B%0A%09%09%09let%20win%20%3D%20em.getNext%28%29%3B%0A%09%09%09if%20%28win.name%20%3D%3D%3D%20winName%29%20%7B%0A%09%09%09%09win.focus%28%29%3B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09index++%3B%0A%09%09%7D%0A%09%09let%20storage%20%3D%20%7B%0A%09%09%09button%3A%20self%2C%0A%09%09%7D%3B%0A%09%09let%20xul%20%3D%20%24.getHelp%28%22%25OptionsWindow%25%22%29%3B%0A%09%09xul%20%3D%20xul.replace%28/%3E%5Cs+%3C/g%2C%20%22%3E%3C%22%29%3B%0A%09%09xul%20%3D%20xul.split%28%22%25U_I_D%25%22%29.join%28%24._UID%29%3B%0A%09%09xul%20%3D%20xul.split%28%22%25A_C_C_E_L%25%22%29.join%28%24.accel%28%29%29%3B%0A%09%09xul%20%3D%20xul.split%28%22%25B_R_A_N_C_H%25%22%29.join%28%24.Branch%29%3B%0A%09%09let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28xul%29%3B%0A%09%09let%20optWin%20%3D%20openDialog%28url%2C%20winName%2C%20%22chrome%2C%20dependant%2C%20dialog%2C%20centerscreen%2C%20close%2C%20alwaysRaised%22%29%3B%0A%09%09optWin._storage%20%3D%20storage%3B%0A%09%7D%2C%0A%0A%09getCSS%3A%20function%28%29%20%7B%0A%09%09let%20selectorsList%3B%0A%09%09try%20%7B%0A%09%09%09let%20customSelectors%20%3D%20%28decodeURIComponent%28%24.gPref%28%22pCustomSelectors%22%29%29%20+%20%22%2C%22%29.replace%28/%5Cn+/gm%2C%20%22%22%29.split%28%22%2C%22%29%3B%0A%09%09%09selectorsList%20%3D%20%28%24.gPref%28%22pListOfIDsToHide%22%29%20+%20%22%2C%22%29.split%28%22%2C%22%29.concat%28customSelectors%29%3B%0A%09%09%09selectorsList%20%3D%20selectorsList.filter%28function%28aVal%29%20%7B%0A%09%09%09%09if%20%28aVal%20%21%3D%3D%20%22%22%29%0A%09%09%09%09%09return%20true%3B%0A%09%09%09%7D%29%3B%0A%09%09%7D%20finally%20%7B%0A%09%09%09if%20%28%21selectorsList%20%7C%7C%20selectorsList.length%20%3D%3D%3D%200%29%0A%09%09%09%09return%20false%3B%0A%09%09%09return%20selectorsList.join%28%22%2C%22%29%20+%20%22%7B%22%20+%0A%09%09%09%09%28%24.gPref%28%22pHiderEnabled%22%29%20%3F%20%22display%3A%20none%20%21important%3B%22%20%3A%20%22%22%29%20+%0A%09%09%09%09%22color%3A%20%22%20+%20%24.gPref%28%22pHighlightColor%22%29%20+%20%22%21important%3B%22%20+%0A%09%09%09%09%22box-shadow%3A%200%200%202px%20%22%20+%20%24.gPref%28%22pHighlightColor%22%29%20+%20%22%20%21important%3B%22%20+%0A%09%09%09%09%22text-decoration%3A%20%22%20+%20%24.gPref%28%22pHighlightTextDecoration%22%29%20+%20%22%20%21important%3B%22%20+%0A%09%09%09%09%22%7D%22%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09handleCSS%3A%20function%28%29%20%7B%0A%09%09let%20css%3B%0A%09%09try%20%7B%0A%09%09%09%24.styleSheet%28window%5B%24._UID%5D%5B%22StyleSheet%22%5D%2C%20true%29%3B%0A%09%09%09window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%3D%20false%3B%0A%09%09%7D%20catch%20%28aErr%29%20%7B%7D%0A%0A%09%09try%20%7B%0A%09%09%09css%20%3D%20%22@namespace%20url%28%22%20+%20xulns%20+%20%22%29%3B%22%20+%20%24.getCSS%28%29%3B%0A%09%09%7D%20finally%20%7B%0A%09%09%09if%20%28css%20%26%26%20%28css.trim%28%29%29.length%20%3E%2078%29%20%7B%0A%09%09%09%09window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%3D%20css%3B%0A%09%09%09%09%24.styleSheet%28window%5B%24._UID%5D%5B%22StyleSheet%22%5D%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09handleElement%3A%20function%28aSelector%29%20%7B%0A%09%09var%20selectorList%20%3D%20%24.gPref%28%22pListOfIDsToHide%22%29.split%28%22%2C%22%29.filter%28function%28aVal%29%20%7B%20//%20Use%20of%20%22Array.filter%22%20to%20avoid%20an%20%22illegal%22%20CSS%20selector%20list.%0A%09%09%09if%20%28aVal%20%21%3D%3D%20%22%22%29%0A%09%09%09%09return%20true%3B%0A%09%09%7D%29%3B%0A%09%09if%20%28selectorList.indexOf%28aSelector%29%20%21%3D%3D%20-1%29%20%7B%0A%09%09%09while%20%28selectorList.indexOf%28aSelector%29%20%21%3D%3D%20-1%29%20%7B%0A%09%09%09%09selectorList.splice%28selectorList.indexOf%28aSelector%29%2C%201%29%3B%0A%09%09%09%7D%0A%09%09%7D%20else%0A%09%09%09selectorList.push%28aSelector%29%3B%0A%09%09%24.sPref%28%22pListOfIDsToHide%22%2C%20selectorList.join%28%22%2C%22%29%29%3B%0A%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%24.handleCSS%28%29%3B%0A%09%09%7D%2C%2010%29%3B%0A%09%7D%2C%0A%0A%09requiredMods%3A%20function%28aE%29%20%7B%0A%09%09let%20useCtrlKey%20%3D%20%24.gPref%28%22pShortcutRequireCtrl%22%29%2C%0A%09%09%09useShiftKey%20%3D%20%24.gPref%28%22pShortcutRequireShift%22%29%2C%0A%09%09%09useAltKey%20%3D%20%24.gPref%28%22pShortcutRequireAlt%22%29%3B%0A%09%09if%20%28%24.accel%28aE%29%20%26%26%20aE.shiftKey%20%26%26%20aE.altKey%20%26%26%20%28%21useCtrlKey%20%7C%7C%20%21useShiftKey%20%7C%7C%20%21useAltKey%29%29%0A%09%09%09return%20false%3B%0A%09%09//%20if%20%28%24.accel%28aE%29%20%26%26%20aE.altKey%20%26%26%20%28%21useCtrlKey%20%7C%7C%20%21useAltKey%29%29%0A%09%09//%20return%20false%3B%0A%09%09//%20XOR%20http%3A//www.howtocreate.co.uk/xor.html%0A%09%09if%20%28%24.accel%28aE%29%20%3F%20%21useCtrlKey%20%3A%20useCtrlKey%29%0A%09%09%09return%20false%3B%0A%09%09if%20%28aE.shiftKey%20%3F%20%21useShiftKey%20%3A%20useShiftKey%29%0A%09%09%09return%20false%3B%0A%09%09if%20%28aE.altKey%20%3F%20%21useAltKey%20%3A%20useAltKey%29%0A%09%09%09return%20false%3B%0A%09%09return%20true%3B%0A%09%7D%2C%0A%0A%09styleSheet%3A%20function%28aCSS%2C%20aRemFlag%29%20%7B%0A%09%09var%20sss%20%3D%20Cc%5B%22@mozilla.org/content/style-sheet-service%3B1%22%5D%0A%09%09%09.getService%28Ci.nsIStyleSheetService%29%3B%0A%09%09var%20uri%20%3D%20Services.io.newURI%28%22data%3Atext/css%2C%22%20+%20encodeURIComponent%28aCSS%29%2C%20null%2C%20null%29%3B%0A%09%09if%20%28sss.sheetRegistered%28uri%2C%20sss.USER_SHEET%29%29%0A%09%09%09sss.unregisterSheet%28uri%2C%20sss.USER_SHEET%29%3B%0A%09%09if%20%28aRemFlag%29%0A%09%09%09return%3B%0A%09%09sss.loadAndRegisterSheet%28uri%2C%20sss.USER_SHEET%29%3B%0A%09%7D%2C%0A%0A%09handlePrefObserver%3A%20function%28aRem%29%20%7B%0A%09%09var%20prefs%20%3D%20%24.DefPrefs%3B%0A%09%09for%20%28let%20key%20in%20prefs%29%20%7B%0A%09%09%09let%20pref%20%3D%20%24.Branch%20+%20key%3B%0A%09%09%09if%20%28prefs.hasOwnProperty%28key%29%29%20%7B%0A%09%09%09%09if%20%28aRem%29%0A%09%09%09%09%09Services.prefs.removeObserver%28pref%2C%20%24.prefObserver%2C%20false%29%3B%0A%09%09%09%09else%0A%09%09%09%09%09Services.prefs.addObserver%28pref%2C%20%24.prefObserver%2C%20false%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09prefObserver%3A%20%7B%0A%09%09observe%3A%20function%28aSubject%2C%20aTopic%2C%20aPStr%29%20%7B%0A%09%09%09if%20%28aTopic%20%3D%3D%3D%20%22nsPref%3Achanged%22%29%20%7B%0A%09%09%09%09let%20prefName%20%3D%20aPStr.slice%28%24.Branch.length%29%3B%0A%09%09%09%09switch%20%28prefName%29%20%7B%0A%09%09%09%09%09case%20%22pListOfIDsToHide%22%3A%0A%09%09%09%09%09%09%24.handleCSS%28%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22pHiderEnabled%22%3A%0A%09%09%09%09%09case%20%22pShortcutActive%22%3A%0A%09%09%09%09%09%09%24.selfDestroy%28%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09selfDestroy%3A%20function%28%29%20%7B%0A%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09self.destroy%28%22update%22%29%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09self.init%28%29%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%7D%2C%20100%29%3B%0A%09%7D%2C%0A%0A%09%24CNS%3A%20function%28aElName%2C%20aAttrs%2C%20aNameSpace%29%20%7B%20//%20Creates%20elements%0A%09%09var%20el%20%3D%20aNameSpace%20%3F%0A%09%09%09document.createElementNS%28aNameSpace%2C%20aElName%29%20%3A%0A%09%09%09document.createElement%28aElName%29%3B%0A%09%09if%20%28aAttrs%29%0A%09%09%09Object.keys%28aAttrs%29.forEach%28function%28n%29%20%7B%0A%09%09%09%09if%20%28aAttrs%5Bn%5D%20%21%3D%3D%20%22%22%29%0A%09%09%09%09%09el.setAttribute%28n%2C%20aAttrs%5Bn%5D%29%3B%0A%09%09%09%7D%29%3B%0A%09%09return%20el%3B%0A%09%7D%2C%0A%0A%09%24%3A%20function%28aId%29%20%7B%20//%20Return%20elements%20by%20Id%0A%09%09return%20document.getElementById%28aId%29%3B%0A%09%7D%2C%0A%0A%09getHelp%3A%20function%28aPlaceholder%29%20%7B%20//%20Get%20specific%20data%2C%20surrounded%20by%20%22placeholders%22%2C%20from%20the%20Help%20tab.%0A%09%09return%20%24.%24%28self.id%29.getAttribute%28%22Help%22%29.split%28%22%3C%21--%22%20+%20aPlaceholder%20+%20%22--%3E%22%29%5B1%5D%3B%0A%09%7D%2C%0A%0A%09accel%3A%20function%28aE%29%20%7B%0A%09%09if%20%28aE%29%0A%09%09%09return%20%24.isOSX%20%3F%20aE.metaKey%20%3A%20aE.ctrlKey%3B%0A%09%09return%20%24.isOSX%20%3F%20%22Command%22%20%3A%20%22Control%22%3B%0A%09%7D%2C%0A%0A%09isOSX%3A%20Services.appinfo.OS.toLowerCase%28%29.startsWith%28%22darwin%22%29%2C%0A%09winEvts%3A%20%5B%22click%22%2C%20%22mousedown%22%2C%20%22mouseup%22%2C%20%22command%22%5D%2C%0A%09_UID%3A%20%22__cb_menu_item_hider_%22%20+%20self.id.slice%2820%29%2C%0A%09that%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29.MenuItemHider.%22%2C%0A%0A%09get%20popSet%28%29%20%7B%0A%09%09let%20pSet%20%3D%20%24.%24%28%22mainPopupSet%22%29%20%7C%7C%20%24.%24%28%24._UID%20+%20%22_popupset%22%29%3B%0A%09%09if%20%28%21pSet%29%20%7B%0A%09%09%09try%20%7B%0A%09%09%09%09pSet%20%3D%20%24.%24%28%22msgcomposeWindow%22%29.appendChild%28%24.%24CNS%28%22popupset%22%2C%20%7B%0A%09%09%09%09%09id%3A%20%24._UID%20+%20%22_popupset%22%2C%0A%09%09%09%09%09cb_id%3A%20%24._UID%0A%09%09%09%09%7D%29%29%3B%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%7D%0A%09%09%7D%0A%09%09return%20pSet%3B%0A%09%7D%2C%0A%7D%3B%0A%0Athis.MenuItemHider.gPref%20%3D%20function%28aKey%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getBranch%28self.MenuItemHider.Branch%29%3B%0A%09switch%20%28typeof%20self.MenuItemHider.DefPrefs%5BaKey%5D%29%20%7B%0A%09%09case%20%22boolean%22%3A%0A%09%09%09return%20branch.getBoolPref%28aKey%29%3B%0A%09%09case%20%22number%22%3A%0A%09%09%09return%20branch.getIntPref%28aKey%29%3B%0A%09%09case%20%22string%22%3A%0A%09%09%09return%20branch.getComplexValue%28aKey%2C%20Ci.nsISupportsString%29.data%3B%0A%09%7D%0A%09return%20null%3B%0A%7D%3B%0A%0Athis.MenuItemHider.sPref%20%3D%20function%28aKey%2C%20aVal%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getBranch%28self.MenuItemHider.Branch%29%3B%0A%09switch%20%28typeof%20aVal%29%20%7B%0A%09%09case%20%22boolean%22%3A%0A%09%09%09branch.setBoolPref%28aKey%2C%20aVal%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22number%22%3A%0A%09%09%09branch.setIntPref%28aKey%2C%20aVal%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22string%22%3A%0A%09%09%09let%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%09%09%09str.data%20%3D%20aVal%3B%0A%09%09%09branch.setComplexValue%28%28aKey%29%2C%20Ci.nsISupportsString%2C%20str%29%3B%0A%09%09%09break%3B%0A%09%7D%0A%7D%3B%0A%0Athis.MenuItemHider.initPrefs%20%3D%20function%28%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getDefaultBranch%28self.MenuItemHider.Branch%29%2C%0A%09%09defaults%20%3D%20self.MenuItemHider.DefPrefs%3B%0A%09for%20%28let%20key%20in%20defaults%29%20%7B%0A%09%09if%20%28defaults.hasOwnProperty%28key%29%29%20%7B%0A%09%09%09let%20val%20%3D%20defaults%5Bkey%5D%3B%0A%09%09%09switch%20%28typeof%20val%29%20%7B%0A%09%09%09%09case%20%22boolean%22%3A%0A%09%09%09%09%09branch.setBoolPref%28key%2C%20val%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22number%22%3A%0A%09%09%09%09%09branch.setIntPref%28key%2C%20val%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22string%22%3A%0A%09%09%09%09%09let%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%09%09%09%09%09str.data%20%3D%20val%3B%0A%09%09%09%09%09branch.setComplexValue%28%28key%29%2C%0A%09%09%09%09%09%09Ci.nsISupportsString%2C%20str%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%7D%3B%0A%0Athis.MenuItemHider.Branch%20%3D%20%22CB.MenuItemHider.Id%22%20+%20self.id.slice%2820%29%20+%20%22.%22%3B%0A%0Athis.MenuItemHider.DefPrefs%20%3D%20%7B%0A%09pCustomSelectors%3A%20%22%22%2C%0A%09pHighlightColor%3A%20%22red%22%2C%0A%09pHighlightTextDecoration%3A%20%22line-through%22%2C%0A%09pHiderEnabled%3A%20true%2C%0A%09pListOfIDsToHide%3A%20%22%22%2C%0A%09pShortcutActive%3A%20true%2C%0A%09pShortcutButton%3A%201%2C%0A%09pHotkeyToggle%3A%20%22%22%2C%0A%09pHotkeyToggleEnabled%3A%20false%2C%0A%09pHotkeyShortcut%3A%20%22%22%2C%0A%09pHotkeyShortcutEnabled%3A%20false%2C%0A%09pShortcutRequireCtrl%3A%20false%2C%0A%09pShortcutRequireShift%3A%20false%2C%0A%09pShortcutRequireAlt%3A%20false%2C%0A%7D%3B%0A%0Athis.MenuItemHider.init%28%29%3B%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*CODE*/%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%uD835%uDDDC%uD835%uDDFA%uD835%uDDFD%uD835%uDDFC%uD835%uDDFF%uD835%uDE01%uD835%uDDEE%uD835%uDDFB%uD835%uDE01%20%uD835%uDDFB%uD835%uDDFC%uD835%uDE01%uD835%uDDF2%uD835%uDE00%0A%u26AB%20%uD835%uDDD7%uD835%uDDE2%20%uD835%uDDE1%uD835%uDDE2%uD835%uDDE7%20%uD835%uDDF6%uD835%uDDFB%uD835%uDE00%uD835%uDE01%uD835%uDDEE%uD835%uDDF9%uD835%uDDF9%20%uD835%uDDFA%uD835%uDDFC%uD835%uDDFF%uD835%uDDF2%20%uD835%uDE01%uD835%uDDF5%uD835%uDDEE%uD835%uDDFB%20%uD835%uDDFC%uD835%uDDFB%uD835%uDDF2%20%uD835%uDE03%uD835%uDDF2%uD835%uDDFF%uD835%uDE00%uD835%uDDF6%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDFC%uD835%uDDF3%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDEE%uD835%uDE01%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF2%20%uD835%uDE00%uD835%uDDEE%uD835%uDDFA%uD835%uDDF2%20%uD835%uDE01%uD835%uDDF6%uD835%uDDFA%uD835%uDDF2%u2757%u2757%u2757%0A%u26AB%20%uD835%uDDD7%uD835%uDDE2%20%uD835%uDDE1%uD835%uDDE2%uD835%uDDE7%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDFC%uD835%uDDFB%uD835%uDDF2%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%u2757%u2757%u2757%0A%u26AB%20If%20you%20did%20any%20of%20the%20previous%20actions%2C%20delete%20all%20extra%20buttons%20leaving%20only%20one%20version%20of%20%uD835%uDDE0%uD835%uDDF2%uD835%uDDFB%uD835%uDE02%uD835%uDDF6%uD835%uDE01%uD835%uDDF2%uD835%uDDFA%20%uD835%uDDDB%uD835%uDDF6%uD835%uDDF1%uD835%uDDF2%uD835%uDDFF%20and%20restart%20your%20application.%0A%0A%uD835%uDDEA%uD835%uDDD4%uD835%uDDE5%uD835%uDDE1%uD835%uDDDC%uD835%uDDE1%uD835%uDDDA%u2757%u2757%20%uD835%uDDD5%uD835%uDDD8%20%uD835%uDDD6%uD835%uDDD4%uD835%uDDE5%uD835%uDDD8%uD835%uDDD9%uD835%uDDE8%uD835%uDDDF%20%uD835%uDDDC%uD835%uDDD9%20%uD835%uDDEC%uD835%uDDE2%uD835%uDDE8%20%uD835%uDDD8%uD835%uDDD7%uD835%uDDDC%uD835%uDDE7%20%uD835%uDDE7%uD835%uDDDB%uD835%uDDD8%20%uD835%uDDDB%uD835%uDDD8%uD835%uDDDF%uD835%uDDE3%20%uD835%uDDE7%uD835%uDDD4%uD835%uDDD5%20%uD835%uDDE2%uD835%uDDD9%20%uD835%uDDE7%uD835%uDDDB%uD835%uDDDC%uD835%uDDE6%20%uD835%uDDD5%uD835%uDDE8%uD835%uDDE7%uD835%uDDE7%uD835%uDDE2%uD835%uDDE1%u2757%u2757%u2757%0A%uD835%uDDDC%uD835%uDDE7%20%uD835%uDDD6%uD835%uDDE2%uD835%uDDE8%uD835%uDDDF%uD835%uDDD7%20%uD835%uDDD5%uD835%uDDE5%uD835%uDDD8%uD835%uDDD4%uD835%uDDDE%20%uD835%uDDDC%uD835%uDDE7%uD835%uDDE6%20%uD835%uDDD9%uD835%uDDE8%uD835%uDDE1%uD835%uDDD6%uD835%uDDDC%uD835%uDDE2%uD835%uDDE1%uD835%uDDD4%uD835%uDDDF%uD835%uDDDC%uD835%uDDE7%uD835%uDDEC%u2757%u2757%u2757%0A%0A%5B%2C%5D%0A%0A/**%0A%20*%20%uD835%uDDD9%uD835%uDDE5%uD835%uDDE2%uD835%uDDE0%20%uD835%uDDDB%uD835%uDDD8%uD835%uDDE5%uD835%uDDD8%20%uD835%uDDD7%uD835%uDDE2%uD835%uDDEA%uD835%uDDE1%20%uD835%uDDD7%uD835%uDDE2%20%uD835%uDDE1%uD835%uDDE2%uD835%uDDE7%20%uD835%uDDE7%uD835%uDDE2%uD835%uDDE8%uD835%uDDD6%uD835%uDDDB%20%uD835%uDDD4%uD835%uDDE1%uD835%uDDEC%uD835%uDDE7%uD835%uDDDB%uD835%uDDDC%uD835%uDDE1%uD835%uDDDA%0A%20*/%0A%0A%26lt%3B%21--%25OptionsWindow%25--%26gt%3B%26lt%3B%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22data%3Atext/css%3Bcharset%3Dutf-8%2C%0Aprefwindow%20*%20%7B%0A%09font-family%3A%20%26amp%3Bquot%3BOpen%20Sans%26amp%3Bquot%3B%2C%20Helvetica%2C%20Arial%2C%20sans-serif%20%21important%3B%0A%7D%0Abutton%20%7B%0A%09min-width%3A%200%20%20%21important%3B%0A%7D%0Acaption%20.caption-text%2C%0A.bold_text%20%7B%0A%09font-weight%3A%20bold%20%21important%3B%0A%7D%0A/*%20Force%20groupboxes%20on%20Linux%20to%20have%20the%20same%20appearance%20than%20in%20Windows%20*/%0A/*%20Just%20because%20it%20makes%20effing%20sence%21%21%21%21%20*/%0A/*%20Why%20have%20elements%20grouped%20inside%20a%20groupbox%20and%20not%20visually%20delimited%3F%21%3F%21%3F%21%20*/%0Agroupbox%20%7B%0A%09-moz-appearance%3A%20groupbox%20%21important%3B%0A%09border%3A%202px%20groove%20ThreeDFace%20%21important%3B%0A%09border-radius%3A%203px%20%21important%3B%0A%09margin%3A%203px%20%21important%3B%0A%09padding%3A%203px%203px%206px%20%21important%3B%0A%7D%0A.groupbox-body%20%7B%0A%09padding%3A%20inherit%20%21important%3B%0A%7D%0Acaption%20%7B%0A%09margin%3A%200%206px%20%21important%3B%0A%09background-color%3A%20-moz-Dialog%20%21important%3B%0A%7D%0Atabpanels%20caption%20%7B%0A%09-moz-appearance%3A%20tabpanel%20%21important%3B%0A%7D%0A/*%20%21important%20is%20needed%20to%20override%20label%20in%20global.css%20*/%0A.caption-text%20%7B%0A%09margin%3A%200%202px%20%21important%3B%0A%7D%0Adialogheader%20%7B%0A%09font-size%3A%20x-small%20%21important%3B%0A%09font-weight%3A%20600%20%21important%3B%0A%09margin%3A%200%200%207px%200%20%21important%3B%0A%09padding%3A%202px%200%202px%205px%20%21important%3B%0A%09border%3A%20none%20%21important%3B%0A%7D%0Atab%5Bselected%3D%26amp%3Bquot%3Btrue%26amp%3Bquot%3B%5D%20%7B%0A%09font-weight%3A%20bold%20%21important%3B%0A%7D%0A%22%20type%3D%22text/css%22%20%3F%26gt%3B%0A%26lt%3Bprefwindow%20id%3D%22%25U_I_D%25_settings_window%22%0A%09%09%09%20xmlns%3Ahtml%3D%22http%3A//www.w3.org/1999/xhtml%22%0A%09%09%09%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%0A%09%09%09%20onload%3D%22%24.onLoad%28%29%3B%22%0A%09%09%09%20onunload%3D%22%24.onUnload%28%29%3B%22%0A%09%09%09%20buttons%3D%22accept%2Ccancel%2Cextra1%22%0A%09%09%09%20buttonlabelextra1%3D%22Apply%22%0A%09%09%09%20buttonlabeldisclosure%3D%22%22%0A%09%09%09%20ondialogextra1%3D%22%24.onApply%28%29%3B%22%0A%09%09%09%20buttonlabelextra2%3D%22Settings%22%0A%09%09%09%20ondialogdisclosure%3D%22close%28%29%3B%24.openHelpPage%28event%29%3B%22%0A%09%09%09%20title%3D%22Menuitem%20Hider%20settings%22%26gt%3B%0A%09%09%09%09%26lt%3Bscript%26gt%3B%0A%09%09%26lt%3B%21%5BCDATA%5B%0Avar%20Cc%20%3D%20Components.classes%3B%0Avar%20Ci%20%3D%20Components.interfaces%3B%0Avar%20Cu%20%3D%20Components.utils%3B%0ACu.import%28%22resource%3A//gre/modules/Services.jsm%22%29%3B%0Avar%20storage%20%3D%20window._storage%3B%0Avar%20cb_btn%20%3D%20storage.button%3B%0A%0Afunction%20%24id%28aId%29%20%7B%0A%09return%20document.getElementById%28aId%29%3B%0A%7D%0A%0Avar%20%24%20%3D%20%7B%0A%09_initialized%3A%20false%2C%0A%09onLoad%3A%20function%28%29%20%7B%0A%09%09%24._initialized%20%3D%20true%3B%0A%09%09var%20docElt%20%3D%20document.documentElement%3B%0A%09%09%24.instantApply%20%3D%20docElt.instantApply%3B%0A%09%09window.addEventListener%28%22change%22%2C%20%24%2C%20false%29%3B%0A%09%09docElt.getButton%28%22extra1%22%29.setAttribute%28%22icon%22%2C%20%22apply%22%29%3B%0A%09%09docElt.setAttribute%28%22cancelbuttonlabel%22%2C%20docElt.mStrBundle.GetStringFromName%28%22button-cancel%22%29%29%3B%0A%09%09%24.setHotKey%28%29%3B%0A%09%09%24.setButtons%28true%29%3B%0A%09%09%24.dealWithCustomSelectors%28false%29%3B%0A%09%7D%2C%0A%09handleEvent%3A%20function%28aE%29%20%7B%0A%09%09switch%20%28aE.type%29%20%7B%0A%09%09%09case%20%22change%22%3A%0A%09%09%09%09if%20%28aE.target.localName%20%21%3D%20%22preference%22%29%0A%09%09%09%09%09return%3B%0A%09%09%09%09if%20%28%21%24.instantApply%29%0A%09%09%09%09%09%24.updateApplyButton%28aE%29%3B%0A%09%09%09%09break%3B%0A%09%09%7D%0A%09%7D%2C%0A%09changes%3A%20%5B%5D%2C%0A%09updateApplyButton%3A%20function%28aE%29%20%7B%0A%09%09var%20item%20%3D%20aE.target%3B%0A%09%09if%20%28item.localName%20%21%3D%20%22preference%22%29%0A%09%09%09return%3B%0A%09%09var%20valueChanged%20%3D%20item.value%20%21%3D%20item.valueFromPreferences%3B%0A%09%09var%20index%20%3D%20%24.changes.indexOf%28item%29%3B%0A%09%09if%20%28valueChanged%20%26amp%3B%26amp%3B%20index%20%3D%3D%20-1%29%0A%09%09%09%24.changes.push%28item%29%3B%0A%09%09else%20if%20%28%21valueChanged%20%26amp%3B%26amp%3B%20index%20%26gt%3B%20-1%29%0A%09%09%09%24.changes.splice%28index%2C%201%29%3B%0A%09%09%24.setButtons%28%21%24.changes.length%29%3B%0A%09%7D%2C%0A%09onApply%3A%20function%28%29%20%7B%0A%09%09%24.dealWithCustomSelectors%28true%29%3B%0A%09%09%24.setButtons%28true%29%3B%0A%09%09while%20%28%24.changes.length%29%20%7B%0A%09%09%09var%20preference%20%3D%20%24.changes.shift%28%29%3B%0A%09%09%09preference.batching%20%3D%20true%3B%0A%09%09%09preference.valueFromPreferences%20%3D%20preference.value%3B%0A%09%09%09preference.batching%20%3D%20false%3B%0A%09%09%7D%0A%09%09cb_btn.MenuItemHider.selfDestroy%28%29%3B%0A%09%7D%2C%0A%09setButtons%3A%20function%28aDisable%29%20%7B%0A%09%09var%20docElt%20%3D%20document.documentElement%3B%0A%09%09//%20when%20in%20instantApply%20mode%20apply%20and%20accept%20buttons%20are%20hidden%20except%20when%20user%0A%09%09//%20change%20min/max%20width%20value%0A%09%09var%20applyButton%20%3D%20docElt.getButton%28%22extra1%22%29%3B%0A%09%09applyButton.disabled%20%3D%20aDisable%3B%0A%09%09applyButton.hidden%20%3D%20%24.instantApply%20%26amp%3B%26amp%3B%20aDisable%3B%0A%09%09docElt.getButton%28%22accept%22%29.hidden%20%3D%20aDisable%3B%0A%0A%09%09var%20action%20%3D%20aDisable%20%3F%20%22close%22%20%3A%20%22cancel%22%3B%0A%09%09var%20cancelButton%20%3D%20docElt.getButton%28%22cancel%22%29%3B%0A%09%09cancelButton.label%20%3D%20docElt.getAttribute%28action%20+%20%22buttonlabel%22%29%3B%0A%09%09cancelButton.setAttribute%28%22icon%22%2C%20action%29%3B%0A%09%7D%2C%0A%09setDisabled%3A%20function%28aItemOrId%2C%20aVal%29%20%7B%0A%09%09var%20item%20%3D%20typeof%28aItemOrId%29%20%3D%3D%20%22string%22%20%3F%20%24id%28aItemOrId%29%20%3A%20aItemOrId%3B%0A%09%09if%20%28%21item%29%0A%09%09%09return%3B%0A%09%09if%20%28item.hasAttribute%28%22inverseDependency%22%29%29%0A%09%09%09aVal%20%3D%20%21aVal%3B%0A%09%09//%20remove%20disabled%20when%20the%20value%20is%20false%0A%09%09%24.setItem%28item%2C%20%22disabled%22%2C%20aVal%20%7C%7C%20null%29%3B%0A%09%7D%2C%0A%09setItem%3A%20function%28aItemOrId%2C%20aAttr%2C%20aVal%29%20%7B%0A%09%09var%20el%20%3D%20typeof%28aItemOrId%29%20%3D%3D%20%22string%22%20%3F%20document.getElementById%28aItemOrId%29%20%3A%20aItemOrId%3B%0A%09%09if%20%28el%29%20%7B%0A%09%09%09if%20%28aVal%20%3D%3D%3D%20null%20%7C%7C%20aVal%20%3D%3D%3D%20undefined%29%20%7B%0A%09%09%09%09el.removeAttribute%28aAttr%29%3B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09if%20%28typeof%28aVal%29%20%3D%3D%20%22boolean%22%29%0A%09%09%09%09aVal%20%3D%20aVal%20%3F%20%22true%22%20%3A%20%22false%22%3B%0A%0A%09%09%09if%20%28%21el.hasAttribute%28aAttr%29%20%7C%7C%20el.getAttribute%28aAttr%29%20%21%3D%20aVal%29%0A%09%09%09%09el.setAttribute%28aAttr%2C%20aVal%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%09onUnload%3A%20function%28%29%20%7B%0A%09%09%24.dealWithCustomSelectors%28true%29%3B%0A%09%09window.removeEventListener%28%22change%22%2C%20%24%2C%20false%29%3B%0A%09%09cb_btn.MenuItemHider.selfDestroy%28%29%3B%0A%09%7D%2C%0A%09setHotKey%3A%20function%28aE%29%20%7B%20//%20Taken%20from%20Custom%20Buttons%20add-on.%20I%20%u2665%20CB%21%21%21%0A%09%09let%20hki%20%3D%20document.getElementsByClassName%28%22hotkey_capturer%22%29%3B%0A%09%09let%20onInput%20%3D%20function%28aE%29%20%7B%0A%09%09%09this.value%20%3D%20%22%22%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%3B%0A%09%09let%20onKeypress%20%3D%20function%28aE%29%20%7B%0A%09%09%09var%20that%20%3D%20this%3B%0A%09%09%09var%20cbd%20%3D%20Cc%5B%22@xsms.nm.ru/custombuttons/cbkeymap%3B1%22%5D.getService%28Ci.cbIKeyMapService%29%3B%0A%09%09%09var%20key%20%3D%20cbd.getKey%28aE%29%3B%0A%09%09%09if%20%28key%20%3D%3D%20%22ESCAPE%22%29%20%7B%0A%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%09if%20%28this.value%20%21%3D%3D%20%22%22%29%20%7B%0A%09%09%09%09%09this.bExtendedMode%20%3D%20false%3B%0A%09%09%09%09%09this.value%20%3D%20%22%22%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20%28%21this.bExtendedMode%29%20%7B%0A%09%09%09%09%09this.bExtendedMode%20%3D%20true%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09if%20%28key%20%3D%3D%20%22TAB%22%29%20%7B%0A%09%09%09%09if%20%28%21this.bExtendedMode%29%0A%09%09%09%09%09return%3B%0A%09%09%09%09this.bExtendedMode%20%3D%20false%3B%0A%09%09%09%09if%20%28this.value%20%21%3D%3D%20%22%22%29%0A%09%09%09%09%09return%3B%0A%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%7D%0A%09%09%09this.bExtendedMode%20%3D%20false%3B%0A%09%09%09var%20prefix%20%3D%20cbd.getKeyPrefix%28aE%29%3B%0A%09%09%09this.value%20%3D%20%22%22%3B%0A%09%09%09let%20tBH%20%3D%20%24id%28this.getAttribute%28%22hotkey_box%22%29%20+%20%22_hotkey_box%22%29%3B%0A%09%09%09tBH.value%20%3D%20prefix%20+%20key%3B%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%09//%20The%20next%20crap%20is%20for%20the%20stupid%20window%20to%20register%20the%20preference%20change.%20%AC%AC%0A%09%09%09tBH.focus%28%29%3B%0A%09%09%09var%20wU%20%3D%20window.QueryInterface%28Ci.nsIInterfaceRequestor%29%0A%09%09%09%09.getInterface%28Ci.nsIDOMWindowUtils%29%3B%0A%09%09%09wU.sendKeyEvent%28%22keypress%22%2C%2035%2C%200%2C%20null%2C%20null%29%3B%0A%09%09%09wU.sendKeyEvent%28%22keyup%22%2C%2035%2C%200%2C%20null%2C%20null%29%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09//%20Send%20Spacebar%20key.%20%AC%AC%0A%09%09%09%09//%20keydown%20does%20not%20always%20work.%20%AC%AC%0A%09%09%09%09wU.sendKeyEvent%28%22keypress%22%2C%200%2C%2032%2C%20null%2C%20null%29%3B%0A%09%09%09%09wU.sendKeyEvent%28%22keyup%22%2C%200%2C%2032%2C%20null%2C%20null%29%3B%0A%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09that.focus%28%29%3B%0A%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%7D%3B%0A%09%09Array.prototype.slice.call%28hki%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09aEl.addEventListener%28%22input%22%2C%20onInput%2C%20false%29%3B%0A%09%09%09aEl.addEventListener%28%22keypress%22%2C%20onKeypress%2C%20false%29%3B%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%09dealWithCustomSelectors%3A%20function%28aSave%29%20%7B%0A%09%09%09if%20%28aSave%29%0A%09%09%09%09cb_btn.MenuItemHider.sPref%28%22pCustomSelectors%22%2C%20encodeURIComponent%28%24id%28%22textbox_pCustomSelectors%22%29.value%29%29%3B%0A%09%09%09else%0A%09%09%09%09%24id%28%22textbox_pCustomSelectors%22%29.setAttribute%28%22value%22%2C%20decodeURIComponent%28cb_btn.MenuItemHider.gPref%28%22pCustomSelectors%22%29%29%29%3B%0A%09%7D%2C%0A%09%7D%3B%0A%5D%5D%26gt%3B%26lt%3B/script%26gt%3B%0A%09%26lt%3Bprefpane%20id%3D%22%25U_I_D%25_PrefPane%22%20flex%3D%221%22%26gt%3B%0A%09%09%26lt%3Bpreferences%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pCustomSelectors%22%20name%3D%22%25B_R_A_N_C_H%25pCustomSelectors%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pHighlightColor%22%20name%3D%22%25B_R_A_N_C_H%25pHighlightColor%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pHighlightTextDecoration%22%20name%3D%22%25B_R_A_N_C_H%25pHighlightTextDecoration%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pHotkeyToggle%22%20name%3D%22%25B_R_A_N_C_H%25pHotkeyToggle%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pHotkeyToggleEnabled%22%20name%3D%22%25B_R_A_N_C_H%25pHotkeyToggleEnabled%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pHotkeyShortcut%22%20name%3D%22%25B_R_A_N_C_H%25pHotkeyShortcut%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pHotkeyShortcutEnabled%22%20name%3D%22%25B_R_A_N_C_H%25pHotkeyShortcutEnabled%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pShortcutButton%22%20name%3D%22%25B_R_A_N_C_H%25pShortcutButton%22%20type%3D%22int%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pShortcutRequireCtrl%22%20name%3D%22%25B_R_A_N_C_H%25pShortcutRequireCtrl%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pShortcutRequireShift%22%20name%3D%22%25B_R_A_N_C_H%25pShortcutRequireShift%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22pShortcutRequireAlt%22%20name%3D%22%25B_R_A_N_C_H%25pShortcutRequireAlt%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%26lt%3B/preferences%26gt%3B%0A%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%26lt%3Brow%20flex%3D%221%22%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%26lt%3Blabel%20value%3D%22Highlight%20color%22/%26gt%3B%0A%09%09%09%09%09%26lt%3Btextbox%20tooltip%3D%22tt_1%22%20flex%3D%221%22%20preference%3D%22pHighlightColor%22/%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3Brow%20flex%3D%221%22%20align%3D%22center%22%26gt%3B%0A%09%09%09%09%09%26lt%3Blabel%20value%3D%22Highlight%20text%20decoration%22/%26gt%3B%0A%09%09%09%09%09%26lt%3Btextbox%20tooltip%3D%22tt_2%22%20flex%3D%221%22%20preference%3D%22pHighlightTextDecoration%22/%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%26lt%3B/grid%26gt%3B%0A%09%09%26lt%3Bgroupbox%20flex%3D%221%22%20tooltip%3D%22%22%26gt%3B%0A%09%09%09%26lt%3Bcaption%20label%3D%22Shortcut%22/%26gt%3B%0A%09%09%09%26lt%3Bradiogroup%20orient%3D%22horizontal%22%20preference%3D%22pShortcutButton%22%26gt%3B%0A%09%09%09%09%26lt%3Bradio%20label%3D%22Left%20click%22%20value%3D%220%22%20/%26gt%3B%0A%09%09%09%09%26lt%3Bradio%20label%3D%22Middle%20click%22%20value%3D%221%22%20/%26gt%3B%0A%09%09%09%09%26lt%3Bradio%20label%3D%22Right%20click%22%20value%3D%222%22%20/%26gt%3B%0A%09%09%09%26lt%3B/radiogroup%26gt%3B%0A%09%09%09%26lt%3Bhbox%20flex%3D%221%22%26gt%3B%0A%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Require%20%25A_C_C_E_L%25%20key%22%20preference%3D%22pShortcutRequireCtrl%22/%26gt%3B%0A%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Require%20Shift%20key%22%20preference%3D%22pShortcutRequireShift%22/%26gt%3B%0A%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Require%20Alt%20key%22%20preference%3D%22pShortcutRequireAlt%22/%26gt%3B%0A%09%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%26lt%3Bgroupbox%20flex%3D%221%22%26gt%3B%0A%09%09%09%26lt%3Bcaption%20label%3D%22Hotkeys%22/%26gt%3B%0A%09%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%09%26lt%3Bcolumn%20/%26gt%3B%0A%09%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%26lt%3Brow%20tooltip%3D%22tt_5%22%20%26gt%3B%0A%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Toggle%20Menu%20Items%20Hider%22%20preference%3D%22pHotkeyToggleEnabled%22/%26gt%3B%0A%09%09%09%09%09%26lt%3Bhbox%26gt%3B%0A%09%09%09%09%09%09%26lt%3Btextbox%20id%3D%22toggle_enabled_hotkey_box%22%20flex%3D%221%22%20preference%3D%22pHotkeyToggle%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Btextbox%20tooltip%3D%22tt_7%22%20hotkey_box%3D%22toggle_enabled%22%20maxwidth%3D%2220%22%20flex%3D%220%22%20class%3D%22hotkey_capturer%22%20/%26gt%3B%0A%09%09%09%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3Brow%20tooltip%3D%22tt_6%22%20%26gt%3B%0A%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Toggle%20shortcut%22%20preference%3D%22pHotkeyShortcutEnabled%22/%26gt%3B%0A%09%09%09%09%09%26lt%3Bhbox%26gt%3B%0A%09%09%09%09%09%09%26lt%3Btextbox%20id%3D%22toggle_shortcut_hotkey_box%22%20flex%3D%221%22%20preference%3D%22pHotkeyShortcut%22/%26gt%3B%0A%09%09%09%09%09%09%26lt%3Btextbox%20tooltip%3D%22tt_7%22%20hotkey_box%3D%22toggle_shortcut%22%20maxwidth%3D%2220%22%20flex%3D%220%22%20class%3D%22hotkey_capturer%22%20/%26gt%3B%0A%09%09%09%09%09%26lt%3B/hbox%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%09%26lt%3B/grid%26gt%3B%0A%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%26lt%3Bgroupbox%20flex%3D%221000%22%26gt%3B%0A%09%09%09%26lt%3Bcaption%20label%3D%22Custom%20selectors%22/%26gt%3B%0A%09%09%09%26lt%3Btextbox%20tooltip%3D%22tt_3%22%20flex%3D%221000%22%20multiline%3D%22true%22%20id%3D%22textbox_pCustomSelectors%22/%26gt%3B%0A%09%09%26lt%3B/groupbox%26gt%3B%0A%09%09%26lt%3Bpopupset%26gt%3B%0A%09%09%09%26lt%3Btooltip%20id%3D%22tt_1%22%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3BColor%20to%20highlight%20hidden%20items.%20Any%20valid%20CSS%20%26amp%3Bquot%3Bcolor%26amp%3Bquot%3B.%26lt%3B/description%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Ab%26gt%3BDefault%3A%26lt%3B/html%3Ab%26gt%3B%20%26amp%3Bquot%3Bred%26amp%3Bquot%3B.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%09%26lt%3Btooltip%20id%3D%22tt_2%22%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3BText%20decoration%20to%20highlight%20hidden%20items.%20Any%20valid%20CSS%20%26amp%3Bquot%3Btext-decoration%26amp%3Bquot%3B.%26lt%3B/description%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Ab%26gt%3BDefault%3A%26lt%3B/html%3Ab%26gt%3B%20%26amp%3Bquot%3Bline-through%26amp%3Bquot%3B.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%09%26lt%3Btooltip%20id%3D%22tt_3%22%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3BComma%20separated%20custom%20CSS%20selectors.%20Items%20without%20IDs%20cannot%20be%20hidden%20automatically%20by%20clicking%20on%20them.%20That%27s%20why%20I%20created%20this%20option%20so%20we%20can%20specify%20some%20custom%20selectors%20to%20accurately%20determine%20%28more%20or%20less%29%20the%20exact%20item%20we%20want%20to%20hide.%26lt%3B/description%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BNote%3A%26lt%3B/html%3Astrong%26gt%3B%20It%20doesn%27t%20matter%20if%20there%20are%20line%20breaks.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%09%26lt%3Btooltip%20id%3D%22tt_4%22%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3BClick%20combination%20to%20hide/unhide%20elements.%26lt%3B/description%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BNote%201%3A%26lt%3B/html%3Astrong%26gt%3B%20Middle%20click%20doesn%27t%20use%20modifier%20keys%2C%20so%20they%20will%20be%20ignored.%26lt%3B/description%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Astrong%26gt%3BNote%202%3A%26lt%3B/html%3Astrong%26gt%3B%20Left%20and%20Right%20clicks%20require%20at%20least%20to%20have%20one%20modifuer%20key%20enabled.%20If%20none%20is%20specified%2C%20%25A_C_C_E_L%25%20will%20be%20enforced.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%09%26lt%3Btooltip%20id%3D%22tt_5%22%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3BEnable/Disable%20the%20use%20of%20a%20hotkey%20to%20toggle%20Menu%20Items%20Hider.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%09%26lt%3Btooltip%20id%3D%22tt_6%22%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3BEnable/Disable%20the%20use%20of%20a%20hotkey%20to%20toggle%20the%20use%20of%20Menu%20Items%20Hider%27s%20shortcut.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%09%26lt%3Btooltip%20id%3D%22tt_7%22%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3BCapture%20hotkey.%26lt%3B/description%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3B%26lt%3Bhtml%3Ab%26gt%3BInstructions%26lt%3B/html%3Ab%26gt%3B%26lt%3B/description%26gt%3B%0A%09%09%09%09%26lt%3Bdescription%26gt%3BJust%20place%20the%20mouse%20cursor%20inside%20this%20textbox%20and%20press%20the%20desired%20keyboard%20key%20combination.%20A%20valid%20hotkey%20will%20be%20created/generated%20inside%20the%20textbox%20to%20the%20left.%26lt%3B/description%26gt%3B%0A%09%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3B/popupset%26gt%3B%0A%09%26lt%3B/prefpane%26gt%3B%0A%26lt%3B/prefwindow%26gt%3B%26lt%3B%21--%25OptionsWindow%25--%26gt%3B%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" rel="nofollow" title="Install Menuitem Hider">
				<![CDATA[Install this button]]>
			</html:a>
		</html:div>
		<html:a id="about" href="https://addons.mozilla.org/addon/custom-buttons/">
			<![CDATA[About CustomButtons]]>
		</html:a>
		<html:div id="credits">
			<html:a href="http://custombuttons.sourceforge.net/forum/viewtopic.php?t=3599">
				<![CDATA[XML created with]]>
				<html:br/>
				<![CDATA[CB Context Menu Extended]]>
			</html:a>
		</html:div>
	</html:div>
</html:body>
  <name>Menuitem Hider</name>
  <image><![CDATA[data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACMklEQVQ4ja2TT2iSYRzHHzpV993qUCCsDt29hFcPHky8dJVRTAK12EElDQ+BwUZRsByDvQ5C0fHmGHu1Md9X3leR1Pd9/D/ZskNvMyYhFXu3IfjtMHxLIjaoH3z48fs+D5/L73kI+R+VTCYNiUQicF7i8fjMhCAWiz0ZjUY4L41GA4SQC7qAYZinJycn2NvbQzabRa/XA8/zqNfreh8OhxBFEe12G1RRYDKZLuqC5eXl8OHhISiloJRC0zSwLAtVVVGtVvVse3sblFKUy2VYLJbLhBBCbix+MNxZlKR5aR/z0j4W8r2/Mr7jfVvDrVetWUIIIdPP24GljxoiXQ3r+8d4PxhO9DHj80hXw+uuBke6B0IIIddDSsCd/wqH0MeL+jcwnR9wCH28+6QhWBqAV4/0jFePEGl9h0Pow/qmeyq44soH7q5/hpVVMccfYI4/gJVVsUQH+vx79mDrC6ysCtPL5qlg6l7OYPIkJf+qAu9KGT6mAl9Uhj8qw7+qnBKV4YvK8DIVeFfKuL+whaszmVl9C6FQKLy7u4tCoYDNzU3IsgyO4yBJEjiOgyiK6HQ6yGQyKJVK2NjY+LUFQggJBoPhnZ0d8DwPQRDQarWwtraGSqWCXC4HQRDQbDaRTqdRLBaRSqUmBY/9/nCtVoOiKKCUolqt/gGlFIqiQJZlJBOJSYHT6bz90ONJuV0u/kzc7q1HHs+ziZdoNBovWSyWa3a7/eZZ2Gy2abPZPDXxF/6lfgIqYzmea1VBiAAAAABJRU5ErkJggg==]]></image>
  <mode>0</mode>
  <initcode><![CDATA[var $ = this.MenuItemHider = {
	init: function() {
		if (!("Services" in window))
			Cu.import("resource://gre/modules/Services.jsm");

		$.initPrefs();

		if (!($._UID in window)) {
			window[$._UID] = {
				StyleSheet: false,
				CustomizableUI: false,
			};
		}

		self.setAttribute("popup", $._UID + "_options_menu");

		self.tooltipText = self.name + " - ID#: " + self.id.slice(20) +
			"\n\n𝗟𝗲𝗳𝘁 𝗰𝗹𝗶𝗰𝗸: Open options menu\t\n\n" +
			"𝗦𝗵𝗼𝗿𝘁𝗰𝘂𝘁: " + $.getShortcut() + "\t\n\n" +
			"𝗥𝗲𝗮𝗱 𝘁𝗵𝗶𝘀 𝗯𝘂𝘁𝘁𝗼𝗻 𝗵𝗲𝗹𝗽 𝗳𝗼𝗿 𝘃𝗲𝗿𝘆 𝗶𝗺𝗽𝗼𝗿𝘁𝗮𝗻𝘁 𝘂𝘀𝗮𝗴𝗲 𝗻𝗼𝘁𝗲𝘀.\n" +
			"𝗥𝗶𝗴𝗵𝘁 𝗰𝗹𝗶𝗰𝗸 𝗼𝗻 𝗯𝘂𝘁𝘁𝗼𝗻, \"𝗕𝘂𝘁𝘁𝗼𝗻 𝗛𝗲𝗹𝗽\" 𝗶𝘁𝗲𝗺.";

		$.handleCSS();
		$.createElements();
		$.handlePrefObserver();
		$.dealWithModsRequirements();
		$.createHotkeys();

		if ($.gPref("pShortcutActive")) {
			$.winEvts.forEach(function(aLi) {
				window.addEventListener(aLi, $.onClick, false);
			});
		} else {
			$.winEvts.forEach(function(aLi) {
				window.removeEventListener(aLi, $.onClick, false);
			});
		}

		if ("CustomizableUI" in window) {
			if (!window[$._UID]["CustomizableUI"]) {
				window[$._UID]["CustomizableUI"] = true;
				CustomizableUI.addListener({
					onCustomizeEnd: function(aWindow) {
						var thisBtn = aWindow.document.getElementById(self.id);
						setTimeout(function() {
							aWindow[$._UID]["CustomizableUI"] && thisBtn.MenuItemHider.selfDestroy();
						}, Math.floor(Math.random() * (1 + 2000 - 200)) + 200);
					}
				});
			}
		}

		addDestructor(function(aReason) {
			if (aReason === "delete" || aReason === "update") {
				$.handlePrefObserver(true);
				$.winEvts.forEach(function(aLi) {
					window.removeEventListener(aLi, $.onClick, false);
				});
				$.handleCSS();
				let selfEls = document.getElementsByAttribute("cb_id", $._UID);
				Array.prototype.slice.call(selfEls).forEach(function(aEl) { // Delete all elements created by this button.
					aEl && aEl.parentNode.removeChild(aEl);
				});

			}
			if (aReason === "delete") {
				(Services.prefs.getBranch($.Branch)).deleteBranch(""); // Clear prefs.
				Services.prefs.savePrefFile(null);
				delete window[$._UID];
			}
		});
	},

	getShortcut: function() {
		let mods = "";
		let btn;
		if ($.gPref("pShortcutButton") !== 1) {
			if ($.gPref("pShortcutRequireCtrl"))
				mods += $.accel() + " + ";
			if ($.gPref("pShortcutRequireShift"))
				mods += "Shift + ";
			if ($.gPref("pShortcutRequireAlt"))
				mods += "Alt + ";
		}
		switch ($.gPref("pShortcutButton")) {
			case 0:
				btn = "Left";
				break;
			case 1:
				btn = "Middle";
				break;
			case 2:
				btn = "Right";
				break;
		}

		return mods + btn + " click";
	},

	onClick: function(aE) {
		if (aE.button !== $.gPref("pShortcutButton"))
			return true;
		if (aE.button !== 1 && !$.requiredMods(aE))
			return true;
		let target = aE.target;
		let nn = target.nodeName;
		if (nn !== "menuitem" && nn !== "menu" && nn !== "menuseparator")
			return;
		if (aE.type !== "click") {
			aE.preventDefault();
			aE.stopPropagation();
			return false;
		}
		let id = target.id;
		if (!id) {
			id = target.parentNode.id;
			if (id)
				nn = "#" + id + " > " + nn;
			if (target.attributes.length > 1 ||
				(target.attributes.length === 1 && target.attributes[0].name !== "class")) {
				for (let i = target.attributes.length - 1; i >= 0; i--) {
					if (!/^_moz/.test(target.attributes[i].name))
						nn += "[" + target.attributes[i].name + "=\"" + target.attributes[i].value + "\"]";
				}
				setTimeout(function() {
					gClipboard.write(nn);
					Services.prompt.alert(null, self.name,
						"The element chosen to be hidden doesn't have an ID.\n" +
						"A 'probably unique selector' has been generated and copied to the clipboard.\n\n" +
						"Note: This selector can be used with the 'Custom Selectors' option " +
						"in Menu Items Hider's options window.\n\n" +
						"If the element has already been hidden by Menu Item Hider, you probably " +
						" used a custom selector. In which case, you will have to edit the 'Custom selectors'" +
						" field in Menu Item Hider's options window.");
				}, 100);
			}
			return;
		}
		$.handleElement("#" + id);
		aE.stopPropagation();
	},

	dealWithModsRequirements: function() {
		if ($.gPref("pShortcutButton") !== 1 &&
			!$.gPref("pShortcutRequireCtrl") &&
			!$.gPref("pShortcutRequireShift") &&
			!$.gPref("pShortcutRequireAlt"))
			$.sPref("pShortcutRequireCtrl", true);
	},

	toggleActive: function() {
		$.sPref("pHiderEnabled", !$.gPref("pHiderEnabled"));
	},

	toggleShortcut: function() {
		$.sPref("pShortcutActive", !$.gPref("pShortcutActive"));
	},

	createElements: function() {
		var popSet = $.popSet;
		var m = $.$($._UID + "_options_menu");
		if (popSet && !m) {
			popSet.appendChild($.$CNS("menupopup", {
				id: $._UID + "_options_menu",
				cb_id: $._UID,
				position: "after_start",
				onclick: "event.stopPropagation();",
				oncommand: "event.stopPropagation();",
				onpopupshowing: $.that + "populateOptionsMenu(this);event.stopPropagation();",
			}));
		}
		let keyset = $.$($._UID + "_keyset");
		if (popSet && !keyset) { // Using "my own" keyset seems to minimize hotkeys erratic behaivor.
			popSet.parentNode.appendChild($.$CNS("keyset", {
				id: $._UID + "_keyset",
				cb_id: $._UID,
			}));
		}
		// $.handleHotkeys();
	},

	populateOptionsMenu: function(aN) {
		aN.textContent = "";

		aN.appendChild($.$CNS("menuitem", {
			label: "Menuitem Hider enabled",
			type: "checkbox",
			closemenu: "none",
			key: $.gPref("pHotkeyToggleEnabled") ? "key" + $._UID + "_toogle" : "",
			tooltiptext: "If disabled/unchecked, it will display all hidden items.",
			checked: $.gPref("pHiderEnabled"),
			oncommand: $.that + "sPref('pHiderEnabled', !" + $.that +
				"gPref('pHiderEnabled'));event.stopPropagation();",
		}));
		aN.appendChild($.$CNS("menuitem", {
			label: "Shortcut enabled",
			type: "checkbox",
			closemenu: "none",
			key: $.gPref("pHotkeyShortcutEnabled") ? "key" + $._UID + "_shortcut" : "",
			tooltiptext: "If enabled/checked, it will enable the shortcut that " +
				"allows you to hide 'menu', 'menuitem' and 'menuseparator' elements.\n\n" +
				"𝗞𝗲𝗲𝗽 𝘁𝗵𝗶𝘀 𝗼𝗽𝘁𝗶𝗼𝗻 𝗱𝗶𝘀𝗮𝗯𝗹𝗲𝗱 𝗱𝘂𝗿𝗶𝗻𝗴 𝗻𝗼𝗿𝗺𝗮𝗹 𝘂𝘀𝗲. 𝗜𝘁 𝗺𝗮𝘆 𝗶𝗻𝘁𝗲𝗿𝗳𝗲𝗿𝗲 𝘄𝗶𝘁𝗵 𝘀𝗼𝗺𝗲 " +
				"𝗲𝗹𝗲𝗺𝗲𝗻𝘁𝘀 𝗮𝗰𝘁𝗶𝘃𝗮𝘁𝗶𝗼𝗻.",
			checked: $.gPref("pShortcutActive"),
			oncommand: $.that + "sPref('pShortcutActive', !" + $.that +
				"gPref('pShortcutActive'));event.stopPropagation();",
		}));

		aN.appendChild($.$CNS("menuseparator"));
		aN.appendChild($.$CNS("menuitem", {
			label: "More options",
			tooltiptext: "Open Menuitem Hider options page.\n\nNote: Preferences prefixed with " +
				"\"z\" (the letter ZED) can already be changed from this popup and some are used internally. " +
				"So there is no need to change them manually.",
			oncommand: $.that + "openOptions();event.stopPropagation();",
		}));
	},

	getCombo: function(aHKStr) {
		var prefix = "";
		if (aHKStr.search("Alt+") !== -1)
			prefix += "alt-";
		if (aHKStr.search("Ctrl+") !== -1)
			prefix += "control-";
		if (aHKStr.search("Shift+") !== -1)
			prefix += "shift-";
		if (aHKStr.search("Meta+") !== -1)
			prefix += "meta-";
		return prefix + aHKStr.substring(aHKStr.lastIndexOf("+") + 1, aHKStr.length);
	},

	createHotkeys: function() {
		if (!$.gPref("pHotkeyToggleEnabled") && !$.gPref("pHotkeyShortcutEnabled"))
			return true;

		let hotKeys = [{
			id: "key" + $._UID + "_toogle",
			combo: $.gPref("pHotkeyToggle"),
			enabled: $.gPref("pHotkeyToggleEnabled"),
			cmd: $.that + "sPref('pHiderEnabled', !" + $.that +
				"gPref('pHiderEnabled'));event.stopPropagation();",
		}, {
			id: "key" + $._UID + "_shortcut",
			combo: $.gPref("pHotkeyShortcut"),
			enabled: $.gPref("pHotkeyShortcutEnabled"),
			cmd: $.that + "sPref('pShortcutActive', !" + $.that +
				"gPref('pShortcutActive'));event.stopPropagation();",
		}];
		var keyset = $.$($._UID + "_keyset");
		var popSet = $.popSet;
		try {
			if (popSet && !keyset) { // Using "my own" keyset seems to minimize hotkeys erratic behaivor.
				keyset = popSet.parentNode.appendChild($.$CNS("keyset", {
					id: $._UID + "_keyset",
					cb_id: $._UID,
				}));
			}
		} finally {
			for (let i = hotKeys.length - 1; i >= 0; i--) {
				let hk = hotKeys[i];
				if (!hk["enabled"])
					continue;
				let combo = $.getCombo(hk["combo"].trim());
				let key = combo.substring(combo.lastIndexOf("-") + 1, combo.length);
				let modifiers = combo.slice(0, -(key.length + 1)).split("-").join(",");
				if (key && modifiers && keyset) {
					let attr = key.length === 1 ? "key" : "keycode";
					let hotKey = keyset.appendChild($.$CNS("key", {
						id: hk["id"],
						modifiers: modifiers,
						oncommand: hk["cmd"],
					}));
					hotKey.setAttribute(attr, key.length === 1 ? key : "VK_" + key); // Set "keycode" or "key" attribute.
				}
			}
		}
	},

	openOptions: function() {
		var em = Services.ww.getWindowEnumerator();
		var winName = $._UID + "_settings_window";
		var index = 1;
		while (em.hasMoreElements()) {
			let win = em.getNext();
			if (win.name === winName) {
				win.focus();
				return;
			}
			index++;
		}
		let storage = {
			button: self,
		};
		let xul = $.getHelp("%OptionsWindow%");
		xul = xul.replace(/>\s+</g, "><");
		xul = xul.split("%U_I_D%").join($._UID);
		xul = xul.split("%A_C_C_E_L%").join($.accel());
		xul = xul.split("%B_R_A_N_C_H%").join($.Branch);
		let url = "data:application/vnd.mozilla.xul+xml;text/plain," + encodeURIComponent(xul);
		let optWin = openDialog(url, winName, "chrome, dependant, dialog, centerscreen, close, alwaysRaised");
		optWin._storage = storage;
	},

	getCSS: function() {
		let selectorsList;
		try {
			let customSelectors = (decodeURIComponent($.gPref("pCustomSelectors")) + ",").replace(/\n+/gm, "").split(",");
			selectorsList = ($.gPref("pListOfIDsToHide") + ",").split(",").concat(customSelectors);
			selectorsList = selectorsList.filter(function(aVal) {
				if (aVal !== "")
					return true;
			});
		} finally {
			if (!selectorsList || selectorsList.length === 0)
				return false;
			return selectorsList.join(",") + "{" +
				($.gPref("pHiderEnabled") ? "display: none !important;" : "") +
				"color: " + $.gPref("pHighlightColor") + "!important;" +
				"box-shadow: 0 0 2px " + $.gPref("pHighlightColor") + " !important;" +
				"text-decoration: " + $.gPref("pHighlightTextDecoration") + " !important;" +
				"}";
		}
	},

	handleCSS: function() {
		let css;
		try {
			$.styleSheet(window[$._UID]["StyleSheet"], true);
			window[$._UID]["StyleSheet"] = false;
		} catch (aErr) {}

		try {
			css = "@namespace url(" + xulns + ");" + $.getCSS();
		} finally {
			if (css && (css.trim()).length > 78) {
				window[$._UID]["StyleSheet"] = css;
				$.styleSheet(window[$._UID]["StyleSheet"]);
			}
		}
	},

	handleElement: function(aSelector) {
		var selectorList = $.gPref("pListOfIDsToHide").split(",").filter(function(aVal) { // Use of "Array.filter" to avoid an "illegal" CSS selector list.
			if (aVal !== "")
				return true;
		});
		if (selectorList.indexOf(aSelector) !== -1) {
			while (selectorList.indexOf(aSelector) !== -1) {
				selectorList.splice(selectorList.indexOf(aSelector), 1);
			}
		} else
			selectorList.push(aSelector);
		$.sPref("pListOfIDsToHide", selectorList.join(","));
		setTimeout(function() {
			$.handleCSS();
		}, 10);
	},

	requiredMods: function(aE) {
		let useCtrlKey = $.gPref("pShortcutRequireCtrl"),
			useShiftKey = $.gPref("pShortcutRequireShift"),
			useAltKey = $.gPref("pShortcutRequireAlt");
		if ($.accel(aE) && aE.shiftKey && aE.altKey && (!useCtrlKey || !useShiftKey || !useAltKey))
			return false;
		// if ($.accel(aE) && aE.altKey && (!useCtrlKey || !useAltKey))
		// return false;
		// XOR http://www.howtocreate.co.uk/xor.html
		if ($.accel(aE) ? !useCtrlKey : useCtrlKey)
			return false;
		if (aE.shiftKey ? !useShiftKey : useShiftKey)
			return false;
		if (aE.altKey ? !useAltKey : useAltKey)
			return false;
		return true;
	},

	styleSheet: function(aCSS, aRemFlag) {
		var sss = Cc["@mozilla.org/content/style-sheet-service;1"]
			.getService(Ci.nsIStyleSheetService);
		var uri = Services.io.newURI("data:text/css," + encodeURIComponent(aCSS), null, null);
		if (sss.sheetRegistered(uri, sss.USER_SHEET))
			sss.unregisterSheet(uri, sss.USER_SHEET);
		if (aRemFlag)
			return;
		sss.loadAndRegisterSheet(uri, sss.USER_SHEET);
	},

	handlePrefObserver: function(aRem) {
		var prefs = $.DefPrefs;
		for (let key in prefs) {
			let pref = $.Branch + key;
			if (prefs.hasOwnProperty(key)) {
				if (aRem)
					Services.prefs.removeObserver(pref, $.prefObserver, false);
				else
					Services.prefs.addObserver(pref, $.prefObserver, false);
			}
		}
	},

	prefObserver: {
		observe: function(aSubject, aTopic, aPStr) {
			if (aTopic === "nsPref:changed") {
				let prefName = aPStr.slice($.Branch.length);
				switch (prefName) {
					case "pListOfIDsToHide":
						$.handleCSS();
						break;
					case "pHiderEnabled":
					case "pShortcutActive":
						$.selfDestroy();
						break;
				}
			}
		}
	},

	selfDestroy: function() {
		setTimeout(function() {
			self.destroy("update");
			setTimeout(function() {
				self.init();
			}, 100);
		}, 100);
	},

	$CNS: function(aElName, aAttrs, aNameSpace) { // Creates elements
		var el = aNameSpace ?
			document.createElementNS(aNameSpace, aElName) :
			document.createElement(aElName);
		if (aAttrs)
			Object.keys(aAttrs).forEach(function(n) {
				if (aAttrs[n] !== "")
					el.setAttribute(n, aAttrs[n]);
			});
		return el;
	},

	$: function(aId) { // Return elements by Id
		return document.getElementById(aId);
	},

	getHelp: function(aPlaceholder) { // Get specific data, surrounded by "placeholders", from the Help tab.
		return $.$(self.id).getAttribute("Help").split("<!--" + aPlaceholder + "-->")[1];
	},

	accel: function(aE) {
		if (aE)
			return $.isOSX ? aE.metaKey : aE.ctrlKey;
		return $.isOSX ? "Command" : "Control";
	},

	isOSX: Services.appinfo.OS.toLowerCase().startsWith("darwin"),
	winEvts: ["click", "mousedown", "mouseup", "command"],
	_UID: "__cb_menu_item_hider_" + self.id.slice(20),
	that: "document.getElementById('" + self.id + "').MenuItemHider.",

	get popSet() {
		let pSet = $.$("mainPopupSet") || $.$($._UID + "_popupset");
		if (!pSet) {
			try {
				pSet = $.$("msgcomposeWindow").appendChild($.$CNS("popupset", {
					id: $._UID + "_popupset",
					cb_id: $._UID
				}));
			} catch (aErr) {}
		}
		return pSet;
	},
};

this.MenuItemHider.gPref = function(aKey) {
	let branch = Services.prefs.getBranch(self.MenuItemHider.Branch);
	switch (typeof self.MenuItemHider.DefPrefs[aKey]) {
		case "boolean":
			return branch.getBoolPref(aKey);
		case "number":
			return branch.getIntPref(aKey);
		case "string":
			return branch.getComplexValue(aKey, Ci.nsISupportsString).data;
	}
	return null;
};

this.MenuItemHider.sPref = function(aKey, aVal) {
	let branch = Services.prefs.getBranch(self.MenuItemHider.Branch);
	switch (typeof aVal) {
		case "boolean":
			branch.setBoolPref(aKey, aVal);
			break;
		case "number":
			branch.setIntPref(aKey, aVal);
			break;
		case "string":
			let str = Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString);
			str.data = aVal;
			branch.setComplexValue((aKey), Ci.nsISupportsString, str);
			break;
	}
};

this.MenuItemHider.initPrefs = function() {
	let branch = Services.prefs.getDefaultBranch(self.MenuItemHider.Branch),
		defaults = self.MenuItemHider.DefPrefs;
	for (let key in defaults) {
		if (defaults.hasOwnProperty(key)) {
			let val = defaults[key];
			switch (typeof val) {
				case "boolean":
					branch.setBoolPref(key, val);
					break;
				case "number":
					branch.setIntPref(key, val);
					break;
				case "string":
					let str = Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString);
					str.data = val;
					branch.setComplexValue((key),
						Ci.nsISupportsString, str);
					break;
			}
		}
	}
};

this.MenuItemHider.Branch = "CB.MenuItemHider.Id" + self.id.slice(20) + ".";

this.MenuItemHider.DefPrefs = {
	pCustomSelectors: "",
	pHighlightColor: "red",
	pHighlightTextDecoration: "line-through",
	pHiderEnabled: true,
	pListOfIDsToHide: "",
	pShortcutActive: true,
	pShortcutButton: 1,
	pHotkeyToggle: "",
	pHotkeyToggleEnabled: false,
	pHotkeyShortcut: "",
	pHotkeyShortcutEnabled: false,
	pShortcutRequireCtrl: false,
	pShortcutRequireShift: false,
	pShortcutRequireAlt: false,
};

this.MenuItemHider.init();]]></initcode>
  <code><![CDATA[/*CODE*/]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help>𝗜𝗺𝗽𝗼𝗿𝘁𝗮𝗻𝘁 𝗻𝗼𝘁𝗲𝘀
⚫ 𝗗𝗢 𝗡𝗢𝗧 𝗶𝗻𝘀𝘁𝗮𝗹𝗹 𝗺𝗼𝗿𝗲 𝘁𝗵𝗮𝗻 𝗼𝗻𝗲 𝘃𝗲𝗿𝘀𝗶𝗼𝗻 𝗼𝗳 𝘁𝗵𝗶𝘀 𝗯𝘂𝘁𝘁𝗼𝗻 𝗮𝘁 𝘁𝗵𝗲 𝘀𝗮𝗺𝗲 𝘁𝗶𝗺𝗲❗❗❗
⚫ 𝗗𝗢 𝗡𝗢𝗧 𝗰𝗹𝗼𝗻𝗲 𝘁𝗵𝗶𝘀 𝗯𝘂𝘁𝘁𝗼𝗻❗❗❗
⚫ If you did any of the previous actions, delete all extra buttons leaving only one version of 𝗠𝗲𝗻𝘂𝗶𝘁𝗲𝗺 𝗛𝗶𝗱𝗲𝗿 and restart your application.

𝗪𝗔𝗥𝗡𝗜𝗡𝗚❗❗ 𝗕𝗘 𝗖𝗔𝗥𝗘𝗙𝗨𝗟 𝗜𝗙 𝗬𝗢𝗨 𝗘𝗗𝗜𝗧 𝗧𝗛𝗘 𝗛𝗘𝗟𝗣 𝗧𝗔𝗕 𝗢𝗙 𝗧𝗛𝗜𝗦 𝗕𝗨𝗧𝗧𝗢𝗡❗❗❗
𝗜𝗧 𝗖𝗢𝗨𝗟𝗗 𝗕𝗥𝗘𝗔𝗞 𝗜𝗧𝗦 𝗙𝗨𝗡𝗖𝗜𝗢𝗡𝗔𝗟𝗜𝗧𝗬❗❗❗

[,]

/**
 * 𝗙𝗥𝗢𝗠 𝗛𝗘𝗥𝗘 𝗗𝗢𝗪𝗡 𝗗𝗢 𝗡𝗢𝗧 𝗧𝗢𝗨𝗖𝗛 𝗔𝗡𝗬𝗧𝗛𝗜𝗡𝗚
 */

&lt;!--%OptionsWindow%--&gt;&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;?xml-stylesheet href="chrome://global/skin/" ?&gt;
&lt;?xml-stylesheet href="data:text/css;charset=utf-8,
prefwindow * {
	font-family: &amp;quot;Open Sans&amp;quot;, Helvetica, Arial, sans-serif !important;
}
button {
	min-width: 0  !important;
}
caption .caption-text,
.bold_text {
	font-weight: bold !important;
}
/* Force groupboxes on Linux to have the same appearance than in Windows */
/* Just because it makes effing sence!!!! */
/* Why have elements grouped inside a groupbox and not visually delimited?!?!?! */
groupbox {
	-moz-appearance: groupbox !important;
	border: 2px groove ThreeDFace !important;
	border-radius: 3px !important;
	margin: 3px !important;
	padding: 3px 3px 6px !important;
}
.groupbox-body {
	padding: inherit !important;
}
caption {
	margin: 0 6px !important;
	background-color: -moz-Dialog !important;
}
tabpanels caption {
	-moz-appearance: tabpanel !important;
}
/* !important is needed to override label in global.css */
.caption-text {
	margin: 0 2px !important;
}
dialogheader {
	font-size: x-small !important;
	font-weight: 600 !important;
	margin: 0 0 7px 0 !important;
	padding: 2px 0 2px 5px !important;
	border: none !important;
}
tab[selected=&amp;quot;true&amp;quot;] {
	font-weight: bold !important;
}
" type="text/css" ?&gt;
&lt;prefwindow id="%U_I_D%_settings_window"
			 xmlns:html="http://www.w3.org/1999/xhtml"
			 xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
			 onload="$.onLoad();"
			 onunload="$.onUnload();"
			 buttons="accept,cancel,extra1"
			 buttonlabelextra1="Apply"
			 buttonlabeldisclosure=""
			 ondialogextra1="$.onApply();"
			 buttonlabelextra2="Settings"
			 ondialogdisclosure="close();$.openHelpPage(event);"
			 title="Menuitem Hider settings"&gt;
				&lt;script&gt;
		&lt;![CDATA[
var Cc = Components.classes;
var Ci = Components.interfaces;
var Cu = Components.utils;
Cu.import("resource://gre/modules/Services.jsm");
var storage = window._storage;
var cb_btn = storage.button;

function $id(aId) {
	return document.getElementById(aId);
}

var $ = {
	_initialized: false,
	onLoad: function() {
		$._initialized = true;
		var docElt = document.documentElement;
		$.instantApply = docElt.instantApply;
		window.addEventListener("change", $, false);
		docElt.getButton("extra1").setAttribute("icon", "apply");
		docElt.setAttribute("cancelbuttonlabel", docElt.mStrBundle.GetStringFromName("button-cancel"));
		$.setHotKey();
		$.setButtons(true);
		$.dealWithCustomSelectors(false);
	},
	handleEvent: function(aE) {
		switch (aE.type) {
			case "change":
				if (aE.target.localName != "preference")
					return;
				if (!$.instantApply)
					$.updateApplyButton(aE);
				break;
		}
	},
	changes: [],
	updateApplyButton: function(aE) {
		var item = aE.target;
		if (item.localName != "preference")
			return;
		var valueChanged = item.value != item.valueFromPreferences;
		var index = $.changes.indexOf(item);
		if (valueChanged &amp;&amp; index == -1)
			$.changes.push(item);
		else if (!valueChanged &amp;&amp; index &gt; -1)
			$.changes.splice(index, 1);
		$.setButtons(!$.changes.length);
	},
	onApply: function() {
		$.dealWithCustomSelectors(true);
		$.setButtons(true);
		while ($.changes.length) {
			var preference = $.changes.shift();
			preference.batching = true;
			preference.valueFromPreferences = preference.value;
			preference.batching = false;
		}
		cb_btn.MenuItemHider.selfDestroy();
	},
	setButtons: function(aDisable) {
		var docElt = document.documentElement;
		// when in instantApply mode apply and accept buttons are hidden except when user
		// change min/max width value
		var applyButton = docElt.getButton("extra1");
		applyButton.disabled = aDisable;
		applyButton.hidden = $.instantApply &amp;&amp; aDisable;
		docElt.getButton("accept").hidden = aDisable;

		var action = aDisable ? "close" : "cancel";
		var cancelButton = docElt.getButton("cancel");
		cancelButton.label = docElt.getAttribute(action + "buttonlabel");
		cancelButton.setAttribute("icon", action);
	},
	setDisabled: function(aItemOrId, aVal) {
		var item = typeof(aItemOrId) == "string" ? $id(aItemOrId) : aItemOrId;
		if (!item)
			return;
		if (item.hasAttribute("inverseDependency"))
			aVal = !aVal;
		// remove disabled when the value is false
		$.setItem(item, "disabled", aVal || null);
	},
	setItem: function(aItemOrId, aAttr, aVal) {
		var el = typeof(aItemOrId) == "string" ? document.getElementById(aItemOrId) : aItemOrId;
		if (el) {
			if (aVal === null || aVal === undefined) {
				el.removeAttribute(aAttr);
				return;
			}
			if (typeof(aVal) == "boolean")
				aVal = aVal ? "true" : "false";

			if (!el.hasAttribute(aAttr) || el.getAttribute(aAttr) != aVal)
				el.setAttribute(aAttr, aVal);
		}
	},
	onUnload: function() {
		$.dealWithCustomSelectors(true);
		window.removeEventListener("change", $, false);
		cb_btn.MenuItemHider.selfDestroy();
	},
	setHotKey: function(aE) { // Taken from Custom Buttons add-on. I ♥ CB!!!
		let hki = document.getElementsByClassName("hotkey_capturer");
		let onInput = function(aE) {
			this.value = "";
			aE.stopPropagation();
		};
		let onKeypress = function(aE) {
			var that = this;
			var cbd = Cc["@xsms.nm.ru/custombuttons/cbkeymap;1"].getService(Ci.cbIKeyMapService);
			var key = cbd.getKey(aE);
			if (key == "ESCAPE") {
				aE.preventDefault();
				if (this.value !== "") {
					this.bExtendedMode = false;
					this.value = "";
					return;
				}
				if (!this.bExtendedMode) {
					this.bExtendedMode = true;
					return;
				}
			}
			if (key == "TAB") {
				if (!this.bExtendedMode)
					return;
				this.bExtendedMode = false;
				if (this.value !== "")
					return;
				aE.preventDefault();
			}
			this.bExtendedMode = false;
			var prefix = cbd.getKeyPrefix(aE);
			this.value = "";
			let tBH = $id(this.getAttribute("hotkey_box") + "_hotkey_box");
			tBH.value = prefix + key;
			aE.preventDefault();
			aE.stopPropagation();
			// The next crap is for the stupid window to register the preference change. ¬¬
			tBH.focus();
			var wU = window.QueryInterface(Ci.nsIInterfaceRequestor)
				.getInterface(Ci.nsIDOMWindowUtils);
			wU.sendKeyEvent("keypress", 35, 0, null, null);
			wU.sendKeyEvent("keyup", 35, 0, null, null);
			setTimeout(function() {
				// Send Spacebar key. ¬¬
				// keydown does not always work. ¬¬
				wU.sendKeyEvent("keypress", 0, 32, null, null);
				wU.sendKeyEvent("keyup", 0, 32, null, null);
				setTimeout(function() {
					that.focus();
				}, 100);
			}, 100);
		};
		Array.prototype.slice.call(hki).forEach(function(aEl) {
			aEl.addEventListener("input", onInput, false);
			aEl.addEventListener("keypress", onKeypress, false);
		});
	},
	dealWithCustomSelectors: function(aSave) {
			if (aSave)
				cb_btn.MenuItemHider.sPref("pCustomSelectors", encodeURIComponent($id("textbox_pCustomSelectors").value));
			else
				$id("textbox_pCustomSelectors").setAttribute("value", decodeURIComponent(cb_btn.MenuItemHider.gPref("pCustomSelectors")));
	},
	};
]]&gt;&lt;/script&gt;
	&lt;prefpane id="%U_I_D%_PrefPane" flex="1"&gt;
		&lt;preferences&gt;
			&lt;preference id="pCustomSelectors" name="%B_R_A_N_C_H%pCustomSelectors" type="string"/&gt;
			&lt;preference id="pHighlightColor" name="%B_R_A_N_C_H%pHighlightColor" type="string"/&gt;
			&lt;preference id="pHighlightTextDecoration" name="%B_R_A_N_C_H%pHighlightTextDecoration" type="string"/&gt;
			&lt;preference id="pHotkeyToggle" name="%B_R_A_N_C_H%pHotkeyToggle" type="string"/&gt;
			&lt;preference id="pHotkeyToggleEnabled" name="%B_R_A_N_C_H%pHotkeyToggleEnabled" type="bool"/&gt;
			&lt;preference id="pHotkeyShortcut" name="%B_R_A_N_C_H%pHotkeyShortcut" type="string"/&gt;
			&lt;preference id="pHotkeyShortcutEnabled" name="%B_R_A_N_C_H%pHotkeyShortcutEnabled" type="bool"/&gt;
			&lt;preference id="pShortcutButton" name="%B_R_A_N_C_H%pShortcutButton" type="int"/&gt;
			&lt;preference id="pShortcutRequireCtrl" name="%B_R_A_N_C_H%pShortcutRequireCtrl" type="bool"/&gt;
			&lt;preference id="pShortcutRequireShift" name="%B_R_A_N_C_H%pShortcutRequireShift" type="bool"/&gt;
			&lt;preference id="pShortcutRequireAlt" name="%B_R_A_N_C_H%pShortcutRequireAlt" type="bool"/&gt;
		&lt;/preferences&gt;
		&lt;grid&gt;
			&lt;columns&gt;
				&lt;column /&gt;
				&lt;column flex="1"/&gt;
			&lt;/columns&gt;
			&lt;rows&gt;
				&lt;row flex="1" align="center"&gt;
					&lt;label value="Highlight color"/&gt;
					&lt;textbox tooltip="tt_1" flex="1" preference="pHighlightColor"/&gt;
				&lt;/row&gt;
				&lt;row flex="1" align="center"&gt;
					&lt;label value="Highlight text decoration"/&gt;
					&lt;textbox tooltip="tt_2" flex="1" preference="pHighlightTextDecoration"/&gt;
				&lt;/row&gt;
			&lt;/rows&gt;
		&lt;/grid&gt;
		&lt;groupbox flex="1" tooltip=""&gt;
			&lt;caption label="Shortcut"/&gt;
			&lt;radiogroup orient="horizontal" preference="pShortcutButton"&gt;
				&lt;radio label="Left click" value="0" /&gt;
				&lt;radio label="Middle click" value="1" /&gt;
				&lt;radio label="Right click" value="2" /&gt;
			&lt;/radiogroup&gt;
			&lt;hbox flex="1"&gt;
				&lt;checkbox label="Require %A_C_C_E_L% key" preference="pShortcutRequireCtrl"/&gt;
				&lt;checkbox label="Require Shift key" preference="pShortcutRequireShift"/&gt;
				&lt;checkbox label="Require Alt key" preference="pShortcutRequireAlt"/&gt;
			&lt;/hbox&gt;
		&lt;/groupbox&gt;
		&lt;groupbox flex="1"&gt;
			&lt;caption label="Hotkeys"/&gt;
			&lt;grid&gt;
				&lt;columns&gt;
					&lt;column /&gt;
					&lt;column flex="1"/&gt;
				&lt;/columns&gt;
				&lt;rows&gt;
				&lt;row tooltip="tt_5" &gt;
					&lt;checkbox label="Toggle Menu Items Hider" preference="pHotkeyToggleEnabled"/&gt;
					&lt;hbox&gt;
						&lt;textbox id="toggle_enabled_hotkey_box" flex="1" preference="pHotkeyToggle"/&gt;
						&lt;textbox tooltip="tt_7" hotkey_box="toggle_enabled" maxwidth="20" flex="0" class="hotkey_capturer" /&gt;
					&lt;/hbox&gt;
				&lt;/row&gt;
				&lt;row tooltip="tt_6" &gt;
					&lt;checkbox label="Toggle shortcut" preference="pHotkeyShortcutEnabled"/&gt;
					&lt;hbox&gt;
						&lt;textbox id="toggle_shortcut_hotkey_box" flex="1" preference="pHotkeyShortcut"/&gt;
						&lt;textbox tooltip="tt_7" hotkey_box="toggle_shortcut" maxwidth="20" flex="0" class="hotkey_capturer" /&gt;
					&lt;/hbox&gt;
				&lt;/row&gt;
				&lt;/rows&gt;
			&lt;/grid&gt;
		&lt;/groupbox&gt;
		&lt;groupbox flex="1000"&gt;
			&lt;caption label="Custom selectors"/&gt;
			&lt;textbox tooltip="tt_3" flex="1000" multiline="true" id="textbox_pCustomSelectors"/&gt;
		&lt;/groupbox&gt;
		&lt;popupset&gt;
			&lt;tooltip id="tt_1"&gt;
				&lt;description&gt;Color to highlight hidden items. Any valid CSS &amp;quot;color&amp;quot;.&lt;/description&gt;
				&lt;description&gt;&lt;html:b&gt;Default:&lt;/html:b&gt; &amp;quot;red&amp;quot;.&lt;/description&gt;
			&lt;/tooltip&gt;
			&lt;tooltip id="tt_2"&gt;
				&lt;description&gt;Text decoration to highlight hidden items. Any valid CSS &amp;quot;text-decoration&amp;quot;.&lt;/description&gt;
				&lt;description&gt;&lt;html:b&gt;Default:&lt;/html:b&gt; &amp;quot;line-through&amp;quot;.&lt;/description&gt;
			&lt;/tooltip&gt;
			&lt;tooltip id="tt_3"&gt;
				&lt;description&gt;Comma separated custom CSS selectors. Items without IDs cannot be hidden automatically by clicking on them. That's why I created this option so we can specify some custom selectors to accurately determine (more or less) the exact item we want to hide.&lt;/description&gt;
				&lt;description&gt;&lt;html:strong&gt;Note:&lt;/html:strong&gt; It doesn't matter if there are line breaks.&lt;/description&gt;
			&lt;/tooltip&gt;
			&lt;tooltip id="tt_4"&gt;
				&lt;description&gt;Click combination to hide/unhide elements.&lt;/description&gt;
				&lt;description&gt;&lt;html:strong&gt;Note 1:&lt;/html:strong&gt; Middle click doesn't use modifier keys, so they will be ignored.&lt;/description&gt;
				&lt;description&gt;&lt;html:strong&gt;Note 2:&lt;/html:strong&gt; Left and Right clicks require at least to have one modifuer key enabled. If none is specified, %A_C_C_E_L% will be enforced.&lt;/description&gt;
			&lt;/tooltip&gt;
			&lt;tooltip id="tt_5"&gt;
				&lt;description&gt;Enable/Disable the use of a hotkey to toggle Menu Items Hider.&lt;/description&gt;
			&lt;/tooltip&gt;
			&lt;tooltip id="tt_6"&gt;
				&lt;description&gt;Enable/Disable the use of a hotkey to toggle the use of Menu Items Hider's shortcut.&lt;/description&gt;
			&lt;/tooltip&gt;
			&lt;tooltip id="tt_7"&gt;
				&lt;description&gt;Capture hotkey.&lt;/description&gt;
				&lt;description&gt;&lt;/description&gt;
				&lt;description&gt;&lt;html:b&gt;Instructions&lt;/html:b&gt;&lt;/description&gt;
				&lt;description&gt;Just place the mouse cursor inside this textbox and press the desired keyboard key combination. A valid hotkey will be created/generated inside the textbox to the left.&lt;/description&gt;
			&lt;/tooltip&gt;
		&lt;/popupset&gt;
	&lt;/prefpane&gt;
&lt;/prefwindow&gt;&lt;!--%OptionsWindow%--&gt;</help>
  <attributes/>
</custombutton>