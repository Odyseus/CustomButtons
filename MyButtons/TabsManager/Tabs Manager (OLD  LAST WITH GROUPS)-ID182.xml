<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/" xmlns:html="http://www.w3.org/1999/xhtml">
<html:head>
	<html:title><![CDATA[Tabs Manager (OLD &amp; LAST WITH GROUPS)]]></html:title>
	<html:link rel="shortcut icon" href="chrome://custombuttons/skin/button.png"/>
	<html:style type="text/css"><![CDATA[body{font-size:medium;margin:0}body,code:before,help:before,initcode:before{font-family:"Verdana",sans-serif}#wrapper{position:fixed;top:1em;right:1em;max-width:15%;text-align:center}#button{background-color:#299a0b;border:1px solid #3a7404;border-radius:.5em;padding:0;margin-bottom:1em;box-shadow:1px 2px 3px rgba(0,0,0,.25)}#button a{color:#f0f0f0;font-weight:700;text-shadow:-.5pt -.5px .5pt rgba(0,0,0,1);padding:.8em;text-decoration:none}:-moz-any-link:focus{color:grey;outline-color:transparent;text-decoration:none}#button a,code,code:before,initcode,initcode:before,help,help:before{display:block}#credits{position:fixed;bottom:1em;right:1em;font-size:small}#about{font-size:small}custombutton{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABAElEQVQ4jW2TQXLFMAhDff+b2vEHYw5AF38eVTNdZAIxCEkmw31VptU5T7mvOuepc56K2B2f85TZrEwr99VxptUwm2U2695PZVrH937KfZX76txsVsTus0yrEbEr0/4F4AyQc56eDMiI2F0IbYoj9h9ZSCV2XzXUA1BVL8BvBvSMiN20zWY38VZ5gDEkYtfAYTRToA3qiQJk2hcA7W8gpaxG0nPvp4aiQ5UCzOV2GKAgLUEfpsGCfaBR92TonapmdCoAjHTIgLa6/14gbgow8oj9uwe6SMQ0qTz9P9oDZOgCkfMNJnqWaV8P3ouDRorUXEA4H1wbtMmVjcrQ7TSb9QMtXcwa4wpbXgAAAABJRU5ErkJggg==) fixed #f6f6f1;margin:1em}date,image,mode,accelkey{display:none}name{font-weight:700;font-size:x-large}code:before,help:before,initcode:before{font-weight:700;font-size:large;margin:0 0 1em;padding:.5em}code:before{content:"Code Tab"}help:before{content:"Help Tab"}initcode:before{content:"Initialization Code Tab"}code,initcode,help{background-color:#fcfcfc;font-size:.875em;font-family:Consolas,"Bitstream Vera Sans Mono","Courier New",Courier,monospace!important;margin:1em 2em 1em 0 !important;padding:1em;text-align:left;box-shadow:2px 2px 0 rgba(170,160,130,0.5),4px 4px 0 rgba(200,190,165,0.5);max-width:80%;min-width:80%;white-space:pre-wrap;word-wrap:break-word}]]></html:style>
</html:head>
<html:body>
	<html:div id="wrapper">
		<html:div id="button">
			<html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3ETabs%20Manager%20%28OLD%20%26amp%3B%20LAST%20WITH%20GROUPS%29%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bcustombuttons-stdicon-1%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5Bif%20%28true%29%20return%3B%20//%20Disabled%20by%20CB%20Context%20Menu%20Extended%20button%0A%0Avar%20%24%20%3D%20this.TabsManager%20%3D%20%7B%0A%09/**%0A%09%20*%20Fixed%20width%20for%20the%20main%20panel%0A%09%20*%20UNCOMMENT%20ONLY%20ONE%20OF%20THE%20OPTIONS%21%21%21%0A%09%20*/%0A%09get%20panelWidth%28%29%20%7B%0A%09%09return%20window.innerWidth%3B%20//%20The%20width%20of%20the%20browser%20window.%0A%09%09//return%20screen.width%3B%20//%20The%20width%20of%20the%20screen.%0A%09%09//return%20500%3B%20//%20Custom%20with%20in%20pixels.%20CAN%27T%20BE%20ZERO%21%21%21%0A%09%7D%2C%0A%09/**%0A%09%20*%20How%20to%20position%20the%20main%20panel%0A%09%20*%20UNCOMMENT%20ONLY%20ONE%20OF%20THE%20OPTIONS%21%21%21%0A%09%20*%20More%20info%20about%20panel%20positioning%3A%0A%09%20*%20https%3A//developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/PopupGuide/Positioning%0A%09%20*/%0A%09get%20panelPosition%28%29%20%7B%0A%09%09return%20%22overlap%22%3B%20//%20This%20is%20the%20%22less%20buggy%22%20position.%20Any%20other%20position%20will%20produce%20%22some%20visual%20weirdness%22%20with%20the%20main%20panel.%0A%09%09//return%20%22after_start%22%3B%0A%09%09//%20return%20%22%22%3B%20//%20Do%20not%20set%20a%20position%0A%09%7D%2C%0A%09/**%0A%09%20*%20Where%20to%20anchor%20the%20main%20panel%0A%09%20*%20UNCOMMENT%20ONLY%20ONE%20OF%20THE%20OPTIONS%21%21%21%0A%09%20*/%0A%09get%20panelAnchor%28%29%20%7B%0A%09%09return%20%24.%24%28%22nav-bar%22%29%3B%20//%20Navigation%20toolbar%0A%09%09//return%20%24.%24%28%22TabsToolbar%22%29%3B%20//%20Tabs%20toolbar%0A%09%09//return%20%24.%24%28self.id%29%3B%20//%20This%20button%20itself%0A%09%7D%2C%0A%0A%09Init%3A%20function%28%29%20%7B%0A%09%09%24.InitPrefs%28%29%3B%0A%0A%09%09if%20%28%21%28%22Services%22%20in%20window%29%29%0A%09%09%09Cu.import%28%22resource%3A//gre/modules/Services.jsm%22%29%3B%0A%0A%09%09if%20%28%21%28%24._UID%20in%20window%29%29%20%7B%0A%09%09%09window%5B%24._UID%5D%20%3D%20%7B%0A%09%09%09%09StyleSheet%3A%20false%2C%0A%09%09%09%09SelfDestroyerListener%3A%20false%2C%0A%09%09%09%09ListOfHotSpots%3A%20false%2C%0A%09%09%09%09TabsContextEvaluated%3A%20false%2C%0A%09%09%09%09TabsContextHandled%3A%20false%0A%09%09%09%7D%3B%0A%09%09%7D%0A%0A%09%09//%20%22Convert%22%20preferences%20to%20properties%20of%20main%20object.%0A%09%09//%20So%20I%20don%27t%20have%20to%20call%20gPref%28%22prefname%22%29%20which%20is%20slower.%0A%09%09//%20Just%20have%20to%20be%20carefull%20not%20to%20create%20a%20preference%20with%20the%20same%20name%20as%20a%20property.%20Duh%21%0A%09%09for%20%28let%20p%20in%20%24.DefPrefs%29%20%7B%0A%09%09%09if%20%28%24.DefPrefs.hasOwnProperty%28p%29%29%0A%09%09%09%09%24%5B%22_%22%20+%20p%5D%20%3D%20%24.gPref%28p%29%3B%0A%09%09%7D%0A%0A%09%09self.tooltipText%20%3D%20%22%22%3B%20//%20Set%20to%20blank.%20Otherwise%20the%20tooltip%20attribute%20doesn%27t%20work.%0A%09%09self.setAttribute%28%22tooltip%22%2C%20%24._UID%20+%20%22_dynamic_tooltip%22%29%3B%0A%09%09self.setAttribute%28%22overflows%22%2C%20false%29%3B%0A%09%09%24.setSelfImage%28%29%3B%0A%09%09self.onclick%20%3D%20function%28aE%29%20%7B%0A%09%09%09if%20%28aE.button%20%3D%3D%3D%200%20%26%26%20%21aE.shiftKey%20%26%26%20%21aE.ctrlKey%20%26%26%20%21aE.altKey%29%20%7B%0A%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%09%24.togglePanel%28%29%3B%0A%09%09%09%7D%20else%20if%20%28aE.button%20%3D%3D%3D%200%20%26%26%20%21aE.shiftKey%20%26%26%20aE.ctrlKey%20%26%26%20%21aE.altKey%29%20%7B%0A%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%09%24.openOptions%28%29%3B%0A%09%09%09%7D%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%3B%0A%0A%09%09%24.CSSLoader%28%29%3B%0A%09%09%24.CreateMainPanel%28%29%3B%0A%09%09%24.CreateDynamicTooltip%28%29%3B%0A%09%09%24.HandleTabsContext%28%29%3B%0A%09%09%24.CreateTabsTooltip%28%29%3B%0A%09%09%24.hasTabView%20%26%26%20%24.CreateGroupsContext%28%29%3B%0A%09%09%24.HandlePrefListener%28%29%3B%0A%09%09%24.HandleOpenOnHover%28%29%3B%0A%09%09%24.HandleHotSpots%28%29%3B%0A%0A%09%09%24._tooltipAllowHovering%20%3D%20%28%24._TabPreviewEnabled%20%7C%7C%20%24._TabPreviewShowToolbar%29%3B%0A%0A%09%09%24._randomID%20%3D%20parseInt%28Math.random%28%29%20*%2010000%2C%2010%29%3B%0A%09%09window%5B%24._UID%5D%5B%22RandomID%22%5D%20%3D%20%24._randomID%3B%0A%0A%09%09%24._frameScript%20%3D%20%22data%3Aapplication/javascript%2C%22%20+%20encodeURIComponent%28%24.getHelp%28%22FrameScript%22%29%0A%09%09%09.replace%28/_Update_Preview_ID_/g%2C%20%24._updatePreviewMsgID%29%0A%09%09%09.replace%28/_Scroll_Preview_ID_/g%2C%20%24._scrollMsgID%29%0A%09%09%09.replace%28/_Emulate_Preview_ID_/g%2C%20%24._emulateMsgID%29%0A%09%09%09.replace%28/_Response_ID_/g%2C%20%24._responseMsgID%20+%20%24._randomID%29%29%3B%0A%09%09%24._globalMM.loadFrameScript%28%24._frameScript%2C%20true%29%3B%0A%09%09%24._globalMM.addMessageListener%28%24._responseMsgID%20+%20%24._randomID%2C%20%24._messageResponse%29%3B%0A%0A%09%09if%20%28%21%28window%5B%24._UID%5D%5B%22TabsContextEvaluated%22%5D%29%29%20%7B%0A%09%09%09window%5B%24._UID%5D%5B%22TabsContextEvaluated%22%5D%20%3D%20true%3B%0A%09%09%09let%20originalFunc%20%3D%20TabContextMenu.updateContextMenu%3B%0A%09%09%09eval%28%22TabContextMenu.updateContextMenu%3D%22%20+%20originalFunc.toString%28%29.replace%28%22%3A%20gBrowser.selectedTab%3B%22%2C%0A%09%09%09%09%22%3A%20%28aPopupMenu.triggerNode.localName%20%3D%3D%3D%20%5C%22toolbarbutton%5C%22%20%26%26%20aPopupMenu.triggerNode.hasOwnProperty%28%5C%22tab%5C%22%29%29%20%3F%20aPopupMenu.triggerNode.tab%20%3A%20gBrowser.selectedTab%3B%22%29%29%3B%0A%09%09%7D%0A%0A%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22update%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09%24.HandleHotSpots%28true%29%3B%0A%09%09%09%09%24.PanelFunctions._removeListeners%28%29%3B%0A%09%09%09%09//%20A%20half-working%20nightmare%21%21%21%20%AC%AC%0A%09%09%09%09//%20Frame%20scripts%20are%20not%20unloaded.%0A%09%09%09%09%24._globalMM.removeDelayedFrameScript%28%24._frameScript%29%3B%0A%09%09%09%09%24._globalMM.removeMessageListener%28%24._responseMsgID%20+%20window%5B%24._UID%5D%5B%22RandomID%22%5D%2C%20%24._messageResponse%29%3B%0A%09%09%09%09%24.HandlePrefListener%28true%29%3B%0A%09%09%09%09let%20selfEls%20%3D%20document.getElementsByAttribute%28%22cb_id%22%2C%20%24._UID%29%3B%0A%09%09%09%09Array.prototype.slice.call%28selfEls%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09%09aEl%20%26%26%20aEl.parentNode.removeChild%28aEl%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09try%20%7B%0A%09%09%09%09%09Services.obs.removeObserver%28observer%2C%20%22domwindowopened%22%29%3B%0A%09%09%09%09%7D%20catch%20%28aErr%29%20%7B%7D%0A%09%09%09%7D%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09%24.styleSheet%28window%5B%24._UID%5D%5B%22StyleSheet%22%5D%2C%20true%29%3B%0A%09%09%09%09delete%20window%5B%24._UID%5D%3B%0A%09%09%09%09%28Services.prefs.getBranch%28%24.Branch%29%29.deleteBranch%28%22%22%29%3B%0A%09%09%09%09Services.prefs.savePrefFile%28null%29%3B%0A%09%09%09%7D%0A%09%09%7D%29%3B%0A%0A%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%24.hasTabView%20%26%26%20TabView._initFrame%28%29%3B%20//%20Init%20this%20crap%20for%20the%20button%20to%20work.%20%AC%AC%0A%09%09%7D%2C%203000%29%3B%0A%0A%09%09%24.handleInvertedImages%28%29%3B%0A%09%7D%2C%0A%0A%09_messageResponse%3A%20%7B%0A%09%09receiveMessage%3A%20function%28aMsg%29%20%7B%0A%09%09%09if%20%28aMsg.name%20%21%3D%3D%20%24._responseMsgID%20+%20%24._randomID%29%0A%09%09%09%09return%3B%0A%09%09%09%24.canvas._scaleX%20%3D%20aMsg.data.scaleX%3B%0A%09%09%09%24.canvas._scaleY%20%3D%20aMsg.data.scaleY%3B%0A%09%09%09%24.canvas._scale%20%3D%20aMsg.data.scale%3B%0A%09%09%09%24.canvas.width%20%3D%20aMsg.data.width%3B%0A%09%09%09%24.canvas.height%20%3D%20aMsg.data.height%3B%0A%09%09%09%24._lastCanvasWidth%20%3D%20aMsg.data.width%3B%0A%09%09%09%24._lastCanvasHeight%20%3D%20aMsg.data.height%3B%0A%09%09%09%24.canvas.getContext%28%222d%22%29.putImageData%28aMsg.data.imgData%2C%200%2C%200%29%3B%0A%09%09%09%24.tooltipLabel.style.maxWidth%20%3D%20aMsg.data.width%20+%20%22px%22%3B%0A%09%09%7D%2C%0A%09%7D%2C%0A%0A%09HandleTabsContext%3A%20function%28%29%20%7B%0A%09%09if%20%28%21%28window%5B%24._UID%5D%5B%22TabsContextHandled%22%5D%29%29%20%7B%0A%09%09%09window%5B%24._UID%5D%5B%22TabsContextHandled%22%5D%20%3D%20true%3B%0A%09%09%09let%20tCtx%20%3D%20%24.%24%28%22tabContextMenu%22%29%3B%0A%09%09%09let%20trigger%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09let%20isShowing%20%3D%20%28aE.type%20%3D%3D%3D%20%22popupshowing%22%29%3B%0A%09%09%09%09isShowing%20%26%26%20clearTimeout%28%24._hoverOpenPreviewTimer%29%3B%0A%09%09%09%09isShowing%20%26%26%20%24.tooltip.hidePopup%28%29%3B%0A%09%09%09%09Array.prototype.slice.call%28this.getElementsByAttribute%28%22_multisel%22%2C%20%22*%22%29%29.forEach%28function%28aMI%29%20%7B%0A%09%09%09%09%09if%20%28%24.selectedTabs.length%20%3E%200%29%0A%09%09%09%09%09%09aMI.hidden%20%3D%20false%3B%0A%09%09%09%09%09else%0A%09%09%09%09%09%09aMI.hidden%20%3D%20true%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%3B%0A%09%09%09tCtx.addEventListener%28%22popupshowing%22%2C%20trigger%2C%20false%29%3B%0A%09%09%09tCtx.addEventListener%28%22popuphidden%22%2C%20trigger%2C%20false%29%3B%0A%09%09%09tCtx.appendChild%28%24.%24CNS%28%22separator%22%2C%20%7B%0A%09%09%09%09_multisel%3A%20true%2C%0A%09%09%09%09hidden%3A%20true%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09let%20pinAll%20%3D%20tCtx.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-pin_unpin_selected_tabs%22%2C%0A%09%09%09%09label%3A%20%22Pin/Unpin%20selected%20tabs%22%2C%0A%09%09%09%09_multisel%3A%20true%2C%0A%09%09%09%09class%3A%20%22menuitem-iconic%20marked-for-invertion%22%2C%0A%09%09%09%09hidden%3A%20true%2C%0A%09%09%09%09oncommand%3A%20%22event.preventDefault%28%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09pinAll.onclick%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09Array.prototype.slice.call%28%24.selectedTabs%29.forEach%28function%28aTabItem%29%20%7B%0A%09%09%09%09%09gBrowser%5BaTabItem.tab.pinned%20%3F%20%22unpinTab%22%20%3A%20%22pinTab%22%5D%28aTabItem.tab%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%3B%0A%09%09%09let%20reloadAll%20%3D%20tCtx.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-reload_selected_tabs%22%2C%0A%09%09%09%09label%3A%20%22Reload%20selected%20tabs%22%2C%0A%09%09%09%09_multisel%3A%20true%2C%0A%09%09%09%09class%3A%20%22menuitem-iconic%20marked-for-invertion%22%2C%0A%09%09%09%09hidden%3A%20true%2C%0A%09%09%09%09oncommand%3A%20%22event.preventDefault%28%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09reloadAll.onclick%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09Array.prototype.slice.call%28%24.selectedTabs%29.forEach%28function%28aTabItem%29%20%7B%0A%09%09%09%09%09gBrowser.reloadTab%28aTabItem.tab%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%3B%0A%09%09%09let%20closeAll%20%3D%20tCtx.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-close_selected_tabs%22%2C%0A%09%09%09%09label%3A%20%22Close%20selected%20tabs%22%2C%0A%09%09%09%09_multisel%3A%20true%2C%0A%09%09%09%09class%3A%20%22menuitem-iconic%20marked-for-invertion%22%2C%0A%09%09%09%09hidden%3A%20true%2C%0A%09%09%09%09oncommand%3A%20%22event.preventDefault%28%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09closeAll.onclick%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09Array.prototype.slice.call%28%24.selectedTabs%29.forEach%28function%28aTabItem%29%20%7B%0A%09%09%09%09%09gBrowser.removeTab%28aTabItem.tab%2C%20%7B%0A%09%09%09%09%09%09animate%3A%20true%0A%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09CreateGroupsContext%3A%20function%28%29%20%7B%0A%09%09if%20%28%21%28%24.%24%28%24._UID%20+%20%22-tabs-groups-box-context%22%29%29%29%20%7B%0A%09%09%09let%20mPop%20%3D%20%24.%24%28%22mainPopupSet%22%29.appendChild%28%24.%24CNS%28%22menupopup%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-groups-box-context%22%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09oncontextmenu%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopuphiding%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopupshowing%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onclick%3A%20%22event.preventDefault%28%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09consumeoutsideclicks%3A%20false%2C%0A%09%09%09%09menugenerated%3A%20true%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09let%20renG%20%3D%20mPop.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-rename_group%22%2C%0A%09%09%09%09label%3A%20%22Rename%20group%22%2C%0A%09%09%09%09class%3A%20%22marked-for-invertion%22%2C%0A%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09renG.onclick%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09if%20%28aE.button%20%21%3D%3D%200%29%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09var%20node%20%3D%20document.popupNode%3B%0A%09%09%09%09let%20gI%20%3D%20%24.GroupItems.groupItem%28node.getAttribute%28%22groupid%22%29%29%3B%0A%09%09%09%09let%20value%20%3D%20%24.promptme%28%22Set%20a%20new%20title%20for%20this%20group.%22%2C%20gI.getTitle%28%29%29%3B%0A%09%09%09%09if%20%28value%29%20%7B%0A%09%09%09%09%09gI.setTitle%28value%29%3B%0A%09%09%09%09%09node.label%20%3D%20value%3B%0A%09%09%09%09%09%24._appendButtonsToGroupsBox%28%24.%24%28%24._UID%20+%20%22-tabs-groups-box%22%29%29%3B%0A%09%09%09%09%7D%0A%09%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%09%7D%3B%0A%09%09%09let%20delG%20%3D%20mPop.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-delete_group%22%2C%0A%09%09%09%09label%3A%20%22Delete%20group%22%2C%0A%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09delG.onclick%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09if%20%28aE.button%20%21%3D%3D%200%29%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09if%20%28%24.GroupItems.groupItems.length%20%3E%201%29%20%7B%0A%09%09%09%09%09if%20%28document.popupNode.getAttribute%28%22checked%22%29%20%3D%3D%20%22true%22%29%20%7B%0A%09%09%09%09%09%09Services.prompt.alert%28null%2C%20self.name%2C%20%22You%20can%27t%20delete%20a%20currently%20selected%20group.%5Cn%22%20+%0A%09%09%09%09%09%09%09%22Select%20another%20group%20and%20then%20delete%20this%20one.%22%29%3B%0A%09%09%09%09%09%09return%20false%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09let%20curGI%20%3D%20%24.GroupItems.groupItem%28document.popupNode.getAttribute%28%22groupid%22%29%29%3B%0A%09%09%09%09%09let%20tabs%20%3D%20curGI._children%3B%0A%09%09%09%09%09var%20destGI%20%3D%20%28curGI%20%3D%3D%3D%20%24.GroupItems.groupItems%5B0%5D%29%20%3F%20%24.GroupItems.groupItems%5B1%5D%20%3A%20%24.GroupItems.groupItems%5B0%5D%3B%0A%09%09%09%09%09try%20%7B%0A%09%09%09%09%09%09for%20%28var%20i%20%3D%20tabs.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%29%0A%09%09%09%09%09%09%09%24._moveTabToGroupItem%28gBrowser.mTabContainer.children%5Btabs%5Bi%5D.tab._tPos%5D%2C%20destGI.id%2C%20true%29%3B%0A%09%09%09%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09%09%09%09Cu.reportError%28aErr%29%3B%0A%09%09%09%09%09%7D%20finally%20%7B%0A%09%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09%09curGI.destroy%28%29%3B%0A%09%09%09%09%09%09%09%24.GroupItems._updateTabBar%28%29%3B%0A%09%09%09%09%09%09%09%24._appendButtonsToGroupsBox%28%24.%24%28%24._UID%20+%20%22-tabs-groups-box%22%29%29%3B%0A%09%09%09%09%09%09%09%24._appendTabsToTabsBox%28%24.%24%28%24._UID%20+%20%22-tabs-box%22%29%29%3B%0A%09%09%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%0A%09%09%09%09%09Services.prompt.alert%28null%2C%20self.name%2C%20%22You%20can%27t%20delete%20the%20last%20remaining%20group%21%21%21%22%29%3B%0A%09%09%09%7D%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09CreateTabsTooltip%3A%20function%28%29%20%7B%0A%09%09if%20%28%21%24.tooltip%29%20%7B%0A%09%09%09let%20t%20%3D%20%24.%24%28%22mainPopupSet%22%29.appendChild%28%24.%24CNS%28%22panel%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-box-tooltip%22%2C%0A%09%09%09%09%22xmlns%3Ahtml%22%3A%20%22http%3A//www.w3.org/1999/xhtml%22%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09orient%3A%20%22vertical%22%2C%0A%09%09%09%09position%3A%20%22after_start%22%2C%0A%09%09%09%09flip%3A%20%22slide%22%2C%0A%09%09%09%09level%3A%20%22top%22%2C%0A%09%09%09%09noautofocus%3A%20%22true%22%2C%0A%09%09%09%09consumeoutsideclicks%3A%20%22false%22%2C%0A%09%09%09%09oncontextmenu%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onmouseout%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.OnTooltipOut%28event%2C%20this%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopuphiding%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.OnTooltipHiding%28event%2C%20this%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopupshowing%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.PopulateTabsTooltip%28event%2C%20this%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09let%20vB%20%3D%20t.appendChild%28%24.%24CNS%28%22vbox%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-preview-container%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09vB.appendChild%28%24.%24CNS%28%22label%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-preview-title%22%2C%0A%09%09%09%09crop%3A%20%22end%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09let%20tB%20%3D%20vB.appendChild%28%24.%24CNS%28%22toolbar%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-preview-toolbar%22%2C%0A%09%09%09%09fullscreentoolbar%3A%20%22true%22%2C%0A%09%09%09%09onclick%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09oncommand%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.PreviewFunctions.OnCommand%28event%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09tB.appendChild%28%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-preview-back-button%22%2C%0A%09%09%09%09class%3A%20%22marked-for-invertion%22%2C%0A%09%09%09%09tooltiptext%3A%20%22Go%20backwards%20one%20page%22%2C%0A%09%09%09%09label%3A%20%22back%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09tB.appendChild%28%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-preview-forward-button%22%2C%0A%09%09%09%09class%3A%20%22marked-for-invertion%22%2C%0A%09%09%09%09tooltiptext%3A%20%22Go%20forward%20one%20page%22%2C%0A%09%09%09%09label%3A%20%22forward%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09tB.appendChild%28%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-preview-reload-button%22%2C%0A%09%09%09%09class%3A%20%22marked-for-invertion%22%2C%0A%09%09%09%09tooltiptext%3A%20%22Reload%20page%22%2C%0A%09%09%09%09label%3A%20%22reload%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09tB.appendChild%28%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-preview-pin-button%22%2C%0A%09%09%09%09class%3A%20%22marked-for-invertion%22%2C%0A%09%09%09%09tooltiptext%3A%20%22Pin%20tab%22%2C%0A%09%09%09%09label%3A%20%22pin%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09tB.appendChild%28%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-preview-zoom-button%22%2C%0A%09%09%09%09class%3A%20%22marked-for-invertion%22%2C%0A%09%09%09%09tooltiptext%3A%20%22Zoom%20preview%22%2C%0A%09%09%09%09label%3A%20%22zoom%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09tB.appendChild%28%24.%24CNS%28%22spacer%22%2C%20%7B%0A%09%09%09%09flex%3A%20%221%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09tB.appendChild%28%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-preview-close-button%22%2C%0A%09%09%09%09class%3A%20%22marked-for-invertion%22%2C%0A%09%09%09%09tooltiptext%3A%20%22Close%20tab%22%2C%0A%09%09%09%09label%3A%20%22close%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09vB.appendChild%28%24.%24CNS%28%22html%3Acanvas%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-preview-canvas%22%0A%09%09%09%7D%2C%20xhtmlns%29%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09OnTooltipOut%3A%20function%28aE%2C%20aNode%29%20%7B%0A%09%09if%20%28%21%24.tooltip.mozMatchesSelector%28%22%3Ahover%22%29%29%0A%09%09%09%24.tooltip.hidePopup%28%29%3B%0A%09%09aE.stopPropagation%28%29%3B%0A%09%7D%2C%0A%0A%09OnTooltipHiding%3A%20function%28aE%2C%20aNode%29%20%7B%0A%09%09%24._tab.linkedBrowser.removeEventListener%28%22MozAfterPaint%22%2C%20%24.PreviewFunctions.OnMozAfterPaint%2C%20false%29%3B%0A%09%09%24._tab%20%3D%20null%3B%0A%09%09%24._resetPreview%28%29%3B%0A%09%09%24._resetTitle%28%29%3B%0A%09%09clearTimeout%28%24._hoverOpenPreviewTimer%29%3B%0A%09%09%24.tooltip.removeAttribute%28%22_open%22%29%3B%0A%09%09aE.stopPropagation%28%29%3B%0A%09%7D%2C%0A%0A%09PopulateTabsTooltip%3A%20function%28aE%2C%20aNode%29%20%7B%0A%09%09if%20%28%24._tab.localName%20%21%3D%3D%20%22tab%22%29%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09var%20b%20%3D%20%24._tab.linkedBrowser%3B%0A%09%09if%20%28%21b%29%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09if%20%28%24._prevDoNotAllow%29%0A%09%09%09aE.preventDefault%28%29%3B%0A%0A%09%09%24._updateTitle%28%29%3B%0A%09%09let%20tBar%20%3D%20%24.toolbar%3B%0A%09%09tBar.hidden%20%3D%20true%3B%0A%09%09let%20canvas%20%3D%20%24.canvas%3B%0A%09%09canvas.hidden%20%3D%20true%3B%0A%09%09aNode.setAttribute%28%22_open%22%2C%20%22true%22%29%3B%0A%0A%09%09if%20%28%24._TabPreviewShowToolbar%29%0A%09%09%09tBar.hidden%20%3D%20false%3B%0A%09%09if%20%28%21%24._TabPreviewEnabled%29%0A%09%09%09return%20true%3B%0A%09%09if%20%28%24._TabPreviewRequireControlKey%20%26%26%20%21%24._ctrlKeyPressed%29%0A%09%09%09return%20true%3B%0A%09%09if%20%28%24._TabPreviewEnabled%29%0A%09%09%09canvas.hidden%20%3D%20false%3B%0A%09%09else%0A%09%09%09return%20true%3B%0A%09%09%24._tab.linkedBrowser.addEventListener%28%22MozAfterPaint%22%2C%20%24.PreviewFunctions.OnMozAfterPaint%2C%20false%29%3B%0A%09%09%24._ensureTabIsRestored%28%29%3B%0A%09%09%24._updatePreview%28%29%3B%0A%09%09return%20true%3B%0A%09%7D%2C%0A%0A%09_openDelayedTooltip%3A%20function%28aE%29%20%7B%0A%09%09if%20%28%21%24._TabPreviewRequireControlKey%20%26%26%20%24._ctrlKeyPressed%29%0A%09%09%09return%3B%0A%09%09var%20anotherPopupOpen%20%3D%20%21%21document.popupNode%3B%0A%09%09if%20%28%21aE.target.mozMatchesSelector%28%22%3Ahover%22%29%20%7C%7C%20anotherPopupOpen%29%0A%09%09%09return%3B%0A%09%09if%20%28document.documentElement.mozMatchesSelector%28%22%3A-moz-window-inactive%22%29%29%0A%09%09%09return%3B%0A%0A%09%09if%20%28%21%24._hoverOpenPreviewTimer%20%26%26%20%24.tooltip.state%20%3D%3D%3D%20%22open%22%29%20%7B%0A%09%09%09if%20%28%24._tab.hasAttribute%28%22pending%22%29%29%0A%09%09%09%09%24._updatePreview%28%29%3B%0A%09%09%09return%3B%0A%09%09%7D%0A%09%09clearTimeout%28%24._hoverOpenPreviewTimer%29%3B%0A%09%09%24._hoverOpenPreviewTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09%24.tooltip.openPopup%28aE.target%2C%20%22%22%2C%200%2C%200%2C%20false%2C%20null%2C%20null%29%3B%0A%09%09%7D%2C%20%24._TabPreviewShowDelay%29%3B%0A%09%7D%2C%0A%0A%09_ensureTabIsRestored%3A%20function%28%29%20%7B%0A%09%09let%20ensure%20%3D%20%24._TabPreviewLoadUnloadedTabs%3B%0A%09%09let%20reload%20%3D%20function%28aEnsure%29%20%7B%0A%09%09%09if%20%28aEnsure%29%0A%09%09%09%09%24._tab.linkedBrowser.reload%28%29%3B%0A%09%09%09else%0A%09%09%09%09%24.canvas.height%20%3D%200%3B%0A%09%09%7D%3B%0A%09%09if%20%28%22unloadTabObj%22%20in%20window%20%26%26%20%24._tab.hasAttribute%28%22uT_tabUnload%22%29%29%0A%09%09%09reload%28ensure%29%3B%0A%09%09if%20%28%24._tab.linkedBrowser.__SS_restoreState%20%3D%3D%3D%201%29%0A%09%09%09reload%28ensure%29%3B%0A%09%7D%2C%0A%0A%09_updatePreview%3A%20function%28%29%20%7B%0A%09%09//%20The%20timer%20is%20to%20avoid%20triggering%20_updatePreview%28%29%20a%20million%20times%20per%20second%21%21%0A%09%09clearTimeout%28%24._updatePreviewTimer%29%3B%0A%09%09%24._updatePreviewTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09if%20%28%21%24.tooltip%29%0A%09%09%09%09return%20false%3B%0A%09%09%09if%20%28%21%24._tab%29%0A%09%09%09%09return%20false%3B%0A%09%09%09let%20zoomFactor%20%3D%20%24._prevZoomedIn%20%3F%201%20+%20parseInt%28%24._TabPreviewZoomFactor%20/%20100%2C%2010%29%20%3A%201%3B%0A%09%09%09let%20cW%20%3D%20parseInt%28%24._TabPreviewWidth%2C%2010%29%20*%20zoomFactor%3B%0A%09%09%09let%20cH%20%3D%20parseInt%28%24._TabPreviewHeight%2C%2010%29%20*%20zoomFactor%3B%0A%09%09%09//%20%24.tooltipLabel.style.maxWidth%20%3D%20cW%20+%20%22px%22%3B%20//%20%22Fix%22%20to%20avoid%20large%20label%20to%20resize%20the%20entire%20preview.%0A%09%09%09if%20%28%24._tab.getAttribute%28%22pending%22%29%20%3D%3D%20%22true%22%29%20%7B%0A%09%09%09%09%24._resetPreview%28%29%3B%0A%09%09%09%09if%20%28%24._TabPreviewLoadUnloadedTabs%29%20%7B%0A%09%09%09%09%09let%20temp%20%3D%20%24._TabPreviewAutomaticSizePercentage%20/%20100%3B%0A%09%09%09%09%09%24.canvas.width%20%3D%20%24._lastCanvasWidth%20%7C%7C%20window.content.innerWidth%20*%20temp%3B%0A%09%09%09%09%09%24.canvas.height%20%3D%20%24._lastCanvasHeight%20%7C%7C%20window.content.innerHeight%20*%20temp%3B%0A%09%09%09%09%7D%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09if%20%28%21%24._tab.linkedBrowser%29%0A%09%09%09%09return%3B%0A%09%09%09%24._tab.linkedBrowser.messageManager.sendAsyncMessage%28%24._updatePreviewMsgID%2C%20%7B%0A%09%09%09%09msgID%3A%20%24._updatePreviewMsgID%2C%0A%09%09%09%09auto%3A%20%24._TabPreviewAutomaticSize%2C%0A%09%09%09%09autoPercentage%3A%20%24._TabPreviewAutomaticSizePercentage%2C%0A%09%09%09%09zoomFactor%3A%20zoomFactor%2C%0A%09%09%09%09width%3A%20cW%2C%0A%09%09%09%09height%3A%20cH%0A%09%09%09%7D%29%3B%0A%09%09%09if%20%28%24._TabPreviewShowToolbar%29%0A%09%09%09%09%24.PreviewFunctions._updateToolbar%28%29%3B%0A%09%09%7D%2C%2015%29%3B%0A%09%7D%2C%0A%0A%09_resetPreview%3A%20function%28%29%20%7B%0A%09%09%24.tooltip.removeAttribute%28%22width%22%29%3B%0A%09%09%24.tooltip.removeAttribute%28%22height%22%29%3B%0A%09%09var%20canvas%20%3D%20%24.canvas%3B%0A%09%09var%20ctx%20%3D%20canvas.getContext%28%222d%22%29%3B%0A%09%09ctx.clearRect%280%2C%200%2C%20canvas.width%2C%20canvas.height%29%3B%0A%09%09canvas.removeAttribute%28%22width%22%29%3B%0A%09%09canvas.height%20%3D%200%3B%0A%09%7D%2C%0A%0A%09_updateTitle%3A%20function%28aBtn%29%20%7B%0A%09%09let%20lbl%20%3D%20%24.tooltipLabel%3B%0A%09%09let%20uri%20%3D%20%24._tab.linkedBrowser.currentURI.spec%20%7C%7C%20%22%22%3B%0A%09%09if%20%28aBtn%29%20%7B%0A%09%09%09aBtn.setAttribute%28%22tooltiptext%22%2C%20aBtn.label%20+%20%22%5Cn%22%20+%20uri%29%3B%0A%09%09%09return%20true%3B%0A%09%09%7D%0A%09%09lbl.value%20%3D%20%24._tab.label%3B%0A%09%09lbl.setAttribute%28%22tooltiptext%22%2C%20lbl.value%20+%20%22%5Cn%22%20+%20uri%29%3B%0A%09%09lbl.style.maxWidth%20%3D%20%24._TabPreviewWidth.toString%28%29%20+%20%22px%22%3B%0A%09%7D%2C%0A%0A%09_resetTitle%3A%20function%28%29%20%7B%0A%09%09let%20lbl%20%3D%20%24.tooltipLabel%3B%0A%09%09lbl.value%20%3D%20%22%22%3B%0A%09%09lbl.removeAttribute%28%22tooltiptext%22%29%3B%0A%09%09lbl.style.maxWidth%20%3D%20%220px%22%3B%0A%09%09XULBrowserWindow.setOverLink%28%22%22%2C%20null%29%3B%0A%09%7D%2C%0A%0A%09TabsProgressListenerForPanel%3A%20%7B%0A%09%09onStateChange%3A%20function%28aBrowser%29%20%7B%0A%09%09%09//%20gBrowser.getTabForBrowser%20not%20defined%20on%20Palemoon.%20%AC%AC%0A%09%09%09let%20tab%20%3D%20gBrowser.getTabForBrowser%20%3F%0A%09%09%09%09gBrowser.getTabForBrowser%28aBrowser%29%20%3A%0A%09%09%09%09gBrowser._getTabForBrowser%28aBrowser%29%3B%0A%09%09%09if%20%28%21tab%29%0A%09%09%09%09return%3B%0A%09%09%09if%20%28%21%24.panel%20%7C%7C%20%24.panel.state%20%21%3D%3D%20%22open%22%29%0A%09%09%09%09return%3B%0A%09%09%09%24._setButtonAttributes%28tab.mCorrespondingMenuitem%2C%20tab%29%3B%0A%09%09%7D%2C%0A%09%7D%2C%0A%0A%09TabsProgressListenerForPreview%3A%20%7B%0A%09%09onStateChange%3A%20function%28aBrowser%29%20%7B%0A%09%09%09if%20%28%21%24._tab%29%0A%09%09%09%09return%3B%0A%09%09%09if%20%28aBrowser%20%21%3D%3D%20%24._tab.linkedBrowser%29%0A%09%09%09%09return%3B%0A%09%09%09if%20%28%21%24.tooltip%20%7C%7C%20%24.tooltip.state%20%21%3D%3D%20%22open%22%29%0A%09%09%09%09return%3B%0A%09%09%09%24._updatePreview%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09onLocationChange%3A%20function%28aBrowser%29%20%7B%0A%09%09%09if%20%28%21%24._tab%29%0A%09%09%09%09return%3B%0A%09%09%09if%20%28aBrowser%20%21%3D%3D%20%24._tab.linkedBrowser%29%0A%09%09%09%09return%3B%0A%09%09%09if%20%28%21%24.tooltip%20%7C%7C%20%24.tooltip.state%20%21%3D%3D%20%22open%22%29%0A%09%09%09%09return%3B%0A%09%09%09%24.PreviewFunctions._updateToolbar%28%29%3B%0A%09%09%7D%2C%0A%09%7D%2C%0A%0A%09HandleOpenOnHover%3A%20function%28%29%20%7B%0A%09%09if%20%28%24._PanelOpenOnHover%29%20%7B%0A%09%09%09self.onmouseover%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09%24.OnHotSpotMouseOver%28aE%29%3B%0A%09%09%09%7D%3B%0A%09%09%09self.onmouseout%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09%24.OnHotSpotMouseOut%28aE%29%3B%0A%09%09%09%7D%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09self.onmouseover%20%3D%20null%3B%0A%09%09%09self.onmouseout%20%3D%20null%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09HandleOptionsBox%3A%20function%28%29%20%7B%0A%09%09let%20hasNodes%20%3D%20%24.optionsBox.hasChildNodes%28%29%3B%0A%09%09if%20%28hasNodes%29%20%7B%0A%09%09%09%24.PopulateOptionsBox%28true%29%3B%0A%09%09%09%24.%24%28%24._UID%20+%20%22-inline-options-button%22%29.setAttribute%28%22_checked%22%2C%20false%29%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09%24.PopulateOptionsBox%28false%29%3B%0A%09%09%09%24.%24%28%24._UID%20+%20%22-inline-options-button%22%29.setAttribute%28%22_checked%22%2C%20true%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09PopulateOptionsBox%3A%20function%28aDel%29%20%7B%0A%09%09let%20optB%20%3D%20%24.optionsBox%3B%0A%09%09optB.textContent%20%3D%20%22%22%3B%0A%09%09if%20%28aDel%29%0A%09%09%09return%20false%3B%0A%09%09let%20o%20%3D%20%24.getHelp%28%22OptionsBox%22%29%3B%0A%09%09o%20%3D%20o.replace%28/_U_I_D_/g%2C%20%24._UID%29%0A%09%09%09.replace%28/_S_E_L_F_I_D_/g%2C%20self.id%29%3B%0A%09%09o%20%3D%20%24.parseXML%28o%29%3B%0A%09%09//%20Styling%20in-line%20doesn%27t%20freaking%20work%21%21%21%20%AC%AC%0A%09%09//o.style.display%20%3D%20%22block%22%3B%20//%20This%20breaks%20%22spacers%20flex%201%22.%20%AC%AC%0A%09%09o.style.overflowX%20%3D%20%22auto%22%3B%20//%20%22overflow%22%20alone%20doesn%27t%20work%20either%21%20%AC%AC%0A%09%09o.style.overflowY%20%3D%20%22auto%22%3B%0A%09%09//o.style.maxWidth%20%3D%20%28%24.panelWidth%20-%20100%29%20+%20%22px%22%3B%0A%09%09o%20%26%26%20optB.appendChild%28o%29%3B%0A%0A%09%09Array.prototype.slice.call%28optB.getElementsByTagName%28%22textbox%22%29%29.forEach%28function%28aTBox%29%20%7B%0A%09%09%09let%20pref%20%3D%20aTBox.getAttribute%28%22_pref%22%29%3B%0A%09%09%09aTBox.value%20%3D%20%24%5B%22_%22%20+%20pref%5D%3B%0A%09%09%09aTBox.style.listStyleImage%20%3D%20%22none%22%3B%20//%20Remove%20stupid%20wrong%20icons.%20%AC%AC%0A%09%09%09aTBox.onchange%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09let%20tBox%20%3D%20this%3B%0A%09%09%09%09if%20%28pref%20%3D%3D%3D%20%22PanelVerticalOffset%22%29%20%7B%0A%09%09%09%09%09let%20panel%20%3D%20%24.panel%3B%0A%09%09%09%09%09let%20curVal%20%3D%20%24._PanelVerticalOffset%3B%0A%09%09%09%09%09let%20tBoxVal%20%3D%20tBox.value%3B%0A%09%09%09%09%09let%20deltaY%20%3D%20parseInt%28tBoxVal%2C%2010%29%20-%20parseInt%28curVal%2C%2010%29%3B%0A%09%09%09%09%09panel.moveTo%28parseInt%28panel.boxObject.screenX%2C%2010%29%2C%20parseInt%28panel.boxObject.screenY%20+%20deltaY%2C%2010%29%29%3B%0A%09%09%09%09%7D%0A%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%24.sPref%28pref%2C%20parseInt%28tBox.value%2C%2010%29%29%3B%0A%09%09%09%09%7D%2C%2010%29%3B%0A%09%09%09%7D%3B%0A%09%09%7D%29%3B%0A%0A%09%09Array.prototype.slice.call%28optB.getElementsByTagName%28%22checkbox%22%29%29.forEach%28function%28aCBox%29%20%7B%0A%09%09%09aCBox.checked%20%3D%20%24%5B%22_%22%20+%20aCBox.getAttribute%28%22_pref%22%29%5D%3B%0A%09%09%09aCBox.onclick%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09let%20pref%20%3D%20aE.target.getAttribute%28%22_pref%22%29%3B%0A%09%09%09%09let%20val%20%3D%20%24%5B%22_%22%20+%20pref%5D%3B%0A%09%09%09%09%24.sPref%28pref%2C%20%21val%29%3B%0A%09%09%09%09%24._checkPrevOptVis%28optB%29%3B%0A%09%09%09%09%24._checkTabsPerRowOptVis%28optB%29%3B%0A%09%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%09%7D%3B%0A%09%09%7D%29%3B%0A%0A%09%09%24._checkPrevOptVis%28optB%29%3B%0A%09%09%24._checkTabsPerRowOptVis%28optB%29%3B%0A%0A%09%09Array.prototype.slice.call%28optB.getElementsByTagName%28%22radiogroup%22%29%29.forEach%28function%28aRadG%29%20%7B%0A%09%09%09let%20pref%20%3D%20aRadG.getAttribute%28%22_pref%22%29%3B%0A%09%09%09aRadG.selectedIndex%20%3D%20%24%5B%22_%22%20+%20pref%5D%3B%0A%09%09%09aRadG.onselect%20%3D%20function%28aE%29%20%7B%0A%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%24.sPref%28pref%2C%20aE.target.selectedIndex%29%3B%0A%09%09%09%09%7D%2C%2010%29%3B%0A%09%09%09%7D%3B%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09_checkTabsPerRowOptVis%3A%20function%28aOptB%29%20%7B%0A%09%09Array.prototype.slice.call%28aOptB.getElementsByAttribute%28%22_auto_tab%22%2C%20%22*%22%29%29.forEach%28function%28aOptEl%29%20%7B%0A%09%09%09let%20auto%20%3D%20%24._PanelButtonTabsPerRowAuto%3B%0A%09%09%09if%20%28aOptEl.getAttribute%28%22_auto_tab%22%29%20%3D%3D%20%22true%22%29%0A%09%09%09%09aOptEl.hidden%20%3D%20%21auto%3B%0A%09%09%09else%0A%09%09%09%09aOptEl.hidden%20%3D%20auto%3B%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09_checkPrevOptVis%3A%20function%28aOptB%29%20%7B%0A%09%09let%20prevEnabled%20%3D%20%24._TabPreviewEnabled%3B%0A%09%09Array.prototype.slice.call%28aOptB.getElementsByAttribute%28%22_preview%22%2C%20%22*%22%29%29.forEach%28function%28aOptEl%29%20%7B%0A%09%09%09aOptEl.hidden%20%3D%20%21prevEnabled%3B%0A%09%09%7D%29%3B%0A%09%09if%20%28%21prevEnabled%29%0A%09%09%09return%20true%3B%0A%09%09Array.prototype.slice.call%28aOptB.getElementsByAttribute%28%22_preview_size%22%2C%20%22*%22%29%29.forEach%28function%28aOptEl%29%20%7B%0A%09%09%09let%20auto%20%3D%20%24._TabPreviewAutomaticSize%3B%0A%09%09%09if%20%28aOptEl.getAttribute%28%22_preview_size%22%29%20%3D%3D%20%22true%22%29%0A%09%09%09%09aOptEl.hidden%20%3D%20%21auto%3B%0A%09%09%09else%0A%09%09%09%09aOptEl.hidden%20%3D%20auto%3B%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09//%20CreateMainPanel%3A%20function%28%29%20%7B%0A%09//%20%09var%20panel%20%3D%20%24.panel%3B%0A%09//%20%09if%20%28%21panel%29%20%7B%0A%09//%20%09%09let%20p%20%3D%20%24.getHelp%28%22MainPanel%22%29%3B%0A%09//%20%09%09p%20%3D%20p.replace%28/_U_I_D_/g%2C%20%24._UID%29%0A%09//%20%09%09%09.replace%28/_N_O_G_R_O_U_P_S_/gm%2C%20%21%24.hasTabView%29%0A%09//%20%09%09%09.replace%28/_N_O_H_I_D_E_/g%2C%20%24._PanelKeepItOpen%29%0A%09//%20%09%09%09.replace%28/_S_E_L_F_I_D_/g%2C%20self.id%29%3B%0A%09//%20%09%09p%20%3D%20%24.parseXML%28p%29%3B%0A%09//%20%09%09p%20%26%26%20%24.%24%28%22mainPopupSet%22%29.appendChild%28p%29%3B%0A%09//%20%09%7D%0A%09//%20%7D%2C%0A%09/*%0A%09%3Cpanel%20id%3D%22_U_I_D_-main-panel%22%0A%09%09%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%0A%09%09%20orient%3D%22vertical%22%0A%09%09%20flip%3D%22slide%22%0A%09%09%20cb_id%3D%22_U_I_D_%22%0A%09%09%20level%3D%22parent%22%0A%09%09%20consumeoutsideclicks%3D%22false%22%0A%09%09%20noautohide%3D%22_N_O_H_I_D_E_%22%0A%09%09%20onmouseout%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%20onclick%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%20onpopupshowing%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.OnPanelShowing%28event%2C%20this%29%3B%22%0A%09%09%20onpopuphiding%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.OnPanelHidden%28event%2C%20this%29%3B%22%3E%0A%09%09%3Chbox%20id%3D%22_U_I_D_-main-panel-box%22%3E%0A%09%09%09%3Cvbox%3E%0A%09%09%09%09%3Cvbox%20id%3D%22_U_I_D_-tabs-groups-box%22%0A%09%09%09%09%09%20%20align%3D%22center%22%0A%09%09%09%09%09%20%20_group%3D%22true%22%0A%09%09%09%09%09%20%20hidden%3D%22_N_O_G_R_O_U_P_S_%22%0A%09%09%09%09%09%20%20context%3D%22_U_I_D_-tabs-groups-box-context%22/%3E%0A%09%09%09%09%3Cvbox%20id%3D%22_U_I_D_-tabs-box%22%0A%09%09%09%09%09%20%20onclick%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.OnItemClick%28event%29%3Bevent.stopPropagation%28%29%3B%22%0A%09%09%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%09%09%20%20oncontextmenu%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%09%09%20%20onmousemove%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.OnMouseMoveItem%28event%29%3B%22%0A%09%09%09%09%09%20%20onmouseover%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.OnMouseOverItem%28event%29%3B%22%0A%09%09%09%09%09%20%20onmouseout%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.OnMouseOutItem%28event%29%3B%22%0A%09%09%09%09%09%20%20ondragstart%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.DragAndDropHandler.onDragStart%28event%29%3B%22%0A%09%09%09%09%09%20%20ondragover%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.DragAndDropHandler.onDragOver%28event%29%3B%22%0A%09%09%09%09%09%20%20ondrop%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.DragAndDropHandler.onDrop%28event%29%3B%22/%3E%0A%09%09%09%3C/vbox%3E%0A%09%09%09%3Cspacer%20flex%3D%221%22/%3E%0A%09%09%09%3Cvbox%20maxwidth%3D%2248%22%20class%3D%22tabs-manager-options-buttons%22%3E%0A%09%09%09%09%3Ctoolbarbutton%20id%3D%22_U_I_D_-hide-groups-box-button%22%0A%09%09%09%09%09%09%09%20%20%20flex%3D%22999%22%0A%09%09%09%09%09%09%09%20%20%20hidden%3D%22_N_O_G_R_O_U_P_S_%22%0A%09%09%09%09%09%09%09%20%20%20tooltiptext%3D%22Hide%20groups%20row.%22%0A%09%09%09%09%09%09%09%20%20%20class%3D%22marked-for-invertion%22%0A%09%09%09%09%09%09%09%20%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%09%09%09%09%20%20%20onclick%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.toggleGroupButtons%28%29%3B%22/%3E%0A%09%09%09%09%3Ctoolbarbutton%20id%3D%22_U_I_D_-add-group-button%22%0A%09%09%09%09%09%09%09%20%20%20flex%3D%22999%22%0A%09%09%09%09%09%09%09%20%20%20hidden%3D%22_N_O_G_R_O_U_P_S_%22%0A%09%09%09%09%09%09%09%20%20%20_group%3D%22true%22%0A%09%09%09%09%09%09%09%20%20%20tooltiptext%3D%22Add%20a%20new%20group.%22%0A%09%09%09%09%09%09%09%20%20%20class%3D%22marked-for-invertion%22%0A%09%09%09%09%09%09%09%20%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%09%09%09%09%20%20%20onclick%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.AddGroupBtn%28event%29%3B%22/%3E%0A%09%09%09%09%3Cbox%20flex%3D%221%22%3E%0A%09%09%09%09%09%3Ctoolbarbutton%20id%3D%22_U_I_D_-new-tab-button%22%0A%09%09%09%09%09%09%09%20%20%20maxwidth%3D%22500%22%0A%09%09%09%09%09%09%09%20%20%20tooltiptext%3D%22Open%20New%20tab%22%0A%09%09%09%09%09%09%09%20%20%20class%3D%22marked-for-invertion%22%0A%09%09%09%09%09%09%09%20%20%20oncommand%3D%22BrowserOpenTab%28%29%3B%22/%3E%0A%09%09%09%09%3C/box%3E%0A%09%09%09%09%3Ctoolbarbutton%20id%3D%22_U_I_D_-open-options-button%22%0A%09%09%09%09%09%09%09%20%20%20tooltiptext%3D%22Open%20Tabs%20Manager%20options%20page.%22%0A%09%09%09%09%09%09%09%20%20%20class%3D%22marked-for-invertion%22%0A%09%09%09%09%09%09%09%20%20%20oncommand%3D%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.openOptions%28%29%3B%22/%3E%0A%09%09%09%09%3Ctoolbarbutton%20id%3D%22_U_I_D_-inline-options-button%22%0A%09%09%09%09%09%09%09%20%20%20tooltiptext%3D%22Show%20inline%20options.%22%0A%09%09%09%09%09%09%09%20%20%20class%3D%22marked-for-invertion%22%0A%09%09%09%09%09%09%09%20%20%20oncommand%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.HandleOptionsBox%28%29%3B%22/%3E%0A%09%09%09%3C/vbox%3E%0A%09%09%3C/hbox%3E%0A%09%09%3Cvbox%20id%3D%22_U_I_D_-options-box%22%20/%3E%0A%09%3C/panel%3E%0A%09*/%0A%09CreateMainPanel%3A%20function%28%29%20%7B%0A%09%09if%20%28%21%24.panel%29%20%7B%0A%09%09%09let%20p%20%3D%20%24.%24%28%22mainPopupSet%22%29.appendChild%28%24.%24CNS%28%22panel%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-main-panel%22%2C%0A%09%09%09%09orient%3A%20%22vertical%22%2C%0A%09%09%09%09flip%3A%20%22slide%22%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09level%3A%20%22parent%22%2C%0A%09%09%09%09consumeoutsideclicks%3A%20%22false%22%2C%0A%09%09%09%09noautohide%3A%20%24._PanelKeepItOpen%2C%0A%09%09%09%09onmouseout%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onclick%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopupshowing%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.PanelFunctions.OnPanelShowing%28event%2C%20this%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopuphiding%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.PanelFunctions.OnPanelHidden%28event%2C%20this%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09let%20hB%20%3D%20p.appendChild%28%24.%24CNS%28%22hbox%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-main-panel-box%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09let%20vB1%20%3D%20hB.appendChild%28%24.%24CNS%28%22vbox%22%29%29%3B%0A%09%09%09vB1.appendChild%28%24.%24CNS%28%22vbox%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-groups-box%22%2C%0A%09%09%09%09align%3A%20%22center%22%2C%0A%09%09%09%09_group%3A%20true%2C%0A%09%09%09%09hidden%3A%20%21%24.hasTabView%2C%0A%09%09%09%09context%3A%20%24._UID%20+%20%22-tabs-groups-box-context%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09vB1.appendChild%28%24.%24CNS%28%22vbox%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-tabs-box%22%2C%0A%09%09%09%09onclick%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.PanelFunctions.OnItemClick%28event%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09oncontextmenu%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onmousemove%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.PanelFunctions.OnMouseMoveItem%28event%29%3B%22%2C%0A%09%09%09%09onmouseover%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.PanelFunctions.OnMouseOverItem%28event%29%3B%22%2C%0A%09%09%09%09onmouseout%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.PanelFunctions.OnMouseOutItem%28event%29%3B%22%2C%0A%09%09%09%09ondragstart%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.DragAndDropHandler.onDragStart%28event%29%3B%22%2C%0A%09%09%09%09ondragover%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.DragAndDropHandler.onDragOver%28event%29%3B%22%2C%0A%09%09%09%09ondrop%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.DragAndDropHandler.onDrop%28event%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09hB.appendChild%28%24.%24CNS%28%22spacer%22%2C%20%7B%0A%09%09%09%09flex%3A%201%0A%09%09%09%7D%29%29%3B%0A%09%09%09let%20vB2%20%3D%20hB.appendChild%28%24.%24CNS%28%22vbox%22%2C%20%7B%0A%09%09%09%09maxwidth%3A%2048%2C%0A%09%09%09%09class%3A%20%22tabs-manager-options-buttons%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09vB2.appendChild%28%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-hide-groups-box-button%22%2C%0A%09%09%09%09flex%3A%20999%2C%0A%09%09%09%09hidden%3A%20%21%24.hasTabView%2C%0A%09%09%09%09tooltiptext%3A%20%22Hide%20groups%20row.%22%2C%0A%09%09%09%09class%3A%20%22marked-for-invertion%22%2C%0A%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onclick%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.PanelFunctions.toggleGroupButtons%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09vB2.appendChild%28%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-add-group-button%22%2C%0A%09%09%09%09flex%3A%20999%2C%0A%09%09%09%09hidden%3A%20%21%24.hasTabView%2C%0A%09%09%09%09_group%3A%20%22true%22%2C%0A%09%09%09%09tooltiptext%3A%20%22Add%20a%20new%20group.%22%2C%0A%09%09%09%09class%3A%20%22marked-for-invertion%22%2C%0A%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onclick%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.PanelFunctions.AddGroupBtn%28event%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09vB2.appendChild%28%24.%24CNS%28%22box%22%2C%20%7B%0A%09%09%09%09flex%3A%201%0A%09%09%09%7D%29%29.appendChild%28%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-new-tab-button%22%2C%0A%09%09%09%09maxwidth%3A%20500%2C%0A%09%09%09%09tooltiptext%3A%20%22Open%20New%20tab%22%2C%0A%09%09%09%09class%3A%20%22marked-for-invertion%22%2C%0A%09%09%09%09oncommand%3A%20%22BrowserOpenTab%28%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09vB2.appendChild%28%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-open-options-button%22%2C%0A%09%09%09%09tooltiptext%3A%20%22Open%20Tabs%20Manager%20options%20page.%22%2C%0A%09%09%09%09class%3A%20%22marked-for-invertion%22%2C%0A%09%09%09%09oncommand%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.openOptions%28%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09vB2.appendChild%28%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-inline-options-button%22%2C%0A%09%09%09%09tooltiptext%3A%20%22Show%20inline%20options.%22%2C%0A%09%09%09%09class%3A%20%22marked-for-invertion%22%2C%0A%09%09%09%09oncommand%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.HandleOptionsBox%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%0A%09%09%09p.appendChild%28%24.%24CNS%28%22vbox%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-options-box%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09//%20p%20%3D%20p.replace%28/_U_I_D_/g%2C%20%24._UID%29%0A%09%09%09//%20%09.replace%28/_N_O_G_R_O_U_P_S_/gm%2C%20%21%24.hasTabView%29%0A%09%09%09//%20%09.replace%28/_N_O_H_I_D_E_/g%2C%20%24._PanelKeepItOpen%29%0A%09%09%09//%20%09.replace%28/_S_E_L_F_I_D_/g%2C%20self.id%29%3B%0A%09%09%09//%20p%20%3D%20%24.parseXML%28p%29%3B%0A%09%09%09//%20p%20%26%26%20%24.%24%28%22mainPopupSet%22%29.appendChild%28p%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09_reloadTab%3A%20function%28aTab%2C%20aE%29%20%7B%0A%09%09if%20%28aE.target.getAttribute%28%22_loading%22%29%20%3D%3D%20%22true%22%29%20%7B%0A%09%09%09aTab.linkedBrowser.stop%28%29%3B%0A%09%09%09return%3B%0A%09%09%7D%0A%09%09if%20%28aE.shiftKey%29%20%7B%0A%09%09%09let%20flags%20%3D%20Ci.nsIWebNavigation.LOAD_FLAGS_BYPASS_PROXY%20%7C%0A%09%09%09%09Ci.nsIWebNavigation.LOAD_FLAGS_BYPASS_CACHE%3B%0A%09%09%09aTab.linkedBrowser.reloadWithFlags%28flags%29%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09aTab.linkedBrowser.reload%28%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09PreviewFunctions%3A%20%7B%0A%09%09OnClick%3A%20function%28aE%29%20%7B%0A%09%09%09if%20%28aE.target.localName%20%3D%3D%3D%20%22canvas%22%29%0A%09%09%09%09%24.PreviewFunctions._performAction%28%22emulate%22%2C%20aE%29%3B%0A%09%09%7D%2C%0A%0A%09%09OnCommand%3A%20function%28aE%29%20%7B%0A%09%09%09%24.PreviewFunctions._performAction%28aE.target.label%2C%20aE%29%3B%0A%09%09%7D%2C%0A%0A%09%09OnMozAfterPaint%3A%20function%28aE%29%20%7B%0A%09%09%09if%20%28aE.clientRects.length%20%3E%200%29%0A%09%09%09%09%24._updatePreview%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09OnDOMScroll%3A%20function%28aE%29%20%7B%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%09if%20%28%24._TabPreviewAutomaticSize%20%26%26%20%21%24.canvas._scaleX%20%26%26%20%21%24.canvas._scaleY%29%0A%09%09%09%09return%3B%0A%09%09%09if%20%28%21%24._TabPreviewAutomaticSize%20%26%26%20%21%24.canvas._scale%29%0A%09%09%09%09return%3B%0A%09%09%09let%20rect%20%3D%20%24.canvas.getBoundingClientRect%28%29%3B%0A%09%09%09%24._tab.linkedBrowser.messageManager.sendAsyncMessage%28%24._scrollMsgID%2C%20%7B%0A%09%09%09%09x%3A%20%28aE.clientX%20-%20rect.left%29%20/%20%28%24._TabPreviewAutomaticSize%20%3F%20%24.canvas._scaleX%20%3A%20%24.canvas._scale%29%2C%0A%09%09%09%09y%3A%20%28aE.clientY%20-%20rect.top%29%20/%20%28%24._TabPreviewAutomaticSize%20%3F%20%24.canvas._scaleY%20%3A%20%24.canvas._scale%29%2C%0A%09%09%09%09lines%3A%20aE.detail%2C%0A%09%09%09%09ctrlKey%3A%20aE.ctrlKey%2C%0A%09%09%09%09shiftKey%3A%20aE.shiftKey%2C%0A%09%09%09%7D%29%3B%0A%09%09%09%24._updatePreview%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09_performAction%3A%20function%28aCmd%2C%20aE%29%20%7B%0A%09%09%09switch%20%28aCmd%29%20%7B%0A%09%09%09%09case%20%22back%22%3A%0A%09%09%09%09%09%24._tab.linkedBrowser.goBack%28%29%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09case%20%22forward%22%3A%0A%09%09%09%09%09%24._tab.linkedBrowser.goForward%28%29%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09case%20%22reload%22%3A%0A%09%09%09%09%09%24._reloadTab%28%24._tab%2C%20aE%29%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09case%20%22pin%22%3A%0A%09%09%09%09%09gBrowser%5B%24._tab.pinned%20%3F%20%22unpinTab%22%20%3A%20%22pinTab%22%5D%28%24._tab%29%3B%0A%09%09%09%09%09%24._appendTabsToTabsBox%28%24.%24%28%24._UID%20+%20%22-tabs-box%22%29%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22close%22%3A%0A%09%09%09%09%09gBrowser.removeTab%28%24._tab%2C%20%7B%0A%09%09%09%09%09%09animate%3A%20true%0A%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22zoom%22%3A%0A%09%09%09%09%09%24._prevZoomedIn%20%3D%20%21%24._prevZoomedIn%3B%0A%09%09%09%09%09%24._resetPreview%28%29%3B%0A%09%09%09%09%09%24._updatePreview%28%29%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09case%20%22emulate%22%3A%0A%09%09%09%09%09var%20elt%3B%0A%09%09%09%09%09try%20%7B%0A%09%09%09%09%09%09elt%20%3D%20%24.PreviewFunctions._elementFromPointOnPreview%28aE%29%3B%0A%09%09%09%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09%09%09%09elt%20%3D%20null%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20%28elt%20%26%26%20elt.namespaceURI%20%3D%3D%3D%20xulns%29%20%7B%20//%20For%20XUL%20content%20only.%0A%09%09%09%09%09%09let%20view%20%3D%20elt.ownerDocument.defaultView%3B%0A%09%09%09%09%09%09if%20%28elt.localName%20%3D%3D%3D%20%22button%22%29%0A%09%09%09%09%09%09%09elt.doCommand%28%29%3B%0A%09%09%09%09%09%09else%20if%20%28elt.localName%20%3D%3D%3D%20%22checkbox%22%29%0A%09%09%09%09%09%09%09elt.checked%20%3D%20%21elt.checked%3B%0A%09%09%09%09%09%09else%20%7B%0A%09%09%09%09%09%09%09elt.dispatchEvent%28new%20view.MouseEvent%28%22mousedown%22%2C%20%7B%20//%20%22click%22%20event%20doesn%27t%20work%20on%20XUL%20content.%20%AC%AC%0A%09%09%09%09%09%09%09%09view%3A%20view%2C%0A%09%09%09%09%09%09%09%09cancelable%3A%20true%2C%0A%09%09%09%09%09%09%09%09bubbles%3A%20true%2C%0A%09%09%09%09%09%09%09%09button%3A%20aE.button%2C%0A%09%09%09%09%09%09%09%09ctrlKey%3A%20aE.ctrlKey%2C%0A%09%09%09%09%09%09%09%09altKey%3A%20aE.altKey%2C%0A%09%09%09%09%09%09%09%09shiftKey%3A%20aE.shiftKey%2C%0A%09%09%09%09%09%09%09%09metaKey%3A%20aE.metaKey%0A%09%09%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%20else%20%7B%20//%20For%20web%20page%20content%20only.%0A%09%09%09%09%09%09if%20%28%24._TabPreviewAutomaticSize%20%26%26%20%21%24.canvas._scaleX%20%26%26%20%21%24.canvas._scaleY%29%0A%09%09%09%09%09%09%09return%3B%0A%09%09%09%09%09%09if%20%28%21%24._TabPreviewAutomaticSize%20%26%26%20%21%24.canvas._scale%29%0A%09%09%09%09%09%09%09return%3B%0A%09%09%09%09%09%09var%20rect%20%3D%20%24.canvas.getBoundingClientRect%28%29%3B%0A%09%09%09%09%09%09var%20x%20%3D%20%28aE.clientX%20-%20rect.left%29%20/%20%28%24._TabPreviewAutomaticSize%20%3F%20%24.canvas._scaleX%20%3A%20%24.canvas._scale%29%3B%0A%09%09%09%09%09%09var%20y%20%3D%20%28aE.clientY%20-%20rect.top%29%20/%20%28%24._TabPreviewAutomaticSize%20%3F%20%24.canvas._scaleY%20%3A%20%24.canvas._scale%29%3B%0A%09%09%09%09%09%09%24._tab.linkedBrowser.messageManager.sendAsyncMessage%28%24._emulateMsgID%2C%20%7B%0A%09%09%09%09%09%09%09x%3A%20x%2C%0A%09%09%09%09%09%09%09y%3A%20y%2C%0A%09%09%09%09%09%09%09type%3A%20%22click%22%2C%20//%20%22mousedown%22%20event%20doesn%27t%20work%20on%20web%20content.%20%AC%AC%0A%09%09%09%09%09%09%09button%3A%20aE.button%2C%0A%09%09%09%09%09%09%09ctrlKey%3A%20aE.ctrlKey%2C%0A%09%09%09%09%09%09%09altKey%3A%20aE.altKey%2C%0A%09%09%09%09%09%09%09shiftKey%3A%20aE.shiftKey%2C%0A%09%09%09%09%09%09%09metaKey%3A%20aE.metaKey%0A%09%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09%24._updatePreview%28%29%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09default%3A%0A%09%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09%24.tooltip.hidePopup%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09_updateToolbar%3A%20function%28%29%20%7B%0A%09%09%09var%20toolbar%20%3D%20%24.toolbar%3B%0A%09%09%09if%20%28toolbar.hidden%29%0A%09%09%09%09return%3B%0A%09%09%09if%20%28toolbar.collapsed%29%0A%09%09%09%09toolbar.collapsed%20%3D%20false%3B%0A%09%09%09var%20browser%20%3D%20%24._tab.linkedBrowser%3B%0A%09%09%09%24.%24%28%24._UID%20+%20%22-tabs-preview-back-button%22%29.disabled%20%3D%20%21browser.canGoBack%3B%0A%09%09%09%24.%24%28%24._UID%20+%20%22-tabs-preview-forward-button%22%29.disabled%20%3D%20%21browser.canGoForward%3B%0A%09%09%09var%20button%20%3D%20%24.%24%28%24._UID%20+%20%22-tabs-preview-reload-button%22%29%3B%0A%09%09%09if%20%28%21button.hidden%29%0A%09%09%09%09button.setAttribute%28%22_loading%22%2C%20browser.webProgress.isLoadingDocument%29%3B%0A%09%09%09button%20%3D%20%24.%24%28%24._UID%20+%20%22-tabs-preview-pin-button%22%29%3B%0A%09%09%09if%20%28%21button.hidden%29%0A%09%09%09%09button.setAttribute%28%22_active%22%2C%20%24._tab.pinned%29%3B%0A%09%09%09button%20%3D%20%24.%24%28%24._UID%20+%20%22-tabs-preview-zoom-button%22%29%3B%0A%09%09%09if%20%28%21button.hidden%29%0A%09%09%09%09button.setAttribute%28%22_active%22%2C%20%24._prevZoomedIn%29%3B%0A%09%09%7D%2C%0A%0A%09%09_elementFromPointOnPreview%3A%20function%28aE%29%20%7B%0A%09%09%09var%20rect%20%3D%20%24.canvas.getBoundingClientRect%28%29%3B%0A%09%09%09var%20x%20%3D%20%28aE.clientX%20-%20rect.left%29%20/%20%28%24._TabPreviewAutomaticSize%20%3F%20%24.canvas._scaleX%20%3A%20%24.canvas._scale%29%3B%0A%09%09%09var%20y%20%3D%20%28aE.clientY%20-%20rect.top%29%20/%20%28%24._TabPreviewAutomaticSize%20%3F%20%24.canvas._scaleY%20%3A%20%24.canvas._scale%29%3B%0A%09%09%09var%20win%20%3D%20%24._tab.linkedBrowser.contentWindow%3B%0A%09%09%09var%20elt%20%3D%20win.document.elementFromPoint%28x%2C%20y%29%3B%0A%09%09%09if%20%28%21elt%29%0A%09%09%09%09elt%20%3D%20win.QueryInterface%28Ci.nsIInterfaceRequestor%29.%0A%09%09%09getInterface%28Ci.nsIDOMWindowUtils%29.%0A%09%09%09elementFromPoint%28x%2C%20y%2C%20true%2C%20false%29%3B%0A%09%09%09if%20%28%21elt%29%0A%09%09%09%09elt%20%3D%20win.document.body%20%7C%7C%20win.document.documentElement%3B%0A%09%09%09while%20%28/%5Ei%3Fframe%24/.test%28elt.localName.toLowerCase%28%29%29%29%20%7B%0A%09%09%09%09x%20-%3D%20elt.getBoundingClientRect%28%29.left%3B%0A%09%09%09%09y%20-%3D%20elt.getBoundingClientRect%28%29.top%3B%0A%09%09%09%09elt%20%3D%20elt.contentDocument.elementFromPoint%28x%2C%20y%29%3B%0A%09%09%09%7D%0A%09%09%09return%20elt%3B%0A%09%09%7D%2C%0A%09%7D%2C%0A%0A%09PanelFunctions%3A%20%7B%0A%09%09OnPanelHidden%3A%20function%28aE%2C%20aNode%29%20%7B%0A%09%09%09aNode.height%20%3D%200%3B%0A%09%09%09aNode.width%20%3D%200%3B%0A%09%09%09%24.PanelFunctions._removeListeners%28%29%3B%0A%09%09%09%24.tooltip.hidePopup%28%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09_removeListeners%3A%20function%28%29%20%7B%20//%20Outside%20of%20OnPanelHidden%20so%20I%20can%20call%20it%20from%20onDestroy%28%29.%0A%09%09%09let%20tabcontainer%20%3D%20gBrowser.tabContainer%3B%0A%09%09%09tabcontainer.removeEventListener%28%22TabAttrModified%22%2C%20%24.tabContainerListener%2C%20false%29%3B%0A%09%09%09tabcontainer.removeEventListener%28%22TabClose%22%2C%20%24.tabContainerListener%2C%20false%29%3B%0A%09%09%09tabcontainer.removeEventListener%28%22TabOpen%22%2C%20%24.tabContainerListener%2C%20false%29%3B%0A%09%09%09tabcontainer.removeEventListener%28%22TabPinned%22%2C%20%24.tabContainerListener%2C%20false%29%3B%0A%09%09%09tabcontainer.removeEventListener%28%22TabUnpinned%22%2C%20%24.tabContainerListener%2C%20false%29%3B%0A%09%09%09%24.canvas.removeEventListener%28%22click%22%2C%20%24.PreviewFunctions.OnClick%2C%20true%29%3B%0A%09%09%09%24.canvas.removeEventListener%28%22DOMMouseScroll%22%2C%20%24.PreviewFunctions.OnDOMScroll%2C%20false%29%3B%0A%09%09%09if%20%28%24._tab%29%0A%09%09%09%09%24._tab.linkedBrowser%20%26%26%0A%09%09%09%09%24._tab.linkedBrowser.removeEventListener%28%22MozAfterPaint%22%2C%20%24.PreviewFunctions.OnMozAfterPaint%2C%20false%29%3B%0A%09%09%09gBrowser.removeTabsProgressListener%28%24.TabsProgressListenerForPanel%29%3B%0A%09%09%09gBrowser.removeTabsProgressListener%28%24.TabsProgressListenerForPreview%29%3B%0A%09%09%7D%2C%0A%0A%09%09OnPanelShowing%3A%20function%28aE%2C%20aPanel%29%20%7B%0A%09%09%09aPanel.width%20%3D%20%24.panelWidth%3B%0A%09%09%09aPanel.maxWidth%20%3D%20%24.panelWidth%3B%0A%09%09%09let%20tabcontainer%20%3D%20gBrowser.tabContainer%3B%0A%09%09%09tabcontainer.addEventListener%28%22TabAttrModified%22%2C%20%24.tabContainerListener%2C%20false%29%3B%0A%09%09%09tabcontainer.addEventListener%28%22TabClose%22%2C%20%24.tabContainerListener%2C%20false%29%3B%0A%09%09%09tabcontainer.addEventListener%28%22TabOpen%22%2C%20%24.tabContainerListener%2C%20false%29%3B%0A%09%09%09tabcontainer.addEventListener%28%22TabPinned%22%2C%20%24.tabContainerListener%2C%20false%29%3B%0A%09%09%09tabcontainer.addEventListener%28%22TabUnpinned%22%2C%20%24.tabContainerListener%2C%20false%29%3B%0A%09%09%09gBrowser.addTabsProgressListener%28%24.TabsProgressListenerForPanel%29%3B%0A%09%09%09if%20%28%24._TabPreviewEnabled%29%20%7B%0A%09%09%09%09//%20Doesn%27t%20matter%20wich%20event%20to%20listen%20to.%20%22click%22%20doesn%27t%20work%20on%20XUL%20content%20and%20%22mousedown%22%20doesn%27t%20work%20on%20web%20content.%0A%09%09%09%09//%20The%20correct%20event%20to%20use%20is%20defined%20in%20the%20%22emulate%22%20case%20of%20_performAction%20function.%0A%09%09%09%09if%20%28%24._TabPreviewSendClicks%29%0A%09%09%09%09%09%24.canvas.addEventListener%28%22click%22%2C%20%24.PreviewFunctions.OnClick%2C%20true%29%3B%0A%09%09%09%09if%20%28%24._TabPreviewSendScroll%29%0A%09%09%09%09%09%24.canvas.addEventListener%28%22DOMMouseScroll%22%2C%20%24.PreviewFunctions.OnDOMScroll%2C%20false%29%3B%0A%09%09%09%09gBrowser.addTabsProgressListener%28%24.TabsProgressListenerForPreview%29%3B%0A%09%09%09%7D%0A%09%09%09%24._appendButtonsToGroupsBox%28%24.%24%28%24._UID%20+%20%22-tabs-groups-box%22%29%29%3B%0A%09%09%09%24._appendTabsToTabsBox%28%24.%24%28%24._UID%20+%20%22-tabs-box%22%29%29%3B%0A%09%09%09let%20optB%20%3D%20%24.optionsBox.hasChildNodes%28%29%3B%0A%09%09%09%24.%24%28%24._UID%20+%20%22-inline-options-button%22%29.setAttribute%28%22_checked%22%2C%20optB%29%3B%0A%09%09%09optB%20%26%26%20%24.PopulateOptionsBox%28false%29%3B%0A%09%09%09%24.PanelFunctions.HandleGroupsElements%28%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09AddGroupBtn%3A%20function%28aE%29%20%7B%0A%09%09%09if%20%28aE.button%20%21%3D%3D%200%29%0A%09%09%09%09return%20false%3B%0A%09%09%09%24.GroupItems.newGroup%28%29.newTab%28%29%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%24._appendButtonsToGroupsBox%28%24.%24%28%24._UID%20+%20%22-tabs-groups-box%22%29%29%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09OnItemClick%3A%20function%28aE%29%20%7B%0A%09%09%09clearTimeout%28%24._PanelSelectTabOnHoverTimer%29%3B%0A%09%09%09clearTimeout%28%24._hoverOpenPreviewTimer%29%3B%0A%09%09%09%24.tooltip.hidePopup%28%29%3B%0A%09%09%09if%20%28aE.button%20%3D%3D%3D%202%29%0A%09%09%09%09return%20true%3B%0A%09%09%09var%20btn%20%3D%20aE.target%3B%0A%09%09%09var%20tab%20%3D%20btn.tab%3B%0A%09%09%09if%20%28btn.localName%20%21%3D%3D%20%22toolbarbutton%22%20%7C%7C%20%21tab%29%0A%09%09%09%09return%20false%3B%0A%09%09%09if%20%28aE.button%20%3D%3D%3D%200%20%26%26%20%21aE.shiftKey%20%26%26%20aE.ctrlKey%20%26%26%20%21aE.altKey%29%0A%09%09%09%09%24.PanelFunctions._multiSelectTab%28btn%2C%20tab%29%3B%0A%09%09%09else%20if%20%28aE.button%20%3D%3D%3D%200%20%26%26%20%21aE.shiftKey%20%26%26%20%21aE.ctrlKey%20%26%26%20%21aE.altKey%29%0A%09%09%09%09gBrowser.tabContainer._notifyBackgroundTab%28gBrowser.selectedTab%20%3D%20tab%29%3B%0A%09%09%09else%20if%20%28aE.button%20%3D%3D%3D%201%20%26%26%20%21aE.shiftKey%20%26%26%20%21aE.ctrlKey%20%26%26%20%21aE.altKey%29%20%7B%0A%09%09%09%09switch%20%28%24._PanelMiddleClickOnTabAction%29%20%7B%0A%09%09%09%09%09case%200%3A%20//%20Close%20tab%0A%09%09%09%09%09%09gBrowser.removeTab%28tab%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%201%3A%20//%20Reload%20tab%0A%09%09%09%09%09%09%24._reloadTab%28tab%2C%20aE%29%3B%0A%09%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09%09%24._setButtonAttributes%28btn%2C%20tab%29%3B%0A%09%09%09%09%09%09%7D%2C%2010%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%202%3A%20//%20Multi-select%20tab%0A%09%09%09%09%09%09%24.PanelFunctions._multiSelectTab%28btn%2C%20tab%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09default%3A%0A%09%09%09%09%09%09Services.prompt.alert%28null%2C%20self.name%2C%20%22You%20manually%20changed%20the%20preference%22%20+%0A%09%09%09%09%09%09%09%22%20called%20%5C%22PanelMiddleClickOnTabAction%5C%22%20to%20an%20invalid%20value%21%21%21%5Cn%22%20+%0A%09%09%09%09%09%09%09%22Go%20to%20%22%20+%20self.name%20+%20%22%20options%20page%20and%20reset%20that%20preference%2C%20then%22%20+%0A%09%09%09%09%09%09%09%22choose%20the%20action%20you%20want%20from%20the%20in-line%20options%20inside%20the%20main%20panel.%22%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09_multiSelectTab%3A%20function%28aBtn%2C%20aTab%29%20%7B%0A%09%09%09if%20%28aBtn.hasAttribute%28%22_multisel%22%29%29%20%7B%0A%09%09%09%09aBtn.removeAttribute%28%22_multisel%22%29%3B%0A%09%09%09%09if%20%28gBrowser.selectedTab%20%21%3D%3D%20aTab%29%0A%09%09%09%09%09aBtn.removeAttribute%28%22checked%22%29%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09aBtn.removeAttribute%28%22type%22%29%3B%20//%20Remove%20to%20avoid%20checked%20state.%20%AC%AC%0A%09%09%09%09aBtn.removeAttribute%28%22group%22%29%3B%20//%20Remove%20to%20avoid%20checked%20state.%20%AC%AC%0A%09%09%09%09aBtn.setAttribute%28%22_multisel%22%2C%20true%29%3B%0A%09%09%09%09if%20%28gBrowser.selectedTab%20%21%3D%3D%20aTab%29%0A%09%09%09%09%09aBtn.removeAttribute%28%22checked%22%29%3B%0A%09%09%09%7D%0A%09%09%7D%2C%0A%0A%09%09OnMouseMoveItem%3A%20function%28aE%29%20%7B%0A%09%09%09var%20btn%20%3D%20aE.target%3B%0A%09%09%09var%20tab%20%3D%20btn.tab%3B%0A%09%09%09if%20%28btn.localName%20%21%3D%3D%20%22toolbarbutton%22%20%7C%7C%20%21tab%29%0A%09%09%09%09return%20false%3B%0A%09%09%09%24._tab%20%3D%20tab%3B%0A%09%09%09if%20%28%21%24._TabPreviewEnabled%20%26%26%20%21%24._TabPreviewShowToolbar%29%0A%09%09%09%09return%20false%3B%0A%09%09%09%24.tooltip.removeAttribute%28%22width%22%29%3B%0A%09%09%09%24.tooltip.removeAttribute%28%22height%22%29%3B%0A%09%09%09%24._ctrlKeyPressed%20%3D%20aE.ctrlKey%3B%0A%09%09%09%24._openDelayedTooltip%28aE%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09OnMouseOverItem%3A%20function%28aE%29%20%7B%0A%09%09%09var%20btn%20%3D%20aE.target%3B%0A%09%09%09var%20tab%20%3D%20btn.tab%3B%0A%09%09%09if%20%28btn.localName%20%21%3D%3D%20%22toolbarbutton%22%20%7C%7C%20%21tab%29%0A%09%09%09%09return%20false%3B%0A%09%09%09try%20%7B%0A%09%09%09%09XULBrowserWindow.setOverLink%28tab.linkedBrowser.currentURI.spec%2C%20null%29%3B%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%7D%0A%09%09%09if%20%28gBrowser._removingTabs.indexOf%28tab%29%20%3E%20-1%29%0A%09%09%09%09return%20true%3B%0A%09%09%09if%20%28%24._PanelSelectTabOnHover%29%20%7B%0A%09%09%09%09clearTimeout%28%24._PanelSelectTabOnHoverTimer%29%3B%0A%09%09%09%09%24._PanelSelectTabOnHoverTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09gBrowser.selectedTab%20%3D%20tab%3B%0A%09%09%09%09%7D%2C%20%24._PanelSelectTabOnHoverDelay%29%3B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%0A%09%09%09%24._tab%20%3D%20tab%3B%0A%09%09%09if%20%28%21%24._TabPreviewEnabled%20%26%26%20%21%24._TabPreviewShowToolbar%29%20%7B%0A%09%09%09%09%24._updateTitle%28btn%29%3B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%09%09%09if%20%28%21%24._TabPreviewEnabled%29%0A%09%09%09%09return%20true%3B%0A%09%09%09tab.linkedBrowser.removeEventListener%28%22MozAfterPaint%22%2C%20%24.PreviewFunctions.OnMozAfterPaint%2C%20false%29%3B%0A%09%09%09if%20%28%21%24._hoverOpenPreviewTimer%20%26%26%20%24.tooltip.state%20%3D%3D%3D%20%22open%22%29%0A%09%09%09%09%24.tooltip.hidePopup%28%29%3B%0A%09%09%09%24._ctrlKeyPressed%20%3D%20aE.ctrlKey%3B%0A%09%09%09tab.linkedBrowser.addEventListener%28%22MozAfterPaint%22%2C%20%24.PreviewFunctions.OnMozAfterPaint%2C%20false%29%3B%0A%09%09%09%24._updatePreview%28%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09OnMouseOutItem%3A%20function%28aE%29%20%7B%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09var%20btn%20%3D%20aE.target%3B%0A%09%09%09var%20tab%20%3D%20btn.tab%3B%0A%09%09%09if%20%28btn.localName%20%21%3D%3D%20%22toolbarbutton%22%20%7C%7C%20%21tab%29%0A%09%09%09%09return%20false%3B%0A%09%09%09%24._ctrlKeyPressed%20%3D%20aE.ctrlKey%3B%0A%09%09%09XULBrowserWindow.setOverLink%28%22%22%2C%20null%29%3B%0A%09%09%09clearTimeout%28%24._PanelSelectTabOnHoverTimer%29%3B%0A%09%09%09clearTimeout%28%24._hoverOpenPreviewTimer%29%3B%0A%09%09%09var%20x%20%3D%20aE.screenX%2C%0A%09%09%09%09y%20%3D%20aE.screenY%3B%0A%09%09%09if%20%28%24._tooltipAllowHovering%20%26%26%20%24.tooltip.state%20%3D%3D%3D%20%22open%22%29%20%7B%0A%09%09%09%09let%20box%20%3D%20%24.tooltip.boxObject%3B%0A%09%09%09%09if%20%28box.screenX%20%3C%3D%20x%20%26%26%20x%20%3C%20box.screenX%20+%20box.width%20%26%26%0A%09%09%09%09%09box.screenY%20%3C%3D%20y%20%26%26%20y%20%3C%20box.screenY%20+%20box.height%29%0A%09%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09%24.tooltip.hidePopup%28%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09HandleGroupsElements%3A%20function%28%29%20%7B%0A%09%09%09Array.prototype.slice.call%28%24.panel.getElementsByAttribute%28%22_group%22%2C%20%22*%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09aEl.collapsed%20%3D%20%24._PanelHideGroupsRow%3B%0A%09%09%09%7D%29%3B%0A%09%09%09%24.%24%28%24._UID%20+%20%22-hide-groups-box-button%22%29.setAttribute%28%22_checked%22%2C%20%21%24._PanelHideGroupsRow%29%3B%0A%09%09%7D%2C%0A%0A%09%09toggleGroupButtons%3A%20function%28%29%20%7B%0A%09%09%09%24.sPref%28%22PanelHideGroupsRow%22%2C%20%21%24._PanelHideGroupsRow%29%3B%0A%09%09%7D%2C%0A%09%7D%2C%0A%0A%09togglePanel%3A%20function%28%29%20%7B%0A%09%09var%20panel%20%3D%20%24.panel%3B%0A%09%09if%20%28panel%29%20%7B%0A%09%09%09if%20%28panel.state%20%3D%3D%3D%20%22open%22%29%0A%09%09%09%09panel.hidePopup%28%29%3B%0A%09%09%09else%0A%09%09%09%09panel.openPopup%28%24.panelAnchor%2C%20%24.panelPosition%2C%200%2C%20%24._PanelVerticalOffset%2C%20false%2C%20false%2C%20null%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09openOptions%3A%20function%28%29%20%7B%0A%09%09var%20em%20%3D%20Services.ww.getWindowEnumerator%28%22CB%3ATabsManager%3ASettings%22%29%3B%0A%09%09var%20index%20%3D%201%3B%0A%09%09while%20%28em.hasMoreElements%28%29%29%20%7B%0A%09%09%09let%20win%20%3D%20em.getNext%28%29%3B%0A%09%09%09if%20%28win.document.documentElement.getAttribute%28%22windowtype%22%29%20%3D%3D%3D%20%22CB%3ATabsManager%3ASettings%22%29%20%7B%0A%09%09%09%09win.focus%28%29%3B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09index++%3B%0A%09%09%7D%0A%09%09let%20xul%20%3D%20%24.getHelp%28%22OptionsWindow%22%29%3B%0A%09%09let%20storage%20%3D%20%7B%7D%3B%0A%09%09storage%5B%22self_id%22%5D%20%3D%20self.id%3B%0A%09%09xul%20%3D%20xul.replace%28/%5Ct+/gm%2C%20%22%22%29%0A%09%09%09.replace%28/%3E%5Cs+%3C/g%2C%20%22%3E%3C%22%29%0A%09%09%09.replace%28%22_self_%22%2C%20%22opener.document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29%22%29%3B%0A%09%09xul%20%3D%20xul.split%28%22_U_I_D_%22%29.join%28%24._UID%29%3B%0A%09%09xul%20%3D%20xul.split%28%22_RoOt_%22%29.join%28%24.Branch%29%3B%0A%09%09let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28xul%29%3B%0A%09%09let%20win%20%3D%20openDialog%28url%2C%20%22%22%2C%20%22chrome%2C%20resizable%2C%20dependant%2C%20dialog%2C%20centerscreen%2C%20close%2C%20alwaysRaised%22%29%3B%0A%09%09win._storage%20%3D%20storage%3B%0A%09%7D%2C%0A%0A%09_appendButtonsToGroupsBox%3A%20function%28aGBox%29%20%7B%0A%09%09if%20%28%21%24.hasTabView%29%0A%09%09%09return%20true%3B%0A%09%09aGBox.textContent%20%3D%20%22%22%3B%0A%09%09var%20groups%20%3D%20%24.GroupItems.groupItems%3B%0A%09%09var%20breakPoint%20%3D%200%3B%0A%09%09var%20btnPerRow%20%3D%20%24._PanelButtonGroupsPerRow%3B%0A%09%09var%20btnWidth%20%3D%20%28%28%24.panelWidth%20-%20100%29%20/%20btnPerRow%29%20-%202%3B%0A%09%09var%20count%20%3D%200%3B%0A%09%09let%20onClick%20%3D%20function%28aE%29%20%7B%0A%09%09%09if%20%28aE.button%20%3D%3D%3D%200%20%26%26%20%21aE.shiftKey%20%26%26%20%21aE.ctrlKey%20%26%26%20%21aE.altKey%29%20%7B%0A%09%09%09%09Array.prototype.slice.call%28aE.target.parentNode.parentNode.getElementsByTagName%28%22toolbarbutton%22%29%29.forEach%28function%28aBtn%29%20%7B%0A%09%09%09%09%09%28aBtn%20%21%3D%3D%20aE.target%29%20%26%26%20%28aBtn.checked%20%3D%20false%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09%24._setGroup%28aE.target.getAttribute%28%22groupid%22%29%29%3B%0A%09%09%09%7D%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%3B%0A%09%09var%20createRow%20%3D%20function%28aArr%29%20%7B%0A%09%09%09let%20hbox%20%3D%20aGBox.appendChild%28%24.%24CNS%28%22hbox%22%2C%20%7B%0A%09%09%09%09align%3A%20%22center%22%0A%09%09%09%7D%29%29%3B%0A%09%09%09var%20g%20%3D%200%2C%0A%09%09%09%09aLen%20%3D%20aArr.length%3B%0A%09%09%09for%20%28%3B%20g%20%3C%20aLen%3B%20g++%29%20%7B%0A%09%09%09%09let%20gI%20%3D%20aArr%5Bg%5D%3B%0A%09%09%09%09let%20title%20%3D%20gI.getTitle%28%29%3B%0A%0A%09%09%09%09if%20%28%21title.trim%28%29%29%20%7B%0A%09%09%09%09%09count++%3B%0A%09%09%09%09%09title%20%3D%20%22Unnamed%20group%20%23%22%20+%20count%3B%0A%09%09%09%09%09gI.setTitle%28title%29%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09let%20btn%20%3D%20%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09%09label%3A%20%22%28%22%20+%20gI._children.length%20+%20%22%29%20%22%20+%20title%2C%0A%09%09%09%09%09type%3A%20%22radio%22%2C%0A%09%09%09%09%09maxwidth%3A%20parseInt%28btnWidth%2C%2010%29%2C%0A%09%09%09%09%09class%3A%20%22tabs-groups-button%22%2C%0A%09%09%09%09%09group%3A%20%24._UID%20+%20%22-groups-radio-group%22%2C%0A%09%09%09%09%09tooltiptext%3A%20title%2C%0A%09%09%09%09%09groupid%3A%20gI.id%2C%0A%09%09%09%09%09checked%3A%20%24.GroupItems.getActiveGroupItem%28%29%20%3D%3D%3D%20gI%2C%0A%09%09%09%09%09autocheck%3A%20false%2C%0A%09%09%09%09%09ondragover%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29.TabsManager.DragAndDropHandler.onDragOver%28event%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%09ondrop%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29.TabsManager.DragAndDropHandler.onDrop%28event%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%09crop%3A%20%22end%22%2C%0A%09%09%09%09%7D%29%3B%0A%0A%09%09%09%09btn.onclick%20%3D%20onClick%3B%0A%09%09%09%09hbox.appendChild%28btn%29%3B%0A%09%09%09%7D%0A%09%09%7D%3B%0A%09%09var%20i%20%3D%200%2C%0A%09%09%09gLen%20%3D%20groups.length%2C%0A%09%09%09gRow%20%3D%20%5B%5D%3B%0A%09%09for%20%28%3B%20i%20%3C%20gLen%3B%20i++%29%20%7B%0A%09%09%09breakPoint++%3B%0A%09%09%09gRow.push%28groups%5Bi%5D%29%3B%0A%09%09%09if%20%28%28gRow.length%20%3D%3D%3D%20btnPerRow%29%20%7C%7C%20%28i%20+%201%29%20%3D%3D%3D%20groups.length%29%20%7B%0A%09%09%09%09breakPoint%20%3D%200%3B%0A%09%09%09%09createRow%28gRow%29%3B%0A%09%09%09%09gRow%20%3D%20%5B%5D%3B%0A%09%09%09%09continue%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09aGBox.appendChild%28%24.%24CNS%28%22spacer%22%2C%20%7B%0A%09%09%09flex%3A%201%0A%09%09%7D%29%29%3B%0A%09%09aGBox.collapsed%20%3D%20%24._PanelHideGroupsRow%3B%0A%09%7D%2C%0A%0A%09_setGroup%3A%20function%28aGroupItemID%29%20%7B%0A%09%09try%20%7B%0A%09%09%09let%20currentGroupItem%20%3D%20%24.GroupItems.getActiveGroupItem%28%29%3B%0A%09%09%09let%20activateGroupItem%20%3D%20%24.GroupItems.groupItem%28aGroupItemID%29%3B%0A%09%09%09window.gBrowser.selectedTab%20%3D%20activateGroupItem._children%5B0%5D.tab%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%24._appendTabsToTabsBox%28%24.%24%28%24._UID%20+%20%22-tabs-box%22%29%29%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09LOG%28aErr%29%3B%0A%09%09%09return%20false%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09_moveTabToGroupItem%3A%20function%28aTab%2C%20aGroupItemId%2C%20aAvoidUpdate%29%20%7B%0A%09%09if%20%28aTab._tabViewTabItem.parent%20%26%26%20aTab._tabViewTabItem.parent.id%20%3D%3D%3D%20aGroupItemId%29%0A%09%09%09return%3B%0A%09%09let%20shouldUpdateTabBar%20%3D%20false%3B%0A%09%09let%20groupItem%3B%0A%09%09if%20%28aTab.selected%29%20%7B%0A%09%09%09if%20%28gBrowser.visibleTabs.length%20%3E%201%29%20%7B%0A%09%09%09%09gBrowser._blurTab%28aTab%29%3B%0A%09%09%09%09shouldUpdateTabBar%20%3D%20true%3B%0A%09%09%09%7D%0A%09%09%7D%20else%20%7B%0A%09%09%09shouldUpdateTabBar%20%3D%20true%3B%0A%09%09%7D%0A%09%09if%20%28aTab._tabViewTabItem.parent%29%0A%09%09%09aTab._tabViewTabItem.parent.remove%28aTab._tabViewTabItem%29%3B%0A%09%09groupItem%20%3D%20%24.GroupItems.groupItem%28aGroupItemId%29%3B%0A%09%09groupItem.add%28aTab._tabViewTabItem%29%3B%0A%09%09if%20%28shouldUpdateTabBar%20%26%26%20%21aAvoidUpdate%29%0A%09%09%09%24.GroupItems._updateTabBar%28%29%3B%0A%09%7D%2C%0A%0A%09_appendTabsToTabsBox%3A%20function%28aBox%29%20%7B%0A%09%09let%20panel%20%3D%20%24.panel%3B%0A%09%09if%20%28%21panel%29%0A%09%09%09return%20false%3B%0A%09%09if%20%28panel%20%26%26%20panel.state%20%3D%3D%3D%20%22closed%22%29%0A%09%09%09return%20false%3B%0A%09%09aBox.textContent%20%3D%20%22%22%3B%0A%09%09let%20tabs%20%3D%20gBrowser.visibleTabs%3B%0A%09%09let%20boxWidth%20%3D%20%24.panelWidth%20-%2048%3B%0A%09%09let%20btnPerRow%20%3D%20%24._PanelButtonTabsPerRowAuto%20%3F%0A%09%09%09Math.round%28boxWidth%20/%20%24._PanelButtonTabsPerRowAutoWidth%29%20%3A%0A%09%09%09%24._PanelButtonTabsPerRow%3B%0A%09%09let%20colWidth%20%3D%20%28boxWidth%20/%20btnPerRow%29%3B%0A%09%09let%20breakPoint%20%3D%200%3B%0A%09%09let%20tabRow%20%3D%20%5B%5D%3B%0A%09%09let%20pinnedTabs%20%3D%20%5B%5D%3B%0A%0A%09%09let%20grid%20%3D%20aBox.appendChild%28%24.%24CNS%28%22grid%22%2C%20%7B%0A%09%09%09id%3A%20%24._UID%20+%20%22tabs-box-grid%22%2C%0A%09%09%09maxwidth%3A%20boxWidth%2C%0A%09%09%09minwidth%3A%20boxWidth%2C%0A%09%09%7D%29%29%3B%0A%0A%09%09let%20cols%20%3D%20grid.appendChild%28%24.%24CNS%28%22columns%22%29%29%3B%0A%0A%09%09while%20%28breakPoint%20%21%3D%3D%20btnPerRow%29%20%7B%0A%09%09%09breakPoint++%3B%0A%09%09%09cols.appendChild%28%24.%24CNS%28%22column%22%2C%20%7B%0A%09%09%09%09flex%3A%201%2C%0A%09%09%09%09width%3A%20colWidth%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%0A%0A%09%09let%20rows%20%3D%20grid.appendChild%28%24.%24CNS%28%22rows%22%29%29%3B%0A%09%09let%20createRow%20%3D%20function%28aArr%29%20%7B%0A%09%09%09let%20row%20%3D%20rows.appendChild%28%24.%24CNS%28%22row%22%29%29%3B%0A%09%09%09let%20i%20%3D%200%2C%0A%09%09%09%09iLen%20%3D%20aArr.length%3B%0A%09%09%09for%20%28%3B%20i%20%3C%20iLen%3B%20i++%29%20%7B%0A%09%09%09%09let%20btn%20%3D%20%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09%09type%3A%20%22radio%22%2C%0A%09%09%09%09%09context%3A%20%22tabContextMenu%22%2C%0A%09%09%09%09%09autocheck%3A%20false%2C%0A%09%09%09%09%09group%3A%20%24._UID%20+%20%22-tabs-radio-group%22%2C%0A%09%09%09%09%09oncontextmenu%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09row.appendChild%28btn%29%3B%0A%09%09%09%09%24._setButtonAttributes%28btn%2C%20aArr%5Bi%5D%29%3B%0A%09%09%09%09aArr%5Bi%5D.mCorrespondingMenuitem%20%3D%20btn%3B%0A%09%09%09%09btn.tab%20%3D%20aArr%5Bi%5D%3B%0A%09%09%09%7D%0A%09%09%09if%20%28aArr.length%20%21%3D%3D%20btnPerRow%29%20%7B%0A%09%09%09%09let%20dummies%20%3D%20btnPerRow%20-%20%28aArr.length%20%25%20btnPerRow%20%7C%7C%20btnPerRow%29%3B%0A%09%09%09%09while%20%28dummies%29%20%7B%0A%09%09%09%09%09dummies--%3B%0A%09%09%09%09%09row.appendChild%28%24.%24CNS%28%22toolbaritem%22%2C%20%7B%0A%09%09%09%09%09%09//width%3A%20parseInt%28btnWidth%29%2C%0A%09%09%09%09%09%09dummy%3A%20true%2C%0A%09%09%09%09%09%09disabled%3A%20true%2C%0A%09%09%09%09%09%09image%3A%20%22%22%2C%0A%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%3B%0A%09%09var%20t%20%3D%200%2C%0A%09%09%09tLen%20%3D%20tabs.length%3B%0A%09%09for%20%28%3B%20t%20%3C%20tLen%3B%20t++%29%20%7B%0A%09%09%09if%20%28tabs%5Bt%5D.pinned%29%20%7B%0A%09%09%09%09if%20%28%24._PanelShowPinnedTabs%29%0A%09%09%09%09%09pinnedTabs.push%28tabs%5Bt%5D%29%3B%0A%09%09%09%09continue%3B%0A%09%09%09%7D%0A%09%09%09breakPoint++%3B%0A%09%09%09tabRow.push%28tabs%5Bt%5D%29%3B%0A%09%09%09if%20%28%28tabRow.length%20%3D%3D%3D%20btnPerRow%29%20%7C%7C%20%28t%20+%201%29%20%3D%3D%3D%20tabs.length%29%20%7B%0A%09%09%09%09breakPoint%20%3D%200%3B%0A%09%09%09%09createRow%28tabRow%29%3B%0A%09%09%09%09tabRow%20%3D%20%5B%5D%3B%0A%09%09%09%09continue%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09if%20%28pinnedTabs.length%20%3E%200%20%26%26%20%24._PanelShowPinnedTabs%29%20%7B%0A%09%09%09let%20pinBox%20%3D%20aBox.insertBefore%28%24.%24CNS%28%22hbox%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22-pinned-tabs-box%22%2C%0A%09%09%09%7D%29%2C%20aBox.childNodes%5B0%5D%29%3B%0A%0A%09%09%09pinBox.appendChild%28%24.%24CNS%28%22spacer%22%2C%20%7B%0A%09%09%09%09flex%3A%201%0A%09%09%09%7D%29%29%3B%0A%0A%09%09%09let%20appendPinnedTab%20%3D%20function%28aPTab%29%20%7B%0A%09%09%09%09let%20btn%20%3D%20pinBox.appendChild%28%24.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09%09type%3A%20%22radio%22%2C%0A%09%09%09%09%09context%3A%20%22tabContextMenu%22%2C%0A%09%09%09%09%09autocheck%3A%20false%2C%0A%09%09%09%09%09group%3A%20%24._UID%20+%20%22-tabs-radio-group%22%2C%0A%09%09%09%09%09oncontextmenu%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%24._setButtonAttributes%28btn%2C%20aPTab%29%3B%0A%09%09%09%09aPTab.mCorrespondingMenuitem%20%3D%20btn%3B%0A%09%09%09%09btn.tab%20%3D%20aPTab%3B%0A%09%09%09%7D%3B%0A%09%09%09var%20p%20%3D%200%2C%0A%09%09%09%09pLen%20%3D%20pinnedTabs.length%3B%0A%09%09%09for%20%28%3B%20p%20%3C%20pLen%3B%20p++%29%20%7B%0A%09%09%09%09appendPinnedTab%28pinnedTabs%5Bp%5D%29%3B%0A%09%09%09%7D%0A%09%09%09pinBox.appendChild%28%24.%24CNS%28%22spacer%22%2C%20%7B%0A%09%09%09%09flex%3A%201%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09tabContainerListener%3A%20function%28aE%29%20%7B%0A%09%09var%20tab%20%3D%20aE.target%3B%0A%09%09var%20btn%20%3D%20tab.mCorrespondingMenuitem%3B%0A%09%09if%20%28%24.panel.state%20%21%3D%3D%20%22open%22%20%7C%7C%20%24.tooltip.hasAttribute%28%22_open%22%29%29%0A%09%09%09return%20true%3B%0A%09%09switch%20%28aE.type%29%20%7B%0A%09%09%09case%20%22TabAttrModified%22%3A%0A%09%09%09%09if%20%28btn%29%0A%09%09%09%09%09%24._setButtonAttributes%28btn%2C%20tab%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22TabClose%22%3A%0A%09%09%09case%20%22TabOpen%22%3A%0A%09%09%09case%20%22TabPinned%22%3A%0A%09%09%09case%20%22TabUnpinned%22%3A%0A%09%09%09%09clearTimeout%28%24._appendTabsToTabsBoxTimer%29%3B%0A%09%09%09%09%24._appendTabsToTabsBoxTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%24._appendButtonsToGroupsBox%28%24.%24%28%24._UID%20+%20%22-tabs-groups-box%22%29%29%3B%0A%09%09%09%09%09%24._appendTabsToTabsBox%28%24.%24%28%24._UID%20+%20%22-tabs-box%22%29%29%3B%0A%09%09%09%09%7D%2C%2050%29%3B%0A%09%09%09%09break%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09_setButtonAttributes%3A%20function%28aBtn%2C%20aTab%29%20%7B%0A%09%09if%20%28%21aBtn%20%7C%7C%20%21aTab%29%0A%09%09%09return%20true%3B%0A%09%09aBtn.setAttribute%28%22label%22%2C%20aTab.label%29%3B%0A%09%09aBtn.setAttribute%28%22crop%22%2C%20aTab.getAttribute%28%22crop%22%29%29%3B%0A%0A%09%09if%20%28aTab.hasAttribute%28%22busy%22%29%29%0A%09%09%09aBtn.setAttribute%28%22image%22%2C%20%22chrome%3A//global/skin/icons/loading_16.png%22%29%3B%0A%09%09else%0A%09%09%09aBtn.setAttribute%28%22image%22%2C%20aTab.getAttribute%28%22image%22%29%20%7C%7C%20%22chrome%3A//branding/content/icon16.png%22%29%3B%0A%0A%09%09if%20%28aTab.hasAttribute%28%22pending%22%29%29%0A%09%09%09aBtn.setAttribute%28%22pending%22%2C%20aTab.getAttribute%28%22pending%22%29%29%3B%0A%09%09else%0A%09%09%09aBtn.removeAttribute%28%22pending%22%29%3B%0A%0A%09%09if%20%28aTab.selected%29%0A%09%09%09aBtn.setAttribute%28%22checked%22%2C%20%22true%22%29%3B%0A%09%09else%0A%09%09%09aBtn.removeAttribute%28%22checked%22%29%3B%0A%0A%09%09if%20%28aTab.hasAttribute%28%22pinned%22%29%29%0A%09%09%09aBtn.setAttribute%28%22pinned%22%2C%20true%29%3B%0A%09%09else%0A%09%09%09aBtn.removeAttribute%28%22pinned%22%29%3B%0A%0A%09%09if%20%28aTab.hasAttribute%28%22muted%22%29%29%0A%09%09%09aBtn.setAttribute%28%22muted%22%2C%20true%29%3B%0A%09%09else%20if%20%28aTab.hasAttribute%28%22soundplaying%22%29%29%0A%09%09%09aBtn.setAttribute%28%22soundplaying%22%2C%20true%29%3B%0A%09%09else%20%7B%0A%09%09%09aBtn.removeAttribute%28%22muted%22%29%3B%0A%09%09%09aBtn.removeAttribute%28%22soundplaying%22%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09CSSLoader%3A%20function%28%29%20%7B%0A%09%09let%20css%20%3D%20%22@namespace%20url%28%22%20+%20xulns%20+%20%22%29%3B%5Cn%22%20+%20%24.getHelp%28%22StyleSheet%22%29%0A%09%09%09.replace%28/_U_I_D_/g%2C%20%24._UID%29%0A%09%09%09.replace%28/_I_C_O_N_S_I_Z_E_/g%2C%20%24._MaxIconSizeForTabButtonsInPanel%29%0A%09%09%09.replace%28/_S_E_L_F_I_D_/g%2C%20self.id%29%3B%0A%09%09if%20%28%21window%5B%24._UID%5D%5B%22StyleSheet%22%5D%29%20%7B%0A%09%09%09window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%3D%20css%3B%0A%09%09%09%24.styleSheet%28css%29%3B%0A%09%09%7D%20else%20if%20%28window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%26%26%20window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%21%3D%3D%20css%29%20%7B%0A%09%09%09%24.styleSheet%28window%5B%24._UID%5D%5B%22StyleSheet%22%5D%2C%20true%29%3B%0A%09%09%09window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%3D%20css%3B%0A%09%09%09%24.styleSheet%28css%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09handleInvertedImages%3A%20function%28%29%20%7B%0A%09%09let%20invImg%20%3D%20document.getElementsByClassName%28%22marked-for-invertion%22%29%3B%0A%09%09for%20%28let%20i%20%3D%200%3B%20i%20%3C%20invImg.length%3B%20i++%29%0A%09%09%09invImg%5Bi%5D.classList%5B%24._PanelInvertDarkIcons%20%3F%20%22add%22%20%3A%20%22remove%22%5D%28%22inverted-color-for-this-image%22%29%3B%0A%09%7D%2C%0A%0A%09DragAndDropHandler%3A%20%7B%0A%09%09onDragStart%3A%20function%28aE%29%20%7B%0A%09%09%09this._ensureTTClosing%28%29%3B%0A%09%09%09if%20%28%21this._isDraggable%28aE.target%29%29%0A%09%09%09%09return%20false%3B%0A%09%09%09aE.dataTransfer.setData%28%22text/plain%22%2C%20aE.target.tab._tPos%29%3B%0A%09%09%09aE.dataTransfer.effectAllowed%20%3D%20%22copy%22%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09_ensureTTClosing%3A%20function%28%29%20%7B%0A%09%09%09clearTimeout%28%24._hoverOpenPreviewTimer%29%3B%0A%09%09%09%24.tooltip.hidePopup%28%29%3B%0A%09%09%09%24._prevDoNotAllow%20%3D%20true%3B%0A%09%09%7D%2C%0A%0A%09%09_isDraggable%3A%20function%28aNode%29%20%7B%0A%09%09%09return%20aNode.localName%20%3D%3D%3D%20%22toolbarbutton%22%20%26%26%20%21aNode.hasAttribute%28%22dummy%22%29%3B%0A%09%09%7D%2C%0A%0A%09%09onDragOver%3A%20function%28aE%29%20%7B%0A%09%09%09this._ensureTTClosing%28%29%3B%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09onDrop%3A%20function%28aE%29%20%7B%0A%09%09%09this._ensureTTClosing%28%29%3B%0A%09%09%09if%20%28%21this._isDraggable%28aE.target%29%29%0A%09%09%09%09return%20false%3B%0A%09%09%09let%20tabIndex%20%3D%20parseInt%28aE.dataTransfer.getData%28%22text/plain%22%29%2C%2010%29%3B%0A%09%09%09let%20target%20%3D%20aE.composedTarget%3B%0A%09%09%09if%20%28target%20%26%26%20target.hasAttribute%28%22groupid%22%29%29%20%7B%0A%09%09%09%09let%20gID%20%3D%20parseInt%28target.getAttribute%28%22groupid%22%29%2C%2010%29%3B%0A%09%09%09%09if%20%28%24.GroupItems._activeGroupItem._children.length%20%3D%3D%3D%201%29%0A%09%09%09%09%09%24._setGroup%28gID%29%3B%0A%09%09%09%09//%20Had%20to%20use%20a%20custom%20_moveTabToGroupItem%20function%20because%20the%20built%20in%20messes%20up%20tab%20ordering.%20%AC%AC%0A%09%09%09%09let%20selTabs%20%3D%20%24.selectedTabs%3B%0A%09%09%09%09if%20%28selTabs.length%20%3E%3D%201%29%20%7B%0A%09%09%09%09%09for%20%28let%20i%20%3D%20selTabs.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%29%0A%09%09%09%09%09%09%24._moveTabToGroupItem%28gBrowser.mTabContainer.children%5BselTabs%5Bi%5D.tab._tPos%5D%2C%20gID%29%3B%0A%09%09%09%09%7D%20else%0A%09%09%09%09%09%24._moveTabToGroupItem%28gBrowser.mTabContainer.children%5BtabIndex%5D%2C%20gID%29%3B%0A%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%24._appendButtonsToGroupsBox%28%24.%24%28%24._UID%20+%20%22-tabs-groups-box%22%29%29%3B%0A%09%09%09%09%7D%2C%2010%29%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09let%20targetTab%20%3D%20target.tab%3B%0A%09%09%09%09if%20%28targetTab%29%20%7B%0A%09%09%09%09%09if%20%28tabIndex%20%3D%3D%3D%20targetTab._tPos%29%0A%09%09%09%09%09%09return%20false%3B%0A%09%09%09%09%09gBrowser.moveTabTo%28gBrowser.mTabContainer.children%5BtabIndex%5D%2C%20targetTab._tPos%29%3B%0A%09%09%09%09%7D%20else%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%09%09%09clearTimeout%28%24._appendTabsToTabsBoxTimer%29%3B%0A%09%09%09%24._appendTabsToTabsBoxTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09%09%24._appendTabsToTabsBox%28%24.%24%28%24._UID%20+%20%22-tabs-box%22%29%29%3B%0A%09%09%09%09%24.hasTabView%20%26%26%20%24.GroupItems.saveAll%28%29%3B%0A%09%09%09%09%24._prevDoNotAllow%20%3D%20false%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09OnHotSpotMouseOver%3A%20function%28aE%29%20%7B%0A%09%09clearTimeout%28%24._hoverOpenMainPanelTimer%29%3B%0A%09%09if%20%28gBrowser.visibleTabs.length%20%3C%20%24._PanelOpenOnHoverOverHotSpotsTrigger%20%7C%7C%0A%09%09%09%24.panel.state%20%3D%3D%3D%20%22open%22%29%0A%09%09%09return%20true%3B%0A%09%09console.info%28%24.panel.state%29%3B%0A%09%09%24._hoverOpenMainPanelTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09%24.panel.openPopup%28%24.panelAnchor%2C%20%24.panelPosition%2C%200%2C%20%24._PanelVerticalOffset%2C%20false%2C%20false%2C%20null%29%3B%0A%09%09%7D%2C%20%24._PanelOpenOnHoverDelay%29%3B%0A%09%09aE.stopPropagation%28%29%3B%0A%0A%09%7D%2C%0A%0A%09OnHotSpotMouseOut%3A%20function%28aE%29%20%7B%0A%09%09if%20%28%24.panel.state%20%21%3D%3D%20%22open%22%29%0A%09%09%09clearTimeout%28%24._hoverOpenMainPanelTimer%29%3B%0A%09%09aE.stopPropagation%28%29%3B%0A%09%7D%2C%0A%0A%09HandleHotSpots%3A%20function%28aRem%29%20%7B%0A%09%09let%20curHP%20%3D%20window%5B%24._UID%5D%5B%22ListOfHotSpots%22%5D%3B%0A%09%09if%20%28curHP%20%26%26%20curHP.length%20%3E%200%29%20%7B%0A%09%09%09curHP.forEach%28function%28aHPID%29%20%7B%0A%09%09%09%09let%20el%20%3D%20%24.%24%28aHPID%29%3B%0A%09%09%09%09el%20%26%26%20el.removeEventListener%28%22mouseover%22%2C%20%24.OnHotSpotMouseOver%2C%20false%29%3B%0A%09%09%09%09el%20%26%26%20el.removeEventListener%28%22mouseout%22%2C%20%24.OnHotSpotMouseOut%2C%20false%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%7D%0A%09%09if%20%28aRem%29%0A%09%09%09return%3B%0A%09%09let%20HPs%20%3D%20%24._PanelListOfHotSpotsIDs.split%28%22%2C%22%29.filter%28function%28aVal%29%20%7B%0A%09%09%09if%20%28aVal%20%21%3D%3D%20%22%22%29%0A%09%09%09%09return%20true%3B%0A%09%09%7D%29%3B%0A%09%09if%20%28HPs%20%26%26%20HPs.length%20%3E%200%29%20%7B%0A%09%09%09window%5B%24._UID%5D%5B%22ListOfHotSpots%22%5D%20%3D%20HPs%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09window%5B%24._UID%5D%5B%22ListOfHotSpots%22%5D.forEach%28function%28aHPID%29%20%7B%0A%09%09%09%09%09let%20el%20%3D%20%24.%24%28aHPID%29%3B%0A%09%09%09%09%09el%20%26%26%20el.addEventListener%28%22mouseover%22%2C%20%24.OnHotSpotMouseOver%2C%20false%29%3B%0A%09%09%09%09%09el%20%26%26%20el.addEventListener%28%22mouseout%22%2C%20%24.OnHotSpotMouseOut%2C%20false%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%2C%2010%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09HandlePrefListener%3A%20function%28aRem%29%20%7B%20//%20Can%27t%20add%20obs.%20to%20brach%20in%20here.%0A%09%09var%20prefs%20%3D%20%24.DefPrefs%3B%0A%09%09for%20%28let%20key%20in%20prefs%29%20%7B%0A%09%09%09let%20pref%20%3D%20%24.Branch%20+%20key%3B%0A%09%09%09if%20%28prefs.hasOwnProperty%28key%29%29%20%7B%0A%09%09%09%09if%20%28aRem%29%0A%09%09%09%09%09Services.prefs.removeObserver%28pref%2C%20%24.PrefListener%29%3B%0A%09%09%09%09else%0A%09%09%09%09%09Services.prefs.addObserver%28pref%2C%20%24.PrefListener%2C%20false%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09PrefListener%3A%20%7B%0A%09%09observe%3A%20function%28aSubject%2C%20aTopic%2C%20aPStr%29%20%7B%20//%20aPStr%20is%20the%20pref.%20name%20minus%20the%20branch%20name.%0A%09%09%09if%20%28aTopic%20%3D%3D%3D%20%22nsPref%3Achanged%22%29%20%7B%0A%09%09%09%09let%20prefName%20%3D%20aPStr.slice%28%24.Branch.length%29%3B%0A%09%09%09%09%24%5B%22_%22%20+%20prefName%5D%20%3D%20%24.gPref%28prefName%29%3B%0A%09%09%09%09switch%20%28prefName%29%20%7B%0A%09%09%09%09%09case%20%22ButtonImage%22%3A%0A%09%09%09%09%09case%20%22PanelKeepItOpen%22%3A%0A%09%09%09%09%09%09%24.selfDestroy%28%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22PanelInvertDarkIcons%22%3A%0A%09%09%09%09%09%09%24.handleInvertedImages%28%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22PanelHideGroupsRow%22%3A%0A%09%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09%09%24.PanelFunctions.HandleGroupsElements%28%29%3B%0A%09%09%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%09%09case%20%22PanelButtonGroupsPerRow%22%3A%0A%09%09%09%09%09%09%24._appendButtonsToGroupsBox%28%24.%24%28%24._UID%20+%20%22-tabs-groups-box%22%29%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22TabPreviewSendScroll%22%3A%0A%09%09%09%09%09%09let%20TPSSaddRem%20%3D%20%24._TabPreviewSendScroll%20%3F%20%22addEventListener%22%20%3A%20%22removeEventListener%22%3B%0A%09%09%09%09%09%09%24.canvas%5BTPSSaddRem%5D%28%22DOMMouseScroll%22%2C%20%24.PreviewFunctions.OnDOMScroll%2C%20false%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22TabPreviewSendClicks%22%3A%0A%09%09%09%09%09%09let%20TPSCaddRem%20%3D%20%24._TabPreviewSendClicks%20%3F%20%22addEventListener%22%20%3A%20%22removeEventListener%22%3B%0A%09%09%09%09%09%09%24.canvas%5BTPSCaddRem%5D%28%22click%22%2C%20%24.PreviewFunctions.OnClick%2C%20true%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22TabPreviewEnabled%22%3A%0A%09%09%09%09%09case%20%22TabPreviewShowToolbar%22%3A%0A%09%09%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09%09let%20val%20%3D%20%21%21%24._TabPreviewShowToolbar%20%7C%7C%20%21%21%24._TabPreviewEnabled%20%7C%7C%20false%3B%0A%09%09%09%09%09%09%09%24._tooltipAllowHovering%20%3D%20val%3B%0A%09%09%09%09%09%09%7D%2C%2010%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22PanelOpenOnHover%22%3A%0A%09%09%09%09%09case%20%22PanelOpenOnHoverDelay%22%3A%0A%09%09%09%09%09%09%24.HandleOpenOnHover%28%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22PanelListOfHotSpotsIDs%22%3A%0A%09%09%09%09%09case%20%22PanelOpenOnHoverOverHotSpotsTrigger%22%3A%0A%09%09%09%09%09%09%24.HandleHotSpots%28%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22MaxIconSizeForTabButtonsInPanel%22%3A%0A%09%09%09%09%09%09%24.CSSLoader%28%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22PanelVerticalOffset%22%3A%20//%20Destroy%20the%20freaking%20entire%20button%20so%20the%20vertical%20offset%20is%20respected.%20%AC%AC%0A%09%09%09%09%09%09if%20%28%21window%5B%24._UID%5D%5B%22SelfDestroyerListener%22%5D%29%20%7B%0A%09%09%09%09%09%09%09window%5B%24._UID%5D%5B%22SelfDestroyerListener%22%5D%20%3D%20true%3B%0A%09%09%09%09%09%09%09%24.panel.addEventListener%28%22popuphidden%22%2C%20function%20_%28aE%29%20%7B%0A%09%09%09%09%09%09%09%09this.removeEventListener%28%22popuphidden%22%2C%20_%2C%20false%29%3B%0A%09%09%09%09%09%09%09%09window%5B%24._UID%5D%5B%22SelfDestroyerListener%22%5D%20%3D%20false%3B%0A%09%09%09%09%09%09%09%09%24.selfDestroy%28%29%3B%0A%09%09%09%09%09%09%09%7D%2C%20false%29%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22PanelButtonTabsPerRow%22%3A%0A%09%09%09%09%09%09clearTimeout%28%24._appendTabsToTabsBoxTimer%29%3B%0A%09%09%09%09%09%09%24._appendTabsToTabsBoxTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09%09%24._appendTabsToTabsBox%28%24.%24%28%24._UID%20+%20%22-tabs-box%22%29%29%3B%0A%09%09%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09CreateDynamicTooltip%3A%20function%28%29%20%7B%0A%09%09if%20%28%21%24.dynamicTT%29%20%7B%0A%09%09%09%24.%24%28%22mainPopupSet%22%29.appendChild%28%24.%24CNS%28%22tooltip%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22_dynamic_tooltip%22%2C%0A%09%09%09%09cb_id%3A%20%24._UID%2C%0A%09%09%09%09onpopupshowing%3A%20%22document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.TabsManager.populateDynamicTooltip%28event%2C%20this%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09onpopuphiding%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09%09flex%3A%201%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09populateDynamicTooltip%3A%20function%28aE%2C%20aN%29%20%7B%0A%09%09aN.textContent%20%3D%20%22%22%3B%0A%0A%09%09if%20%28aE.target.triggerNode.id%20%3D%3D%3D%20self.id%29%20%7B%0A%09%09%09var%20grid%20%3D%20aN.appendChild%28%24.%24CNS%28%22grid%22%29%29%3B%0A%09%09%09var%20cols%20%3D%20grid.appendChild%28%24.%24CNS%28%22columns%22%29%29%3B%0A%09%09%09cols.appendChild%28%24.%24CNS%28%22column%22%2C%20%7B%0A%09%09%09%09flex%3A%202%0A%09%09%09%7D%29%29%3B%0A%09%09%09cols.appendChild%28%24.%24CNS%28%22column%22%2C%20%7B%0A%09%09%09%09flex%3A%203%0A%09%09%09%7D%29%29%3B%0A%09%09%09cols.appendChild%28%24.%24CNS%28%22column%22%2C%20%7B%0A%09%09%09%09flex%3A%201%0A%09%09%09%7D%29%29%3B%0A%09%09%09var%20rows%20%3D%20grid.appendChild%28%24.%24CNS%28%22rows%22%29%29%3B%0A%09%09%09//%20AppendRow%0A%09%09%09let%20AR%20%3D%20function%28aRowsNode%2C%20aLabel1%2C%20aLabel2%2C%20aLabel3%2C%20aEmpty%29%20%7B%0A%09%09%09%09let%20row%20%3D%20%24.%24CNS%28%22row%22%29%3B%0A%09%09%09%09if%20%28aEmpty%29%20%7B%0A%09%09%09%09%09row.appendChild%28%24.%24CNS%28%22label%22%2C%20%7B%0A%09%09%09%09%09%09value%3A%20%22%20%22%2C%0A%09%09%09%09%09%09width%3A%200%2C%0A%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09row.appendChild%28%24.%24CNS%28%22label%22%2C%20%7B%0A%09%09%09%09%09%09value%3A%20aLabel1%2C%0A%09%09%09%09%09%09style%3A%20%22font-weight%3A%20bold%3B%22%2C%0A%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%09row.appendChild%28%24.%24CNS%28%22label%22%2C%20%7B%0A%09%09%09%09%09%09value%3A%20aLabel2%2C%0A%09%09%09%09%09%09style%3A%20%22font-weight%3A%20bold%3B%22%2C%0A%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%09let%20desc%20%3D%20%24.%24CNS%28%22description%22%2C%20%7B%0A%09%09%09%09%09%09maxwidth%3A%20250%2C%0A%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09desc.textContent%20%3D%20aLabel3%3B%20//%20Use%20of%20%22textContent%22%20to%20achieve%20word%20wrap.%20%AC%AC%0A%09%09%09%09%09row.appendChild%28desc%29%3B%0A%09%09%09%09%7D%0A%09%09%09%09aRowsNode.appendChild%28row%29%3B%0A%09%09%09%7D%3B%0A%0A%09%09%09let%20btn%20%3D%20aE.target.triggerNode%3B%0A%09%09%09AR%28rows%2C%20btn.name%2C%20%22%u2192%22%2C%20%22ID%20%3D%20%22%20+%20btn.id.slice%2820%29%29%3B%0A%09%09%09aN.appendChild%28%24.%24CNS%28%22separator%22%29%29%3B%20//%20Empty%20space%0A%09%09%09let%20desc2%20%3D%20%24.%24CNS%28%22description%22%2C%20%7B%0A%09%09%09%09style%3A%20%22font-weight%3Abold%3B%22%2C%0A%09%09%09%7D%29%3B%0A%09%09%09//%20Use%20of%20%22textContent%22%20to%20achieve%20word%20wrap.%20%AC%AC%0A%09%09%09desc2.textContent%20%3D%20%22Read%20this%20button%20help%20for%20very%20important%20usage%20notes.%5Cn%22%20+%0A%09%09%09%09%22Right%20click%20on%20button%2C%20%5C%22Button%20Help%5C%22%20item.%22%3B%0A%09%09%09aN.appendChild%28desc2%29%3B%0A%09%09%09return%20true%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09selfDestroy%3A%20function%28%29%20%7B%0A%09%09clearTimeout%28%24._cleanSlateTimer%29%3B%0A%09%09%24._cleanSlateTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09self.destroy%28%22update%22%29%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09self.init%28%29%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%7D%2C%20100%29%3B%0A%09%7D%2C%0A%0A%09%24%3A%20function%28aId%29%20%7B%20//%20Return%20elements%20by%20Id%0A%09%09return%20document.getElementById%28aId%29%3B%0A%09%7D%2C%0A%0A%09setSelfImage%3A%20function%28%29%20%7B%0A%09%09switch%20%28%24._ButtonImage%29%20%7B%0A%09%09%09case%201%3A%20//%20Dark%20image%0A%09%09%09%09self.image%20%3D%20%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACJ0%22%20+%0A%09%09%09%09%09%22lEQVQ4jZ2Tz6sSURTHR19tqlVBPwkif4w7mWajOIPMnasIMw7+uv6a+SvaTZugXYLLeLMoo40LiWgjIoh%22%20+%0A%09%09%09%09%09%22v4cKNzujT9/JZBIFRCE6z0e1tozKpFXXgsznc7+ecxbkEsVMYY8ca5w6bvmM3Yw9fqdVqZLlcpkql0iM7%22%20+%0A%09%09%09%09%09%225XKZqlarPozx1d+FHZVK5aHP53vndru/ezyeH3ZcLtc3kiTfa5rmwRg7Dwkux2KxxzRNTwAAw0gkYtjQe%22%20+%0A%09%09%09%09%09%22Z4f0zR9wfP8E4zxpU3mlw0ghC8ghOepVGqYSCRO4/H4OB6Pj5PJ5DCTyXwGAAx5ntdsmVt2wVEoFHotiu%22%20+%0A%09%09%09%09%09%22IXWZY/FAqFaaFQuFgzlWV5Eo1GDYZh3tg2uLMVNJvNmwzD1ERRPC8Wi/ohBEEYhEKht/V6/faeQFVVNhw%22%20+%0A%09%09%09%09%09%22On4ii2C8Wi8YhJEnSw+Hwiaqq7FaAMb6GMb4OAHgKABil0+nJeuKeIJFI6ACAMcdxz2az2Q2M8X2i2+0+%22%20+%0A%09%09%09%09%09%228Pv9LwOBQF8QhBFC6HQTkGXZkGV5K0in07ogCKNgMKj7/f5XvV7PRTQaDZKiqLkkSWcIISObzfbz+byey%22%20+%0A%09%09%09%09%09%22+UMhNAAITTI5XLGuqcjhAxJks4oiprX63Uv0W63SZZl54qi9BVF0e1sJu/2FUXpsyw7b7VaXqLT6XghhD%22%20+%0A%09%09%09%09%09%22OO4z5BCKcQwo9/Ybp++7XT6XiJ5XJ51zTN55ZlaZZlHZum+Ucsyzq2LEtbLBal1Wp1b3NETozx0T+y/x/%22%20+%0A%09%09%09%09%09%22+p34Ccs6yiWZsYJoAAAAASUVORK5CYII%3D%22%3B%0A%09%09%09%09break%3B%0A%09%09%09case%202%3A%20//%20Light%20image%0A%09%09%09%09self.image%20%3D%20%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAsk%22%20+%0A%09%09%09%09%09%22lEQVQ4jWNgGJQgNCr+f2Jq1v/45PT/8cnp/xNTs/6HRsX/J0rzlBmz/+MCM2fPI2zI6TNncRpw+sxZwgb%22%20+%0A%09%09%09%09%09%22cuXsPpwF37t4jbMCbN29xGvDmzVv8BhSXV///9v07TgO+ff/+v7i8GrchK1etxakZBlauWovdgNVrN/zH%22%20+%0A%09%09%09%09%09%2253xkb6zftAXVEAMzG4Ia0YGBmQ3CEDNrR5INMLN2/E89FzAwMDDom1j9NzCzIQrrm1gRl6zpAgA/Aaw4c%22%20+%0A%09%09%09%09%09%22JqIzQAAAABJRU5ErkJggg%3D%3D%22%3B%0A%09%09%09%09break%3B%0A%09%09%09default%3A%0A%09%09%09%09self.removeAttribute%28%22image%22%29%3B%0A%09%09%09%09return%20true%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09%24CNS%3A%20function%28aElName%2C%20aAttrs%2C%20aNS%29%20%7B%20//%20Creates%20elements%0A%09%09var%20el%20%3D%20aNS%20%3F%0A%09%09%09document.createElementNS%28aNS%2C%20aElName%29%20%3A%0A%09%09%09document.createElement%28aElName%29%3B%0A%09%09if%20%28aAttrs%29%0A%09%09%09Object.keys%28aAttrs%29.forEach%28function%28n%29%20%7B%0A%09%09%09%09if%20%28aAttrs%5Bn%5D%20%21%3D%3D%20%22%22%29%0A%09%09%09%09%09el.setAttribute%28n%2C%20aAttrs%5Bn%5D%29%3B%0A%09%09%09%7D%29%3B%0A%09%09return%20el%3B%0A%09%7D%2C%0A%0A%09getHelp%3A%20function%28aPlaceholder%29%20%7B%20//%20Get%20specific%20data%2C%20surrounded%20by%20%22placeholders%22%2C%20from%20the%20Help%20tab.%0A%09%09return%20%24.%24%28self.id%29.getAttribute%28%22Help%22%29.split%28%22%3C%21--%22%20+%20aPlaceholder%20+%20%22--%3E%22%29%5B1%5D%3B%0A%09%7D%2C%0A%0A%09/**%0A%09%20*%20%5BparseXML%20description%5D%0A%09%20*%20This%20randomly%20throws%20an%20NS_ERROR_UNEXPECTED%20without%20absolutely%20NO%20DETAILS%21%21%21%20WTF%21%3F%21%3F%21%3F%21%0A%09%20*%20I%20have%20no%20effing%20idea%20how%20to%20fit%20this%21%21%21%21%21%0A%09%20*/%0A%09parseXML%3A%20function%28aXML%29%20%7B%20//%20Return%20parsed%20XML%0A%09%09aXML%20%3D%20aXML.replace%28/%3E%5Cs+%3C/g%2C%20%22%3E%3C%22%29%3B%20//%20Linearize%20XML.%0A%09%09aXML%20%3D%20aXML.replace%28/%5Ct+/gm%2C%20%22%22%29%3B%20//%20Remove%20all%20tabs.%0A%09%09let%20oParser%20%3D%20new%20DOMParser%28%29%3B%0A%09%09let%20oDOM%20%3D%20oParser.parseFromString%28aXML%2C%20%22text/xml%22%29%3B%0A%09%09let%20parseError%20%3D%20oDOM.documentElement.nodeName%20%3D%3D%3D%20%22parsererror%22%3B%0A%09%09dump%28parseError%20%3F%20%22error%20while%20parsing%22%20%3A%20oDOM.documentElement.nodeName%29%3B%0A%09%09if%20%28oDOM%20%26%26%20%21parseError%29%0A%09%09%09return%20oDOM.documentElement%3B%0A%09%09return%20false%3B%0A%09%09//%20return%20%28new%20DOMParser%29.parseFromString%28aXML%2C%20%22application/xml%22%29.documentElement%3B%0A%09%7D%2C%0A%0A%09promptme%3A%20function%28aMsg%2C%20aVal%29%20%7B%0A%09%09let%20retVal%20%3D%20%7B%0A%09%09%09value%3A%20aVal%0A%09%09%7D%3B%0A%09%09if%20%28Services.prompt.prompt%28null%2C%20self.name%2C%20aMsg%2C%20retVal%2C%20null%2C%20%7B%7D%29%29%0A%09%09%09return%20retVal.value%3B%0A%09%09else%0A%09%09%09return%20false%3B%0A%09%09return%20false%3B%0A%09%7D%2C%0A%0A%09styleSheet%3A%20function%28aCSS%2C%20aRemFlag%29%20%7B%0A%09%09var%20sss%20%3D%20Cc%5B%22@mozilla.org/content/style-sheet-service%3B1%22%5D.getService%28Ci.nsIStyleSheetService%29%3B%0A%09%09var%20uri%20%3D%20Services.io.newURI%28%22data%3Atext/css%2C%22%20+%20encodeURIComponent%28aCSS%29%2C%20null%2C%20null%29%3B%0A%09%09if%20%28sss.sheetRegistered%28uri%2C%20sss.USER_SHEET%29%29%0A%09%09%09sss.unregisterSheet%28uri%2C%20sss.USER_SHEET%29%3B%0A%09%09if%20%28aRemFlag%29%0A%09%09%09return%3B%0A%09%09sss.loadAndRegisterSheet%28uri%2C%20sss.USER_SHEET%29%3B%0A%09%7D%2C%0A%0A%09_UID%3A%20%22__tabs_manager_%22%20+%20self.id.slice%2814%29%2C%0A%09_hoverOpenPreviewTimer%3A%200%2C%0A%09_hoverOpenMainPanelTimer%3A%200%2C%0A%09_appendTabsToTabsBoxTimer%3A%200%2C%0A%09_PanelSelectTabOnHoverTimer%3A%200%2C%0A%09_cleanSlateTimer%3A%200%2C%0A%09_updatePreviewTimer%3A%200%2C%0A%09_ctrlKeyPressed%3A%20null%2C%0A%09_prevZoomedIn%3A%20null%2C%0A%09_prevDoNotAllow%3A%20null%2C%0A%09_tooltipAllowHovering%3A%20null%2C%0A%09_globalMM%3A%20Cc%5B%22@mozilla.org/globalmessagemanager%3B1%22%5D.getService%28Ci.nsIMessageListenerManager%29%2C%0A%09_tab%3A%20null%2C%0A%09_randomID%3A%20null%2C%0A%09_lastCanvasHeight%3A%20null%2C%0A%09_lastCanvasWidth%3A%20null%2C%0A%09get%20hasTabView%28%29%20%7B%0A%09%09return%20%22TabView%22%20in%20window%3B%0A%09%7D%2C%0A%09get%20_responseMsgID%28%29%20%7B%0A%09%09return%20%22CB%3ATabsManager%3AResponse%3A%22%20+%20self.id.slice%2814%29%20+%20%22-%22%3B%0A%09%7D%2C%0A%09get%20_updatePreviewMsgID%28%29%20%7B%0A%09%09return%20%22CB%3ATabsManager%3APreview%3A%22%20+%20self.id.slice%2814%29%20+%20%22-%22%20+%20%24._randomID%3B%0A%09%7D%2C%0A%09get%20_scrollMsgID%28%29%20%7B%0A%09%09return%20%22CB%3ATabsManager%3AScroll%3A%22%20+%20self.id.slice%2814%29%20+%20%22-%22%20+%20%24._randomID%3B%0A%09%7D%2C%0A%09get%20_emulateMsgID%28%29%20%7B%0A%09%09return%20%22CB%3ATabsManager%3AEmulate%3A%22%20+%20self.id.slice%2814%29%20+%20%22-%22%20+%20%24._randomID%3B%0A%09%7D%2C%0A%09get%20canvas%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22-tabs-preview-canvas%22%29%3B%0A%09%7D%2C%0A%09get%20optionsBox%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22-options-box%22%29%3B%0A%09%7D%2C%0A%09get%20panel%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22-main-panel%22%29%3B%0A%09%7D%2C%0A%09get%20tooltip%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22-tabs-box-tooltip%22%29%3B%0A%09%7D%2C%0A%09get%20tooltipLabel%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22-tabs-preview-title%22%29%3B%0A%09%7D%2C%0A%09get%20toolbar%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22-tabs-preview-toolbar%22%29%3B%0A%09%7D%2C%0A%09get%20selectedTabs%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22-tabs-box%22%29.getElementsByAttribute%28%22_multisel%22%2C%20%22*%22%29%3B%0A%09%7D%2C%0A%09get%20GroupItems%28%29%20%7B%20//%20Defined%20as%20a%20%22get%22%20because%20TabView%20is%20not%20loaded%20at%20browser%20start-up.%0A%09%09return%20TabView._window.GroupItems%3B%0A%09%7D%2C%0A%09get%20dynamicTT%28%29%20%7B%0A%09%09return%20%24.%24%28%24._UID%20+%20%22_dynamic_tooltip%22%29%3B%0A%09%7D%2C%0A%0A%7D%3B%0A%0Athis.TabsManager.Branch%20%3D%20%22CB.TabsManager.Id%22%20+%20self.id.slice%2820%29%20+%20%22.%22%3B%0A%0Athis.TabsManager.gPref%20%3D%20function%28aKey%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getBranch%28%24.Branch%29%3B%0A%09switch%20%28typeof%20%24.DefPrefs%5BaKey%5D%29%20%7B%0A%09%09case%20%22boolean%22%3A%0A%09%09%09return%20branch.getBoolPref%28aKey%29%3B%0A%09%09case%20%22number%22%3A%0A%09%09%09return%20branch.getIntPref%28aKey%29%3B%0A%09%09case%20%22string%22%3A%0A%09%09%09return%20branch.getComplexValue%28aKey%2C%20Ci.nsISupportsString%29.data%3B%0A%09%7D%0A%09return%20null%3B%0A%7D%3B%0A%0Athis.TabsManager.sPref%20%3D%20function%28aKey%2C%20aVal%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getBranch%28%24.Branch%29%3B%0A%09switch%20%28typeof%20aVal%29%20%7B%0A%09%09case%20%22boolean%22%3A%0A%09%09%09branch.setBoolPref%28aKey%2C%20aVal%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22number%22%3A%0A%09%09%09branch.setIntPref%28aKey%2C%20aVal%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22string%22%3A%0A%09%09%09let%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%09%09%09str.data%20%3D%20aVal%3B%0A%09%09%09branch.setComplexValue%28%28aKey%29%2C%20Ci.nsISupportsString%2C%20str%29%3B%0A%09%09%09break%3B%0A%09%7D%0A%7D%3B%0A%0Athis.TabsManager.InitPrefs%20%3D%20function%28%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getDefaultBranch%28%24.Branch%29%2C%0A%09%09defaults%20%3D%20%24.DefPrefs%3B%0A%09for%20%28let%20key%20in%20defaults%29%20%7B%0A%09%09if%20%28defaults.hasOwnProperty%28key%29%29%20%7B%0A%09%09%09let%20val%20%3D%20defaults%5Bkey%5D%3B%0A%09%09%09switch%20%28typeof%20val%29%20%7B%0A%09%09%09%09case%20%22boolean%22%3A%0A%09%09%09%09%09branch.setBoolPref%28key%2C%20val%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22number%22%3A%0A%09%09%09%09%09branch.setIntPref%28key%2C%20val%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22string%22%3A%0A%09%09%09%09%09let%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%09%09%09%09%09str.data%20%3D%20val%3B%0A%09%09%09%09%09branch.setComplexValue%28%28key%29%2C%0A%09%09%09%09%09%09Ci.nsISupportsString%2C%20str%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%7D%3B%0A%0Athis.TabsManager.DefPrefs%20%3D%20%7B%0A%09ButtonImage%3A%202%2C%0A%09MaxIconSizeForTabButtonsInPanel%3A%2018%2C%0A%09PanelButtonTabsPerRow%3A%2010%2C%0A%09PanelButtonTabsPerRowAuto%3A%20true%2C%0A%09PanelButtonTabsPerRowAutoWidth%3A%20120%2C%0A%09PanelHideGroupsRow%3A%20false%2C%0A%09PanelInvertDarkIcons%3A%20false%2C%0A%09PanelMiddleClickOnTabAction%3A%201%2C%0A%09PanelSelectTabOnHover%3A%20false%2C%0A%09PanelShowPinnedTabs%3A%20false%2C%0A%09PanelVerticalOffset%3A%2032%2C%0A%09TabPreviewEnabled%3A%20true%2C%0A%09TabPreviewLoadUnloadedTabs%3A%20true%2C%0A%09TabPreviewAutomaticSize%3A%20true%2C%0A%09TabPreviewAutomaticSizePercentage%3A%2030%2C%0A%09TabPreviewRequireControlKey%3A%20false%2C%0A%09TabPreviewSendClicks%3A%20true%2C%0A%09TabPreviewSendScroll%3A%20true%2C%0A%09TabPreviewShowToolbar%3A%20true%2C%0A%09TabPreviewWidth%3A%20360%2C%0A%09TabPreviewHeight%3A%20225%2C%0A%09TabPreviewZoomFactor%3A%20100%2C%0A%0A%09PanelSelectTabOnHoverDelay%3A%20200%2C%0A%09TabPreviewShowDelay%3A%20200%2C%0A%09PanelButtonGroupsPerRow%3A%208%2C%0A%09PanelKeepItOpen%3A%20false%2C%0A%09PanelListOfHotSpotsIDs%3A%20%22%22%2C%0A%09PanelOpenOnHoverOverHotSpotsTrigger%3A%2020%2C%0A%09PanelOpenOnHover%3A%20false%2C%0A%09PanelOpenOnHoverDelay%3A%20200%2C%0A%7D%3B%0A%0Athis.TabsManager.Init%28%29%3B%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5Bif%28%21event.target%20%26%26%20%21this.disabled%29%0A%09this.TabsManager.togglePanel%28%29%3B%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%uD835%uDDDC%uD835%uDDFA%uD835%uDDFD%uD835%uDDFC%uD835%uDDFF%uD835%uDE01%uD835%uDDEE%uD835%uDDFB%uD835%uDE01%20%uD835%uDDFB%uD835%uDDFC%uD835%uDE01%uD835%uDDF2%uD835%uDE00%0A%u26AB%20%uD835%uDDD7%uD835%uDDE2%20%uD835%uDDE1%uD835%uDDE2%uD835%uDDE7%20%uD835%uDDF6%uD835%uDDFB%uD835%uDE00%uD835%uDE01%uD835%uDDEE%uD835%uDDF9%uD835%uDDF9%20%uD835%uDDFA%uD835%uDDFC%uD835%uDDFF%uD835%uDDF2%20%uD835%uDE01%uD835%uDDF5%uD835%uDDEE%uD835%uDDFB%20%uD835%uDDFC%uD835%uDDFB%uD835%uDDF2%20%uD835%uDE03%uD835%uDDF2%uD835%uDDFF%uD835%uDE00%uD835%uDDF6%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDFC%uD835%uDDF3%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%20%uD835%uDDEE%uD835%uDE01%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF2%20%uD835%uDE00%uD835%uDDEE%uD835%uDDFA%uD835%uDDF2%20%uD835%uDE01%uD835%uDDF6%uD835%uDDFA%uD835%uDDF2%u2757%u2757%u2757%0A%u26AB%20%uD835%uDDD7%uD835%uDDE2%20%uD835%uDDE1%uD835%uDDE2%uD835%uDDE7%20%uD835%uDDF0%uD835%uDDF9%uD835%uDDFC%uD835%uDDFB%uD835%uDDF2%20%uD835%uDE01%uD835%uDDF5%uD835%uDDF6%uD835%uDE00%20%uD835%uDDEF%uD835%uDE02%uD835%uDE01%uD835%uDE01%uD835%uDDFC%uD835%uDDFB%u2757%u2757%u2757%0A%u26AB%20If%20you%20did%20any%20of%20the%20previous%20actions%2C%20delete%20all%20extra%20buttons%20leaving%20only%20one%20version%20of%20%uD835%uDDE0%uD835%uDE02%uD835%uDDF9%uD835%uDE01%uD835%uDDF6%20%uD835%uDDE6%uD835%uDDF2%uD835%uDDEE%uD835%uDDFF%uD835%uDDF0%uD835%uDDF5%20and%20restart%20your%20application.%0A%0A%uD835%uDDEA%uD835%uDDD4%uD835%uDDE5%uD835%uDDE1%uD835%uDDDC%uD835%uDDE1%uD835%uDDDA%u2757%u2757%20%uD835%uDDD5%uD835%uDDD8%20%uD835%uDDD6%uD835%uDDD4%uD835%uDDE5%uD835%uDDD8%uD835%uDDD9%uD835%uDDE8%uD835%uDDDF%20%uD835%uDDDC%uD835%uDDD9%20%uD835%uDDEC%uD835%uDDE2%uD835%uDDE8%20%uD835%uDDD8%uD835%uDDD7%uD835%uDDDC%uD835%uDDE7%20%uD835%uDDE7%uD835%uDDDB%uD835%uDDD8%20%uD835%uDDDB%uD835%uDDD8%uD835%uDDDF%uD835%uDDE3%20%uD835%uDDE7%uD835%uDDD4%uD835%uDDD5%20%uD835%uDDE2%uD835%uDDD9%20%uD835%uDDE7%uD835%uDDDB%uD835%uDDDC%uD835%uDDE6%20%uD835%uDDD5%uD835%uDDE8%uD835%uDDE7%uD835%uDDE7%uD835%uDDE2%uD835%uDDE1%u2757%u2757%u2757%0A%uD835%uDDDC%uD835%uDDE7%20%uD835%uDDD6%uD835%uDDE2%uD835%uDDE8%uD835%uDDDF%uD835%uDDD7%20%uD835%uDDD5%uD835%uDDE5%uD835%uDDD8%uD835%uDDD4%uD835%uDDDE%20%uD835%uDDDC%uD835%uDDE7%uD835%uDDE6%20%uD835%uDDD9%uD835%uDDE8%uD835%uDDE1%uD835%uDDD6%uD835%uDDDC%uD835%uDDE2%uD835%uDDE1%uD835%uDDD4%uD835%uDDDF%uD835%uDDDC%uD835%uDDE7%uD835%uDDEC%u2757%u2757%u2757%0A%0A%uD835%uDDDA%uD835%uDDF2%uD835%uDDFB%uD835%uDDF2%uD835%uDDFF%uD835%uDDEE%uD835%uDDF9%20%uD835%uDDFB%uD835%uDDFC%uD835%uDE01%uD835%uDDF2%uD835%uDE00%0AInside%20the%20Help%20tab%20of%20this%20button%20can%20be%20found%20the%20CSS%20style%20sheet%20to%20customize%20the%20appearance%20of%20every%20part%20of%20the%20elements%20created%20by%20this%20button.%0A%0A%5B%2C%5D%0A%26lt%3B%21--StyleSheet--%26gt%3B%0A/*%20FROM%20THIS%20POINT%20DOWN%20DO%20NOT%20TOUCH%20ANYTHING%20UNLESS%20YOU%20KNOW%20WHAT%20YOU%20ARE%20DOING%21%21%21%20*/%0A/*%20The%20tab%20item%20in%20the%20main%20panel%20when%20the%20tab%20is%20selected%20*/%0A%23_U_I_D_-main-panel%20toolbarbutton%5Bchecked%3D%22true%22%5D%20%7B%0A%09font-weight%3A%20600%20%21important%3B%0A%7D%0A/*%20Toolbarbuttons%20looking%20like%20buttons.%20*/%0A%23_U_I_D_-main-panel%20toolbarbutton%20%7B%0A%09-moz-appearance%3A%20button%20%21important%3B%0A%09padding%3A%201px%20%21important%3B%0A%7D%0A/*%20Show%20toolbarbutton%20label%20and%20align%20it%20to%20its%20icon%20*/%0A%23_U_I_D_-main-panel%20toolbarbutton%20.toolbarbutton-text%20%7B%0A%09display%3A%20inline-block%20%21important%3B%0A%09text-align%3A%20left%20%21important%3B%0A%7D%0A/*%20Image%20for%20tab%20items%20with%20mutted%20sound%20*/%0A%23_U_I_D_-main-panel%20toolbarbutton%5Bmutted%5D%3Aafter%20%7B%0A%09/*content%3A%20url%28%22chrome%3A//browser/skin/tabbrowser/tab-audio.svg%23tab-audio-muted-white%22%29%20%21important%3B*/%20/*%20Light%20icon%20*/%0A%09content%3A%20url%28%22chrome%3A//browser/skin/tabbrowser/tab-audio.svg%23tab-audio-muted%22%29%20%21important%3B%20/*%20Dark%20icon%20*/%0A%09display%3A%20block%20%21important%3B%0A%09clear%3A%20both%20%21important%3B%0A%09position%3A%20absolute%20%21important%3B%0A%7D%0A/*%20Image%20for%20tab%20items%20with%20sound%20playing%20*/%0A%23_U_I_D_-main-panel%20toolbarbutton%5Bsoundplaying%5D%3Aafter%20%7B%0A%09/*content%3A%20url%28%22chrome%3A//browser/skin/tabbrowser/tab-audio.svg%23tab-audio-white%22%29%20%21important%3B*/%20/*%20Light%20icon%20*/%0A%09content%3A%20url%28%22chrome%3A//browser/skin/tabbrowser/tab-audio.svg%23tab-audio%22%29%20%21important%3B%20/*%20Dark%20icon%20*/%0A%09display%3A%20block%20%21important%3B%0A%09clear%3A%20both%20%21important%3B%0A%09position%3A%20absolute%20%21important%3B%0A%7D%0A/*%20Pinned%20tab%20items%20*/%0A%23_U_I_D_-pinned-tabs-box%20toolbarbutton%20.toolbarbutton-text%20%7B%0A%09display%3A%20none%20%21important%3B%0A%7D%0A/*%20Hide%20image%20from%20groups%20toolbarbuttons%20because%20there%20is%20none%20applied%20and%20%22we%20need%22%20the%20space%20*/%0A%23_U_I_D_-tabs-groups-box%20.tabs-groups-button%20.toolbarbutton-icon%20%7B%0A%09display%3A%20none%20%21important%3B%0A%7D%0A/*%20Just%20some%20padding%20for%20the%20tab%20items%20container%20*/%0A%23_U_I_D_-tabs-box%20%7B%0A%09padding%3A%205px%20%21important%3B%0A%7D%0A/*%20Style%20for%20%22multi%20selected%22%20tabs%20buttons%20*/%0A%23tabContextMenu%20menuitem%5B_multisel%3D%22true%22%5D%2C%0A%23_U_I_D_-tabs-box%20toolbarbutton%5B_multisel%3D%22true%22%5D%20%7B%0A%09color%3A%20darkorange%20%21important%3B%0A%09text-shadow%3A%201px%200px%200px%20darkorange%20%21important%3B%0A%09box-shadow%3A%200%200%202px%200%20darkorange%20%21important%3B%0A%7D%0A/*%20Fixed%20size%20for%20buttons%20images%20*/%0A/*%20DO%20NOT%20TOUCH%20THIS%21%21%21%20It%27s%20used%20by%20the%20option%20called%20%22MaxIconSizeForTabButtonsInPanel%22%20*/%0A%23_U_I_D_-tabs-box%20.toolbarbutton-icon%20%7B%0A%09min-width%3A%20_I_C_O_N_S_I_Z_E_px%20%21important%3B%0A%09min-height%3A%20_I_C_O_N_S_I_Z_E_px%20%21important%3B%0A%09max-width%3A%20_I_C_O_N_S_I_Z_E_px%20%21important%3B%0A%09max-height%3A%20_I_C_O_N_S_I_Z_E_px%20%21important%3B%0A%7D%0A/*%20Filter%20to%20%22invert%22%20the%20color%20of%20some%20icons%20*/%0A%23_U_I_D_-tabs-preview-toolbar%20toolbarbutton%3Anot%28%5B_active%3D%22true%22%5D%29.inverted-color-for-this-image%20.toolbarbutton-icon%20%2C%20/*%20The%20toolbar%20button%20icons%20from%20the%20tab%20preview%20toolbar%20*/%0Amenuitem.inverted-color-for-this-image%20.menu-iconic-icon%20%2C%0A%23_U_I_D_-main-panel%20toolbarbutton%3Anot%28%23_U_I_D_-reset-groups-button%29.inverted-color-for-this-image%20.toolbarbutton-icon%20%7B%0A%09filter%3A%20url%28%22data%3Aimage/svg+xml%3Butf8%2C%26lt%3Bsvg%20height%3D%270%27%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%26gt%3B%26lt%3Bfilter%20id%3D%27white%27%20x%3D%270%25%27%20y%3D%270%25%27%20width%3D%27100%25%27%20height%3D%27100%25%27%20%26gt%3B%26lt%3BfeComponentTransfer%26gt%3B%26lt%3BfeFuncR%20type%3D%27table%27%20tableValues%3D%27.6%200%27/%26gt%3B%26lt%3BfeFuncG%20type%3D%27table%27%20tableValues%3D%27.6%200%27/%26gt%3B%26lt%3BfeFuncB%20type%3D%27table%27%20tableValues%3D%27.6%200%27/%26gt%3B%26lt%3B/feComponentTransfer%26gt%3B%26lt%3B/filter%26gt%3B%26lt%3B/svg%26gt%3B%23white%22%29%20%21important%3B%0A%7D%0A%23_U_I_D_-tabs-preview-toolbar%20toolbarbutton%5B_active%3D%22true%22%5D%20.toolbarbutton-icon%20%7B%0A%09filter%3A%20none%20%21important%3B%0A%7D%0A/*%20Tab%20preview%20tweaks%20*/%0A/*%20The%20entire%20tab%20preview%20panel%20*/%0A%23_U_I_D_-tabs-box-tooltip%20%7B%0A%09-moz-appearance%3A%20none%20%21important%3B%0A%09border%3A%20none%20%21important%3B%0A%09border-radius%3A%205px%20%21important%3B%0A%09padding%3A%200%20%21important%3B%0A%09background-color%3A%20-moz-Dialog%20%21important%3B%0A%09color%3A%20-moz-DialogText%20%21important%3B%0A/*%09background-color%3A%20Highlight%20%21important%3B%0A%09color%3A%20HighlightText%20%21important%3B*/%0A/*%09background-color%3A%20-moz-Field%20%21important%3B%0A%09color%3A%20-moz-FieldText%20%21important%3B*/%0A%7D%0A/*%20Preview%20panel%20show%20animation%20*/%0A%23_U_I_D_-tabs-box-tooltip%20%7B%0A%09transition-duration%3A%20200ms%2C%20200ms%20%21important%3B%0A%09transition-property%3A%20opacity%2C%20transform%20%21important%3B%0A%09transition-timing-function%3A%20ease-out%20%21important%3B%0A%7D%0A%23_U_I_D_-tabs-box-tooltip%3Anot%28%5B_open%5D%29%20%7B%0A%09transform%3A%20translateY%28-8px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-tabs-box-tooltip%3Anot%28%5B_open%5D%29%20%7B%0A%09opacity%3A%200%20%21important%3B%0A%7D%0A/*%20The%20box%20that%20contains%20the%20tab%20preview%20label%2C%20toolbar%20and%20canvas%20*/%0A%23_U_I_D_-tabs-preview-container%20%7B%0A%09padding%3A%203px%20%21important%3B%0A%09border%3A%20none%20%21important%3B%0A%09box-shadow%3A%20none%20%21important%3B%0A%7D%0A/*%20Tab%20preview%20toolbar%20*/%0A%23_U_I_D_-tabs-preview-toolbar%20%7B%0A%09-moz-appearance%3A%20none%20%21important%3B%0A%09opacity%3A%201%20%21important%3B%0A%09z-index%3A%201%20%21important%3B%0A%09background%3A%20none%20%21important%3B%0A%09border-bottom%3A%201px%20solid%20rgba%280%2C%200%2C%200%2C%200%29%20%21important%3B%0A%09margin%3A%200%20%21important%3B%0A%09padding%3A%200%20%21important%3B%0A%7D%0A/*%20Toolbar%20buttons%20in%20tab%20preview%20toolbar%20*/%0A%23_U_I_D_-tabs-preview-toolbar%20%26gt%3B%20toolbarbutton%20%7B%0A%09-moz-appearance%3A%20none%20%21important%3B%0A%09border%3A%20none%20%21important%3B%0A%09margin%3A%200%20%21important%3B%0A%09padding%3A%202px%20%21important%3B%0A%09width%3A%2018px%20%21important%3B%0A%09height%3A%2018px%20%21important%3B%0A%09background%3A%20none%20%21important%3B%0A%7D%0A/*%20Toolbar%20button%20icons%20in%20tab%20preview%20toolbar%20*/%0A%23_U_I_D_-tabs-preview-toolbar%20%26gt%3B%20toolbarbutton%20.toolbarbutton-icon%20%7B%0A%09margin%3A%200%20%21important%3B%0A%09padding%3A%200%20%21important%3B%0A%7D%0A/*%20Hovered%20toolbar%20buttons%20in%20tab%20preview%20toolbar%20*/%0A%23_U_I_D_-tabs-preview-toolbar%20%26gt%3B%20toolbarbutton%3Anot%28%5Bdisabled%3D%22true%22%5D%29%3Ahover%20%7B%0A%09border-radius%3A%202px%20%21important%3B%0A%09background-color%3A%20hsla%28117%2C%2096%25%2C%2037%25%2C.3%29%20%21important%3B%0A%7D%0A/*%20The%20label%20of%20each%20toolbar%20button%20is%20hidden%20*/%0A%23_U_I_D_-tabs-preview-toolbar%20%26gt%3B%20toolbarbutton%20.toolbarbutton-text%20%7B%0A%09display%3A%20none%20%21important%3B%0A%7D%0A/*%20Images%20*/%0A%23_U_I_D_-rename_group%2C%0A%23_U_I_D_-delete_group%2C%0A%23_U_I_D_-tabs-preview-toolbar%20%26gt%3B%20toolbarbutton%2C%0A%23_U_I_D_-pin_unpin_selected_tabs%2C%0A%23_U_I_D_-reload_selected_tabs%2C%0A%23_U_I_D_-close_selected_tabs%2C%0A%23_U_I_D_-new-tab-button%2C%0A%23_U_I_D_-hide-groups-box-button%5B_checked%3D%22false%22%5D%2C%0A%23_U_I_D_-inline-options-button%5B_checked%3D%22false%22%5D%2C%0A%23_U_I_D_-hide-groups-box-button%5B_checked%3D%22true%22%5D%2C%0A%23_U_I_D_-inline-options-button%5B_checked%3D%22true%22%5D%2C%0A%23_U_I_D_-main-panel%20.tabs-manager-options-buttons%20toolbarbutton%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%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%22%29%20%21important%3B%0A%7D%0A/*%20The%20image%20for%20each%20toolbar%20button%20*/%0A%23_U_I_D_-tabs-preview-back-button%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%2016px%2C%2016px%2C%200px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-tabs-preview-forward-button%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%2032px%2C%2016px%2C%2016px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-tabs-preview-reload-button%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%2048px%2C%2016px%2C%2032px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-tabs-preview-reload-button%5B_loading%3D%22true%22%5D%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%2064px%2C%2016px%2C%2048px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-tabs-preview-close-button%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%2080px%2C%2016px%2C%2064px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-pin_unpin_selected_tabs%2C%0A%23_U_I_D_-tabs-preview-pin-button%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%2096px%2C%2016px%2C%2080px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-tabs-preview-pin-button%5B_active%3D%22true%22%5D%20%7B%0A%09-moz-image-region%3A%20rect%2816px%2C%2096px%2C%2032px%2C%2080px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-tabs-preview-zoom-button%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%20112px%2C%2016px%2C%2096px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-tabs-preview-zoom-button%5B_active%3D%22true%22%5D%20%7B%0A%09-moz-image-region%3A%20rect%2816px%2C%20112px%2C%2032px%2C%2096px%29%20%21important%3B%0A%7D%0A.tabs-manager-options-buttons%20%23_U_I_D_-add-group-button%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%20192px%2C%2016px%2C%20176px%29%20%21important%3B%0A%7D%0A.tabs-manager-options-buttons%20%23_U_I_D_-reset-groups-button%20%7B%0A%09-moz-image-region%3A%20rect%2816px%2C%20160px%2C%2032px%2C%20144px%29%20%21important%3B%0A%7D%0A.tabs-manager-options-buttons%20%23_U_I_D_-open-options-button%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%20176px%2C%2016px%2C%20160px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-new-tab-button%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%20208px%2C%2016px%2C%20192px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-hide-groups-box-button%5B_checked%3D%22false%22%5D%2C%0A%23_U_I_D_-inline-options-button%5B_checked%3D%22false%22%5D%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%20128px%2C%2016px%2C%20112px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-hide-groups-box-button%5B_checked%3D%22true%22%5D%2C%0A%23_U_I_D_-inline-options-button%5B_checked%3D%22true%22%5D%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%20144px%2C%2016px%2C%20128px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-rename_group%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%20240px%2C%2016px%2C%20224px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-reload_selected_tabs%20%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%2048px%2C%2016px%2C%2032px%29%20%21important%3B%0A%7D%0A%23_U_I_D_-delete_group%2C%0A%23_U_I_D_-close_selected_tabs%20%20%7B%0A%09-moz-image-region%3A%20rect%280px%2C%20224px%2C%2016px%2C%20208px%29%20%21important%3B%0A%7D%0A/*%20The%20toolbar%20button%20when%20is%20disabled%20*/%0A%23_U_I_D_-tabs-preview-toolbar%20%26gt%3B%20toolbarbutton%5Bdisabled%3D%22true%22%5D%20%7B%0A%09opacity%3A%200.35%20%21important%3B%0A%7D%0A/*%20The%20label%20in%20the%20tab%20preview%20*/%0A%23_U_I_D_-tabs-preview-title%20%7B%0A%09text-align%3A%20center%20%21important%3B%0A%7D%0A/*%20The%20label%2C%20canvas%20and%20toolbar%20in%20the%20tab%20preview%20*/%0A%23_U_I_D_-tabs-preview-toolbar%2C%0A%23_U_I_D_-tabs-preview-canvas%2C%0A%23_U_I_D_-tabs-preview-title%20%7B%0A%09padding%3A%203px%200%203px%200%20%21important%3B%0A%7D%0A/*%20Size%20for%20the%20options%20buttons%20inside%20the%20main%20panel%20*/%0A%23_U_I_D_-main-panel%20.tabs-manager-options-buttons%20toolbarbutton%20.toolbarbutton-icon%20%7B%0A%09max-width%3A%2016px%20%21important%3B%0A%09max-height%3A%2016px%20%21important%3B%0A%7D%0A/*%20Set%20some%20tab%20separation%20for%20Normal%20tabs%20*/%0A%23_U_I_D_tabs-box-grid%20%26gt%3B%20columns%20%26gt%3B%20column%20%7B%0A%09padding-left%3A%203px%20%21important%3B%0A%09padding-right%3A%203px%20%21important%3B%0A%7D%0A%23_U_I_D_tabs-box-grid%20%26gt%3B%20rows%20%26gt%3B%20row%20%7B%0A%09padding-top%3A%203px%20%21important%3B%0A%7D%0A/*%20Set%20some%20tab%20separation%20for%20Pinned%20tabs%20*/%0A%23_U_I_D_-pinned-tabs-box%20%26gt%3B%20toolbarbutton%20%7B%0A%09margin-left%3A%203px%20%21important%3B%0A%09margin-right%3A%203px%20%21important%3B%0A%7D%0A%26lt%3B%21--StyleSheet--%26gt%3B%0A%09%20width%3D%22_W_I_D_T_H_%22%0A%09%20maxwidth%3D%22_W_I_D_T_H_%22%0A%26lt%3B%21--MainPanel--%26gt%3B%26lt%3B%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%26gt%3B%0A%26lt%3Bpanel%20id%3D%22_U_I_D_-main-panel%22%0A%09%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%0A%09%20orient%3D%22vertical%22%0A%09%20flip%3D%22slide%22%0A%09%20cb_id%3D%22_U_I_D_%22%0A%09%20level%3D%22parent%22%0A%09%20consumeoutsideclicks%3D%22false%22%0A%09%20noautohide%3D%22_N_O_H_I_D_E_%22%0A%09%20onmouseout%3D%22event.stopPropagation%28%29%3B%22%0A%09%20onclick%3D%22event.stopPropagation%28%29%3B%22%0A%09%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%20onpopupshowing%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.OnPanelShowing%28event%2C%20this%29%3B%22%0A%09%20onpopuphiding%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.OnPanelHidden%28event%2C%20this%29%3B%22%26gt%3B%0A%09%26lt%3Bhbox%20id%3D%22_U_I_D_-main-panel-box%22%26gt%3B%0A%09%09%26lt%3Bvbox%26gt%3B%0A%09%09%09%26lt%3Bvbox%20id%3D%22_U_I_D_-tabs-groups-box%22%0A%09%09%09%09%20%20align%3D%22center%22%0A%09%09%09%09%20%20_group%3D%22true%22%0A%09%09%09%09%20%20hidden%3D%22_N_O_G_R_O_U_P_S_%22%0A%09%09%09%09%20%20context%3D%22_U_I_D_-tabs-groups-box-context%22/%26gt%3B%0A%09%09%09%26lt%3Bvbox%20id%3D%22_U_I_D_-tabs-box%22%0A%09%09%09%09%20%20onclick%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.OnItemClick%28event%29%3Bevent.stopPropagation%28%29%3B%22%0A%09%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%09%20%20oncontextmenu%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%09%20%20onmousemove%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.OnMouseMoveItem%28event%29%3B%22%0A%09%09%09%09%20%20onmouseover%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.OnMouseOverItem%28event%29%3B%22%0A%09%09%09%09%20%20onmouseout%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.OnMouseOutItem%28event%29%3B%22%0A%09%09%09%09%20%20ondragstart%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.DragAndDropHandler.onDragStart%28event%29%3B%22%0A%09%09%09%09%20%20ondragover%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.DragAndDropHandler.onDragOver%28event%29%3B%22%0A%09%09%09%09%20%20ondrop%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.DragAndDropHandler.onDrop%28event%29%3B%22/%26gt%3B%0A%09%09%26lt%3B/vbox%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%26lt%3Bvbox%20maxwidth%3D%2248%22%20class%3D%22tabs-manager-options-buttons%22%26gt%3B%0A%09%09%09%26lt%3Btoolbarbutton%20id%3D%22_U_I_D_-hide-groups-box-button%22%0A%09%09%09%09%09%09%20%20%20flex%3D%22999%22%0A%09%09%09%09%09%09%20%20%20hidden%3D%22_N_O_G_R_O_U_P_S_%22%0A%09%09%09%09%09%09%20%20%20tooltiptext%3D%22Hide%20groups%20row.%22%0A%09%09%09%09%09%09%20%20%20class%3D%22marked-for-invertion%22%0A%09%09%09%09%09%09%20%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%09%09%09%20%20%20onclick%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.toggleGroupButtons%28%29%3B%22/%26gt%3B%0A%09%09%09%26lt%3Btoolbarbutton%20id%3D%22_U_I_D_-add-group-button%22%0A%09%09%09%09%09%09%20%20%20flex%3D%22999%22%0A%09%09%09%09%09%09%20%20%20hidden%3D%22_N_O_G_R_O_U_P_S_%22%0A%09%09%09%09%09%09%20%20%20_group%3D%22true%22%0A%09%09%09%09%09%09%20%20%20tooltiptext%3D%22Add%20a%20new%20group.%22%0A%09%09%09%09%09%09%20%20%20class%3D%22marked-for-invertion%22%0A%09%09%09%09%09%09%20%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%09%09%09%20%20%20onclick%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PanelFunctions.AddGroupBtn%28event%29%3B%22/%26gt%3B%0A%09%09%09%26lt%3Bbox%20flex%3D%221%22%26gt%3B%0A%09%09%09%09%26lt%3Btoolbarbutton%20id%3D%22_U_I_D_-new-tab-button%22%0A%09%09%09%09%09%09%20%20%20maxwidth%3D%22500%22%0A%09%09%09%09%09%09%20%20%20tooltiptext%3D%22Open%20New%20tab%22%0A%09%09%09%09%09%09%20%20%20class%3D%22marked-for-invertion%22%0A%09%09%09%09%09%09%20%20%20oncommand%3D%22BrowserOpenTab%28%29%3B%22/%26gt%3B%0A%09%09%09%26lt%3B/box%26gt%3B%0A%09%09%09%26lt%3Btoolbarbutton%20id%3D%22_U_I_D_-open-options-button%22%0A%09%09%09%09%09%09%20%20%20tooltiptext%3D%22Open%20Tabs%20Manager%20options%20page.%22%0A%09%09%09%09%09%09%20%20%20class%3D%22marked-for-invertion%22%0A%09%09%09%09%09%09%20%20%20oncommand%3D%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.openOptions%28%29%3B%22/%26gt%3B%0A%09%09%09%26lt%3Btoolbarbutton%20id%3D%22_U_I_D_-inline-options-button%22%0A%09%09%09%09%09%09%20%20%20tooltiptext%3D%22Show%20inline%20options.%22%0A%09%09%09%09%09%09%20%20%20class%3D%22marked-for-invertion%22%0A%09%09%09%09%09%09%20%20%20oncommand%3D%22document.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.HandleOptionsBox%28%29%3B%22/%26gt%3B%0A%09%09%26lt%3B/vbox%26gt%3B%0A%09%26lt%3B/hbox%26gt%3B%0A%09%26lt%3Bvbox%20id%3D%22_U_I_D_-options-box%22%20/%26gt%3B%0A%26lt%3B/panel%26gt%3B%26lt%3B%21--MainPanel--%26gt%3B%0A%0A%26lt%3B%21--OptionsBox--%26gt%3B%26lt%3B%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%26gt%3B%0A%26lt%3Bhbox%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%20%26gt%3B%0A%26lt%3Bvbox%26gt%3B%0A%09%26lt%3Bhbox%20align%3D%22center%22%26gt%3B%0A%09%09%26lt%3Blabel%20value%3D%22Vertical%20offset%3A%22/%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%26lt%3Btextbox%20type%3D%22number%22%0A%09%09%09%09%20_pref%3D%22PanelVerticalOffset%22%0A%09%09%09%09%20tooltiptext%3D%22Vertical%20offset%20for%20panel%20in%20relation%20to%20its%20anchor.%26amp%3B%23xA%3BMinimum%3A%20-300px.%26amp%3B%23xA%3BMaximum%3A%20300px.%22%0A%09%09%09%09%20size%3D%223%22%0A%09%09%09%09%20min%3D%22-300%22%0A%09%09%09%09%20max%3D%22300%22/%26gt%3B%0A%09%26lt%3B/hbox%26gt%3B%0A%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%26lt%3Bhbox%20align%3D%22center%22%26gt%3B%0A%09%09%26lt%3Blabel%20value%3D%22Icon%20size%3A%22/%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%26lt%3Btextbox%20type%3D%22number%22%0A%09%09%09%09%20_pref%3D%22MaxIconSizeForTabButtonsInPanel%22%0A%09%09%09%09%20tooltiptext%3D%22Each%20%27tab%20item%27%20in%20the%20grid%20will%20display%20the%20site%27s%20favicon.%20This%20option%20allows%20to%20set%20a%20custom%20fixed%20size%20for%20those%20icons.%26amp%3B%23xA%3BMinimum%3A%2016px.%26amp%3B%23xA%3BMaximum%3A%2064px.%22%0A%09%09%09%09%20size%3D%223%22%0A%09%09%09%09%20min%3D%2216%22%0A%09%09%09%09%20max%3D%2264%22/%26gt%3B%0A%09%26lt%3B/hbox%26gt%3B%0A%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%26lt%3Bhbox%20align%3D%22center%22%0A%09%09%20%20_auto_tab%3D%22false%22%26gt%3B%0A%09%09%26lt%3Blabel%20value%3D%22Tabs%20per%20row%3A%22/%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%26lt%3Btextbox%20type%3D%22number%22%0A%09%09%09%09%20_pref%3D%22PanelButtonTabsPerRow%22%0A%09%09%09%09%20tooltiptext%3D%22How%20many%20tabs%20per%20row%20should%20display%20the%20panel.%26amp%3B%23xA%3BMinimum%3A%205%20tabs%20per%20row.%26amp%3B%23xA%3BMaximum%3A%2030%20tabs%20per%20row.%22%0A%09%09%09%09%20size%3D%223%22%0A%09%09%09%09%20min%3D%221%22%0A%09%09%09%09%20max%3D%2230%22/%26gt%3B%0A%09%26lt%3B/hbox%26gt%3B%0A%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%26lt%3Bhbox%20align%3D%22center%22%0A%09%09%20%20_auto_tab%3D%22true%22%26gt%3B%0A%09%09%26lt%3Blabel%20value%3D%22Tabs%20width%3A%22/%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%26lt%3Btextbox%20type%3D%22number%22%0A%09%09%09%09%20_pref%3D%22PanelButtonTabsPerRowAutoWidth%22%0A%09%09%09%09%20tooltiptext%3D%22Width%20used%20to%20calculate%20the%20amount%20of%20tabs%20per%20row%20inside%20the%20main%20panel.%26amp%3B%23xA%3BMinimum%3A%20100px.%26amp%3B%23xA%3BMaximum%3A%20250px.%22%0A%09%09%09%09%20size%3D%223%22%0A%09%09%09%09%20increment%3D%225%22%0A%09%09%09%09%20min%3D%22100%22%0A%09%09%09%09%20max%3D%22250%22/%26gt%3B%0A%09%26lt%3B/hbox%26gt%3B%0A%09%26lt%3Bcheckbox%20label%3D%22Tabs%20per%20row%20auto%22%0A%09%09%09%20%20_pref%3D%22PanelButtonTabsPerRowAuto%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20tooltiptext%3D%22The%20amount%20of%20tabs%20per%20row%20will%20be%20automatically%20calculated%20based%20on%20the%20%27Tabs%20width%27%20option.%22%20/%26gt%3B%0A%26lt%3B/vbox%26gt%3B%0A%26lt%3Bvbox%26gt%3B%0A%09%26lt%3Bhbox%20align%3D%22center%22%0A%09%09%20%20_preview%3D%22true%22%0A%09%09%20%20_preview_size%3D%22false%22%26gt%3B%0A%09%09%26lt%3Blabel%20value%3D%22Tabs%20preview%20width%3A%22/%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%26lt%3Btextbox%20type%3D%22number%22%0A%09%09%09%09%20_pref%3D%22TabPreviewWidth%22%0A%09%09%09%09%20tooltiptext%3D%22Tabs%20preview%20width%20in%20pixels.%26amp%3B%23xA%3BMinimum%3A%20100%20pixels.%26amp%3B%23xA%3BMaximum%3A%202000%20pixels.%22%0A%09%09%09%09%20size%3D%224%22%0A%09%09%09%09%20increment%3D%2210%22%0A%09%09%09%09%20min%3D%22100%22%0A%09%09%09%09%20max%3D%222000%22/%26gt%3B%0A%09%26lt%3B/hbox%26gt%3B%0A%09%26lt%3Bhbox%20align%3D%22center%22%0A%09%09%20%20_preview%3D%22true%22%0A%09%09%20%20_preview_size%3D%22true%22%26gt%3B%0A%09%09%26lt%3Blabel%20value%3D%22Tabs%20preview%20size%3A%22/%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%26lt%3Btextbox%20type%3D%22number%22%0A%09%09%09%09%20_pref%3D%22TabPreviewAutomaticSizePercentage%22%0A%09%09%09%09%20tooltiptext%3D%22Tabs%20preview%20size%20percentage%20in%20relation%20to%20the%20page%20content%20size.%26amp%3B%23xA%3BMinimum%3A%2010%25.%26amp%3B%23xA%3BMaximum%3A%20100%25.%22%0A%09%09%09%09%20size%3D%224%22%0A%09%09%09%09%20increment%3D%225%22%0A%09%09%09%09%20min%3D%2210%22%0A%09%09%09%09%20max%3D%22100%22/%26gt%3B%0A%09%26lt%3B/hbox%26gt%3B%0A%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%26lt%3Bhbox%20align%3D%22center%22%0A%09%09%20%20_preview%3D%22true%22%0A%09%09%20%20_preview_size%3D%22false%22%26gt%3B%0A%09%09%26lt%3Blabel%20value%3D%22Tabs%20preview%20height%3A%22/%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%26lt%3Btextbox%20type%3D%22number%22%0A%09%09%09%09%20_pref%3D%22TabPreviewHeight%22%0A%09%09%09%09%20tooltiptext%3D%22Tabs%20preview%20height%20in%20pixels.%26amp%3B%23xA%3BMinimum%3A%20100%20pixels.%26amp%3B%23xA%3BMaximum%3A%202000%20pixels.%22%0A%09%09%09%09%20size%3D%224%22%0A%09%09%09%09%20increment%3D%2210%22%0A%09%09%09%09%20min%3D%22100%22%0A%09%09%09%09%20max%3D%222000%22/%26gt%3B%0A%09%26lt%3B/hbox%26gt%3B%0A%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%26lt%3Bhbox%20align%3D%22center%22%0A%09%09%20%20_preview%3D%22true%22%26gt%3B%0A%09%09%26lt%3Blabel%20value%3D%22Tabs%20preview%20zoom%3A%22/%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%26lt%3Btextbox%20type%3D%22number%22%0A%09%09%09%09%20_pref%3D%22TabPreviewZoomFactor%22%0A%09%09%09%09%20tooltiptext%3D%22Zoom%20factor%20in%20%25%20for%20tabs%20preview.%26amp%3B%23xA%3BMinimum%3A%205%25%26amp%3B%23xA%3BMaximum%3A%20500%25%22%0A%09%09%09%09%20size%3D%224%22%0A%09%09%09%09%20increment%3D%225%22%0A%09%09%09%09%20min%3D%22100%22%0A%09%09%09%09%20max%3D%22500%22/%26gt%3B%0A%09%26lt%3B/hbox%26gt%3B%0A%09%26lt%3B%21--%20%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%20--%26gt%3B%0A%09%26lt%3Bcheckbox%20label%3D%22Auto%20size%20preview%22%0A%09%09%09%20%20_pref%3D%22TabPreviewAutomaticSize%22%0A%09%09%09%20%20_preview%3D%22true%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20tooltiptext%3D%22Ignore%20the%20fixed%20preview%20width/height%20and%20size%20it%20based%20on%20a%20percentage%20of%20the%20actual%20page%20content%20size.%22%20/%26gt%3B%0A%26lt%3B/vbox%26gt%3B%0A%26lt%3Bvbox%26gt%3B%0A%09%26lt%3Bcheckbox%20label%3D%22Invert%20dark%20icons%22%0A%09%09%09%20%20_pref%3D%22PanelInvertDarkIcons%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20tooltiptext%3D%22Almost%20all%20icons%20used%20by%20this%20button%20are%20dark/black.%20With%20this%20option%20enabled%2C%20a%20white%20filter%20will%20be%20applied%20to%20those%20icons%20so%20they%20are%20actually%20seen%20on%20dark%20themes.%22%20/%26gt%3B%0A%09%26lt%3Bcheckbox%20label%3D%22Select%20tab%20on%20hover%22%0A%09%09%09%20%20_pref%3D%22PanelSelectTabOnHover%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20tooltiptext%3D%22Auto%20select%20tabs%20on%20the%20panel%20on%20mouse%20over.%22%20/%26gt%3B%0A%09%26lt%3Bcheckbox%20label%3D%22Show%20pinned%20tabs%22%0A%09%09%09%20%20_pref%3D%22PanelShowPinnedTabs%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20tooltiptext%3D%22Show%20pinned%20tabs%20row.%22%20/%26gt%3B%0A%09%26lt%3Bcheckbox%20label%3D%22Tabs%20preview%22%0A%09%09%09%20%20_pref%3D%22TabPreviewEnabled%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20tooltiptext%3D%22Enable%20tabs%20preview.%22%20/%26gt%3B%0A%09%26lt%3Bcheckbox%20label%3D%22Show%20toolbar%22%0A%09%09%09%20%20_pref%3D%22TabPreviewShowToolbar%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20tooltiptext%3D%22Show%20toolbar%20inside%20the%20preview%20panel.%20The%20toolbar%20is%20standalone%2C%20so%20it%20can%20be%20used%20even%20if%20the%20tabs%20preview%20is%20disabled.%22%20/%26gt%3B%0A%26lt%3B/vbox%26gt%3B%0A%26lt%3Bvbox%26gt%3B%0A%09%26lt%3Bcheckbox%20label%3D%22Send%20clicks%20to%20preview%22%0A%09%09%09%20%20_pref%3D%22TabPreviewSendClicks%22%0A%09%09%09%20%20_preview%3D%22true%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20tooltiptext%3D%22Enable%20sending%20click%20events%20to%20the%20page%20content%20currently%20displayed%20on%20the%20tab%20preview.%22%20/%26gt%3B%0A%09%26lt%3Bcheckbox%20label%3D%22Send%20scroll%20to%20preview%22%0A%09%09%09%20%20_pref%3D%22TabPreviewSendScroll%22%0A%09%09%09%20%20_preview%3D%22true%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20tooltiptext%3D%22If%20enabled%2C%20it%20will%20allow%20you%20to%20scroll%20the%20page%20content%20%26amp%3Bquot%3Bthrough%20the%20preview%26amp%3Bquot%3B%20and%20the%20preview%20will%20be%20updated.%26amp%3B%23xA%3BScroll%20with%20no%20modifiers%3A%20Scroll%20page%20content%20vertically%20by%20lines.%26amp%3B%23xA%3BCtrl%20+%20Scroll%3A%20Scroll%20page%20content%20vertically%20by%20pages.%26amp%3B%23xA%3BShift%20+%20Scroll%3A%20Scroll%20page%20content%20horizontally.%26amp%3B%23xA%3BCtrl%20+%20Shift%20+%20Scroll%3A%20Scroll%20page%20content%20horizontally%20by%20content%20width.%20This%20is%20an%20intent%20to%20emulate%20the%20vertical%20Scroll%20by%20pages.%22%20/%26gt%3B%0A%09%26lt%3Bcheckbox%20label%3D%22Load%20unloaded%20tabs%22%0A%09%09%09%20%20_pref%3D%22TabPreviewLoadUnloadedTabs%22%0A%09%09%09%20%20_preview%3D%22true%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20tooltiptext%3D%22Automatically%20load%20unloaded%20tabs%20so%20they%20are%20visible%20when%20tabs%20preview%20is%20enabled.%22%20/%26gt%3B%0A%09%26lt%3Bcheckbox%20label%3D%22Require%20Control%20key%22%0A%09%09%09%20%20_pref%3D%22TabPreviewRequireControlKey%22%0A%09%09%09%20%20_preview%3D%22true%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20tooltiptext%3D%22Require%20the%20Control%20key%20to%20be%20pressed%20to%20display%20the%20tab%20preview.%22%20/%26gt%3B%0A%26lt%3B/vbox%26gt%3B%0A%26lt%3Bgroupbox%20orient%3D%22vertical%22%26gt%3B%0A%09%26lt%3Bcaption%20label%3D%22Middle%20click%20action%22%20tooltiptext%3D%22Action%20triggered%20when%20middle-clicking%20a%20tab%20item.%22%20/%26gt%3B%0A%09%26lt%3Bradiogroup%20_pref%3D%22PanelMiddleClickOnTabAction%22%20orient%3D%22vertical%22%20%26gt%3B%0A%09%09%26lt%3Bradio%20value%3D%220%22%20label%3D%22Close%20tab%22%20/%26gt%3B%0A%09%09%26lt%3Bradio%20value%3D%221%22%20label%3D%22Reload%20tab%22%20/%26gt%3B%0A%09%09%26lt%3Bradio%20value%3D%222%22%20label%3D%22Multi%20select%20tabs%22%20tooltiptext%3D%22Select%20more%20than%20one%20tab%20to%20perform%20in-bulk%20actions.%26amp%3B%23xA%3BMulti-selection%20can%20also%20be%20done%20with%20Ctrl%20+%20Left%20click.%22%20/%26gt%3B%0A%09%26lt%3B/radiogroup%26gt%3B%0A%26lt%3B/groupbox%26gt%3B%0A%26lt%3Bgroupbox%20orient%3D%22vertical%22%26gt%3B%0A%09%26lt%3Bcaption%20label%3D%22Button%20image%22%20tooltiptext%3D%22Choose%20this%20button%20image.%22%20/%26gt%3B%0A%09%26lt%3Bradiogroup%20_pref%3D%22ButtonImage%22%20orient%3D%22vertical%22%20%26gt%3B%0A%09%09%26lt%3Bradio%20value%3D%220%22%20label%3D%22Custom%22%20tooltiptext%3D%22Set%20an%20image%20by%20going%20to%20%27Edit%20Button...%27%20%26amp%3Bgt%3B%20%27Image%27%20section.%22%20/%26gt%3B%0A%09%09%26lt%3Bradio%20value%3D%221%22%20label%3D%22Dark%20image%22%20/%26gt%3B%0A%09%09%26lt%3Bradio%20value%3D%222%22%20label%3D%22Light%20image%22%20/%26gt%3B%0A%09%26lt%3B/radiogroup%26gt%3B%0A%26lt%3B/groupbox%26gt%3B%0A%26lt%3B/hbox%26gt%3B%26lt%3B%21--OptionsBox--%26gt%3B%0A%0A%26lt%3B%21--TabsPreviewPanel--%26gt%3B%26lt%3B%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%26gt%3B%0A%26lt%3Bpanel%20id%3D%22_U_I_D_-tabs-box-tooltip%22%0A%09%09%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%0A%09%09%20xmlns%3Ahtml%3D%22http%3A//www.w3.org/1999/xhtml%22%0A%09%09%20cb_id%3D%22_U_I_D_%22%0A%09%09%20orient%3D%22vertical%22%0A%09%09%20position%3D%22after_start%22%0A%09%09%20flip%3D%22slide%22%0A%09%09%20level%3D%22top%22%0A%09%09%20noautofocus%3D%22true%22%0A%09%09%20consumeoutsideclicks%3D%22false%22%0A%09%09%20oncontextmenu%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%20onmouseout%3D%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.OnTooltipOut%28event%2C%20this%29%3B%22%0A%09%09%20onpopuphiding%3D%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.OnTooltipHiding%28event%2C%20this%29%3B%22%0A%09%09%20onpopupshowing%3D%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PopulateTabsTooltip%28event%2C%20this%29%3B%22%26gt%3B%0A%09%26lt%3Bvbox%20id%3D%22_U_I_D_-tabs-preview-container%22%26gt%3B%0A%09%09%26lt%3Blabel%20id%3D%22_U_I_D_-tabs-preview-title%22%20crop%3D%22end%22/%26gt%3B%0A%09%09%26lt%3Btoolbar%20id%3D%22_U_I_D_-tabs-preview-toolbar%22%0A%09%09%09%09%20fullscreentoolbar%3D%22true%22%0A%09%09%09%09%20onclick%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%09%20oncommand%3D%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27_S_E_L_F_I_D_%27%29.TabsManager.PreviewFunctions.OnCommand%28event%29%3B%22%26gt%3B%0A%09%09%09%26lt%3Btoolbarbutton%20id%3D%22_U_I_D_-tabs-preview-back-button%22%20class%3D%22marked-for-invertion%22%20tooltiptext%3D%22Go%20backwards%20one%20page%22%20label%3D%22back%22/%26gt%3B%0A%09%09%09%26lt%3Btoolbarbutton%20id%3D%22_U_I_D_-tabs-preview-forward-button%22%20class%3D%22marked-for-invertion%22%20tooltiptext%3D%22Go%20forward%20one%20page%22%20label%3D%22forward%22/%26gt%3B%0A%09%09%09%26lt%3Btoolbarbutton%20id%3D%22_U_I_D_-tabs-preview-reload-button%22%20class%3D%22marked-for-invertion%22%20tooltiptext%3D%22Reload%20page%22%20label%3D%22reload%22/%26gt%3B%0A%09%09%09%26lt%3Btoolbarbutton%20id%3D%22_U_I_D_-tabs-preview-pin-button%22%20class%3D%22marked-for-invertion%22%20tooltiptext%3D%22Pin%20tab%22%20label%3D%22pin%22/%26gt%3B%0A%09%09%09%26lt%3Btoolbarbutton%20id%3D%22_U_I_D_-tabs-preview-zoom-button%22%20class%3D%22marked-for-invertion%22%20tooltiptext%3D%22Zoom%20preview%22%20label%3D%22zoom%22/%26gt%3B%0A%09%09%09%26lt%3Bspacer%20flex%3D%221%22%20/%26gt%3B%0A%09%09%09%26lt%3Btoolbarbutton%20id%3D%22_U_I_D_-tabs-preview-close-button%22%20class%3D%22marked-for-invertion%22%20tooltiptext%3D%22Close%20tab%22%20label%3D%22close%22/%26gt%3B%0A%09%09%26lt%3B/toolbar%26gt%3B%0A%09%09%26lt%3Bhtml%3Acanvas%20id%3D%22_U_I_D_-tabs-preview-canvas%22/%26gt%3B%0A%09%26lt%3B/vbox%26gt%3B%0A%26lt%3B/panel%26gt%3B%26lt%3B%21--TabsPreviewPanel--%26gt%3B%0A%0A%26lt%3B%21--FrameScript--%26gt%3B%22use%20sctrict%22%3B%0Alet%20TabsPreview%20%3D%20%7B%0A%09init%3A%20function%28%29%20%7B%0A%09%09addMessageListener%28%22_Update_Preview_ID_%22%2C%20this%29%3B%0A%09%09addMessageListener%28%22_Scroll_Preview_ID_%22%2C%20this%29%3B%0A%09%09addMessageListener%28%22_Emulate_Preview_ID_%22%2C%20this%29%3B%0A%09%7D%2C%0A%0A%09receiveMessage%3A%20function%28aMsg%29%20%7B%0A%09%09switch%20%28aMsg.name%29%20%7B%0A%09%09%09case%20%22_Update_Preview_ID_%22%3A%0A%09%09%09%09this._updatePreview%28aMsg.data%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22_Scroll_Preview_ID_%22%3A%0A%09%09%09%09this._scrollWindow%28aMsg.data%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%20%22_Emulate_Preview_ID_%22%3A%0A%09%09%09%09this._emulateEvent%28aMsg.data%29%3B%0A%09%09%09%09break%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09_updatePreview%3A%20function%28aData%29%20%7B%0A%09%09let%20canvas%20%3D%20content.document.createElementNS%28%22http%3A//www.w3.org/1999/xhtml%22%2C%20%22canvas%22%29%3B%0A%09%09canvas.mozImageSmoothingEnabled%20%3D%20true%3B%0A%09%09let%20auto%20%3D%20aData.auto%3B%0A%09%09let%20win%20%3D%20content.window%3B%0A%09%09let%20w%20%3D%20win.innerWidth%3B%0A%09%09let%20scale%20%3D%20aData.width%20/%20w%3B%0A%09%09let%20h%20%3D%20auto%20%3F%20win.innerHeight%20%3A%20aData.height%20/%20scale%3B%0A%09%09let%20canvasW%20%3D%20auto%20%3F%20Math.round%28w%20*%20aData.autoPercentage%20/%20100%20*%20aData.zoomFactor%29%20%3A%20aData.width%3B%0A%09%09let%20canvasH%20%3D%20auto%20%3F%20Math.round%28canvasW%20*%20h%20/%20w%29%20%3A%20aData.height%3B%0A%09%09canvas.width%20%3D%20canvasW%3B%0A%09%09canvas.height%20%3D%20canvasH%3B%0A%09%09let%20scaleX%20%3D%20canvasW%20/%20w%3B%0A%09%09let%20scaleY%20%3D%20canvasH%20/%20h%3B%0A%09%09let%20ctx%3B%0A%09%09try%20%7B%0A%09%09%09ctx%20%3D%20canvas.getContext%28%222d%22%29%3B%0A%09%09%09ctx.clearRect%280%2C%200%2C%20canvas.width%2C%20canvas.height%29%3B%0A%09%09%09ctx.save%28%29%3B%0A%09%09%09auto%20%3F%0A%09%09%09%09ctx.scale%28canvasW%20/%20w%2C%20canvasH%20/%20h%29%20%3A%0A%09%09%09%09ctx.scale%28scale%2C%20scale%29%3B%0A%09%09%09ctx.drawWindow%28win%2C%20win.scrollX%2C%20win.scrollY%2C%20w%2C%20h%2C%20%22Window%22%29%3B%0A%09%09%09ctx.restore%28%29%3B%0A%09%09%7D%20catch%20%28aErr%29%20%7B%7D%20finally%20%7B%0A%09%09%09sendAsyncMessage%28%22_Response_ID_%22%2C%20%7B%0A%09%09%09%09width%3A%20canvas.width%2C%0A%09%09%09%09height%3A%20canvas.height%2C%0A%09%09%09%09msgID%3A%20aData.msgID%2C%0A%09%09%09%09scaleX%3A%20scaleX%2C%0A%09%09%09%09scaleY%3A%20scaleY%2C%0A%09%09%09%09scale%3A%20scale%2C%0A%09%09%09%09imgData%3A%20ctx.getImageData%280%2C%200%2C%20canvas.width%2C%20canvas.height%29%2C%0A%09%09%09%7D%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09_scrollWindow%3A%20function%28aData%29%20%7B%0A%09%09let%20elt%20%3D%20this._elementFromPoint%28aData.x%2C%20aData.y%29%3B%0A%09%09if%20%28aData.ctrlKey%20%26amp%3B%26amp%3B%20%21aData.shiftKey%29%20//%20Ctrl%20only%20-%20Scroll%20by%20pages%0A%09%09%09elt.ownerDocument.defaultView.scrollByPages%28%28aData.lines%20%26gt%3B%200%20%3F%201%20%3A%20-1%29%29%3B%0A%09%09else%20if%20%28aData.shiftKey%20%26amp%3B%26amp%3B%20%21aData.ctrlKey%29%20//%20Shift%20only%20-%20Scroll%20horizontally%0A%09%09%09elt.ownerDocument.defaultView.scrollBy%28aData.lines%20*%2010%2C%200%29%3B%0A%09%09else%20if%20%28aData.shiftKey%20%26amp%3B%26amp%3B%20aData.ctrlKey%29%20//%20Shift%20+%20Ctrl%20-%20Scroll%20horizontally%20faster%0A%09%09%09elt.ownerDocument.defaultView.scrollBy%28%28aData.lines%20%26gt%3B%200%20%3F%20content.window.innerWidth%20%3A%20-%28content.window.innerWidth%29%29%2C%200%29%3B%0A%09%09else%20if%20%28%21aData.shiftKey%20%26amp%3B%26amp%3B%20%21aData.ctrlKey%29%20//%20No%20modifiers%20-%20Scroll%20by%20lines%0A%09%09%09elt.ownerDocument.defaultView.scrollByLines%28aData.lines%29%3B%0A%09%7D%2C%0A%0A%09_emulateEvent%3A%20function%28aData%29%20%7B%0A%09%09let%20elt%20%3D%20this._elementFromPoint%28aData.x%2C%20aData.y%29%3B%0A%09%09let%20view%20%3D%20elt.ownerDocument.defaultView%3B%0A%09%09elt.dispatchEvent%28new%20view.MouseEvent%28aData.type%2C%20%7B%0A%09%09%09view%3A%20view%2C%0A%09%09%09cancelable%3A%20true%2C%0A%09%09%09bubbles%3A%20true%2C%0A%09%09%09button%3A%20aData.button%2C%0A%09%09%09ctrlKey%3A%20aData.ctrlKey%2C%0A%09%09%09altKey%3A%20aData.altKey%2C%0A%09%09%09shiftKey%3A%20aData.shiftKey%2C%0A%09%09%09metaKey%3A%20aData.metaKey%0A%09%09%7D%29%29%3B%0A%09%7D%2C%0A%0A%09_elementFromPoint%3A%20function%28x%2C%20y%29%20%7B%0A%09%09let%20elt%20%3D%20content.document.elementFromPoint%28x%2C%20y%29%3B%0A%09%09if%20%28%21elt%29%20%7B%0A%09%09%09const%20Ci%20%3D%20Components.interfaces%3B%0A%09%09%09elt%20%3D%20content.window.QueryInterface%28Ci.nsIInterfaceRequestor%29.%0A%09%09%09getInterface%28Ci.nsIDOMWindowUtils%29.%0A%09%09%09elementFromPoint%28x%2C%20y%2C%20true%2C%20false%29%3B%0A%09%09%7D%0A%09%09if%20%28%21elt%29%0A%09%09%09elt%20%3D%20content.document.body%20%7C%7C%20content.document.documentElement%3B%0A%09%09while%20%28/%5Ei%3Fframe%24/.test%28elt.localName.toLowerCase%28%29%29%29%20%7B%0A%09%09%09x%20-%3D%20elt.getBoundingClientRect%28%29.left%3B%0A%09%09%09y%20-%3D%20elt.getBoundingClientRect%28%29.top%3B%0A%09%09%09elt%20%3D%20elt.contentDocument.elementFromPoint%28x%2C%20y%29%3B%0A%09%09%7D%0A%09%09return%20elt%3B%0A%09%7D%0A%7D%3B%0ATabsPreview.init%28%29%3B%0A%26lt%3B%21--FrameScript--%26gt%3B%0A%0A%26lt%3B%21--OptionsWindow--%26gt%3B%26lt%3B%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22data%3Atext/css%3Bcharset%3Dutf-8%2C%0Aprefwindow%20*%20%7B%0A%09font-family%3A%20%26amp%3Bquot%3BOpen%20Sans%26amp%3Bquot%3B%2C%20Helvetica%2C%20Arial%2C%20sans-serif%20%21important%3B%0A%7D%0Acaption%20.caption-text%2C%0A.bold_text%7B%0A%09font-weight%3Abold%3B%0A%7D%0A.warning%7B%0A%09font-weight%3A%20bold%20%21important%3B%0A%09color%3A%20red%20%21important%3B%0A%7D%0A.info%7B%0A%09font-weight%3A%20bold%20%21important%3B%0A%09color%3A%20green%20%21important%3B%0A%7D%0A%22%20type%3D%22text/css%22%20%3F%26gt%3B%0A%26lt%3Bprefwindow%20%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%0A%09%09%09%20onload%3D%22gTabsManager.onLoad%28%29%3B%22%0A%09%09%09%20onunload%3D%22gTabsManager.onUnload%28%29%3B%22%0A%09%09%09%20buttons%3D%22accept%2Ccancel%22%0A%09%09%09%20windowtype%3D%22CB%3ATabsManager%3ASettings%22%26gt%3B%0A%09%09%09%09%26lt%3Bscript%26gt%3B%0A%09%09%26lt%3B%21%5BCDATA%5B%0Avar%20Cc%20%3D%20Components.classes%3B%0Avar%20Ci%20%3D%20Components.interfaces%3B%0Avar%20Cu%20%3D%20Components.utils%3B%0Avar%20fromButton%20%3D%20_self_%3B%0Avar%20storage%20%3D%20window._storage%3B%0Avar%20idNumber%20%3D%20storage.self_id.slice%2820%29%3B%0Afunction%20%24%28id%29document.getElementById%28id%29%3B%0Avar%20gTabsManager%20%3D%20%7B%0A%09_initialized%20%3A%20false%2C%0A%09onLoad%20%3A%20function%20%28%29%20%7B%0A%09%09window.document.documentElement.setAttribute%28%22title%22%2C%0A%09%09%20%22Tabs%20Manager%20settings%20-%20Button%20%23ID%3A%20%22%20+%20idNumber%29%3B%0A%09%09this._initialized%20%3D%20true%3B%0A%09%09var%20docElt%20%3D%20document.documentElement%3B%0A%09%09this.instantApply%20%3D%20docElt.instantApply%3B%0A%09%09window.addEventListener%28%22change%22%2C%20this%2C%20false%29%3B%0A%09%09window.addEventListener%28%22beforeaccept%22%2C%20this%2C%20false%29%3B%0A%09%7D%2C%0A%09onUnload%20%3A%20function%20%28%29%20%7B%0A%09%09window.removeEventListener%28%22change%22%2C%20this%2C%20false%29%3B%0A%09%09window.removeEventListener%28%22beforeaccept%22%2C%20this%2C%20false%29%3B%0A%09%7D%2C%0A%09updateBroadcasters%20%3A%20function%20%28aPreference%29%20%7B%0A%09%09if%20%28aPreference.type%20%21%3D%20%22bool%22%29%0A%09%09%09return%3B%0A%09%09var%20obs%20%3D%20%24%28aPreference.id.replace%28%22pref_%22%2C%20%22obs_%22%29%29%3B%0A%09%09if%20%28obs%29%0A%09%09%09this.setDisabled%28obs%2C%20%21aPreference.value%29%3B%0A%09%7D%2C%0A%09setDisabled%20%3A%20function%20%28itemOrId%2C%20val%29%20%7B%0A%09%09var%20item%20%3D%20typeof%28itemOrId%29%20%3D%3D%20%22string%22%20%3F%20%24%28itemOrId%29%20%3A%20itemOrId%3B%0A%09%09if%20%28%21item%29%0A%09%09%09return%3B%0A%09%7D%2C%0A%09handleEvent%20%3A%20function%20%28aEvent%29%20%7B%0A%09%09switch%20%28aEvent.type%29%20%7B%0A%09%09case%20%22change%22%3A%0A%09%09%09if%20%28aEvent.target.localName%20%21%3D%20%22preference%22%29%0A%09%09%09%09return%3B%0A%09%09%09this.updateBroadcasters%28aEvent.target%29%3B%0A%09%09%09if%20%28%21this.instantApply%29%0A%09%09%09%09this.updateApplyButton%28aEvent%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22beforeaccept%22%3A%0A%09%09%09break%3B%0A%09%09%7D%0A%09%7D%2C%0A%09changes%20%3A%20%5B%5D%2C%0A%09updateApplyButton%20%3A%20function%20%28aEvent%29%20%7B%0A%09%09var%20item%20%3D%20aEvent.target%3B%0A%09%09if%20%28item.localName%20%21%3D%20%22preference%22%29%0A%09%09%09return%3B%0A%09%09var%20valueChanged%20%3D%20item.value%20%21%3D%20item.valueFromPreferences%3B%0A%09%09var%20index%20%3D%20this.changes.indexOf%28item%29%3B%0A%09%09if%20%28valueChanged%20%26amp%3B%26amp%3B%20index%20%3D%3D%20-1%29%0A%09%09%09this.changes.push%28item%29%3B%0A%09%09else%20if%20%28%21valueChanged%20%26amp%3B%26amp%3B%20index%20%26gt%3B%20-1%29%0A%09%09%09this.changes.splice%28index%2C%201%29%3B%0A%09%7D%2C%0A%7D%3B%0A%5D%5D%26gt%3B%26lt%3B/script%26gt%3B%0A%09%26lt%3Bprefpane%26gt%3B%0A%09%09%26lt%3Bpreferences%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22PanelSelectTabOnHoverDelay%22%20name%3D%22_RoOt_PanelSelectTabOnHoverDelay%22%20type%3D%22int%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22TabPreviewShowDelay%22%20name%3D%22_RoOt_TabPreviewShowDelay%22%20type%3D%22int%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22PanelButtonGroupsPerRow%22%20name%3D%22_RoOt_PanelButtonGroupsPerRow%22%20type%3D%22int%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22PanelKeepItOpen%22%20name%3D%22_RoOt_PanelKeepItOpen%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22PanelListOfHotSpotsIDs%22%20name%3D%22_RoOt_PanelListOfHotSpotsIDs%22%20type%3D%22string%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22PanelOpenOnHover%22%20name%3D%22_RoOt_PanelOpenOnHover%22%20type%3D%22bool%22/%26gt%3B%0A%09%09%09%26lt%3Bpreference%20id%3D%22PanelOpenOnHoverOverHotSpotsTrigger%22%20name%3D%22_RoOt_PanelOpenOnHoverOverHotSpotsTrigger%22%20type%3D%22int%22/%26gt%3B%0A%09%09%26lt%3B/preferences%26gt%3B%0A%09%09%26lt%3Bgrid%26gt%3B%0A%09%09%09%26lt%3Bcolumns%26gt%3B%0A%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%09%26lt%3Bcolumn%20flex%3D%221%22/%26gt%3B%0A%09%09%09%26lt%3B/columns%26gt%3B%0A%09%09%09%26lt%3Brows%26gt%3B%0A%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Keep%20panel%20always%20open%22%20tooltip%3D%22tt_1%22%20preference%3D%22PanelKeepItOpen%22%20/%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%26lt%3Bcheckbox%20label%3D%22Open%20panel%20on%20hover%20-%20Delay%3A%20%22%20tooltip%3D%22tt_3%22%20preference%3D%22PanelOpenOnHover%22%20/%26gt%3B%0A%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20type%3D%22number%22%20tooltip%3D%22tt_4%22%20preference%3D%22PanelOpenOnHoverDelay%22/%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3Brow%20tooltip%3D%22tt_5%22%26gt%3B%0A%09%09%09%09%09%26lt%3Blabel%20value%3D%22Select%20tab%20on%20hover%20delay%22%20/%26gt%3B%0A%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20type%3D%22number%22%20preference%3D%22PanelSelectTabOnHoverDelay%22/%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%26lt%3Blabel%20value%3D%22Tab%20preview%20show%20delay%22%20/%26gt%3B%0A%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20type%3D%22number%22%20preference%3D%22TabPreviewShowDelay%22/%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%26lt%3Blabel%20value%3D%22Group%20buttons%20per%20row%22%20/%26gt%3B%0A%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20type%3D%22number%22%20tooltip%3D%22tt_0%22%20preference%3D%22PanelButtonGroupsPerRow%22/%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%09%26lt%3Brow%26gt%3B%0A%09%09%09%09%09%26lt%3Blabel%20value%3D%22Hot-spots%20trigger%22%20/%26gt%3B%0A%09%09%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20type%3D%22number%22%20tooltip%3D%22tt_0%22%20preference%3D%22PanelOpenOnHoverOverHotSpotsTrigger%22/%26gt%3B%0A%09%09%09%09%26lt%3B/row%26gt%3B%0A%09%09%09%26lt%3B/rows%26gt%3B%0A%09%09%26lt%3B/grid%26gt%3B%0A%09%09%26lt%3Bhbox%20align%3D%22center%22%26gt%3B%0A%09%09%09%26lt%3Blabel%20value%3D%22Hot-spots%20IDs%22/%26gt%3B%0A%09%09%09%26lt%3Btextbox%20flex%3D%221%22%20tooltip%3D%22tt_2%22%20preference%3D%22PanelListOfHotSpotsIDs%22/%26gt%3B%0A%09%09%26lt%3B/hbox%26gt%3B%0A%09%26lt%3B/prefpane%26gt%3B%0A%09%26lt%3Bpopupset%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_0%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BHow%20many%20groups%20buttons%20per%20row%20should%20the%20grid%20display.%26amp%3B%23xA%3BDefault%3A%208%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_1%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BBy%20default%2C%20the%20panel%20will%20close%20whenever%20its%20focus%20is%20lost%20or%20by%20pressing%20the%20Escape%20key.%20With%20this%20option%20enabled%2C%20the%20panel%20will%20ONLY%20close%20when%20you%20tell%20it%20to%20by%20pressing%20this%20button%20or%20toggling%20the%20panel%20with%20the%20hotkey%20%28if%20any%29.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_2%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BComma%20separated%20list%20of%20elements%20IDs.%20When%20you%20hover%20over%20this%20elements%2C%20the%20panel%20will%20automatically%20open.%5CnExample%3A%20%26amp%3Bquot%3Burlbar-container%2Ctabbrowser-tabs%26amp%3Bquot%3B.%20The%20main%20panel%20will%20open%20when%20you%20hover%20over%20the%20URL%20bar%20and/or%20the%20tab%20bar.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_3%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BIf%20enabled%2C%20it%20will%20allow%20you%20to%20open%20the%20main%20panel%20by%20just%20hovering%20over%20this%20button.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_4%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BDelay%20in%20milliseconds%20for%20the%20%26amp%3Bquot%3BOpen%20panel%20on%20hover%26amp%3Bquot%3B%20option.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_5%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BDelay%20in%20milliseconds%20for%20the%20%26amp%3Bquot%3BSelect%20tab%20on%20hover%26amp%3Bquot%3B%20option.%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%09%26lt%3Btooltip%20id%3D%22tt_6%22%26gt%3B%0A%09%09%09%26lt%3Bdescription%26gt%3BDelay%20in%20milliseconds%20for%20the%20tab%20preview%20to%20display.%26amp%3B%23xA%3BDefault%3A%20200%26lt%3B/description%26gt%3B%0A%09%09%26lt%3B/tooltip%26gt%3B%0A%09%26lt%3B/popupset%26gt%3B%0A%26lt%3B/prefwindow%26gt%3B%26lt%3B%21--OptionsWindow--%26gt%3B%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" rel="nofollow" title="Install Tabs Manager (OLD &amp; LAST WITH GROUPS)">
				<![CDATA[Install this button]]>
			</html:a>
		</html:div>
		<html:a id="about" href="https://addons.mozilla.org/addon/custom-buttons/">
			<![CDATA[About CustomButtons]]>
		</html:a>
		<html:div id="credits">
			<html:a href="http://custombuttons.sourceforge.net/forum/viewtopic.php?t=3599">
				<![CDATA[XML created with]]>
				<html:br/>
				<![CDATA[CB Context Menu Extended]]>
			</html:a>
		</html:div>
	</html:div>
</html:body>
  <name>Tabs Manager (OLD &amp; LAST WITH GROUPS)</name>
  <image><![CDATA[custombuttons-stdicon-1]]></image>
  <mode>0</mode>
  <initcode><![CDATA[if (true) return; // Disabled by CB Context Menu Extended button

var $ = this.TabsManager = {
	/**
	 * Fixed width for the main panel
	 * UNCOMMENT ONLY ONE OF THE OPTIONS!!!
	 */
	get panelWidth() {
		return window.innerWidth; // The width of the browser window.
		//return screen.width; // The width of the screen.
		//return 500; // Custom with in pixels. CAN'T BE ZERO!!!
	},
	/**
	 * How to position the main panel
	 * UNCOMMENT ONLY ONE OF THE OPTIONS!!!
	 * More info about panel positioning:
	 * https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/PopupGuide/Positioning
	 */
	get panelPosition() {
		return "overlap"; // This is the "less buggy" position. Any other position will produce "some visual weirdness" with the main panel.
		//return "after_start";
		// return ""; // Do not set a position
	},
	/**
	 * Where to anchor the main panel
	 * UNCOMMENT ONLY ONE OF THE OPTIONS!!!
	 */
	get panelAnchor() {
		return $.$("nav-bar"); // Navigation toolbar
		//return $.$("TabsToolbar"); // Tabs toolbar
		//return $.$(self.id); // This button itself
	},

	Init: function() {
		$.InitPrefs();

		if (!("Services" in window))
			Cu.import("resource://gre/modules/Services.jsm");

		if (!($._UID in window)) {
			window[$._UID] = {
				StyleSheet: false,
				SelfDestroyerListener: false,
				ListOfHotSpots: false,
				TabsContextEvaluated: false,
				TabsContextHandled: false
			};
		}

		// "Convert" preferences to properties of main object.
		// So I don't have to call gPref("prefname") which is slower.
		// Just have to be carefull not to create a preference with the same name as a property. Duh!
		for (let p in $.DefPrefs) {
			if ($.DefPrefs.hasOwnProperty(p))
				$["_" + p] = $.gPref(p);
		}

		self.tooltipText = ""; // Set to blank. Otherwise the tooltip attribute doesn't work.
		self.setAttribute("tooltip", $._UID + "_dynamic_tooltip");
		self.setAttribute("overflows", false);
		$.setSelfImage();
		self.onclick = function(aE) {
			if (aE.button === 0 && !aE.shiftKey && !aE.ctrlKey && !aE.altKey) {
				aE.preventDefault();
				$.togglePanel();
			} else if (aE.button === 0 && !aE.shiftKey && aE.ctrlKey && !aE.altKey) {
				aE.preventDefault();
				$.openOptions();
			}
			aE.stopPropagation();
		};

		$.CSSLoader();
		$.CreateMainPanel();
		$.CreateDynamicTooltip();
		$.HandleTabsContext();
		$.CreateTabsTooltip();
		$.hasTabView && $.CreateGroupsContext();
		$.HandlePrefListener();
		$.HandleOpenOnHover();
		$.HandleHotSpots();

		$._tooltipAllowHovering = ($._TabPreviewEnabled || $._TabPreviewShowToolbar);

		$._randomID = parseInt(Math.random() * 10000, 10);
		window[$._UID]["RandomID"] = $._randomID;

		$._frameScript = "data:application/javascript," + encodeURIComponent($.getHelp("FrameScript")
			.replace(/_Update_Preview_ID_/g, $._updatePreviewMsgID)
			.replace(/_Scroll_Preview_ID_/g, $._scrollMsgID)
			.replace(/_Emulate_Preview_ID_/g, $._emulateMsgID)
			.replace(/_Response_ID_/g, $._responseMsgID + $._randomID));
		$._globalMM.loadFrameScript($._frameScript, true);
		$._globalMM.addMessageListener($._responseMsgID + $._randomID, $._messageResponse);

		if (!(window[$._UID]["TabsContextEvaluated"])) {
			window[$._UID]["TabsContextEvaluated"] = true;
			let originalFunc = TabContextMenu.updateContextMenu;
			eval("TabContextMenu.updateContextMenu=" + originalFunc.toString().replace(": gBrowser.selectedTab;",
				": (aPopupMenu.triggerNode.localName === \"toolbarbutton\" && aPopupMenu.triggerNode.hasOwnProperty(\"tab\")) ? aPopupMenu.triggerNode.tab : gBrowser.selectedTab;"));
		}

		addDestructor(function(aReason) {
			if (aReason === "update" || aReason === "delete") {
				$.HandleHotSpots(true);
				$.PanelFunctions._removeListeners();
				// A half-working nightmare!!! ¬¬
				// Frame scripts are not unloaded.
				$._globalMM.removeDelayedFrameScript($._frameScript);
				$._globalMM.removeMessageListener($._responseMsgID + window[$._UID]["RandomID"], $._messageResponse);
				$.HandlePrefListener(true);
				let selfEls = document.getElementsByAttribute("cb_id", $._UID);
				Array.prototype.slice.call(selfEls).forEach(function(aEl) {
					aEl && aEl.parentNode.removeChild(aEl);
				});
				try {
					Services.obs.removeObserver(observer, "domwindowopened");
				} catch (aErr) {}
			}
			if (aReason === "delete") {
				$.styleSheet(window[$._UID]["StyleSheet"], true);
				delete window[$._UID];
				(Services.prefs.getBranch($.Branch)).deleteBranch("");
				Services.prefs.savePrefFile(null);
			}
		});

		setTimeout(function() {
			$.hasTabView && TabView._initFrame(); // Init this crap for the button to work. ¬¬
		}, 3000);

		$.handleInvertedImages();
	},

	_messageResponse: {
		receiveMessage: function(aMsg) {
			if (aMsg.name !== $._responseMsgID + $._randomID)
				return;
			$.canvas._scaleX = aMsg.data.scaleX;
			$.canvas._scaleY = aMsg.data.scaleY;
			$.canvas._scale = aMsg.data.scale;
			$.canvas.width = aMsg.data.width;
			$.canvas.height = aMsg.data.height;
			$._lastCanvasWidth = aMsg.data.width;
			$._lastCanvasHeight = aMsg.data.height;
			$.canvas.getContext("2d").putImageData(aMsg.data.imgData, 0, 0);
			$.tooltipLabel.style.maxWidth = aMsg.data.width + "px";
		},
	},

	HandleTabsContext: function() {
		if (!(window[$._UID]["TabsContextHandled"])) {
			window[$._UID]["TabsContextHandled"] = true;
			let tCtx = $.$("tabContextMenu");
			let trigger = function(aE) {
				let isShowing = (aE.type === "popupshowing");
				isShowing && clearTimeout($._hoverOpenPreviewTimer);
				isShowing && $.tooltip.hidePopup();
				Array.prototype.slice.call(this.getElementsByAttribute("_multisel", "*")).forEach(function(aMI) {
					if ($.selectedTabs.length > 0)
						aMI.hidden = false;
					else
						aMI.hidden = true;
				});
			};
			tCtx.addEventListener("popupshowing", trigger, false);
			tCtx.addEventListener("popuphidden", trigger, false);
			tCtx.appendChild($.$CNS("separator", {
				_multisel: true,
				hidden: true,
			}));
			let pinAll = tCtx.appendChild($.$CNS("menuitem", {
				id: $._UID + "-pin_unpin_selected_tabs",
				label: "Pin/Unpin selected tabs",
				_multisel: true,
				class: "menuitem-iconic marked-for-invertion",
				hidden: true,
				oncommand: "event.preventDefault();event.stopPropagation();",
			}));
			pinAll.onclick = function(aE) {
				Array.prototype.slice.call($.selectedTabs).forEach(function(aTabItem) {
					gBrowser[aTabItem.tab.pinned ? "unpinTab" : "pinTab"](aTabItem.tab);
				});
			};
			let reloadAll = tCtx.appendChild($.$CNS("menuitem", {
				id: $._UID + "-reload_selected_tabs",
				label: "Reload selected tabs",
				_multisel: true,
				class: "menuitem-iconic marked-for-invertion",
				hidden: true,
				oncommand: "event.preventDefault();event.stopPropagation();",
			}));
			reloadAll.onclick = function(aE) {
				Array.prototype.slice.call($.selectedTabs).forEach(function(aTabItem) {
					gBrowser.reloadTab(aTabItem.tab);
				});
			};
			let closeAll = tCtx.appendChild($.$CNS("menuitem", {
				id: $._UID + "-close_selected_tabs",
				label: "Close selected tabs",
				_multisel: true,
				class: "menuitem-iconic marked-for-invertion",
				hidden: true,
				oncommand: "event.preventDefault();event.stopPropagation();",
			}));
			closeAll.onclick = function(aE) {
				Array.prototype.slice.call($.selectedTabs).forEach(function(aTabItem) {
					gBrowser.removeTab(aTabItem.tab, {
						animate: true
					});
				});
			};
		}
	},

	CreateGroupsContext: function() {
		if (!($.$($._UID + "-tabs-groups-box-context"))) {
			let mPop = $.$("mainPopupSet").appendChild($.$CNS("menupopup", {
				id: $._UID + "-tabs-groups-box-context",
				cb_id: $._UID,
				oncontextmenu: "event.stopPropagation();",
				onpopuphiding: "event.stopPropagation();",
				onpopupshowing: "event.stopPropagation();",
				onclick: "event.preventDefault();event.stopPropagation();",
				consumeoutsideclicks: false,
				menugenerated: true,
			}));
			let renG = mPop.appendChild($.$CNS("menuitem", {
				id: $._UID + "-rename_group",
				label: "Rename group",
				class: "marked-for-invertion",
				oncommand: "event.stopPropagation();",
			}));
			renG.onclick = function(aE) {
				if (aE.button !== 0)
					return false;
				var node = document.popupNode;
				let gI = $.GroupItems.groupItem(node.getAttribute("groupid"));
				let value = $.promptme("Set a new title for this group.", gI.getTitle());
				if (value) {
					gI.setTitle(value);
					node.label = value;
					$._appendButtonsToGroupsBox($.$($._UID + "-tabs-groups-box"));
				}
				aE.stopPropagation();
			};
			let delG = mPop.appendChild($.$CNS("menuitem", {
				id: $._UID + "-delete_group",
				label: "Delete group",
				oncommand: "event.stopPropagation();",
			}));
			delG.onclick = function(aE) {
				if (aE.button !== 0)
					return false;
				if ($.GroupItems.groupItems.length > 1) {
					if (document.popupNode.getAttribute("checked") == "true") {
						Services.prompt.alert(null, self.name, "You can't delete a currently selected group.\n" +
							"Select another group and then delete this one.");
						return false;
					}
					let curGI = $.GroupItems.groupItem(document.popupNode.getAttribute("groupid"));
					let tabs = curGI._children;
					var destGI = (curGI === $.GroupItems.groupItems[0]) ? $.GroupItems.groupItems[1] : $.GroupItems.groupItems[0];
					try {
						for (var i = tabs.length - 1; i >= 0; i--)
							$._moveTabToGroupItem(gBrowser.mTabContainer.children[tabs[i].tab._tPos], destGI.id, true);
					} catch (aErr) {
						Cu.reportError(aErr);
					} finally {
						setTimeout(function() {
							curGI.destroy();
							$.GroupItems._updateTabBar();
							$._appendButtonsToGroupsBox($.$($._UID + "-tabs-groups-box"));
							$._appendTabsToTabsBox($.$($._UID + "-tabs-box"));
						}, 100);
					}
				} else
					Services.prompt.alert(null, self.name, "You can't delete the last remaining group!!!");
			};
		}
	},

	CreateTabsTooltip: function() {
		if (!$.tooltip) {
			let t = $.$("mainPopupSet").appendChild($.$CNS("panel", {
				id: $._UID + "-tabs-box-tooltip",
				"xmlns:html": "http://www.w3.org/1999/xhtml",
				cb_id: $._UID,
				orient: "vertical",
				position: "after_start",
				flip: "slide",
				level: "top",
				noautofocus: "true",
				consumeoutsideclicks: "false",
				oncontextmenu: "event.stopPropagation();",
				onmouseout: "document.getElementById('" + self.id +
					"').TabsManager.OnTooltipOut(event, this);event.stopPropagation();",
				onpopuphiding: "document.getElementById('" + self.id +
					"').TabsManager.OnTooltipHiding(event, this);event.stopPropagation();",
				onpopupshowing: "document.getElementById('" + self.id +
					"').TabsManager.PopulateTabsTooltip(event, this);event.stopPropagation();",
			}));
			let vB = t.appendChild($.$CNS("vbox", {
				id: $._UID + "-tabs-preview-container"
			}));
			vB.appendChild($.$CNS("label", {
				id: $._UID + "-tabs-preview-title",
				crop: "end"
			}));
			let tB = vB.appendChild($.$CNS("toolbar", {
				id: $._UID + "-tabs-preview-toolbar",
				fullscreentoolbar: "true",
				onclick: "event.stopPropagation();",
				oncommand: "document.getElementById('" + self.id +
					"').TabsManager.PreviewFunctions.OnCommand(event);event.stopPropagation();",
			}));
			tB.appendChild($.$CNS("toolbarbutton", {
				id: $._UID + "-tabs-preview-back-button",
				class: "marked-for-invertion",
				tooltiptext: "Go backwards one page",
				label: "back"
			}));
			tB.appendChild($.$CNS("toolbarbutton", {
				id: $._UID + "-tabs-preview-forward-button",
				class: "marked-for-invertion",
				tooltiptext: "Go forward one page",
				label: "forward"
			}));
			tB.appendChild($.$CNS("toolbarbutton", {
				id: $._UID + "-tabs-preview-reload-button",
				class: "marked-for-invertion",
				tooltiptext: "Reload page",
				label: "reload"
			}));
			tB.appendChild($.$CNS("toolbarbutton", {
				id: $._UID + "-tabs-preview-pin-button",
				class: "marked-for-invertion",
				tooltiptext: "Pin tab",
				label: "pin"
			}));
			tB.appendChild($.$CNS("toolbarbutton", {
				id: $._UID + "-tabs-preview-zoom-button",
				class: "marked-for-invertion",
				tooltiptext: "Zoom preview",
				label: "zoom"
			}));
			tB.appendChild($.$CNS("spacer", {
				flex: "1"
			}));
			tB.appendChild($.$CNS("toolbarbutton", {
				id: $._UID + "-tabs-preview-close-button",
				class: "marked-for-invertion",
				tooltiptext: "Close tab",
				label: "close"
			}));
			vB.appendChild($.$CNS("html:canvas", {
				id: $._UID + "-tabs-preview-canvas"
			}, xhtmlns));
		}
	},

	OnTooltipOut: function(aE, aNode) {
		if (!$.tooltip.mozMatchesSelector(":hover"))
			$.tooltip.hidePopup();
		aE.stopPropagation();
	},

	OnTooltipHiding: function(aE, aNode) {
		$._tab.linkedBrowser.removeEventListener("MozAfterPaint", $.PreviewFunctions.OnMozAfterPaint, false);
		$._tab = null;
		$._resetPreview();
		$._resetTitle();
		clearTimeout($._hoverOpenPreviewTimer);
		$.tooltip.removeAttribute("_open");
		aE.stopPropagation();
	},

	PopulateTabsTooltip: function(aE, aNode) {
		if ($._tab.localName !== "tab")
			aE.preventDefault();
		var b = $._tab.linkedBrowser;
		if (!b)
			aE.preventDefault();
		if ($._prevDoNotAllow)
			aE.preventDefault();

		$._updateTitle();
		let tBar = $.toolbar;
		tBar.hidden = true;
		let canvas = $.canvas;
		canvas.hidden = true;
		aNode.setAttribute("_open", "true");

		if ($._TabPreviewShowToolbar)
			tBar.hidden = false;
		if (!$._TabPreviewEnabled)
			return true;
		if ($._TabPreviewRequireControlKey && !$._ctrlKeyPressed)
			return true;
		if ($._TabPreviewEnabled)
			canvas.hidden = false;
		else
			return true;
		$._tab.linkedBrowser.addEventListener("MozAfterPaint", $.PreviewFunctions.OnMozAfterPaint, false);
		$._ensureTabIsRestored();
		$._updatePreview();
		return true;
	},

	_openDelayedTooltip: function(aE) {
		if (!$._TabPreviewRequireControlKey && $._ctrlKeyPressed)
			return;
		var anotherPopupOpen = !!document.popupNode;
		if (!aE.target.mozMatchesSelector(":hover") || anotherPopupOpen)
			return;
		if (document.documentElement.mozMatchesSelector(":-moz-window-inactive"))
			return;

		if (!$._hoverOpenPreviewTimer && $.tooltip.state === "open") {
			if ($._tab.hasAttribute("pending"))
				$._updatePreview();
			return;
		}
		clearTimeout($._hoverOpenPreviewTimer);
		$._hoverOpenPreviewTimer = setTimeout(function() {
			$.tooltip.openPopup(aE.target, "", 0, 0, false, null, null);
		}, $._TabPreviewShowDelay);
	},

	_ensureTabIsRestored: function() {
		let ensure = $._TabPreviewLoadUnloadedTabs;
		let reload = function(aEnsure) {
			if (aEnsure)
				$._tab.linkedBrowser.reload();
			else
				$.canvas.height = 0;
		};
		if ("unloadTabObj" in window && $._tab.hasAttribute("uT_tabUnload"))
			reload(ensure);
		if ($._tab.linkedBrowser.__SS_restoreState === 1)
			reload(ensure);
	},

	_updatePreview: function() {
		// The timer is to avoid triggering _updatePreview() a million times per second!!
		clearTimeout($._updatePreviewTimer);
		$._updatePreviewTimer = setTimeout(function() {
			if (!$.tooltip)
				return false;
			if (!$._tab)
				return false;
			let zoomFactor = $._prevZoomedIn ? 1 + parseInt($._TabPreviewZoomFactor / 100, 10) : 1;
			let cW = parseInt($._TabPreviewWidth, 10) * zoomFactor;
			let cH = parseInt($._TabPreviewHeight, 10) * zoomFactor;
			// $.tooltipLabel.style.maxWidth = cW + "px"; // "Fix" to avoid large label to resize the entire preview.
			if ($._tab.getAttribute("pending") == "true") {
				$._resetPreview();
				if ($._TabPreviewLoadUnloadedTabs) {
					let temp = $._TabPreviewAutomaticSizePercentage / 100;
					$.canvas.width = $._lastCanvasWidth || window.content.innerWidth * temp;
					$.canvas.height = $._lastCanvasHeight || window.content.innerHeight * temp;
				}
				return;
			}
			if (!$._tab.linkedBrowser)
				return;
			$._tab.linkedBrowser.messageManager.sendAsyncMessage($._updatePreviewMsgID, {
				msgID: $._updatePreviewMsgID,
				auto: $._TabPreviewAutomaticSize,
				autoPercentage: $._TabPreviewAutomaticSizePercentage,
				zoomFactor: zoomFactor,
				width: cW,
				height: cH
			});
			if ($._TabPreviewShowToolbar)
				$.PreviewFunctions._updateToolbar();
		}, 15);
	},

	_resetPreview: function() {
		$.tooltip.removeAttribute("width");
		$.tooltip.removeAttribute("height");
		var canvas = $.canvas;
		var ctx = canvas.getContext("2d");
		ctx.clearRect(0, 0, canvas.width, canvas.height);
		canvas.removeAttribute("width");
		canvas.height = 0;
	},

	_updateTitle: function(aBtn) {
		let lbl = $.tooltipLabel;
		let uri = $._tab.linkedBrowser.currentURI.spec || "";
		if (aBtn) {
			aBtn.setAttribute("tooltiptext", aBtn.label + "\n" + uri);
			return true;
		}
		lbl.value = $._tab.label;
		lbl.setAttribute("tooltiptext", lbl.value + "\n" + uri);
		lbl.style.maxWidth = $._TabPreviewWidth.toString() + "px";
	},

	_resetTitle: function() {
		let lbl = $.tooltipLabel;
		lbl.value = "";
		lbl.removeAttribute("tooltiptext");
		lbl.style.maxWidth = "0px";
		XULBrowserWindow.setOverLink("", null);
	},

	TabsProgressListenerForPanel: {
		onStateChange: function(aBrowser) {
			// gBrowser.getTabForBrowser not defined on Palemoon. ¬¬
			let tab = gBrowser.getTabForBrowser ?
				gBrowser.getTabForBrowser(aBrowser) :
				gBrowser._getTabForBrowser(aBrowser);
			if (!tab)
				return;
			if (!$.panel || $.panel.state !== "open")
				return;
			$._setButtonAttributes(tab.mCorrespondingMenuitem, tab);
		},
	},

	TabsProgressListenerForPreview: {
		onStateChange: function(aBrowser) {
			if (!$._tab)
				return;
			if (aBrowser !== $._tab.linkedBrowser)
				return;
			if (!$.tooltip || $.tooltip.state !== "open")
				return;
			$._updatePreview();
		},

		onLocationChange: function(aBrowser) {
			if (!$._tab)
				return;
			if (aBrowser !== $._tab.linkedBrowser)
				return;
			if (!$.tooltip || $.tooltip.state !== "open")
				return;
			$.PreviewFunctions._updateToolbar();
		},
	},

	HandleOpenOnHover: function() {
		if ($._PanelOpenOnHover) {
			self.onmouseover = function(aE) {
				$.OnHotSpotMouseOver(aE);
			};
			self.onmouseout = function(aE) {
				$.OnHotSpotMouseOut(aE);
			};
		} else {
			self.onmouseover = null;
			self.onmouseout = null;
		}
	},

	HandleOptionsBox: function() {
		let hasNodes = $.optionsBox.hasChildNodes();
		if (hasNodes) {
			$.PopulateOptionsBox(true);
			$.$($._UID + "-inline-options-button").setAttribute("_checked", false);
		} else {
			$.PopulateOptionsBox(false);
			$.$($._UID + "-inline-options-button").setAttribute("_checked", true);
		}
	},

	PopulateOptionsBox: function(aDel) {
		let optB = $.optionsBox;
		optB.textContent = "";
		if (aDel)
			return false;
		let o = $.getHelp("OptionsBox");
		o = o.replace(/_U_I_D_/g, $._UID)
			.replace(/_S_E_L_F_I_D_/g, self.id);
		o = $.parseXML(o);
		// Styling in-line doesn't freaking work!!! ¬¬
		//o.style.display = "block"; // This breaks "spacers flex 1". ¬¬
		o.style.overflowX = "auto"; // "overflow" alone doesn't work either! ¬¬
		o.style.overflowY = "auto";
		//o.style.maxWidth = ($.panelWidth - 100) + "px";
		o && optB.appendChild(o);

		Array.prototype.slice.call(optB.getElementsByTagName("textbox")).forEach(function(aTBox) {
			let pref = aTBox.getAttribute("_pref");
			aTBox.value = $["_" + pref];
			aTBox.style.listStyleImage = "none"; // Remove stupid wrong icons. ¬¬
			aTBox.onchange = function(aE) {
				let tBox = this;
				if (pref === "PanelVerticalOffset") {
					let panel = $.panel;
					let curVal = $._PanelVerticalOffset;
					let tBoxVal = tBox.value;
					let deltaY = parseInt(tBoxVal, 10) - parseInt(curVal, 10);
					panel.moveTo(parseInt(panel.boxObject.screenX, 10), parseInt(panel.boxObject.screenY + deltaY, 10));
				}
				setTimeout(function() {
					$.sPref(pref, parseInt(tBox.value, 10));
				}, 10);
			};
		});

		Array.prototype.slice.call(optB.getElementsByTagName("checkbox")).forEach(function(aCBox) {
			aCBox.checked = $["_" + aCBox.getAttribute("_pref")];
			aCBox.onclick = function(aE) {
				let pref = aE.target.getAttribute("_pref");
				let val = $["_" + pref];
				$.sPref(pref, !val);
				$._checkPrevOptVis(optB);
				$._checkTabsPerRowOptVis(optB);
				aE.stopPropagation();
			};
		});

		$._checkPrevOptVis(optB);
		$._checkTabsPerRowOptVis(optB);

		Array.prototype.slice.call(optB.getElementsByTagName("radiogroup")).forEach(function(aRadG) {
			let pref = aRadG.getAttribute("_pref");
			aRadG.selectedIndex = $["_" + pref];
			aRadG.onselect = function(aE) {
				setTimeout(function() {
					$.sPref(pref, aE.target.selectedIndex);
				}, 10);
			};
		});
	},

	_checkTabsPerRowOptVis: function(aOptB) {
		Array.prototype.slice.call(aOptB.getElementsByAttribute("_auto_tab", "*")).forEach(function(aOptEl) {
			let auto = $._PanelButtonTabsPerRowAuto;
			if (aOptEl.getAttribute("_auto_tab") == "true")
				aOptEl.hidden = !auto;
			else
				aOptEl.hidden = auto;
		});
	},

	_checkPrevOptVis: function(aOptB) {
		let prevEnabled = $._TabPreviewEnabled;
		Array.prototype.slice.call(aOptB.getElementsByAttribute("_preview", "*")).forEach(function(aOptEl) {
			aOptEl.hidden = !prevEnabled;
		});
		if (!prevEnabled)
			return true;
		Array.prototype.slice.call(aOptB.getElementsByAttribute("_preview_size", "*")).forEach(function(aOptEl) {
			let auto = $._TabPreviewAutomaticSize;
			if (aOptEl.getAttribute("_preview_size") == "true")
				aOptEl.hidden = !auto;
			else
				aOptEl.hidden = auto;
		});
	},

	// CreateMainPanel: function() {
	// 	var panel = $.panel;
	// 	if (!panel) {
	// 		let p = $.getHelp("MainPanel");
	// 		p = p.replace(/_U_I_D_/g, $._UID)
	// 			.replace(/_N_O_G_R_O_U_P_S_/gm, !$.hasTabView)
	// 			.replace(/_N_O_H_I_D_E_/g, $._PanelKeepItOpen)
	// 			.replace(/_S_E_L_F_I_D_/g, self.id);
	// 		p = $.parseXML(p);
	// 		p && $.$("mainPopupSet").appendChild(p);
	// 	}
	// },
	/*
	<panel id="_U_I_D_-main-panel"
		 xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
		 orient="vertical"
		 flip="slide"
		 cb_id="_U_I_D_"
		 level="parent"
		 consumeoutsideclicks="false"
		 noautohide="_N_O_H_I_D_E_"
		 onmouseout="event.stopPropagation();"
		 onclick="event.stopPropagation();"
		 oncommand="event.stopPropagation();"
		 onpopupshowing="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.OnPanelShowing(event, this);"
		 onpopuphiding="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.OnPanelHidden(event, this);">
		<hbox id="_U_I_D_-main-panel-box">
			<vbox>
				<vbox id="_U_I_D_-tabs-groups-box"
					  align="center"
					  _group="true"
					  hidden="_N_O_G_R_O_U_P_S_"
					  context="_U_I_D_-tabs-groups-box-context"/>
				<vbox id="_U_I_D_-tabs-box"
					  onclick="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.OnItemClick(event);event.stopPropagation();"
					  oncommand="event.stopPropagation();"
					  oncontextmenu="event.stopPropagation();"
					  onmousemove="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.OnMouseMoveItem(event);"
					  onmouseover="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.OnMouseOverItem(event);"
					  onmouseout="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.OnMouseOutItem(event);"
					  ondragstart="document.getElementById('_S_E_L_F_I_D_').TabsManager.DragAndDropHandler.onDragStart(event);"
					  ondragover="document.getElementById('_S_E_L_F_I_D_').TabsManager.DragAndDropHandler.onDragOver(event);"
					  ondrop="document.getElementById('_S_E_L_F_I_D_').TabsManager.DragAndDropHandler.onDrop(event);"/>
			</vbox>
			<spacer flex="1"/>
			<vbox maxwidth="48" class="tabs-manager-options-buttons">
				<toolbarbutton id="_U_I_D_-hide-groups-box-button"
							   flex="999"
							   hidden="_N_O_G_R_O_U_P_S_"
							   tooltiptext="Hide groups row."
							   class="marked-for-invertion"
							   oncommand="event.stopPropagation();"
							   onclick="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.toggleGroupButtons();"/>
				<toolbarbutton id="_U_I_D_-add-group-button"
							   flex="999"
							   hidden="_N_O_G_R_O_U_P_S_"
							   _group="true"
							   tooltiptext="Add a new group."
							   class="marked-for-invertion"
							   oncommand="event.stopPropagation();"
							   onclick="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.AddGroupBtn(event);"/>
				<box flex="1">
					<toolbarbutton id="_U_I_D_-new-tab-button"
							   maxwidth="500"
							   tooltiptext="Open New tab"
							   class="marked-for-invertion"
							   oncommand="BrowserOpenTab();"/>
				</box>
				<toolbarbutton id="_U_I_D_-open-options-button"
							   tooltiptext="Open Tabs Manager options page."
							   class="marked-for-invertion"
							   oncommand="event.stopPropagation();document.getElementById('_S_E_L_F_I_D_').TabsManager.openOptions();"/>
				<toolbarbutton id="_U_I_D_-inline-options-button"
							   tooltiptext="Show inline options."
							   class="marked-for-invertion"
							   oncommand="document.getElementById('_S_E_L_F_I_D_').TabsManager.HandleOptionsBox();"/>
			</vbox>
		</hbox>
		<vbox id="_U_I_D_-options-box" />
	</panel>
	*/
	CreateMainPanel: function() {
		if (!$.panel) {
			let p = $.$("mainPopupSet").appendChild($.$CNS("panel", {
				id: $._UID + "-main-panel",
				orient: "vertical",
				flip: "slide",
				cb_id: $._UID,
				level: "parent",
				consumeoutsideclicks: "false",
				noautohide: $._PanelKeepItOpen,
				onmouseout: "event.stopPropagation();",
				onclick: "event.stopPropagation();",
				oncommand: "event.stopPropagation();",
				onpopupshowing: "document.getElementById('" + self.id +
					"').TabsManager.PanelFunctions.OnPanelShowing(event, this);event.stopPropagation();",
				onpopuphiding: "document.getElementById('" + self.id +
					"').TabsManager.PanelFunctions.OnPanelHidden(event, this);event.stopPropagation();",
			}));
			let hB = p.appendChild($.$CNS("hbox", {
				id: $._UID + "-main-panel-box"
			}));
			let vB1 = hB.appendChild($.$CNS("vbox"));
			vB1.appendChild($.$CNS("vbox", {
				id: $._UID + "-tabs-groups-box",
				align: "center",
				_group: true,
				hidden: !$.hasTabView,
				context: $._UID + "-tabs-groups-box-context",
			}));
			vB1.appendChild($.$CNS("vbox", {
				id: $._UID + "-tabs-box",
				onclick: "document.getElementById('" + self.id +
					"').TabsManager.PanelFunctions.OnItemClick(event);event.stopPropagation();",
				oncommand: "event.stopPropagation();",
				oncontextmenu: "event.stopPropagation();",
				onmousemove: "document.getElementById('" + self.id +
					"').TabsManager.PanelFunctions.OnMouseMoveItem(event);",
				onmouseover: "document.getElementById('" + self.id +
					"').TabsManager.PanelFunctions.OnMouseOverItem(event);",
				onmouseout: "document.getElementById('" + self.id +
					"').TabsManager.PanelFunctions.OnMouseOutItem(event);",
				ondragstart: "document.getElementById('" + self.id +
					"').TabsManager.DragAndDropHandler.onDragStart(event);",
				ondragover: "document.getElementById('" + self.id +
					"').TabsManager.DragAndDropHandler.onDragOver(event);",
				ondrop: "document.getElementById('" + self.id +
					"').TabsManager.DragAndDropHandler.onDrop(event);",
			}));
			hB.appendChild($.$CNS("spacer", {
				flex: 1
			}));
			let vB2 = hB.appendChild($.$CNS("vbox", {
				maxwidth: 48,
				class: "tabs-manager-options-buttons"
			}));
			vB2.appendChild($.$CNS("toolbarbutton", {
				id: $._UID + "-hide-groups-box-button",
				flex: 999,
				hidden: !$.hasTabView,
				tooltiptext: "Hide groups row.",
				class: "marked-for-invertion",
				oncommand: "event.stopPropagation();",
				onclick: "document.getElementById('" + self.id +
					"').TabsManager.PanelFunctions.toggleGroupButtons();",
			}));
			vB2.appendChild($.$CNS("toolbarbutton", {
				id: $._UID + "-add-group-button",
				flex: 999,
				hidden: !$.hasTabView,
				_group: "true",
				tooltiptext: "Add a new group.",
				class: "marked-for-invertion",
				oncommand: "event.stopPropagation();",
				onclick: "document.getElementById('" + self.id +
					"').TabsManager.PanelFunctions.AddGroupBtn(event);",
			}));
			vB2.appendChild($.$CNS("box", {
				flex: 1
			})).appendChild($.$CNS("toolbarbutton", {
				id: $._UID + "-new-tab-button",
				maxwidth: 500,
				tooltiptext: "Open New tab",
				class: "marked-for-invertion",
				oncommand: "BrowserOpenTab();event.stopPropagation();",
			}));
			vB2.appendChild($.$CNS("toolbarbutton", {
				id: $._UID + "-open-options-button",
				tooltiptext: "Open Tabs Manager options page.",
				class: "marked-for-invertion",
				oncommand: "document.getElementById('" + self.id +
					"').TabsManager.openOptions();event.stopPropagation();",
			}));
			vB2.appendChild($.$CNS("toolbarbutton", {
				id: $._UID + "-inline-options-button",
				tooltiptext: "Show inline options.",
				class: "marked-for-invertion",
				oncommand: "document.getElementById('" + self.id +
					"').TabsManager.HandleOptionsBox();",
			}));

			p.appendChild($.$CNS("vbox", {
				id: $._UID + "-options-box"
			}));
			// p = p.replace(/_U_I_D_/g, $._UID)
			// 	.replace(/_N_O_G_R_O_U_P_S_/gm, !$.hasTabView)
			// 	.replace(/_N_O_H_I_D_E_/g, $._PanelKeepItOpen)
			// 	.replace(/_S_E_L_F_I_D_/g, self.id);
			// p = $.parseXML(p);
			// p && $.$("mainPopupSet").appendChild(p);
		}
	},

	_reloadTab: function(aTab, aE) {
		if (aE.target.getAttribute("_loading") == "true") {
			aTab.linkedBrowser.stop();
			return;
		}
		if (aE.shiftKey) {
			let flags = Ci.nsIWebNavigation.LOAD_FLAGS_BYPASS_PROXY |
				Ci.nsIWebNavigation.LOAD_FLAGS_BYPASS_CACHE;
			aTab.linkedBrowser.reloadWithFlags(flags);
		} else {
			aTab.linkedBrowser.reload();
		}
	},

	PreviewFunctions: {
		OnClick: function(aE) {
			if (aE.target.localName === "canvas")
				$.PreviewFunctions._performAction("emulate", aE);
		},

		OnCommand: function(aE) {
			$.PreviewFunctions._performAction(aE.target.label, aE);
		},

		OnMozAfterPaint: function(aE) {
			if (aE.clientRects.length > 0)
				$._updatePreview();
		},

		OnDOMScroll: function(aE) {
			aE.preventDefault();
			aE.stopPropagation();
			if ($._TabPreviewAutomaticSize && !$.canvas._scaleX && !$.canvas._scaleY)
				return;
			if (!$._TabPreviewAutomaticSize && !$.canvas._scale)
				return;
			let rect = $.canvas.getBoundingClientRect();
			$._tab.linkedBrowser.messageManager.sendAsyncMessage($._scrollMsgID, {
				x: (aE.clientX - rect.left) / ($._TabPreviewAutomaticSize ? $.canvas._scaleX : $.canvas._scale),
				y: (aE.clientY - rect.top) / ($._TabPreviewAutomaticSize ? $.canvas._scaleY : $.canvas._scale),
				lines: aE.detail,
				ctrlKey: aE.ctrlKey,
				shiftKey: aE.shiftKey,
			});
			$._updatePreview();
		},

		_performAction: function(aCmd, aE) {
			switch (aCmd) {
				case "back":
					$._tab.linkedBrowser.goBack();
					return;
				case "forward":
					$._tab.linkedBrowser.goForward();
					return;
				case "reload":
					$._reloadTab($._tab, aE);
					return;
				case "pin":
					gBrowser[$._tab.pinned ? "unpinTab" : "pinTab"]($._tab);
					$._appendTabsToTabsBox($.$($._UID + "-tabs-box"));
					break;
				case "close":
					gBrowser.removeTab($._tab, {
						animate: true
					});
					break;
				case "zoom":
					$._prevZoomedIn = !$._prevZoomedIn;
					$._resetPreview();
					$._updatePreview();
					return;
				case "emulate":
					var elt;
					try {
						elt = $.PreviewFunctions._elementFromPointOnPreview(aE);
					} catch (aErr) {
						elt = null;
					}
					if (elt && elt.namespaceURI === xulns) { // For XUL content only.
						let view = elt.ownerDocument.defaultView;
						if (elt.localName === "button")
							elt.doCommand();
						else if (elt.localName === "checkbox")
							elt.checked = !elt.checked;
						else {
							elt.dispatchEvent(new view.MouseEvent("mousedown", { // "click" event doesn't work on XUL content. ¬¬
								view: view,
								cancelable: true,
								bubbles: true,
								button: aE.button,
								ctrlKey: aE.ctrlKey,
								altKey: aE.altKey,
								shiftKey: aE.shiftKey,
								metaKey: aE.metaKey
							}));
						}
					} else { // For web page content only.
						if ($._TabPreviewAutomaticSize && !$.canvas._scaleX && !$.canvas._scaleY)
							return;
						if (!$._TabPreviewAutomaticSize && !$.canvas._scale)
							return;
						var rect = $.canvas.getBoundingClientRect();
						var x = (aE.clientX - rect.left) / ($._TabPreviewAutomaticSize ? $.canvas._scaleX : $.canvas._scale);
						var y = (aE.clientY - rect.top) / ($._TabPreviewAutomaticSize ? $.canvas._scaleY : $.canvas._scale);
						$._tab.linkedBrowser.messageManager.sendAsyncMessage($._emulateMsgID, {
							x: x,
							y: y,
							type: "click", // "mousedown" event doesn't work on web content. ¬¬
							button: aE.button,
							ctrlKey: aE.ctrlKey,
							altKey: aE.altKey,
							shiftKey: aE.shiftKey,
							metaKey: aE.metaKey
						});
					}
					$._updatePreview();
					return;
				default:
					return;
			}
			$.tooltip.hidePopup();
		},

		_updateToolbar: function() {
			var toolbar = $.toolbar;
			if (toolbar.hidden)
				return;
			if (toolbar.collapsed)
				toolbar.collapsed = false;
			var browser = $._tab.linkedBrowser;
			$.$($._UID + "-tabs-preview-back-button").disabled = !browser.canGoBack;
			$.$($._UID + "-tabs-preview-forward-button").disabled = !browser.canGoForward;
			var button = $.$($._UID + "-tabs-preview-reload-button");
			if (!button.hidden)
				button.setAttribute("_loading", browser.webProgress.isLoadingDocument);
			button = $.$($._UID + "-tabs-preview-pin-button");
			if (!button.hidden)
				button.setAttribute("_active", $._tab.pinned);
			button = $.$($._UID + "-tabs-preview-zoom-button");
			if (!button.hidden)
				button.setAttribute("_active", $._prevZoomedIn);
		},

		_elementFromPointOnPreview: function(aE) {
			var rect = $.canvas.getBoundingClientRect();
			var x = (aE.clientX - rect.left) / ($._TabPreviewAutomaticSize ? $.canvas._scaleX : $.canvas._scale);
			var y = (aE.clientY - rect.top) / ($._TabPreviewAutomaticSize ? $.canvas._scaleY : $.canvas._scale);
			var win = $._tab.linkedBrowser.contentWindow;
			var elt = win.document.elementFromPoint(x, y);
			if (!elt)
				elt = win.QueryInterface(Ci.nsIInterfaceRequestor).
			getInterface(Ci.nsIDOMWindowUtils).
			elementFromPoint(x, y, true, false);
			if (!elt)
				elt = win.document.body || win.document.documentElement;
			while (/^i?frame$/.test(elt.localName.toLowerCase())) {
				x -= elt.getBoundingClientRect().left;
				y -= elt.getBoundingClientRect().top;
				elt = elt.contentDocument.elementFromPoint(x, y);
			}
			return elt;
		},
	},

	PanelFunctions: {
		OnPanelHidden: function(aE, aNode) {
			aNode.height = 0;
			aNode.width = 0;
			$.PanelFunctions._removeListeners();
			$.tooltip.hidePopup();
			aE.stopPropagation();
		},

		_removeListeners: function() { // Outside of OnPanelHidden so I can call it from onDestroy().
			let tabcontainer = gBrowser.tabContainer;
			tabcontainer.removeEventListener("TabAttrModified", $.tabContainerListener, false);
			tabcontainer.removeEventListener("TabClose", $.tabContainerListener, false);
			tabcontainer.removeEventListener("TabOpen", $.tabContainerListener, false);
			tabcontainer.removeEventListener("TabPinned", $.tabContainerListener, false);
			tabcontainer.removeEventListener("TabUnpinned", $.tabContainerListener, false);
			$.canvas.removeEventListener("click", $.PreviewFunctions.OnClick, true);
			$.canvas.removeEventListener("DOMMouseScroll", $.PreviewFunctions.OnDOMScroll, false);
			if ($._tab)
				$._tab.linkedBrowser &&
				$._tab.linkedBrowser.removeEventListener("MozAfterPaint", $.PreviewFunctions.OnMozAfterPaint, false);
			gBrowser.removeTabsProgressListener($.TabsProgressListenerForPanel);
			gBrowser.removeTabsProgressListener($.TabsProgressListenerForPreview);
		},

		OnPanelShowing: function(aE, aPanel) {
			aPanel.width = $.panelWidth;
			aPanel.maxWidth = $.panelWidth;
			let tabcontainer = gBrowser.tabContainer;
			tabcontainer.addEventListener("TabAttrModified", $.tabContainerListener, false);
			tabcontainer.addEventListener("TabClose", $.tabContainerListener, false);
			tabcontainer.addEventListener("TabOpen", $.tabContainerListener, false);
			tabcontainer.addEventListener("TabPinned", $.tabContainerListener, false);
			tabcontainer.addEventListener("TabUnpinned", $.tabContainerListener, false);
			gBrowser.addTabsProgressListener($.TabsProgressListenerForPanel);
			if ($._TabPreviewEnabled) {
				// Doesn't matter wich event to listen to. "click" doesn't work on XUL content and "mousedown" doesn't work on web content.
				// The correct event to use is defined in the "emulate" case of _performAction function.
				if ($._TabPreviewSendClicks)
					$.canvas.addEventListener("click", $.PreviewFunctions.OnClick, true);
				if ($._TabPreviewSendScroll)
					$.canvas.addEventListener("DOMMouseScroll", $.PreviewFunctions.OnDOMScroll, false);
				gBrowser.addTabsProgressListener($.TabsProgressListenerForPreview);
			}
			$._appendButtonsToGroupsBox($.$($._UID + "-tabs-groups-box"));
			$._appendTabsToTabsBox($.$($._UID + "-tabs-box"));
			let optB = $.optionsBox.hasChildNodes();
			$.$($._UID + "-inline-options-button").setAttribute("_checked", optB);
			optB && $.PopulateOptionsBox(false);
			$.PanelFunctions.HandleGroupsElements();
			aE.stopPropagation();
		},

		AddGroupBtn: function(aE) {
			if (aE.button !== 0)
				return false;
			$.GroupItems.newGroup().newTab();
			setTimeout(function() {
				$._appendButtonsToGroupsBox($.$($._UID + "-tabs-groups-box"));
			}, 100);
			aE.stopPropagation();
		},

		OnItemClick: function(aE) {
			clearTimeout($._PanelSelectTabOnHoverTimer);
			clearTimeout($._hoverOpenPreviewTimer);
			$.tooltip.hidePopup();
			if (aE.button === 2)
				return true;
			var btn = aE.target;
			var tab = btn.tab;
			if (btn.localName !== "toolbarbutton" || !tab)
				return false;
			if (aE.button === 0 && !aE.shiftKey && aE.ctrlKey && !aE.altKey)
				$.PanelFunctions._multiSelectTab(btn, tab);
			else if (aE.button === 0 && !aE.shiftKey && !aE.ctrlKey && !aE.altKey)
				gBrowser.tabContainer._notifyBackgroundTab(gBrowser.selectedTab = tab);
			else if (aE.button === 1 && !aE.shiftKey && !aE.ctrlKey && !aE.altKey) {
				switch ($._PanelMiddleClickOnTabAction) {
					case 0: // Close tab
						gBrowser.removeTab(tab);
						break;
					case 1: // Reload tab
						$._reloadTab(tab, aE);
						setTimeout(function() {
							$._setButtonAttributes(btn, tab);
						}, 10);
						break;
					case 2: // Multi-select tab
						$.PanelFunctions._multiSelectTab(btn, tab);
						break;
					default:
						Services.prompt.alert(null, self.name, "You manually changed the preference" +
							" called \"PanelMiddleClickOnTabAction\" to an invalid value!!!\n" +
							"Go to " + self.name + " options page and reset that preference, then" +
							"choose the action you want from the in-line options inside the main panel.");
						break;
				}
			}
			aE.stopPropagation();
		},

		_multiSelectTab: function(aBtn, aTab) {
			if (aBtn.hasAttribute("_multisel")) {
				aBtn.removeAttribute("_multisel");
				if (gBrowser.selectedTab !== aTab)
					aBtn.removeAttribute("checked");
			} else {
				aBtn.removeAttribute("type"); // Remove to avoid checked state. ¬¬
				aBtn.removeAttribute("group"); // Remove to avoid checked state. ¬¬
				aBtn.setAttribute("_multisel", true);
				if (gBrowser.selectedTab !== aTab)
					aBtn.removeAttribute("checked");
			}
		},

		OnMouseMoveItem: function(aE) {
			var btn = aE.target;
			var tab = btn.tab;
			if (btn.localName !== "toolbarbutton" || !tab)
				return false;
			$._tab = tab;
			if (!$._TabPreviewEnabled && !$._TabPreviewShowToolbar)
				return false;
			$.tooltip.removeAttribute("width");
			$.tooltip.removeAttribute("height");
			$._ctrlKeyPressed = aE.ctrlKey;
			$._openDelayedTooltip(aE);
			aE.stopPropagation();
		},

		OnMouseOverItem: function(aE) {
			var btn = aE.target;
			var tab = btn.tab;
			if (btn.localName !== "toolbarbutton" || !tab)
				return false;
			try {
				XULBrowserWindow.setOverLink(tab.linkedBrowser.currentURI.spec, null);
			} catch (aErr) {}
			if (gBrowser._removingTabs.indexOf(tab) > -1)
				return true;
			if ($._PanelSelectTabOnHover) {
				clearTimeout($._PanelSelectTabOnHoverTimer);
				$._PanelSelectTabOnHoverTimer = setTimeout(function() {
					gBrowser.selectedTab = tab;
				}, $._PanelSelectTabOnHoverDelay);
				return true;
			}
			$._tab = tab;
			if (!$._TabPreviewEnabled && !$._TabPreviewShowToolbar) {
				$._updateTitle(btn);
				return false;
			}
			if (!$._TabPreviewEnabled)
				return true;
			tab.linkedBrowser.removeEventListener("MozAfterPaint", $.PreviewFunctions.OnMozAfterPaint, false);
			if (!$._hoverOpenPreviewTimer && $.tooltip.state === "open")
				$.tooltip.hidePopup();
			$._ctrlKeyPressed = aE.ctrlKey;
			tab.linkedBrowser.addEventListener("MozAfterPaint", $.PreviewFunctions.OnMozAfterPaint, false);
			$._updatePreview();
			aE.stopPropagation();
		},

		OnMouseOutItem: function(aE) {
			aE.preventDefault();
			var btn = aE.target;
			var tab = btn.tab;
			if (btn.localName !== "toolbarbutton" || !tab)
				return false;
			$._ctrlKeyPressed = aE.ctrlKey;
			XULBrowserWindow.setOverLink("", null);
			clearTimeout($._PanelSelectTabOnHoverTimer);
			clearTimeout($._hoverOpenPreviewTimer);
			var x = aE.screenX,
				y = aE.screenY;
			if ($._tooltipAllowHovering && $.tooltip.state === "open") {
				let box = $.tooltip.boxObject;
				if (box.screenX <= x && x < box.screenX + box.width &&
					box.screenY <= y && y < box.screenY + box.height)
					return;
			}
			$.tooltip.hidePopup();
			aE.stopPropagation();
		},

		HandleGroupsElements: function() {
			Array.prototype.slice.call($.panel.getElementsByAttribute("_group", "*")).forEach(function(aEl) {
				aEl.collapsed = $._PanelHideGroupsRow;
			});
			$.$($._UID + "-hide-groups-box-button").setAttribute("_checked", !$._PanelHideGroupsRow);
		},

		toggleGroupButtons: function() {
			$.sPref("PanelHideGroupsRow", !$._PanelHideGroupsRow);
		},
	},

	togglePanel: function() {
		var panel = $.panel;
		if (panel) {
			if (panel.state === "open")
				panel.hidePopup();
			else
				panel.openPopup($.panelAnchor, $.panelPosition, 0, $._PanelVerticalOffset, false, false, null);
		}
	},

	openOptions: function() {
		var em = Services.ww.getWindowEnumerator("CB:TabsManager:Settings");
		var index = 1;
		while (em.hasMoreElements()) {
			let win = em.getNext();
			if (win.document.documentElement.getAttribute("windowtype") === "CB:TabsManager:Settings") {
				win.focus();
				return;
			}
			index++;
		}
		let xul = $.getHelp("OptionsWindow");
		let storage = {};
		storage["self_id"] = self.id;
		xul = xul.replace(/\t+/gm, "")
			.replace(/>\s+</g, "><")
			.replace("_self_", "opener.document.getElementById('" + self.id + "')");
		xul = xul.split("_U_I_D_").join($._UID);
		xul = xul.split("_RoOt_").join($.Branch);
		let url = "data:application/vnd.mozilla.xul+xml;text/plain," + encodeURIComponent(xul);
		let win = openDialog(url, "", "chrome, resizable, dependant, dialog, centerscreen, close, alwaysRaised");
		win._storage = storage;
	},

	_appendButtonsToGroupsBox: function(aGBox) {
		if (!$.hasTabView)
			return true;
		aGBox.textContent = "";
		var groups = $.GroupItems.groupItems;
		var breakPoint = 0;
		var btnPerRow = $._PanelButtonGroupsPerRow;
		var btnWidth = (($.panelWidth - 100) / btnPerRow) - 2;
		var count = 0;
		let onClick = function(aE) {
			if (aE.button === 0 && !aE.shiftKey && !aE.ctrlKey && !aE.altKey) {
				Array.prototype.slice.call(aE.target.parentNode.parentNode.getElementsByTagName("toolbarbutton")).forEach(function(aBtn) {
					(aBtn !== aE.target) && (aBtn.checked = false);
				});
				$._setGroup(aE.target.getAttribute("groupid"));
			}
			aE.stopPropagation();
		};
		var createRow = function(aArr) {
			let hbox = aGBox.appendChild($.$CNS("hbox", {
				align: "center"
			}));
			var g = 0,
				aLen = aArr.length;
			for (; g < aLen; g++) {
				let gI = aArr[g];
				let title = gI.getTitle();

				if (!title.trim()) {
					count++;
					title = "Unnamed group #" + count;
					gI.setTitle(title);
				}

				let btn = $.$CNS("toolbarbutton", {
					label: "(" + gI._children.length + ") " + title,
					type: "radio",
					maxwidth: parseInt(btnWidth, 10),
					class: "tabs-groups-button",
					group: $._UID + "-groups-radio-group",
					tooltiptext: title,
					groupid: gI.id,
					checked: $.GroupItems.getActiveGroupItem() === gI,
					autocheck: false,
					ondragover: "document.getElementById('" + self.id + "').TabsManager.DragAndDropHandler.onDragOver(event);event.stopPropagation();",
					ondrop: "document.getElementById('" + self.id + "').TabsManager.DragAndDropHandler.onDrop(event);event.stopPropagation();",
					oncommand: "event.stopPropagation();",
					crop: "end",
				});

				btn.onclick = onClick;
				hbox.appendChild(btn);
			}
		};
		var i = 0,
			gLen = groups.length,
			gRow = [];
		for (; i < gLen; i++) {
			breakPoint++;
			gRow.push(groups[i]);
			if ((gRow.length === btnPerRow) || (i + 1) === groups.length) {
				breakPoint = 0;
				createRow(gRow);
				gRow = [];
				continue;
			}
		}
		aGBox.appendChild($.$CNS("spacer", {
			flex: 1
		}));
		aGBox.collapsed = $._PanelHideGroupsRow;
	},

	_setGroup: function(aGroupItemID) {
		try {
			let currentGroupItem = $.GroupItems.getActiveGroupItem();
			let activateGroupItem = $.GroupItems.groupItem(aGroupItemID);
			window.gBrowser.selectedTab = activateGroupItem._children[0].tab;
			setTimeout(function() {
				$._appendTabsToTabsBox($.$($._UID + "-tabs-box"));
			}, 100);
		} catch (aErr) {
			LOG(aErr);
			return false;
		}
	},

	_moveTabToGroupItem: function(aTab, aGroupItemId, aAvoidUpdate) {
		if (aTab._tabViewTabItem.parent && aTab._tabViewTabItem.parent.id === aGroupItemId)
			return;
		let shouldUpdateTabBar = false;
		let groupItem;
		if (aTab.selected) {
			if (gBrowser.visibleTabs.length > 1) {
				gBrowser._blurTab(aTab);
				shouldUpdateTabBar = true;
			}
		} else {
			shouldUpdateTabBar = true;
		}
		if (aTab._tabViewTabItem.parent)
			aTab._tabViewTabItem.parent.remove(aTab._tabViewTabItem);
		groupItem = $.GroupItems.groupItem(aGroupItemId);
		groupItem.add(aTab._tabViewTabItem);
		if (shouldUpdateTabBar && !aAvoidUpdate)
			$.GroupItems._updateTabBar();
	},

	_appendTabsToTabsBox: function(aBox) {
		let panel = $.panel;
		if (!panel)
			return false;
		if (panel && panel.state === "closed")
			return false;
		aBox.textContent = "";
		let tabs = gBrowser.visibleTabs;
		let boxWidth = $.panelWidth - 48;
		let btnPerRow = $._PanelButtonTabsPerRowAuto ?
			Math.round(boxWidth / $._PanelButtonTabsPerRowAutoWidth) :
			$._PanelButtonTabsPerRow;
		let colWidth = (boxWidth / btnPerRow);
		let breakPoint = 0;
		let tabRow = [];
		let pinnedTabs = [];

		let grid = aBox.appendChild($.$CNS("grid", {
			id: $._UID + "tabs-box-grid",
			maxwidth: boxWidth,
			minwidth: boxWidth,
		}));

		let cols = grid.appendChild($.$CNS("columns"));

		while (breakPoint !== btnPerRow) {
			breakPoint++;
			cols.appendChild($.$CNS("column", {
				flex: 1,
				width: colWidth
			}));
		}

		let rows = grid.appendChild($.$CNS("rows"));
		let createRow = function(aArr) {
			let row = rows.appendChild($.$CNS("row"));
			let i = 0,
				iLen = aArr.length;
			for (; i < iLen; i++) {
				let btn = $.$CNS("toolbarbutton", {
					type: "radio",
					context: "tabContextMenu",
					autocheck: false,
					group: $._UID + "-tabs-radio-group",
					oncontextmenu: "event.stopPropagation();",
					oncommand: "event.stopPropagation();",
				});
				row.appendChild(btn);
				$._setButtonAttributes(btn, aArr[i]);
				aArr[i].mCorrespondingMenuitem = btn;
				btn.tab = aArr[i];
			}
			if (aArr.length !== btnPerRow) {
				let dummies = btnPerRow - (aArr.length % btnPerRow || btnPerRow);
				while (dummies) {
					dummies--;
					row.appendChild($.$CNS("toolbaritem", {
						//width: parseInt(btnWidth),
						dummy: true,
						disabled: true,
						image: "",
					}));
				}
			}
		};
		var t = 0,
			tLen = tabs.length;
		for (; t < tLen; t++) {
			if (tabs[t].pinned) {
				if ($._PanelShowPinnedTabs)
					pinnedTabs.push(tabs[t]);
				continue;
			}
			breakPoint++;
			tabRow.push(tabs[t]);
			if ((tabRow.length === btnPerRow) || (t + 1) === tabs.length) {
				breakPoint = 0;
				createRow(tabRow);
				tabRow = [];
				continue;
			}
		}

		if (pinnedTabs.length > 0 && $._PanelShowPinnedTabs) {
			let pinBox = aBox.insertBefore($.$CNS("hbox", {
				id: $._UID + "-pinned-tabs-box",
			}), aBox.childNodes[0]);

			pinBox.appendChild($.$CNS("spacer", {
				flex: 1
			}));

			let appendPinnedTab = function(aPTab) {
				let btn = pinBox.appendChild($.$CNS("toolbarbutton", {
					type: "radio",
					context: "tabContextMenu",
					autocheck: false,
					group: $._UID + "-tabs-radio-group",
					oncontextmenu: "event.stopPropagation();",
					oncommand: "event.stopPropagation();",
				}));
				$._setButtonAttributes(btn, aPTab);
				aPTab.mCorrespondingMenuitem = btn;
				btn.tab = aPTab;
			};
			var p = 0,
				pLen = pinnedTabs.length;
			for (; p < pLen; p++) {
				appendPinnedTab(pinnedTabs[p]);
			}
			pinBox.appendChild($.$CNS("spacer", {
				flex: 1
			}));
		}
	},

	tabContainerListener: function(aE) {
		var tab = aE.target;
		var btn = tab.mCorrespondingMenuitem;
		if ($.panel.state !== "open" || $.tooltip.hasAttribute("_open"))
			return true;
		switch (aE.type) {
			case "TabAttrModified":
				if (btn)
					$._setButtonAttributes(btn, tab);
				break;
			case "TabClose":
			case "TabOpen":
			case "TabPinned":
			case "TabUnpinned":
				clearTimeout($._appendTabsToTabsBoxTimer);
				$._appendTabsToTabsBoxTimer = setTimeout(function() {
					$._appendButtonsToGroupsBox($.$($._UID + "-tabs-groups-box"));
					$._appendTabsToTabsBox($.$($._UID + "-tabs-box"));
				}, 50);
				break;
		}
	},

	_setButtonAttributes: function(aBtn, aTab) {
		if (!aBtn || !aTab)
			return true;
		aBtn.setAttribute("label", aTab.label);
		aBtn.setAttribute("crop", aTab.getAttribute("crop"));

		if (aTab.hasAttribute("busy"))
			aBtn.setAttribute("image", "chrome://global/skin/icons/loading_16.png");
		else
			aBtn.setAttribute("image", aTab.getAttribute("image") || "chrome://branding/content/icon16.png");

		if (aTab.hasAttribute("pending"))
			aBtn.setAttribute("pending", aTab.getAttribute("pending"));
		else
			aBtn.removeAttribute("pending");

		if (aTab.selected)
			aBtn.setAttribute("checked", "true");
		else
			aBtn.removeAttribute("checked");

		if (aTab.hasAttribute("pinned"))
			aBtn.setAttribute("pinned", true);
		else
			aBtn.removeAttribute("pinned");

		if (aTab.hasAttribute("muted"))
			aBtn.setAttribute("muted", true);
		else if (aTab.hasAttribute("soundplaying"))
			aBtn.setAttribute("soundplaying", true);
		else {
			aBtn.removeAttribute("muted");
			aBtn.removeAttribute("soundplaying");
		}
	},

	CSSLoader: function() {
		let css = "@namespace url(" + xulns + ");\n" + $.getHelp("StyleSheet")
			.replace(/_U_I_D_/g, $._UID)
			.replace(/_I_C_O_N_S_I_Z_E_/g, $._MaxIconSizeForTabButtonsInPanel)
			.replace(/_S_E_L_F_I_D_/g, self.id);
		if (!window[$._UID]["StyleSheet"]) {
			window[$._UID]["StyleSheet"] = css;
			$.styleSheet(css);
		} else if (window[$._UID]["StyleSheet"] && window[$._UID]["StyleSheet"] !== css) {
			$.styleSheet(window[$._UID]["StyleSheet"], true);
			window[$._UID]["StyleSheet"] = css;
			$.styleSheet(css);
		}
	},

	handleInvertedImages: function() {
		let invImg = document.getElementsByClassName("marked-for-invertion");
		for (let i = 0; i < invImg.length; i++)
			invImg[i].classList[$._PanelInvertDarkIcons ? "add" : "remove"]("inverted-color-for-this-image");
	},

	DragAndDropHandler: {
		onDragStart: function(aE) {
			this._ensureTTClosing();
			if (!this._isDraggable(aE.target))
				return false;
			aE.dataTransfer.setData("text/plain", aE.target.tab._tPos);
			aE.dataTransfer.effectAllowed = "copy";
			aE.stopPropagation();
		},

		_ensureTTClosing: function() {
			clearTimeout($._hoverOpenPreviewTimer);
			$.tooltip.hidePopup();
			$._prevDoNotAllow = true;
		},

		_isDraggable: function(aNode) {
			return aNode.localName === "toolbarbutton" && !aNode.hasAttribute("dummy");
		},

		onDragOver: function(aE) {
			this._ensureTTClosing();
			aE.preventDefault();
			aE.stopPropagation();
		},

		onDrop: function(aE) {
			this._ensureTTClosing();
			if (!this._isDraggable(aE.target))
				return false;
			let tabIndex = parseInt(aE.dataTransfer.getData("text/plain"), 10);
			let target = aE.composedTarget;
			if (target && target.hasAttribute("groupid")) {
				let gID = parseInt(target.getAttribute("groupid"), 10);
				if ($.GroupItems._activeGroupItem._children.length === 1)
					$._setGroup(gID);
				// Had to use a custom _moveTabToGroupItem function because the built in messes up tab ordering. ¬¬
				let selTabs = $.selectedTabs;
				if (selTabs.length >= 1) {
					for (let i = selTabs.length - 1; i >= 0; i--)
						$._moveTabToGroupItem(gBrowser.mTabContainer.children[selTabs[i].tab._tPos], gID);
				} else
					$._moveTabToGroupItem(gBrowser.mTabContainer.children[tabIndex], gID);
				setTimeout(function() {
					$._appendButtonsToGroupsBox($.$($._UID + "-tabs-groups-box"));
				}, 10);
			} else {
				let targetTab = target.tab;
				if (targetTab) {
					if (tabIndex === targetTab._tPos)
						return false;
					gBrowser.moveTabTo(gBrowser.mTabContainer.children[tabIndex], targetTab._tPos);
				} else
					return false;
			}
			clearTimeout($._appendTabsToTabsBoxTimer);
			$._appendTabsToTabsBoxTimer = setTimeout(function() {
				$._appendTabsToTabsBox($.$($._UID + "-tabs-box"));
				$.hasTabView && $.GroupItems.saveAll();
				$._prevDoNotAllow = false;
			}, 100);
			aE.stopPropagation();
		}
	},

	OnHotSpotMouseOver: function(aE) {
		clearTimeout($._hoverOpenMainPanelTimer);
		if (gBrowser.visibleTabs.length < $._PanelOpenOnHoverOverHotSpotsTrigger ||
			$.panel.state === "open")
			return true;
		console.info($.panel.state);
		$._hoverOpenMainPanelTimer = setTimeout(function() {
			$.panel.openPopup($.panelAnchor, $.panelPosition, 0, $._PanelVerticalOffset, false, false, null);
		}, $._PanelOpenOnHoverDelay);
		aE.stopPropagation();

	},

	OnHotSpotMouseOut: function(aE) {
		if ($.panel.state !== "open")
			clearTimeout($._hoverOpenMainPanelTimer);
		aE.stopPropagation();
	},

	HandleHotSpots: function(aRem) {
		let curHP = window[$._UID]["ListOfHotSpots"];
		if (curHP && curHP.length > 0) {
			curHP.forEach(function(aHPID) {
				let el = $.$(aHPID);
				el && el.removeEventListener("mouseover", $.OnHotSpotMouseOver, false);
				el && el.removeEventListener("mouseout", $.OnHotSpotMouseOut, false);
			});
		}
		if (aRem)
			return;
		let HPs = $._PanelListOfHotSpotsIDs.split(",").filter(function(aVal) {
			if (aVal !== "")
				return true;
		});
		if (HPs && HPs.length > 0) {
			window[$._UID]["ListOfHotSpots"] = HPs;
			setTimeout(function() {
				window[$._UID]["ListOfHotSpots"].forEach(function(aHPID) {
					let el = $.$(aHPID);
					el && el.addEventListener("mouseover", $.OnHotSpotMouseOver, false);
					el && el.addEventListener("mouseout", $.OnHotSpotMouseOut, false);
				});
			}, 10);
		}
	},

	HandlePrefListener: function(aRem) { // Can't add obs. to brach in here.
		var prefs = $.DefPrefs;
		for (let key in prefs) {
			let pref = $.Branch + key;
			if (prefs.hasOwnProperty(key)) {
				if (aRem)
					Services.prefs.removeObserver(pref, $.PrefListener);
				else
					Services.prefs.addObserver(pref, $.PrefListener, false);
			}
		}
	},

	PrefListener: {
		observe: function(aSubject, aTopic, aPStr) { // aPStr is the pref. name minus the branch name.
			if (aTopic === "nsPref:changed") {
				let prefName = aPStr.slice($.Branch.length);
				$["_" + prefName] = $.gPref(prefName);
				switch (prefName) {
					case "ButtonImage":
					case "PanelKeepItOpen":
						$.selfDestroy();
						break;
					case "PanelInvertDarkIcons":
						$.handleInvertedImages();
						break;
					case "PanelHideGroupsRow":
						setTimeout(function() {
							$.PanelFunctions.HandleGroupsElements();
						}, 100);
					case "PanelButtonGroupsPerRow":
						$._appendButtonsToGroupsBox($.$($._UID + "-tabs-groups-box"));
						break;
					case "TabPreviewSendScroll":
						let TPSSaddRem = $._TabPreviewSendScroll ? "addEventListener" : "removeEventListener";
						$.canvas[TPSSaddRem]("DOMMouseScroll", $.PreviewFunctions.OnDOMScroll, false);
						break;
					case "TabPreviewSendClicks":
						let TPSCaddRem = $._TabPreviewSendClicks ? "addEventListener" : "removeEventListener";
						$.canvas[TPSCaddRem]("click", $.PreviewFunctions.OnClick, true);
						break;
					case "TabPreviewEnabled":
					case "TabPreviewShowToolbar":
						setTimeout(function() {
							let val = !!$._TabPreviewShowToolbar || !!$._TabPreviewEnabled || false;
							$._tooltipAllowHovering = val;
						}, 10);
						break;
					case "PanelOpenOnHover":
					case "PanelOpenOnHoverDelay":
						$.HandleOpenOnHover();
						break;
					case "PanelListOfHotSpotsIDs":
					case "PanelOpenOnHoverOverHotSpotsTrigger":
						$.HandleHotSpots();
						break;
					case "MaxIconSizeForTabButtonsInPanel":
						$.CSSLoader();
						break;
					case "PanelVerticalOffset": // Destroy the freaking entire button so the vertical offset is respected. ¬¬
						if (!window[$._UID]["SelfDestroyerListener"]) {
							window[$._UID]["SelfDestroyerListener"] = true;
							$.panel.addEventListener("popuphidden", function _(aE) {
								this.removeEventListener("popuphidden", _, false);
								window[$._UID]["SelfDestroyerListener"] = false;
								$.selfDestroy();
							}, false);
						}
						break;
					case "PanelButtonTabsPerRow":
						clearTimeout($._appendTabsToTabsBoxTimer);
						$._appendTabsToTabsBoxTimer = setTimeout(function() {
							$._appendTabsToTabsBox($.$($._UID + "-tabs-box"));
						}, 100);
						break;
				}
			}
		}
	},

	CreateDynamicTooltip: function() {
		if (!$.dynamicTT) {
			$.$("mainPopupSet").appendChild($.$CNS("tooltip", {
				id: $._UID + "_dynamic_tooltip",
				cb_id: $._UID,
				onpopupshowing: "document.getElementById('" + self.id +
					"').TabsManager.populateDynamicTooltip(event, this);event.stopPropagation();",
				onpopuphiding: "event.stopPropagation();",
				flex: 1,
			}));
		}
	},

	populateDynamicTooltip: function(aE, aN) {
		aN.textContent = "";

		if (aE.target.triggerNode.id === self.id) {
			var grid = aN.appendChild($.$CNS("grid"));
			var cols = grid.appendChild($.$CNS("columns"));
			cols.appendChild($.$CNS("column", {
				flex: 2
			}));
			cols.appendChild($.$CNS("column", {
				flex: 3
			}));
			cols.appendChild($.$CNS("column", {
				flex: 1
			}));
			var rows = grid.appendChild($.$CNS("rows"));
			// AppendRow
			let AR = function(aRowsNode, aLabel1, aLabel2, aLabel3, aEmpty) {
				let row = $.$CNS("row");
				if (aEmpty) {
					row.appendChild($.$CNS("label", {
						value: " ",
						width: 0,
					}));
				} else {
					row.appendChild($.$CNS("label", {
						value: aLabel1,
						style: "font-weight: bold;",
					}));
					row.appendChild($.$CNS("label", {
						value: aLabel2,
						style: "font-weight: bold;",
					}));
					let desc = $.$CNS("description", {
						maxwidth: 250,
					});
					desc.textContent = aLabel3; // Use of "textContent" to achieve word wrap. ¬¬
					row.appendChild(desc);
				}
				aRowsNode.appendChild(row);
			};

			let btn = aE.target.triggerNode;
			AR(rows, btn.name, "→", "ID = " + btn.id.slice(20));
			aN.appendChild($.$CNS("separator")); // Empty space
			let desc2 = $.$CNS("description", {
				style: "font-weight:bold;",
			});
			// Use of "textContent" to achieve word wrap. ¬¬
			desc2.textContent = "Read this button help for very important usage notes.\n" +
				"Right click on button, \"Button Help\" item.";
			aN.appendChild(desc2);
			return true;
		}
	},

	selfDestroy: function() {
		clearTimeout($._cleanSlateTimer);
		$._cleanSlateTimer = setTimeout(function() {
			self.destroy("update");
			setTimeout(function() {
				self.init();
			}, 100);
		}, 100);
	},

	$: function(aId) { // Return elements by Id
		return document.getElementById(aId);
	},

	setSelfImage: function() {
		switch ($._ButtonImage) {
			case 1: // Dark image
				self.image = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACJ0" +
					"lEQVQ4jZ2Tz6sSURTHR19tqlVBPwkif4w7mWajOIPMnasIMw7+uv6a+SvaTZugXYLLeLMoo40LiWgjIoh" +
					"v4cKNzujT9/JZBIFRCE6z0e1tozKpFXXgsznc7+ecxbkEsVMYY8ca5w6bvmM3Yw9fqdVqZLlcpkql0iM7" +
					"5XKZqlarPozx1d+FHZVK5aHP53vndru/ezyeH3ZcLtc3kiTfa5rmwRg7Dwkux2KxxzRNTwAAw0gkYtjQe" +
					"Z4f0zR9wfP8E4zxpU3mlw0ghC8ghOepVGqYSCRO4/H4OB6Pj5PJ5DCTyXwGAAx5ntdsmVt2wVEoFHotiu" +
					"IXWZY/FAqFaaFQuFgzlWV5Eo1GDYZh3tg2uLMVNJvNmwzD1ERRPC8Wi/ohBEEYhEKht/V6/faeQFVVNhw" +
					"On4ii2C8Wi8YhJEnSw+Hwiaqq7FaAMb6GMb4OAHgKABil0+nJeuKeIJFI6ACAMcdxz2az2Q2M8X2i2+0+" +
					"8Pv9LwOBQF8QhBFC6HQTkGXZkGV5K0in07ogCKNgMKj7/f5XvV7PRTQaDZKiqLkkSWcIISObzfbz+byey" +
					"+UMhNAAITTI5XLGuqcjhAxJks4oiprX63Uv0W63SZZl54qi9BVF0e1sJu/2FUXpsyw7b7VaXqLT6XghhD" +
					"OO4z5BCKcQwo9/Ybp++7XT6XiJ5XJ51zTN55ZlaZZlHZum+Ucsyzq2LEtbLBal1Wp1b3NETozx0T+y/x/" +
					"+p34Ccs6yiWZsYJoAAAAASUVORK5CYII=";
				break;
			case 2: // Light image
				self.image = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAsk" +
					"lEQVQ4jWNgGJQgNCr+f2Jq1v/45PT/8cnp/xNTs/6HRsX/J0rzlBmz/+MCM2fPI2zI6TNncRpw+sxZwgb" +
					"cuXsPpwF37t4jbMCbN29xGvDmzVv8BhSXV///9v07TgO+ff/+v7i8GrchK1etxakZBlauWovdgNVrN/zH" +
					"53xkb6zftAXVEAMzG4Ia0YGBmQ3CEDNrR5INMLN2/E89FzAwMDDom1j9NzCzIQrrm1gRl6zpAgA/Aaw4c" +
					"JqIzQAAAABJRU5ErkJggg==";
				break;
			default:
				self.removeAttribute("image");
				return true;
		}
	},

	$CNS: function(aElName, aAttrs, aNS) { // Creates elements
		var el = aNS ?
			document.createElementNS(aNS, aElName) :
			document.createElement(aElName);
		if (aAttrs)
			Object.keys(aAttrs).forEach(function(n) {
				if (aAttrs[n] !== "")
					el.setAttribute(n, aAttrs[n]);
			});
		return el;
	},

	getHelp: function(aPlaceholder) { // Get specific data, surrounded by "placeholders", from the Help tab.
		return $.$(self.id).getAttribute("Help").split("<!--" + aPlaceholder + "-->")[1];
	},

	/**
	 * [parseXML description]
	 * This randomly throws an NS_ERROR_UNEXPECTED without absolutely NO DETAILS!!! WTF!?!?!?!
	 * I have no effing idea how to fit this!!!!!
	 */
	parseXML: function(aXML) { // Return parsed XML
		aXML = aXML.replace(/>\s+</g, "><"); // Linearize XML.
		aXML = aXML.replace(/\t+/gm, ""); // Remove all tabs.
		let oParser = new DOMParser();
		let oDOM = oParser.parseFromString(aXML, "text/xml");
		let parseError = oDOM.documentElement.nodeName === "parsererror";
		dump(parseError ? "error while parsing" : oDOM.documentElement.nodeName);
		if (oDOM && !parseError)
			return oDOM.documentElement;
		return false;
		// return (new DOMParser).parseFromString(aXML, "application/xml").documentElement;
	},

	promptme: function(aMsg, aVal) {
		let retVal = {
			value: aVal
		};
		if (Services.prompt.prompt(null, self.name, aMsg, retVal, null, {}))
			return retVal.value;
		else
			return false;
		return false;
	},

	styleSheet: function(aCSS, aRemFlag) {
		var sss = Cc["@mozilla.org/content/style-sheet-service;1"].getService(Ci.nsIStyleSheetService);
		var uri = Services.io.newURI("data:text/css," + encodeURIComponent(aCSS), null, null);
		if (sss.sheetRegistered(uri, sss.USER_SHEET))
			sss.unregisterSheet(uri, sss.USER_SHEET);
		if (aRemFlag)
			return;
		sss.loadAndRegisterSheet(uri, sss.USER_SHEET);
	},

	_UID: "__tabs_manager_" + self.id.slice(14),
	_hoverOpenPreviewTimer: 0,
	_hoverOpenMainPanelTimer: 0,
	_appendTabsToTabsBoxTimer: 0,
	_PanelSelectTabOnHoverTimer: 0,
	_cleanSlateTimer: 0,
	_updatePreviewTimer: 0,
	_ctrlKeyPressed: null,
	_prevZoomedIn: null,
	_prevDoNotAllow: null,
	_tooltipAllowHovering: null,
	_globalMM: Cc["@mozilla.org/globalmessagemanager;1"].getService(Ci.nsIMessageListenerManager),
	_tab: null,
	_randomID: null,
	_lastCanvasHeight: null,
	_lastCanvasWidth: null,
	get hasTabView() {
		return "TabView" in window;
	},
	get _responseMsgID() {
		return "CB:TabsManager:Response:" + self.id.slice(14) + "-";
	},
	get _updatePreviewMsgID() {
		return "CB:TabsManager:Preview:" + self.id.slice(14) + "-" + $._randomID;
	},
	get _scrollMsgID() {
		return "CB:TabsManager:Scroll:" + self.id.slice(14) + "-" + $._randomID;
	},
	get _emulateMsgID() {
		return "CB:TabsManager:Emulate:" + self.id.slice(14) + "-" + $._randomID;
	},
	get canvas() {
		return $.$($._UID + "-tabs-preview-canvas");
	},
	get optionsBox() {
		return $.$($._UID + "-options-box");
	},
	get panel() {
		return $.$($._UID + "-main-panel");
	},
	get tooltip() {
		return $.$($._UID + "-tabs-box-tooltip");
	},
	get tooltipLabel() {
		return $.$($._UID + "-tabs-preview-title");
	},
	get toolbar() {
		return $.$($._UID + "-tabs-preview-toolbar");
	},
	get selectedTabs() {
		return $.$($._UID + "-tabs-box").getElementsByAttribute("_multisel", "*");
	},
	get GroupItems() { // Defined as a "get" because TabView is not loaded at browser start-up.
		return TabView._window.GroupItems;
	},
	get dynamicTT() {
		return $.$($._UID + "_dynamic_tooltip");
	},

};

this.TabsManager.Branch = "CB.TabsManager.Id" + self.id.slice(20) + ".";

this.TabsManager.gPref = function(aKey) {
	let branch = Services.prefs.getBranch($.Branch);
	switch (typeof $.DefPrefs[aKey]) {
		case "boolean":
			return branch.getBoolPref(aKey);
		case "number":
			return branch.getIntPref(aKey);
		case "string":
			return branch.getComplexValue(aKey, Ci.nsISupportsString).data;
	}
	return null;
};

this.TabsManager.sPref = function(aKey, aVal) {
	let branch = Services.prefs.getBranch($.Branch);
	switch (typeof aVal) {
		case "boolean":
			branch.setBoolPref(aKey, aVal);
			break;
		case "number":
			branch.setIntPref(aKey, aVal);
			break;
		case "string":
			let str = Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString);
			str.data = aVal;
			branch.setComplexValue((aKey), Ci.nsISupportsString, str);
			break;
	}
};

this.TabsManager.InitPrefs = function() {
	let branch = Services.prefs.getDefaultBranch($.Branch),
		defaults = $.DefPrefs;
	for (let key in defaults) {
		if (defaults.hasOwnProperty(key)) {
			let val = defaults[key];
			switch (typeof val) {
				case "boolean":
					branch.setBoolPref(key, val);
					break;
				case "number":
					branch.setIntPref(key, val);
					break;
				case "string":
					let str = Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString);
					str.data = val;
					branch.setComplexValue((key),
						Ci.nsISupportsString, str);
					break;
			}
		}
	}
};

this.TabsManager.DefPrefs = {
	ButtonImage: 2,
	MaxIconSizeForTabButtonsInPanel: 18,
	PanelButtonTabsPerRow: 10,
	PanelButtonTabsPerRowAuto: true,
	PanelButtonTabsPerRowAutoWidth: 120,
	PanelHideGroupsRow: false,
	PanelInvertDarkIcons: false,
	PanelMiddleClickOnTabAction: 1,
	PanelSelectTabOnHover: false,
	PanelShowPinnedTabs: false,
	PanelVerticalOffset: 32,
	TabPreviewEnabled: true,
	TabPreviewLoadUnloadedTabs: true,
	TabPreviewAutomaticSize: true,
	TabPreviewAutomaticSizePercentage: 30,
	TabPreviewRequireControlKey: false,
	TabPreviewSendClicks: true,
	TabPreviewSendScroll: true,
	TabPreviewShowToolbar: true,
	TabPreviewWidth: 360,
	TabPreviewHeight: 225,
	TabPreviewZoomFactor: 100,

	PanelSelectTabOnHoverDelay: 200,
	TabPreviewShowDelay: 200,
	PanelButtonGroupsPerRow: 8,
	PanelKeepItOpen: false,
	PanelListOfHotSpotsIDs: "",
	PanelOpenOnHoverOverHotSpotsTrigger: 20,
	PanelOpenOnHover: false,
	PanelOpenOnHoverDelay: 200,
};

this.TabsManager.Init();]]></initcode>
  <code><![CDATA[if(!event.target && !this.disabled)
	this.TabsManager.togglePanel();]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help>𝗜𝗺𝗽𝗼𝗿𝘁𝗮𝗻𝘁 𝗻𝗼𝘁𝗲𝘀
⚫ 𝗗𝗢 𝗡𝗢𝗧 𝗶𝗻𝘀𝘁𝗮𝗹𝗹 𝗺𝗼𝗿𝗲 𝘁𝗵𝗮𝗻 𝗼𝗻𝗲 𝘃𝗲𝗿𝘀𝗶𝗼𝗻 𝗼𝗳 𝘁𝗵𝗶𝘀 𝗯𝘂𝘁𝘁𝗼𝗻 𝗮𝘁 𝘁𝗵𝗲 𝘀𝗮𝗺𝗲 𝘁𝗶𝗺𝗲❗❗❗
⚫ 𝗗𝗢 𝗡𝗢𝗧 𝗰𝗹𝗼𝗻𝗲 𝘁𝗵𝗶𝘀 𝗯𝘂𝘁𝘁𝗼𝗻❗❗❗
⚫ If you did any of the previous actions, delete all extra buttons leaving only one version of 𝗠𝘂𝗹𝘁𝗶 𝗦𝗲𝗮𝗿𝗰𝗵 and restart your application.

𝗪𝗔𝗥𝗡𝗜𝗡𝗚❗❗ 𝗕𝗘 𝗖𝗔𝗥𝗘𝗙𝗨𝗟 𝗜𝗙 𝗬𝗢𝗨 𝗘𝗗𝗜𝗧 𝗧𝗛𝗘 𝗛𝗘𝗟𝗣 𝗧𝗔𝗕 𝗢𝗙 𝗧𝗛𝗜𝗦 𝗕𝗨𝗧𝗧𝗢𝗡❗❗❗
𝗜𝗧 𝗖𝗢𝗨𝗟𝗗 𝗕𝗥𝗘𝗔𝗞 𝗜𝗧𝗦 𝗙𝗨𝗡𝗖𝗜𝗢𝗡𝗔𝗟𝗜𝗧𝗬❗❗❗

𝗚𝗲𝗻𝗲𝗿𝗮𝗹 𝗻𝗼𝘁𝗲𝘀
Inside the Help tab of this button can be found the CSS style sheet to customize the appearance of every part of the elements created by this button.

[,]
&lt;!--StyleSheet--&gt;
/* FROM THIS POINT DOWN DO NOT TOUCH ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING!!! */
/* The tab item in the main panel when the tab is selected */
#_U_I_D_-main-panel toolbarbutton[checked="true"] {
	font-weight: 600 !important;
}
/* Toolbarbuttons looking like buttons. */
#_U_I_D_-main-panel toolbarbutton {
	-moz-appearance: button !important;
	padding: 1px !important;
}
/* Show toolbarbutton label and align it to its icon */
#_U_I_D_-main-panel toolbarbutton .toolbarbutton-text {
	display: inline-block !important;
	text-align: left !important;
}
/* Image for tab items with mutted sound */
#_U_I_D_-main-panel toolbarbutton[mutted]:after {
	/*content: url("chrome://browser/skin/tabbrowser/tab-audio.svg#tab-audio-muted-white") !important;*/ /* Light icon */
	content: url("chrome://browser/skin/tabbrowser/tab-audio.svg#tab-audio-muted") !important; /* Dark icon */
	display: block !important;
	clear: both !important;
	position: absolute !important;
}
/* Image for tab items with sound playing */
#_U_I_D_-main-panel toolbarbutton[soundplaying]:after {
	/*content: url("chrome://browser/skin/tabbrowser/tab-audio.svg#tab-audio-white") !important;*/ /* Light icon */
	content: url("chrome://browser/skin/tabbrowser/tab-audio.svg#tab-audio") !important; /* Dark icon */
	display: block !important;
	clear: both !important;
	position: absolute !important;
}
/* Pinned tab items */
#_U_I_D_-pinned-tabs-box toolbarbutton .toolbarbutton-text {
	display: none !important;
}
/* Hide image from groups toolbarbuttons because there is none applied and "we need" the space */
#_U_I_D_-tabs-groups-box .tabs-groups-button .toolbarbutton-icon {
	display: none !important;
}
/* Just some padding for the tab items container */
#_U_I_D_-tabs-box {
	padding: 5px !important;
}
/* Style for "multi selected" tabs buttons */
#tabContextMenu menuitem[_multisel="true"],
#_U_I_D_-tabs-box toolbarbutton[_multisel="true"] {
	color: darkorange !important;
	text-shadow: 1px 0px 0px darkorange !important;
	box-shadow: 0 0 2px 0 darkorange !important;
}
/* Fixed size for buttons images */
/* DO NOT TOUCH THIS!!! It's used by the option called "MaxIconSizeForTabButtonsInPanel" */
#_U_I_D_-tabs-box .toolbarbutton-icon {
	min-width: _I_C_O_N_S_I_Z_E_px !important;
	min-height: _I_C_O_N_S_I_Z_E_px !important;
	max-width: _I_C_O_N_S_I_Z_E_px !important;
	max-height: _I_C_O_N_S_I_Z_E_px !important;
}
/* Filter to "invert" the color of some icons */
#_U_I_D_-tabs-preview-toolbar toolbarbutton:not([_active="true"]).inverted-color-for-this-image .toolbarbutton-icon , /* The toolbar button icons from the tab preview toolbar */
menuitem.inverted-color-for-this-image .menu-iconic-icon ,
#_U_I_D_-main-panel toolbarbutton:not(#_U_I_D_-reset-groups-button).inverted-color-for-this-image .toolbarbutton-icon {
	filter: url("data:image/svg+xml;utf8,&lt;svg height='0' xmlns='http://www.w3.org/2000/svg'&gt;&lt;filter id='white' x='0%' y='0%' width='100%' height='100%' &gt;&lt;feComponentTransfer&gt;&lt;feFuncR type='table' tableValues='.6 0'/&gt;&lt;feFuncG type='table' tableValues='.6 0'/&gt;&lt;feFuncB type='table' tableValues='.6 0'/&gt;&lt;/feComponentTransfer&gt;&lt;/filter&gt;&lt;/svg&gt;#white") !important;
}
#_U_I_D_-tabs-preview-toolbar toolbarbutton[_active="true"] .toolbarbutton-icon {
	filter: none !important;
}
/* Tab preview tweaks */
/* The entire tab preview panel */
#_U_I_D_-tabs-box-tooltip {
	-moz-appearance: none !important;
	border: none !important;
	border-radius: 5px !important;
	padding: 0 !important;
	background-color: -moz-Dialog !important;
	color: -moz-DialogText !important;
/*	background-color: Highlight !important;
	color: HighlightText !important;*/
/*	background-color: -moz-Field !important;
	color: -moz-FieldText !important;*/
}
/* Preview panel show animation */
#_U_I_D_-tabs-box-tooltip {
	transition-duration: 200ms, 200ms !important;
	transition-property: opacity, transform !important;
	transition-timing-function: ease-out !important;
}
#_U_I_D_-tabs-box-tooltip:not([_open]) {
	transform: translateY(-8px) !important;
}
#_U_I_D_-tabs-box-tooltip:not([_open]) {
	opacity: 0 !important;
}
/* The box that contains the tab preview label, toolbar and canvas */
#_U_I_D_-tabs-preview-container {
	padding: 3px !important;
	border: none !important;
	box-shadow: none !important;
}
/* Tab preview toolbar */
#_U_I_D_-tabs-preview-toolbar {
	-moz-appearance: none !important;
	opacity: 1 !important;
	z-index: 1 !important;
	background: none !important;
	border-bottom: 1px solid rgba(0, 0, 0, 0) !important;
	margin: 0 !important;
	padding: 0 !important;
}
/* Toolbar buttons in tab preview toolbar */
#_U_I_D_-tabs-preview-toolbar &gt; toolbarbutton {
	-moz-appearance: none !important;
	border: none !important;
	margin: 0 !important;
	padding: 2px !important;
	width: 18px !important;
	height: 18px !important;
	background: none !important;
}
/* Toolbar button icons in tab preview toolbar */
#_U_I_D_-tabs-preview-toolbar &gt; toolbarbutton .toolbarbutton-icon {
	margin: 0 !important;
	padding: 0 !important;
}
/* Hovered toolbar buttons in tab preview toolbar */
#_U_I_D_-tabs-preview-toolbar &gt; toolbarbutton:not([disabled="true"]):hover {
	border-radius: 2px !important;
	background-color: hsla(117, 96%, 37%,.3) !important;
}
/* The label of each toolbar button is hidden */
#_U_I_D_-tabs-preview-toolbar &gt; toolbarbutton .toolbarbutton-text {
	display: none !important;
}
/* Images */
#_U_I_D_-rename_group,
#_U_I_D_-delete_group,
#_U_I_D_-tabs-preview-toolbar &gt; toolbarbutton,
#_U_I_D_-pin_unpin_selected_tabs,
#_U_I_D_-reload_selected_tabs,
#_U_I_D_-close_selected_tabs,
#_U_I_D_-new-tab-button,
#_U_I_D_-hide-groups-box-button[_checked="false"],
#_U_I_D_-inline-options-button[_checked="false"],
#_U_I_D_-hide-groups-box-button[_checked="true"],
#_U_I_D_-inline-options-button[_checked="true"],
#_U_I_D_-main-panel .tabs-manager-options-buttons toolbarbutton {
	list-style-image: url("data:image/png;base64,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") !important;
}
/* The image for each toolbar button */
#_U_I_D_-tabs-preview-back-button {
	-moz-image-region: rect(0px, 16px, 16px, 0px) !important;
}
#_U_I_D_-tabs-preview-forward-button {
	-moz-image-region: rect(0px, 32px, 16px, 16px) !important;
}
#_U_I_D_-tabs-preview-reload-button {
	-moz-image-region: rect(0px, 48px, 16px, 32px) !important;
}
#_U_I_D_-tabs-preview-reload-button[_loading="true"] {
	-moz-image-region: rect(0px, 64px, 16px, 48px) !important;
}
#_U_I_D_-tabs-preview-close-button {
	-moz-image-region: rect(0px, 80px, 16px, 64px) !important;
}
#_U_I_D_-pin_unpin_selected_tabs,
#_U_I_D_-tabs-preview-pin-button {
	-moz-image-region: rect(0px, 96px, 16px, 80px) !important;
}
#_U_I_D_-tabs-preview-pin-button[_active="true"] {
	-moz-image-region: rect(16px, 96px, 32px, 80px) !important;
}
#_U_I_D_-tabs-preview-zoom-button {
	-moz-image-region: rect(0px, 112px, 16px, 96px) !important;
}
#_U_I_D_-tabs-preview-zoom-button[_active="true"] {
	-moz-image-region: rect(16px, 112px, 32px, 96px) !important;
}
.tabs-manager-options-buttons #_U_I_D_-add-group-button {
	-moz-image-region: rect(0px, 192px, 16px, 176px) !important;
}
.tabs-manager-options-buttons #_U_I_D_-reset-groups-button {
	-moz-image-region: rect(16px, 160px, 32px, 144px) !important;
}
.tabs-manager-options-buttons #_U_I_D_-open-options-button {
	-moz-image-region: rect(0px, 176px, 16px, 160px) !important;
}
#_U_I_D_-new-tab-button {
	-moz-image-region: rect(0px, 208px, 16px, 192px) !important;
}
#_U_I_D_-hide-groups-box-button[_checked="false"],
#_U_I_D_-inline-options-button[_checked="false"] {
	-moz-image-region: rect(0px, 128px, 16px, 112px) !important;
}
#_U_I_D_-hide-groups-box-button[_checked="true"],
#_U_I_D_-inline-options-button[_checked="true"] {
	-moz-image-region: rect(0px, 144px, 16px, 128px) !important;
}
#_U_I_D_-rename_group {
	-moz-image-region: rect(0px, 240px, 16px, 224px) !important;
}
#_U_I_D_-reload_selected_tabs  {
	-moz-image-region: rect(0px, 48px, 16px, 32px) !important;
}
#_U_I_D_-delete_group,
#_U_I_D_-close_selected_tabs  {
	-moz-image-region: rect(0px, 224px, 16px, 208px) !important;
}
/* The toolbar button when is disabled */
#_U_I_D_-tabs-preview-toolbar &gt; toolbarbutton[disabled="true"] {
	opacity: 0.35 !important;
}
/* The label in the tab preview */
#_U_I_D_-tabs-preview-title {
	text-align: center !important;
}
/* The label, canvas and toolbar in the tab preview */
#_U_I_D_-tabs-preview-toolbar,
#_U_I_D_-tabs-preview-canvas,
#_U_I_D_-tabs-preview-title {
	padding: 3px 0 3px 0 !important;
}
/* Size for the options buttons inside the main panel */
#_U_I_D_-main-panel .tabs-manager-options-buttons toolbarbutton .toolbarbutton-icon {
	max-width: 16px !important;
	max-height: 16px !important;
}
/* Set some tab separation for Normal tabs */
#_U_I_D_tabs-box-grid &gt; columns &gt; column {
	padding-left: 3px !important;
	padding-right: 3px !important;
}
#_U_I_D_tabs-box-grid &gt; rows &gt; row {
	padding-top: 3px !important;
}
/* Set some tab separation for Pinned tabs */
#_U_I_D_-pinned-tabs-box &gt; toolbarbutton {
	margin-left: 3px !important;
	margin-right: 3px !important;
}
&lt;!--StyleSheet--&gt;
	 width="_W_I_D_T_H_"
	 maxwidth="_W_I_D_T_H_"
&lt;!--MainPanel--&gt;&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;panel id="_U_I_D_-main-panel"
	 xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
	 orient="vertical"
	 flip="slide"
	 cb_id="_U_I_D_"
	 level="parent"
	 consumeoutsideclicks="false"
	 noautohide="_N_O_H_I_D_E_"
	 onmouseout="event.stopPropagation();"
	 onclick="event.stopPropagation();"
	 oncommand="event.stopPropagation();"
	 onpopupshowing="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.OnPanelShowing(event, this);"
	 onpopuphiding="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.OnPanelHidden(event, this);"&gt;
	&lt;hbox id="_U_I_D_-main-panel-box"&gt;
		&lt;vbox&gt;
			&lt;vbox id="_U_I_D_-tabs-groups-box"
				  align="center"
				  _group="true"
				  hidden="_N_O_G_R_O_U_P_S_"
				  context="_U_I_D_-tabs-groups-box-context"/&gt;
			&lt;vbox id="_U_I_D_-tabs-box"
				  onclick="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.OnItemClick(event);event.stopPropagation();"
				  oncommand="event.stopPropagation();"
				  oncontextmenu="event.stopPropagation();"
				  onmousemove="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.OnMouseMoveItem(event);"
				  onmouseover="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.OnMouseOverItem(event);"
				  onmouseout="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.OnMouseOutItem(event);"
				  ondragstart="document.getElementById('_S_E_L_F_I_D_').TabsManager.DragAndDropHandler.onDragStart(event);"
				  ondragover="document.getElementById('_S_E_L_F_I_D_').TabsManager.DragAndDropHandler.onDragOver(event);"
				  ondrop="document.getElementById('_S_E_L_F_I_D_').TabsManager.DragAndDropHandler.onDrop(event);"/&gt;
		&lt;/vbox&gt;
		&lt;spacer flex="1"/&gt;
		&lt;vbox maxwidth="48" class="tabs-manager-options-buttons"&gt;
			&lt;toolbarbutton id="_U_I_D_-hide-groups-box-button"
						   flex="999"
						   hidden="_N_O_G_R_O_U_P_S_"
						   tooltiptext="Hide groups row."
						   class="marked-for-invertion"
						   oncommand="event.stopPropagation();"
						   onclick="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.toggleGroupButtons();"/&gt;
			&lt;toolbarbutton id="_U_I_D_-add-group-button"
						   flex="999"
						   hidden="_N_O_G_R_O_U_P_S_"
						   _group="true"
						   tooltiptext="Add a new group."
						   class="marked-for-invertion"
						   oncommand="event.stopPropagation();"
						   onclick="document.getElementById('_S_E_L_F_I_D_').TabsManager.PanelFunctions.AddGroupBtn(event);"/&gt;
			&lt;box flex="1"&gt;
				&lt;toolbarbutton id="_U_I_D_-new-tab-button"
						   maxwidth="500"
						   tooltiptext="Open New tab"
						   class="marked-for-invertion"
						   oncommand="BrowserOpenTab();"/&gt;
			&lt;/box&gt;
			&lt;toolbarbutton id="_U_I_D_-open-options-button"
						   tooltiptext="Open Tabs Manager options page."
						   class="marked-for-invertion"
						   oncommand="event.stopPropagation();document.getElementById('_S_E_L_F_I_D_').TabsManager.openOptions();"/&gt;
			&lt;toolbarbutton id="_U_I_D_-inline-options-button"
						   tooltiptext="Show inline options."
						   class="marked-for-invertion"
						   oncommand="document.getElementById('_S_E_L_F_I_D_').TabsManager.HandleOptionsBox();"/&gt;
		&lt;/vbox&gt;
	&lt;/hbox&gt;
	&lt;vbox id="_U_I_D_-options-box" /&gt;
&lt;/panel&gt;&lt;!--MainPanel--&gt;

&lt;!--OptionsBox--&gt;&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;hbox xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" &gt;
&lt;vbox&gt;
	&lt;hbox align="center"&gt;
		&lt;label value="Vertical offset:"/&gt;
		&lt;spacer flex="1"/&gt;
		&lt;textbox type="number"
				 _pref="PanelVerticalOffset"
				 tooltiptext="Vertical offset for panel in relation to its anchor.&amp;#xA;Minimum: -300px.&amp;#xA;Maximum: 300px."
				 size="3"
				 min="-300"
				 max="300"/&gt;
	&lt;/hbox&gt;
	&lt;spacer flex="1"/&gt;
	&lt;hbox align="center"&gt;
		&lt;label value="Icon size:"/&gt;
		&lt;spacer flex="1"/&gt;
		&lt;textbox type="number"
				 _pref="MaxIconSizeForTabButtonsInPanel"
				 tooltiptext="Each 'tab item' in the grid will display the site's favicon. This option allows to set a custom fixed size for those icons.&amp;#xA;Minimum: 16px.&amp;#xA;Maximum: 64px."
				 size="3"
				 min="16"
				 max="64"/&gt;
	&lt;/hbox&gt;
	&lt;spacer flex="1"/&gt;
	&lt;hbox align="center"
		  _auto_tab="false"&gt;
		&lt;label value="Tabs per row:"/&gt;
		&lt;spacer flex="1"/&gt;
		&lt;textbox type="number"
				 _pref="PanelButtonTabsPerRow"
				 tooltiptext="How many tabs per row should display the panel.&amp;#xA;Minimum: 5 tabs per row.&amp;#xA;Maximum: 30 tabs per row."
				 size="3"
				 min="1"
				 max="30"/&gt;
	&lt;/hbox&gt;
	&lt;spacer flex="1"/&gt;
	&lt;hbox align="center"
		  _auto_tab="true"&gt;
		&lt;label value="Tabs width:"/&gt;
		&lt;spacer flex="1"/&gt;
		&lt;textbox type="number"
				 _pref="PanelButtonTabsPerRowAutoWidth"
				 tooltiptext="Width used to calculate the amount of tabs per row inside the main panel.&amp;#xA;Minimum: 100px.&amp;#xA;Maximum: 250px."
				 size="3"
				 increment="5"
				 min="100"
				 max="250"/&gt;
	&lt;/hbox&gt;
	&lt;checkbox label="Tabs per row auto"
			  _pref="PanelButtonTabsPerRowAuto"
			  oncommand="event.stopPropagation();"
			  tooltiptext="The amount of tabs per row will be automatically calculated based on the 'Tabs width' option." /&gt;
&lt;/vbox&gt;
&lt;vbox&gt;
	&lt;hbox align="center"
		  _preview="true"
		  _preview_size="false"&gt;
		&lt;label value="Tabs preview width:"/&gt;
		&lt;spacer flex="1"/&gt;
		&lt;textbox type="number"
				 _pref="TabPreviewWidth"
				 tooltiptext="Tabs preview width in pixels.&amp;#xA;Minimum: 100 pixels.&amp;#xA;Maximum: 2000 pixels."
				 size="4"
				 increment="10"
				 min="100"
				 max="2000"/&gt;
	&lt;/hbox&gt;
	&lt;hbox align="center"
		  _preview="true"
		  _preview_size="true"&gt;
		&lt;label value="Tabs preview size:"/&gt;
		&lt;spacer flex="1"/&gt;
		&lt;textbox type="number"
				 _pref="TabPreviewAutomaticSizePercentage"
				 tooltiptext="Tabs preview size percentage in relation to the page content size.&amp;#xA;Minimum: 10%.&amp;#xA;Maximum: 100%."
				 size="4"
				 increment="5"
				 min="10"
				 max="100"/&gt;
	&lt;/hbox&gt;
	&lt;spacer flex="1"/&gt;
	&lt;hbox align="center"
		  _preview="true"
		  _preview_size="false"&gt;
		&lt;label value="Tabs preview height:"/&gt;
		&lt;spacer flex="1"/&gt;
		&lt;textbox type="number"
				 _pref="TabPreviewHeight"
				 tooltiptext="Tabs preview height in pixels.&amp;#xA;Minimum: 100 pixels.&amp;#xA;Maximum: 2000 pixels."
				 size="4"
				 increment="10"
				 min="100"
				 max="2000"/&gt;
	&lt;/hbox&gt;
	&lt;spacer flex="1"/&gt;
	&lt;hbox align="center"
		  _preview="true"&gt;
		&lt;label value="Tabs preview zoom:"/&gt;
		&lt;spacer flex="1"/&gt;
		&lt;textbox type="number"
				 _pref="TabPreviewZoomFactor"
				 tooltiptext="Zoom factor in % for tabs preview.&amp;#xA;Minimum: 5%&amp;#xA;Maximum: 500%"
				 size="4"
				 increment="5"
				 min="100"
				 max="500"/&gt;
	&lt;/hbox&gt;
	&lt;!-- &lt;spacer flex="1"/&gt; --&gt;
	&lt;checkbox label="Auto size preview"
			  _pref="TabPreviewAutomaticSize"
			  _preview="true"
			  oncommand="event.stopPropagation();"
			  tooltiptext="Ignore the fixed preview width/height and size it based on a percentage of the actual page content size." /&gt;
&lt;/vbox&gt;
&lt;vbox&gt;
	&lt;checkbox label="Invert dark icons"
			  _pref="PanelInvertDarkIcons"
			  oncommand="event.stopPropagation();"
			  tooltiptext="Almost all icons used by this button are dark/black. With this option enabled, a white filter will be applied to those icons so they are actually seen on dark themes." /&gt;
	&lt;checkbox label="Select tab on hover"
			  _pref="PanelSelectTabOnHover"
			  oncommand="event.stopPropagation();"
			  tooltiptext="Auto select tabs on the panel on mouse over." /&gt;
	&lt;checkbox label="Show pinned tabs"
			  _pref="PanelShowPinnedTabs"
			  oncommand="event.stopPropagation();"
			  tooltiptext="Show pinned tabs row." /&gt;
	&lt;checkbox label="Tabs preview"
			  _pref="TabPreviewEnabled"
			  oncommand="event.stopPropagation();"
			  tooltiptext="Enable tabs preview." /&gt;
	&lt;checkbox label="Show toolbar"
			  _pref="TabPreviewShowToolbar"
			  oncommand="event.stopPropagation();"
			  tooltiptext="Show toolbar inside the preview panel. The toolbar is standalone, so it can be used even if the tabs preview is disabled." /&gt;
&lt;/vbox&gt;
&lt;vbox&gt;
	&lt;checkbox label="Send clicks to preview"
			  _pref="TabPreviewSendClicks"
			  _preview="true"
			  oncommand="event.stopPropagation();"
			  tooltiptext="Enable sending click events to the page content currently displayed on the tab preview." /&gt;
	&lt;checkbox label="Send scroll to preview"
			  _pref="TabPreviewSendScroll"
			  _preview="true"
			  oncommand="event.stopPropagation();"
			  tooltiptext="If enabled, it will allow you to scroll the page content &amp;quot;through the preview&amp;quot; and the preview will be updated.&amp;#xA;Scroll with no modifiers: Scroll page content vertically by lines.&amp;#xA;Ctrl + Scroll: Scroll page content vertically by pages.&amp;#xA;Shift + Scroll: Scroll page content horizontally.&amp;#xA;Ctrl + Shift + Scroll: Scroll page content horizontally by content width. This is an intent to emulate the vertical Scroll by pages." /&gt;
	&lt;checkbox label="Load unloaded tabs"
			  _pref="TabPreviewLoadUnloadedTabs"
			  _preview="true"
			  oncommand="event.stopPropagation();"
			  tooltiptext="Automatically load unloaded tabs so they are visible when tabs preview is enabled." /&gt;
	&lt;checkbox label="Require Control key"
			  _pref="TabPreviewRequireControlKey"
			  _preview="true"
			  oncommand="event.stopPropagation();"
			  tooltiptext="Require the Control key to be pressed to display the tab preview." /&gt;
&lt;/vbox&gt;
&lt;groupbox orient="vertical"&gt;
	&lt;caption label="Middle click action" tooltiptext="Action triggered when middle-clicking a tab item." /&gt;
	&lt;radiogroup _pref="PanelMiddleClickOnTabAction" orient="vertical" &gt;
		&lt;radio value="0" label="Close tab" /&gt;
		&lt;radio value="1" label="Reload tab" /&gt;
		&lt;radio value="2" label="Multi select tabs" tooltiptext="Select more than one tab to perform in-bulk actions.&amp;#xA;Multi-selection can also be done with Ctrl + Left click." /&gt;
	&lt;/radiogroup&gt;
&lt;/groupbox&gt;
&lt;groupbox orient="vertical"&gt;
	&lt;caption label="Button image" tooltiptext="Choose this button image." /&gt;
	&lt;radiogroup _pref="ButtonImage" orient="vertical" &gt;
		&lt;radio value="0" label="Custom" tooltiptext="Set an image by going to 'Edit Button...' &amp;gt; 'Image' section." /&gt;
		&lt;radio value="1" label="Dark image" /&gt;
		&lt;radio value="2" label="Light image" /&gt;
	&lt;/radiogroup&gt;
&lt;/groupbox&gt;
&lt;/hbox&gt;&lt;!--OptionsBox--&gt;

&lt;!--TabsPreviewPanel--&gt;&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;panel id="_U_I_D_-tabs-box-tooltip"
		 xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
		 xmlns:html="http://www.w3.org/1999/xhtml"
		 cb_id="_U_I_D_"
		 orient="vertical"
		 position="after_start"
		 flip="slide"
		 level="top"
		 noautofocus="true"
		 consumeoutsideclicks="false"
		 oncontextmenu="event.stopPropagation();"
		 onmouseout="event.stopPropagation();document.getElementById('_S_E_L_F_I_D_').TabsManager.OnTooltipOut(event, this);"
		 onpopuphiding="event.stopPropagation();document.getElementById('_S_E_L_F_I_D_').TabsManager.OnTooltipHiding(event, this);"
		 onpopupshowing="event.stopPropagation();document.getElementById('_S_E_L_F_I_D_').TabsManager.PopulateTabsTooltip(event, this);"&gt;
	&lt;vbox id="_U_I_D_-tabs-preview-container"&gt;
		&lt;label id="_U_I_D_-tabs-preview-title" crop="end"/&gt;
		&lt;toolbar id="_U_I_D_-tabs-preview-toolbar"
				 fullscreentoolbar="true"
				 onclick="event.stopPropagation();"
				 oncommand="event.stopPropagation();document.getElementById('_S_E_L_F_I_D_').TabsManager.PreviewFunctions.OnCommand(event);"&gt;
			&lt;toolbarbutton id="_U_I_D_-tabs-preview-back-button" class="marked-for-invertion" tooltiptext="Go backwards one page" label="back"/&gt;
			&lt;toolbarbutton id="_U_I_D_-tabs-preview-forward-button" class="marked-for-invertion" tooltiptext="Go forward one page" label="forward"/&gt;
			&lt;toolbarbutton id="_U_I_D_-tabs-preview-reload-button" class="marked-for-invertion" tooltiptext="Reload page" label="reload"/&gt;
			&lt;toolbarbutton id="_U_I_D_-tabs-preview-pin-button" class="marked-for-invertion" tooltiptext="Pin tab" label="pin"/&gt;
			&lt;toolbarbutton id="_U_I_D_-tabs-preview-zoom-button" class="marked-for-invertion" tooltiptext="Zoom preview" label="zoom"/&gt;
			&lt;spacer flex="1" /&gt;
			&lt;toolbarbutton id="_U_I_D_-tabs-preview-close-button" class="marked-for-invertion" tooltiptext="Close tab" label="close"/&gt;
		&lt;/toolbar&gt;
		&lt;html:canvas id="_U_I_D_-tabs-preview-canvas"/&gt;
	&lt;/vbox&gt;
&lt;/panel&gt;&lt;!--TabsPreviewPanel--&gt;

&lt;!--FrameScript--&gt;"use sctrict";
let TabsPreview = {
	init: function() {
		addMessageListener("_Update_Preview_ID_", this);
		addMessageListener("_Scroll_Preview_ID_", this);
		addMessageListener("_Emulate_Preview_ID_", this);
	},

	receiveMessage: function(aMsg) {
		switch (aMsg.name) {
			case "_Update_Preview_ID_":
				this._updatePreview(aMsg.data);
				break;
			case "_Scroll_Preview_ID_":
				this._scrollWindow(aMsg.data);
				break;
			case "_Emulate_Preview_ID_":
				this._emulateEvent(aMsg.data);
				break;
		}
	},

	_updatePreview: function(aData) {
		let canvas = content.document.createElementNS("http://www.w3.org/1999/xhtml", "canvas");
		canvas.mozImageSmoothingEnabled = true;
		let auto = aData.auto;
		let win = content.window;
		let w = win.innerWidth;
		let scale = aData.width / w;
		let h = auto ? win.innerHeight : aData.height / scale;
		let canvasW = auto ? Math.round(w * aData.autoPercentage / 100 * aData.zoomFactor) : aData.width;
		let canvasH = auto ? Math.round(canvasW * h / w) : aData.height;
		canvas.width = canvasW;
		canvas.height = canvasH;
		let scaleX = canvasW / w;
		let scaleY = canvasH / h;
		let ctx;
		try {
			ctx = canvas.getContext("2d");
			ctx.clearRect(0, 0, canvas.width, canvas.height);
			ctx.save();
			auto ?
				ctx.scale(canvasW / w, canvasH / h) :
				ctx.scale(scale, scale);
			ctx.drawWindow(win, win.scrollX, win.scrollY, w, h, "Window");
			ctx.restore();
		} catch (aErr) {} finally {
			sendAsyncMessage("_Response_ID_", {
				width: canvas.width,
				height: canvas.height,
				msgID: aData.msgID,
				scaleX: scaleX,
				scaleY: scaleY,
				scale: scale,
				imgData: ctx.getImageData(0, 0, canvas.width, canvas.height),
			});
		}
	},

	_scrollWindow: function(aData) {
		let elt = this._elementFromPoint(aData.x, aData.y);
		if (aData.ctrlKey &amp;&amp; !aData.shiftKey) // Ctrl only - Scroll by pages
			elt.ownerDocument.defaultView.scrollByPages((aData.lines &gt; 0 ? 1 : -1));
		else if (aData.shiftKey &amp;&amp; !aData.ctrlKey) // Shift only - Scroll horizontally
			elt.ownerDocument.defaultView.scrollBy(aData.lines * 10, 0);
		else if (aData.shiftKey &amp;&amp; aData.ctrlKey) // Shift + Ctrl - Scroll horizontally faster
			elt.ownerDocument.defaultView.scrollBy((aData.lines &gt; 0 ? content.window.innerWidth : -(content.window.innerWidth)), 0);
		else if (!aData.shiftKey &amp;&amp; !aData.ctrlKey) // No modifiers - Scroll by lines
			elt.ownerDocument.defaultView.scrollByLines(aData.lines);
	},

	_emulateEvent: function(aData) {
		let elt = this._elementFromPoint(aData.x, aData.y);
		let view = elt.ownerDocument.defaultView;
		elt.dispatchEvent(new view.MouseEvent(aData.type, {
			view: view,
			cancelable: true,
			bubbles: true,
			button: aData.button,
			ctrlKey: aData.ctrlKey,
			altKey: aData.altKey,
			shiftKey: aData.shiftKey,
			metaKey: aData.metaKey
		}));
	},

	_elementFromPoint: function(x, y) {
		let elt = content.document.elementFromPoint(x, y);
		if (!elt) {
			const Ci = Components.interfaces;
			elt = content.window.QueryInterface(Ci.nsIInterfaceRequestor).
			getInterface(Ci.nsIDOMWindowUtils).
			elementFromPoint(x, y, true, false);
		}
		if (!elt)
			elt = content.document.body || content.document.documentElement;
		while (/^i?frame$/.test(elt.localName.toLowerCase())) {
			x -= elt.getBoundingClientRect().left;
			y -= elt.getBoundingClientRect().top;
			elt = elt.contentDocument.elementFromPoint(x, y);
		}
		return elt;
	}
};
TabsPreview.init();
&lt;!--FrameScript--&gt;

&lt;!--OptionsWindow--&gt;&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;?xml-stylesheet href="chrome://global/skin/" ?&gt;
&lt;?xml-stylesheet href="data:text/css;charset=utf-8,
prefwindow * {
	font-family: &amp;quot;Open Sans&amp;quot;, Helvetica, Arial, sans-serif !important;
}
caption .caption-text,
.bold_text{
	font-weight:bold;
}
.warning{
	font-weight: bold !important;
	color: red !important;
}
.info{
	font-weight: bold !important;
	color: green !important;
}
" type="text/css" ?&gt;
&lt;prefwindow  xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
			 onload="gTabsManager.onLoad();"
			 onunload="gTabsManager.onUnload();"
			 buttons="accept,cancel"
			 windowtype="CB:TabsManager:Settings"&gt;
				&lt;script&gt;
		&lt;![CDATA[
var Cc = Components.classes;
var Ci = Components.interfaces;
var Cu = Components.utils;
var fromButton = _self_;
var storage = window._storage;
var idNumber = storage.self_id.slice(20);
function $(id)document.getElementById(id);
var gTabsManager = {
	_initialized : false,
	onLoad : function () {
		window.document.documentElement.setAttribute("title",
		 "Tabs Manager settings - Button #ID: " + idNumber);
		this._initialized = true;
		var docElt = document.documentElement;
		this.instantApply = docElt.instantApply;
		window.addEventListener("change", this, false);
		window.addEventListener("beforeaccept", this, false);
	},
	onUnload : function () {
		window.removeEventListener("change", this, false);
		window.removeEventListener("beforeaccept", this, false);
	},
	updateBroadcasters : function (aPreference) {
		if (aPreference.type != "bool")
			return;
		var obs = $(aPreference.id.replace("pref_", "obs_"));
		if (obs)
			this.setDisabled(obs, !aPreference.value);
	},
	setDisabled : function (itemOrId, val) {
		var item = typeof(itemOrId) == "string" ? $(itemOrId) : itemOrId;
		if (!item)
			return;
	},
	handleEvent : function (aEvent) {
		switch (aEvent.type) {
		case "change":
			if (aEvent.target.localName != "preference")
				return;
			this.updateBroadcasters(aEvent.target);
			if (!this.instantApply)
				this.updateApplyButton(aEvent);
			break;
		case "beforeaccept":
			break;
		}
	},
	changes : [],
	updateApplyButton : function (aEvent) {
		var item = aEvent.target;
		if (item.localName != "preference")
			return;
		var valueChanged = item.value != item.valueFromPreferences;
		var index = this.changes.indexOf(item);
		if (valueChanged &amp;&amp; index == -1)
			this.changes.push(item);
		else if (!valueChanged &amp;&amp; index &gt; -1)
			this.changes.splice(index, 1);
	},
};
]]&gt;&lt;/script&gt;
	&lt;prefpane&gt;
		&lt;preferences&gt;
			&lt;preference id="PanelSelectTabOnHoverDelay" name="_RoOt_PanelSelectTabOnHoverDelay" type="int"/&gt;
			&lt;preference id="TabPreviewShowDelay" name="_RoOt_TabPreviewShowDelay" type="int"/&gt;
			&lt;preference id="PanelButtonGroupsPerRow" name="_RoOt_PanelButtonGroupsPerRow" type="int"/&gt;
			&lt;preference id="PanelKeepItOpen" name="_RoOt_PanelKeepItOpen" type="bool"/&gt;
			&lt;preference id="PanelListOfHotSpotsIDs" name="_RoOt_PanelListOfHotSpotsIDs" type="string"/&gt;
			&lt;preference id="PanelOpenOnHover" name="_RoOt_PanelOpenOnHover" type="bool"/&gt;
			&lt;preference id="PanelOpenOnHoverOverHotSpotsTrigger" name="_RoOt_PanelOpenOnHoverOverHotSpotsTrigger" type="int"/&gt;
		&lt;/preferences&gt;
		&lt;grid&gt;
			&lt;columns&gt;
				&lt;column flex="1"/&gt;
				&lt;column flex="1"/&gt;
			&lt;/columns&gt;
			&lt;rows&gt;
				&lt;row&gt;
					&lt;checkbox label="Keep panel always open" tooltip="tt_1" preference="PanelKeepItOpen" /&gt;
				&lt;/row&gt;
				&lt;row&gt;
					&lt;checkbox label="Open panel on hover - Delay: " tooltip="tt_3" preference="PanelOpenOnHover" /&gt;
					&lt;textbox flex="1" type="number" tooltip="tt_4" preference="PanelOpenOnHoverDelay"/&gt;
				&lt;/row&gt;
				&lt;row tooltip="tt_5"&gt;
					&lt;label value="Select tab on hover delay" /&gt;
					&lt;textbox flex="1" type="number" preference="PanelSelectTabOnHoverDelay"/&gt;
				&lt;/row&gt;
				&lt;row&gt;
					&lt;label value="Tab preview show delay" /&gt;
					&lt;textbox flex="1" type="number" preference="TabPreviewShowDelay"/&gt;
				&lt;/row&gt;
				&lt;row&gt;
					&lt;label value="Group buttons per row" /&gt;
					&lt;textbox flex="1" type="number" tooltip="tt_0" preference="PanelButtonGroupsPerRow"/&gt;
				&lt;/row&gt;
				&lt;row&gt;
					&lt;label value="Hot-spots trigger" /&gt;
					&lt;textbox flex="1" type="number" tooltip="tt_0" preference="PanelOpenOnHoverOverHotSpotsTrigger"/&gt;
				&lt;/row&gt;
			&lt;/rows&gt;
		&lt;/grid&gt;
		&lt;hbox align="center"&gt;
			&lt;label value="Hot-spots IDs"/&gt;
			&lt;textbox flex="1" tooltip="tt_2" preference="PanelListOfHotSpotsIDs"/&gt;
		&lt;/hbox&gt;
	&lt;/prefpane&gt;
	&lt;popupset&gt;
		&lt;tooltip id="tt_0"&gt;
			&lt;description&gt;How many groups buttons per row should the grid display.&amp;#xA;Default: 8&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_1"&gt;
			&lt;description&gt;By default, the panel will close whenever its focus is lost or by pressing the Escape key. With this option enabled, the panel will ONLY close when you tell it to by pressing this button or toggling the panel with the hotkey (if any).&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_2"&gt;
			&lt;description&gt;Comma separated list of elements IDs. When you hover over this elements, the panel will automatically open.\nExample: &amp;quot;urlbar-container,tabbrowser-tabs&amp;quot;. The main panel will open when you hover over the URL bar and/or the tab bar.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_3"&gt;
			&lt;description&gt;If enabled, it will allow you to open the main panel by just hovering over this button.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_4"&gt;
			&lt;description&gt;Delay in milliseconds for the &amp;quot;Open panel on hover&amp;quot; option.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_5"&gt;
			&lt;description&gt;Delay in milliseconds for the &amp;quot;Select tab on hover&amp;quot; option.&lt;/description&gt;
		&lt;/tooltip&gt;
		&lt;tooltip id="tt_6"&gt;
			&lt;description&gt;Delay in milliseconds for the tab preview to display.&amp;#xA;Default: 200&lt;/description&gt;
		&lt;/tooltip&gt;
	&lt;/popupset&gt;
&lt;/prefwindow&gt;&lt;!--OptionsWindow--&gt;</help>
  <attributes/>
</custombutton>