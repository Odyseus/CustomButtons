<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/" xmlns:html="http://www.w3.org/1999/xhtml">
<html:head>
	<html:title><![CDATA[CB Context Menu Extended]]></html:title>
	<html:link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABR0lEQVQ4jbWSMS9DURTH/2lYRBCxChFhkMbQKPXuvSbUo/feQWzWRkw+gESFgcFjZbGYROv13jvYdGpLGt+BzUYi2i6eQdq8xmvyCP/kN538Ts659wD/kakFdzAWO+0KLYxOX/Q0BLJsRpgwj0SqdQDIVLyBIA4qXm+zAZF6j0pdICu5SSb1E+N6u1E7ua97QTilasE3Q6aDSZNlUn/4ZQBwim/JIA6L7/GWNWLpSicVevUHT9U2ESL0mZVSa6ENItQm5XoDQIRKc86EephYvOwHAKdcc4M4vqvuNxskbDfKhHomXJX8MgAclWtXQTjl6m7LFAnbjVJhbvzyr0NTam4meT0cWojbubFZOzsEABbPz1OhX6yUWgJCfiOVauvr+kyaSf1q8Txv1EIeEkC43mHC1P0yAGRuvb42dH9bxUrmx0Pv/Vf5BN2P64WRvFlYAAAAAElFTkSuQmCC"/>
	<html:style type="text/css"><![CDATA[body{font-size:medium;margin:0}body,code:before,help:before,initcode:before{font-family:"Verdana",sans-serif}#wrapper{position:fixed;top:1em;right:1em;max-width:15%;text-align:center}#button{background-color:#299a0b;border:1px solid #3a7404;border-radius:.5em;padding:0;margin-bottom:1em;box-shadow:1px 2px 3px rgba(0,0,0,.25)}#button a{color:#f0f0f0;font-weight:700;text-shadow:-.5pt -.5px .5pt rgba(0,0,0,1);padding:.8em;text-decoration:none}:-moz-any-link:focus{color:grey;outline-color:transparent;text-decoration:none}#button a,code,code:before,initcode,initcode:before,help,help:before{display:block}#credits{position:fixed;bottom:1em;right:1em;font-size:small}#about{font-size:small}custombutton{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABAElEQVQ4jW2TQXLFMAhDff+b2vEHYw5AF38eVTNdZAIxCEkmw31VptU5T7mvOuepc56K2B2f85TZrEwr99VxptUwm2U2695PZVrH937KfZX76txsVsTus0yrEbEr0/4F4AyQc56eDMiI2F0IbYoj9h9ZSCV2XzXUA1BVL8BvBvSMiN20zWY38VZ5gDEkYtfAYTRToA3qiQJk2hcA7W8gpaxG0nPvp4aiQ5UCzOV2GKAgLUEfpsGCfaBR92TonapmdCoAjHTIgLa6/14gbgow8oj9uwe6SMQ0qTz9P9oDZOgCkfMNJnqWaV8P3ouDRorUXEA4H1wbtMmVjcrQ7TSb9QMtXcwa4wpbXgAAAABJRU5ErkJggg==) fixed #f6f6f1;margin:1em}date,image,mode,accelkey{display:none}name{font-weight:700;font-size:x-large}code:before,help:before,initcode:before{font-weight:700;font-size:large;margin:0 0 1em;padding:.5em}code:before{content:"Code Tab"}help:before{content:"Help Tab"}initcode:before{content:"Initialization Code Tab"}code,initcode,help{background-color:#fcfcfc;font-size:.875em;font-family:Consolas,"Bitstream Vera Sans Mono","Courier New",Courier,monospace!important;margin:1em 2em 1em 0 !important;padding:1em;text-align:left;box-shadow:2px 2px 0 rgba(170,160,130,0.5),4px 4px 0 rgba(200,190,165,0.5);max-width:80%;min-width:80%;white-space:pre-wrap;word-wrap:break-word}]]></html:style>
</html:head>
<html:body>
	<html:div id="wrapper">
		<html:div id="button">
			<html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3ECB%20Context%20Menu%20Extended%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABR0lEQVQ4jbWSMS9DURTH/2lYRBCxChFhkMbQKPXuvSbUo/feQWzWRkw+gESFgcFjZbGYROv13jvYdGpLGt+BzUYi2i6eQdq8xmvyCP/kN538Ts659wD/kakFdzAWO+0KLYxOX/Q0BLJsRpgwj0SqdQDIVLyBIA4qXm+zAZF6j0pdICu5SSb1E+N6u1E7ua97QTilasE3Q6aDSZNlUn/4ZQBwim/JIA6L7/GWNWLpSicVevUHT9U2ESL0mZVSa6ENItQm5XoDQIRKc86EephYvOwHAKdcc4M4vqvuNxskbDfKhHomXJX8MgAclWtXQTjl6m7LFAnbjVJhbvzyr0NTam4meT0cWojbubFZOzsEABbPz1OhX6yUWgJCfiOVauvr+kyaSf1q8Txv1EIeEkC43mHC1P0yAGRuvb42dH9bxUrmx0Pv/Vf5BN2P64WRvFlYAAAAAElFTkSuQmCC%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5Bvar%20%24%20%3D%20this.CBCME%20%3D%20%7B%0A%09_UID%3A%20%22__cb_context_menu_extended_%22%20+%20self.id.slice%2820%29%2C%0A%09_nsIFile%3A%20Components.Constructor%28%22@mozilla.org/file/local%3B1%22%2C%20%22nsIFile%22%2C%20%22initWithPath%22%29%2C%0A%09_ID%3A%20%22custombuttons-contextpopup%22%2C%0A%09_moveTimer%3A%200%2C%0A%09_removeTimer%3A%200%2C%0A%09_showCursorFeedback%3A%20true%2C%0A%09_cbs%3A%20custombuttons.cbService%2C%0A%09_normalInstall%3A%20null%2C%0A%09_toRight%3A%20null%2C%0A%09_moveButtonID%3A%20null%2C%0A%09_startURI%3A%20/custombutton%5Cx3A%5Cx2F%5Cx2F/%2C%0A%0A%09get%20mainPop%28%29%20%7B%0A%09%09return%20%24.%24%28%24._ID%29%3B%0A%09%7D%2C%0A%0A%09get%20subPop%28%29%20%7B%0A%09%09return%20%24.%24%28%24._ID%20+%20%22-sub%22%29%3B%0A%09%7D%2C%0A%0A%09_getExpStorage%3A%20function%28aFromImport%29%20%7B%0A%09%09let%20d%3B%0A%09%09try%20%7B%0A%09%09%09d%20%3D%20new%20%24._nsIFile%28%24._zLastUsedLocation%29%3B%0A%09%09%09if%20%28aFromImport%20%26%26%20d.exists%28%29%20%26%26%20d.isDirectory%28%29%29%0A%09%09%09%09return%20d%3B%0A%09%09%09else%0A%09%09%09%09d%20%3D%20new%20%24._nsIFile%28%24._zImpExpCustomLocation%29%3B%0A%09%09%09if%20%28%21d.exists%28%29%20%7C%7C%20%21d.isDirectory%28%29%29%0A%09%09%09%09throw%20new%20Error%28%22%22%29%3B%0A%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09d%20%3D%20Services.dirsvc.get%28%22Home%22%2C%20Ci.nsIFile%29%3B%0A%09%09%09d.append%28%22CB%20Context%20Menu%20Extended%22%29%3B%0A%09%09%09if%20%28%21d.exists%28%29%20%7C%7C%20%21d.isDirectory%28%29%29%0A%09%09%09%09d.create%28Ci.nsIFile.DIRECTORY_TYPE%2C%200x1FF%29%3B%0A%09%09%7D%0A%09%09return%20d%3B%0A%09%7D%2C%0A%0A%09alertCallback%3A%20%7B%0A%09%09observe%3A%20function%28aSubject%2C%20aTopic%2C%20aData%29%20%7B%0A%09%09%09if%20%28aTopic%20%21%3D%3D%20%22alertclickcallback%22%29%0A%09%09%09%09return%3B%0A%09%09%09%24._getExpStorage%28%29.reveal%28%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09Init%3A%20function%28%29%20%7B%0A%09%09if%20%28%21%28%22setCursor%22%20in%20window%29%29%0A%09%09%09%24._showCursorFeedback%20%3D%20false%3B%0A%0A%09%09if%20%28%21%28%22Services%22%20in%20window%29%29%0A%09%09%09Cu.import%28%22resource%3A//gre/modules/Services.jsm%22%29%3B%0A%0A%09%09self.onclick%20%3D%20function%28aE%29%20%7B%0A%09%09%09if%20%28aE.button%20%3D%3D%3D%200%20%26%26%20%24.hasMod%28aE%2C%200%29%29%0A%09%09%09%09%24.TogglePopup%28%29%3B%0A%09%09%7D%3B%0A%0A%09%09%24.InitPrefs%28%29%3B%0A%0A%09%09if%20%28%21%28%24._UID%20in%20window%29%29%20%7B%0A%09%09%09window%5B%24._UID%5D%20%3D%20%7B%0A%09%09%09%09Initialized%3A%20false%2C%0A%09%09%09%09EditCBInTab%3A%20null%2C%0A%09%09%09%09Listener1%3A%20false%2C%0A%09%09%09%09Observer%3A%20false%2C%0A%09%09%09%09TCIDs%3A%20false%2C%0A%09%09%09%09StyleSheet%3A%20false%2C%0A%09%09%09%7D%3B%0A%09%09%7D%0A%0A%09%09if%20%28window%5B%24._UID%5D%5B%22Initialized%22%5D%29%20//%20SeaMonkey%20nightmare%21%21%21%20%AC%AC%0A%09%09%09return%20true%3B%0A%0A%09%09for%20%28let%20p%20in%20%24.DefPrefs%29%20%7B%0A%09%09%09if%20%28%24.DefPrefs.hasOwnProperty%28p%29%29%0A%09%09%09%09%24%5B%22_%22%20+%20p%5D%20%3D%20%24.gPref%28p%29%3B%0A%09%09%7D%0A%0A%09%09window%5B%24._UID%5D%5B%22TCIDs%22%5D%20%3D%20%24.HandleToolbarsForDragAndDrop%28null%2C%20true%29%3B%20//%20Double%20purpose.%20Register%20listeners%20and%20get%20toolbars%20context%20IDs.%0A%09%09%24.CreateNewItems%28%29%3B%0A%09%09%24.CreateOptionsMenu%28%29%3B%0A%09%09%24.CSSLoader%28%29%3B%0A%09%09%24.HandleInversion%28%29%3B%0A%09%09%24.HandleCBContext%28%29%3B%0A%09%09%24.HandleTBContext%28%29%3B%0A%09%09%24.InsertNewItems%28true%29%3B%0A%0A%09%09if%20%28%21%28window%5B%24._UID%5D%5B%22Initialized%22%5D%29%29%20%7B%0A%09%09%09window%5B%24._UID%5D%5B%22Initialized%22%5D%20%3D%20true%3B%0A%09%09%09%24.HandlePrefListener%28%29%3B%0A%09%09%7D%0A%0A%09%09if%20%28%21window%5B%24._UID%5D%5B%22Observer%22%5D%29%20%7B%0A%09%09%09window%5B%24._UID%5D%5B%22Observer%22%5D%20%3D%20true%3B%0A%0A%09%09%09let%20AddInstallButtonsObserver%20%3D%20%7B%0A%09%09%09%09observe%3A%20function%28aButton%2C%20topic%2C%20data%29%20%7B%0A%09%09%09%09%09if%20%28%24._normalInstall%29%0A%09%09%09%09%09%09return%20true%3B%0A%09%09%09%09%09let%20anchorEl%20%3D%20%24.%24%28%24._zAnchor%29%0A%09%09%09%09%09if%20%28%21anchorEl%20%7C%7C%20%28anchorEl.tagName%20%26%26%20anchorEl.tagName%20%21%3D%3D%20%22toolbarbutton%22%29%29%0A%09%09%09%09%09%09return%20true%3B%0A%09%09%09%09%09%24.MoveButton%28aButton%2C%20%24._toRight%20%3F%20anchorEl.nextSibling%20%3A%20anchorEl%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%3B%0A%0A%09%09%09let%20winID%20%3D%20%24._cbs.getWindowId%28document.documentURI%29%3B%0A%09%09%09let%20notPrefix%20%3D%20%24._cbs.getNotificationPrefix%28winID%29%3B%0A%09%09%09Services.obs.addObserver%28AddInstallButtonsObserver%2C%20notPrefix%20+%20%22installButton%22%2C%20false%29%3B%0A%0A%09%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09%09if%20%28aReason%20%3D%3D%3D%20%22delete%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22update%22%29%20%7B%0A%09%09%09%09%09try%20%7B%0A%09%09%09%09%09%09Services.obs.removeObserver%28AddInstallButtonsObserver%2C%20notPrefix%20+%20%22installButton%22%2C%20false%29%3B%0A%09%09%09%09%09%7D%20finally%20%7B%0A%09%09%09%09%09%09window%5B%24._UID%5D%5B%22Observer%22%5D%20%3D%20false%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%29%3B%0A%09%09%7D%0A%0A%09%09addDestructor%28function%28aReason%29%20%7B%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22update%22%20%7C%7C%20aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09%24.styleSheet%28window%5B%24._UID%5D%5B%22StyleSheet%22%5D%2C%20true%29%3B%0A%09%09%09%09let%20selfEls%20%3D%20document.getElementsByAttribute%28%22cb_id%22%2C%20%24._UID%29%3B%0A%09%09%09%09Array.prototype.slice.call%28selfEls%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09%09aEl%20%26%26%20aEl.parentNode.removeChild%28aEl%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09%24.RemoveNewItems%28%29%3B%0A%09%09%09%09%24.HandlePrefListener%28true%29%3B%0A%09%09%09%09%24.HandleToolbarsForDragAndDrop%28true%29%3B%0A%09%09%09%09window%5B%24._UID%5D%5B%22Initialized%22%5D%20%3D%20false%3B%0A%09%09%09%09window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%3D%20false%3B%0A%09%09%09%7D%0A%09%09%09if%20%28aReason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%09%09%09%09%24.HandleCBContext%28true%29%3B%0A%09%09%09%09%24.HandleTBContext%28true%29%3B%0A%09%09%09%09%28Services.prefs.getBranch%28%24.Branch%29%29.deleteBranch%28%22%22%29%3B%0A%09%09%09%09Services.prefs.savePrefFile%28null%29%3B%0A%09%09%09%09delete%20window%5B%24._UID%5D%3B%0A%09%09%09%7D%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09HandleToolbarsForDragAndDrop%3A%20function%28aRem%2C%20aReturnContexts%29%20%7B%0A%09%09let%20tNodes%3B%0A%09%09if%20%28%22CustomizableUI%22%20in%20window%29%0A%09%09%09tNodes%20%3D%20Array.slice%28document.getElementsByClassName%28%22customization-target%22%29%29%3B%0A%09%09else%20%7B%0A%09%09%09tNodes%20%3D%20Array.slice%28gNavToolbox.childNodes%29%3B%0A%09%09%09tNodes%20%3D%20tNodes.concat%28gNavToolbox.externalToolbars%29%3B%0A%09%09%09tNodes%20%3D%20tNodes.filter%28node%20%3D%3E%20node.tagName%20%3D%3D%3D%20%22toolbar%22%29%3B%0A%09%09%7D%0A%09%09let%20dropEvts%20%3D%20%5B%22drop%22%2C%20%22dragover%22%2C%20%22dragenter%22%5D%3B%0A%09%09for%20%28let%20i%20%3D%20tNodes.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%29%20%7B%0A%09%09%09dropEvts.forEach%28function%28aLi%29%20%7B%0A%09%09%09%09tNodes%5Bi%5D.removeEventListener%28aLi%2C%20%24.DragAndDropHandler%5BaLi%5D%2C%20false%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%09if%20%28aRem%29%0A%09%09%09%09continue%3B%0A%09%09%09dropEvts.forEach%28function%28aLi%29%20%7B%0A%09%09%09%09tNodes%5Bi%5D.addEventListener%28aLi%2C%20%24.DragAndDropHandler%5BaLi%5D%2C%20false%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%7D%0A%09%09if%20%28aReturnContexts%29%20%7B%0A%09%09%09let%20ctxIDs%20%3D%20%5B%5D%3B%0A%09%09%09let%20tBars%20%3D%20tNodes.filter%28node%20%3D%3E%20node.hasAttribute%28%22context%22%29%29%3B%0A%09%09%09for%20%28let%20i%20%3D%20tBars.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%29%20%7B%0A%09%09%09%09let%20id%20%3D%20tBars%5Bi%5D.getAttribute%28%22context%22%29%3B%0A%09%09%09%09%28ctxIDs.indexOf%28id%29%20%3D%3D%3D%20-1%29%20%26%26%20ctxIDs.push%28id%29%3B%0A%09%09%09%7D%0A%09%09%09return%20ctxIDs%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09_allowDrop%3A%20null%2C%0A%09RequiredMods%3A%20function%28aE%29%20%7B%0A%09%09let%20useCtrlKey%20%3D%20%24._zDragAndDropControlKey%2C%0A%09%09%09useAltKey%20%3D%20%24._zDragAndDropAltKey%3B%0A%09%09if%20%28aE.ctrlKey%20%26%26%20aE.altKey%20%26%26%20%28%21useCtrlKey%20%7C%7C%20%21useAltKey%29%29%0A%09%09%09return%20false%3B%0A%09%09//%20XOR%20http%3A//www.howtocreate.co.uk/xor.html%0A%09%09if%20%28aE.ctrlKey%20%3F%20%21useCtrlKey%20%3A%20useCtrlKey%29%0A%09%09%09return%20false%3B%0A%09%09if%20%28aE.altKey%20%3F%20%21useAltKey%20%3A%20useAltKey%29%0A%09%09%09return%20false%3B%0A%09%09return%20true%3B%0A%09%7D%2C%0A%0A%09DragAndDropHandler%3A%20%7B%0A%09%09dragenter%3A%20function%28aE%29%20%7B%0A%09%09%09%24._allowDrop%20%3D%20%24.RequiredMods%28aE%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09dragover%3A%20function%28aE%29%20%7B%0A%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%24._allowDrop%20%3D%20%24.RequiredMods%28aE%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09drop%3A%20function%28aE%29%20%7B%0A%09%09%09var%20dt%20%3D%20aE.dataTransfer%3B%0A%09%09%09if%20%28%21%24._allowDrop%29%0A%09%09%09%09return%20true%3B%0A%0A%09%09%09var%20URI%20%3D%20dt.getData%28%22text/x-moz-url-data%22%29.trim%28%29%3B%0A%09%09%09if%20%28%21%24._startURI.test%28URI%29%29%0A%09%09%09%09URI%20%3D%20dt.getData%28%22text/plain%22%29.trim%28%29%3B%0A%09%09%09if%20%28%21%24._startURI.test%28URI%29%29%0A%09%09%09%09URI%20%3D%20false%3B%0A%09%09%09let%20files%20%3D%20dt.files%3B%0A%09%09%09if%20%28%21URI%20%26%26%20files%20%26%26%20files.length%20%3E%200%29%20%7B%0A%09%09%09%09URI%20%3D%20%5B%5D%3B%0A%09%09%09%09for%20%28let%20f%20%3D%20files.length%20-%201%3B%20f%20%3E%3D%200%3B%20f--%29%20%7B%0A%09%09%09%09%09if%20%28files%5Bf%5D.type%20%3D%3D%3D%20%22text/xml%22%29%20%7B%0A%09%09%09%09%09%09let%20xmlData%20%3D%20%24.readFile%28files%5Bf%5D.mozFullPath%29%3B%20//%20OS.File.read%20sucks%21%21%21%21%20It%27s%20sloooow%20as%20hell%20inside%20loops/forEach%21%21%21%0A%09%09%09%09%09%09if%20%28%21xmlData%29%0A%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09let%20xmlDOM%3B%0A%09%09%09%09%09%09try%20%7B%0A%09%09%09%09%09%09%09xmlDOM%20%3D%20%24.stringToDOM%28xmlData%29.documentElement%3B%0A%09%09%09%09%09%09%7D%20catch%20%28aErr%29%20%7B%7D%0A%09%09%09%09%09%09if%20%28%21xmlDOM%29%0A%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09var%20cbNS%20%3D%20%22http%3A//xsms.nm.ru/custombuttons/%22%3B%0A%09%09%09%09%09%09if%20%28xmlDOM.localName%20%3D%3D%3D%20%22custombutton%22%20%26%26%0A%09%09%09%09%09%09%09%28xmlDOM.getAttribute%28%22xmlns%3Acb%22%29%20%3D%3D%3D%20cbNS%20%7C%7C%20xmlDOM.getAttribute%28%22xmlns%22%29%20%3D%3D%3D%20cbNS%29%29%20%7B%0A%09%09%09%09%09%09%09URI.push%28%22custombutton%3A%5Cx2F%5Cx2F%22%20+%20escape%28xmlData%29%29%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09%24.notifyme%28self.name%2C%0A%09%09%09%09%09%09%09%09%22Import%20Fail%21%21%21%5CnNot%20a%20valid%20Custom%20Buttons%20XML%20file%21%21%21%22%2C%0A%09%09%09%09%09%09%09%09%24.getHelp%28%22ErrorImg%22%29%2C%0A%09%09%09%09%09%09%09%09null%29%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09if%20%28%21URI%29%0A%09%09%09%09%09return%20true%3B%0A%09%09%09%09var%20tgt%20%3D%20aE.target%3B%0A%09%09%09%09var%20anchor%20%3D%20null%2C%0A%09%09%09%09%09lastTBChild%3B%0A%09%09%09%09if%20%28tgt%20%26%26%20tgt.tagName%20%26%26%20tgt.tagName%20%3D%3D%3D%20%22toolbarbutton%22%29%0A%09%09%09%09%09anchor%20%3D%20tgt%3B%0A%09%09%09%09%24._normalInstall%20%3D%20false%3B%0A%09%09%09%09%24._toRight%20%3D%20false%3B%0A%09%09%09%09if%20%28%21%21anchor%29%0A%09%09%09%09%09%24._zAnchor%20%3D%20anchor.id%20%7C%7C%20anchor.getAttribute%28%22id%22%29%20%7C%7C%20%22%22%3B%0A%09%09%09%09else%20%7B%0A%09%09%09%09%09lastTBChild%20%3D%20this.lastChild%3B%0A%09%09%09%09%09while%20%28%21lastTBChild.hasAttribute%28%22id%22%29%29%20%7B%0A%09%09%09%09%09%09try%20%7B%0A%09%09%09%09%09%09%09lastTBChild%20%3D%20this.lastChild.previousSibling%3B%0A%09%09%09%09%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09%09%09%09%09lastTBChild%20%3D%20null%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20%28lastTBChild%29%0A%09%09%09%09%09%09%24._zAnchor%20%3D%20lastTBChild.id%20%7C%7C%20lastTBChild.getAttribute%28%22id%22%29%20%7C%7C%20%22%22%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20%28%21%24._zAnchor%29%0A%09%09%09%09%09%24._normalInstall%20%3D%20true%3B%0A%09%09%09%09if%20%28Array.isArray%28URI%29%29%20%7B%0A%09%09%09%09%09for%20%28let%20i%20%3D%20URI.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%29%20%7B%0A%09%09%09%09%09%09%24._cbs.installButton%28%24._cbs.parseButtonURI%28URI%5Bi%5D%29%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%0A%09%09%09%09%09%24._cbs.installButton%28%24._cbs.parseButtonURI%28URI%29%29%3B%0A%09%09%09%7D%2C%201000%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09TogglePopup%3A%20function%28%29%20%7B%0A%09%09let%20pop%20%3D%20%24.%24%28%24._UID%20+%20%22_optionsPopup%22%29%3B%0A%09%09if%20%28pop%29%20%7B%0A%09%09%09if%20%28pop.state%20%3D%3D%3D%20%22open%22%29%0A%09%09%09%09pop.hidePopup%28%29%3B%0A%09%09%09else%0A%09%09%09%09pop.openPopup%28self%2C%20%22after_start%22%2C%200%2C%200%2C%20false%2C%20false%2C%20null%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09HandleAllSeps%3A%20function%28aSeps%29%20%7B%0A%09%09var%20seps%20%3D%20aSeps%3B%0A%09%09if%20%28seps.length%20%21%3D%3D%200%29%20%7B%0A%09%09%09let%20v%20%3D%200%2C%0A%09%09%09%09vLen%20%3D%20seps.length%3B%0A%09%09%09for%20%28%3B%20v%20%3C%20vLen%3B%20v++%29%20%7B%0A%09%09%09%09let%20sep%20%3D%20seps%5Bv%5D%3B%0A%09%09%09%09let%20prev%20%3D%20sep.previousSibling%20%7C%7C%20sep%2C%0A%09%09%09%09%09next%20%3D%20sep.nextSibling%20%7C%7C%20sep%3B%0A%09%09%09%09while%20%28prev%20%26%26%20%28prev.collapsed%20%7C%7C%20prev.hidden%29%29%20%7B%0A%09%09%09%09%09prev%20%3D%20prev.previousSibling%3B%0A%09%09%09%09%7D%0A%09%09%09%09while%20%28next%20%26%26%20%28next.collapsed%20%7C%7C%20next.hidden%29%29%20%7B%0A%09%09%09%09%09next%20%3D%20next.nextSibling%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20%28%28prev%20%26%26%20prev.tagName%20%3D%3D%3D%20%22menuseparator%22%29%20%7C%7C%20%28next%20%26%26%20next.tagName%20%3D%3D%3D%20%22menuseparator%22%29%29%0A%09%09%09%09%09sep.collapsed%20%3D%20true%3B%0A%09%09%09%09else%0A%09%09%09%09%09sep.collapsed%20%3D%20false%3B%0A%09%09%09%09if%20%28%28prev%20%26%26%20prev.tagName%20%3D%3D%3D%20%22menugroup%22%29%20%26%26%20%28next%20%26%26%20next.tagName%20%3D%3D%3D%20%22menugroup%22%29%29%0A%09%09%09%09%09sep.collapsed%20%3D%20true%3B%0A%09%09%09%09else%0A%09%09%09%09%09sep.collapsed%20%3D%20false%3B%0A%09%09%09%7D%0A%09%09%09let%20c%20%3D%200%2C%0A%09%09%09%09cLen%20%3D%20seps.length%3B%0A%09%09%09for%20%28%3B%20c%20%3C%20cLen%3B%20c++%29%20%7B%0A%09%09%09%09let%20sep%20%3D%20seps%5Bc%5D%3B%0A%09%09%09%09let%20prev%20%3D%20sep.previousSibling%20%7C%7C%20sep%2C%0A%09%09%09%09%09next%20%3D%20sep.nextSibling%20%7C%7C%20sep%3B%0A%09%09%09%09while%20%28prev%20%26%26%20%28prev.collapsed%20%7C%7C%20prev.hidden%29%29%20%7B%0A%09%09%09%09%09prev%20%3D%20prev.previousSibling%3B%0A%09%09%09%09%7D%0A%09%09%09%09while%20%28next%20%26%26%20%28next.collapsed%20%7C%7C%20next.hidden%29%29%20%7B%0A%09%09%09%09%09next%20%3D%20next.nextSibling%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20%28prev%20%26%26%20prev.tagName%20%3D%3D%3D%20%22menugroup%22%29%0A%09%09%09%09%09sep.classList.add%28%22menuseparator-next-to-menugroup%22%2C%20%22bellow%22%29%3B%0A%09%09%09%09if%20%28next%20%26%26%20next.tagName%20%3D%3D%3D%20%22menugroup%22%29%0A%09%09%09%09%09sep.classList.add%28%22menuseparator-next-to-menugroup%22%2C%20%22above%22%29%3B%0A%09%09%09%09if%20%28%21%28prev%20%26%26%20prev.tagName%20%3D%3D%3D%20%22menugroup%22%29%20%26%26%20%21%28next%20%26%26%20next.tagName%20%3D%3D%3D%20%22menugroup%22%29%29%0A%09%09%09%09%09sep.classList.remove%28%22menuseparator-next-to-menugroup%22%2C%20%22bellow%22%2C%20%22above%22%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09HandleMGSeps%3A%20function%28aMPop%2C%20aMGs%29%20%7B%0A%09%09var%20pop%3B%0A%09%09if%20%28aMGs.length%20%21%3D%3D%200%29%20%7B%0A%09%09%09for%20%28var%20i%20%3D%20aMGs.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%29%20%7B%0A%09%09%09%09let%20aMG%20%3D%20aMGs%5Bi%5D%3B%0A%09%09%09%09pop%20%3D%20aMG.parentNode%3B%0A%09%09%09%09let%20prev%20%3D%20aMG.previousSibling%20%7C%7C%20aMG%2C%0A%09%09%09%09%09next%20%3D%20aMG.nextSibling%20%7C%7C%20aMG%3B%0A%09%09%09%09%28aMG%20%3D%3D%3D%20pop.firstChild%29%20%26%26%20%28prev%20%3D%20false%29%3B%0A%09%09%09%09%28aMG%20%3D%3D%3D%20pop.lastChild%29%20%26%26%20%28next%20%3D%20false%29%3B%0A%09%09%09%09while%20%28prev%20%26%26%20%28prev.collapsed%20%7C%7C%20prev.hidden%29%29%20%7B%0A%09%09%09%09%09prev%20%3D%20prev.previousSibling%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20%28prev%20%26%26%20prev.tagName%20%26%26%20prev.tagName%20%21%3D%3D%20%22menuseparator%22%20%26%26%20prev.tagName%20%21%3D%3D%20%22menugroup%22%29%0A%09%09%09%09%09%24._ANI%28pop%2C%20%24.%24%28%24._UID%20+%20%22-separatorForMenuGroups%22%29%2C%20aMG.id%20%7C%7C%20aMG.getAttribute%28%22id%22%29%2C%20null%2C%20false%2C%20true%29%3B%0A%09%09%09%09while%20%28next%20%26%26%20%28next.collapsed%20%7C%7C%20next.hidden%29%29%20%7B%0A%09%09%09%09%09next%20%3D%20next.nextSibling%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20%28next%20%26%26%20next.tagName%20%26%26%20next.tagName%20%21%3D%3D%20%22menuseparator%22%20%26%26%20next.tagName%20%21%3D%3D%20%22menugroup%22%29%0A%09%09%09%09%09%24._ANI%28pop%2C%20%24.%24%28%24._UID%20+%20%22-separatorForMenuGroups%22%29%2C%20aMG.id%20%7C%7C%20aMG.getAttribute%28%22id%22%29%2C%20null%2C%20true%2C%20true%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09%24.HandleAllSeps%28aMPop.getElementsByTagName%28%22menuseparator%22%29%29%3B%0A%09%7D%2C%0A%0A%09HandleInversion%3A%20function%28%29%20%7B%0A%09%09let%20mPop%20%3D%20%24.%24%28%24._ID%20+%20%24._UID%20+%20%22-newItemsMenupopup%22%29%3B%0A%09%09let%20allBtnsToInvert%20%3D%20mPop.getElementsByClassName%28%22marked-for-inversion%22%29%3B%0A%09%09var%20i%20%3D%200%2C%0A%09%09%09iLen%20%3D%20allBtnsToInvert.length%3B%0A%09%09for%20%28%3B%20i%20%3C%20iLen%3B%20i++%29%20%7B%0A%09%09%09if%20%28%24._zInvertIconsColor%29%0A%09%09%09%09allBtnsToInvert%5Bi%5D.classList.add%28%22inverted-color-for-this-image%22%29%3B%0A%09%09%09else%0A%09%09%09%09allBtnsToInvert%5Bi%5D.classList.remove%28%22inverted-color-for-this-image%22%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09HandleTBContext%3A%20function%28aRem%29%20%7B%0A%09%09if%20%28%21%24._zMoveGMIInTC%20%26%26%0A%09%09%09%21%24._zAddGMIInTC%20%26%26%0A%09%09%09%21%24._zXMLExpImpGMIInTC%20%26%26%0A%09%09%09%21aRem%29%20%7B%0A%09%09%09return%20true%3B%0A%09%09%7D%0A%09%09let%20popShowing%20%3D%20function%28aE%29%20%7B%0A%09%09%09var%20mPop%20%3D%20aE.target%3B%0A%09%09%09if%20%28mPop.localName%20%21%3D%3D%20%22menupopup%22%20%7C%7C%20%21mPop.id%20%7C%7C%20window%5B%24._UID%5D%5B%22TCIDs%22%5D.indexOf%28mPop.id%29%20%3D%3D%3D%20-1%29%0A%09%09%09%09return%20true%3B%0A%09%09%09let%20isBtn%20%3D%20mPop.triggerNode%20%26%26%20mPop.triggerNode.tagName%20%26%26%20mPop.triggerNode.tagName%20%3D%3D%3D%20%22toolbarbutton%22%3B%0A%09%09%09//%20Hide%20default%20menuitems%20depending%20on%20which%20menu%20groups%20are%20enabled.%0A%09%09%09let%20addLabel%20%3D%20%24.%24%28%22custombuttons-contextpopup-addnewbutton%22%29.getAttribute%28%22label%22%29%3B%0A%09%09%09Array.prototype.slice.call%28mPop.getElementsByTagName%28%22menuitem%22%29%29.forEach%28function%28aMi%29%20%7B%0A%09%09%09%09if%20%28aMi.label%20%26%26%20addLabel%20%26%26%20aMi.label%20%3D%3D%20addLabel%29%0A%09%09%09%09%09aMi.collapsed%20%3D%20%24._zAddGMIInTC%3B%0A%09%09%09%7D%29%3B%0A%09%09%09//%20Non-Custom%20Buttons%20can%27t%20be%20exported.%20Duh%21%0A%09%09%09Array.prototype.slice.call%28mPop.getElementsByAttribute%28%22dyn_id%22%2C%20%24._UID%20+%20%22-exportButtonAsXML%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09aEl%20%26%26%20aEl.setAttribute%28%22disabled%22%2C%20%22true%22%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%09//%20Disable%20%22Install%20to%20position%22%20buttons%20when%20the%20clipboard%20doesn%27t%20contain%20a%20Custom%20Button%20URI.%0A%09%09%09Array.prototype.slice.call%28mPop.getElementsByAttribute%28%22dyn_id%22%2C%20%24._UID%20+%20%22-installToPosition%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09if%20%28%24._startURI.test%28gClipboard.read%28%29%29%29%0A%09%09%09%09%09aEl%20%26%26%20aEl.removeAttribute%28%22disabled%22%29%3B%0A%09%09%09%09else%0A%09%09%09%09%09aEl%20%26%26%20aEl.setAttribute%28%22disabled%22%2C%20%22true%22%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%09Array.prototype.slice.call%28mPop.getElementsByAttribute%28%22dyn_id%22%2C%20%24._UID%20+%20%22-ifIsButtonForTBContext%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09aEl%20%26%26%20%28aEl.collapsed%20%3D%20%21isBtn%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%09%24.HandleAllSeps%28mPop.getElementsByTagName%28%22menuseparator%22%29%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%7D%3B%0A%09%09removeEventListener%28%22popupshowing%22%2C%20popShowing%2C%20false%29%3B%0A%09%09if%20%28aRem%29%0A%09%09%09return%20true%3B%0A%09%09addEventListener%28%22popupshowing%22%2C%20popShowing%2C%20false%29%3B%0A%09%7D%2C%0A%0A%09HandleCBContext%3A%20function%28aRem%29%20%7B%0A%09%09let%20popShowing%20%3D%20function%28aE%29%20%7B%0A%09%09%09var%20mPop%20%3D%20aE.target%3B%0A%09%09%09if%20%28mPop.localName%20%21%3D%3D%20%22menupopup%22%20%7C%7C%20%21mPop.id%20%7C%7C%20%21/%5Ecustombuttons-contextpopup/.test%28mPop.id%29%29%0A%09%09%09%09return%20true%3B%0A%09%09%09var%20btn%3B%0A%09%09%09try%20%7B%20//%20DO%20NOT%20USE%20custombuttons.popupNode%21%21%21%20%AC%AC%0A%09%09%09%09if%20%28document.popupNode%29%0A%09%09%09%09%09btn%20%3D%20document.popupNode%3B%0A%09%09%09%09else%20if%20%28mPop.triggerNode%29%0A%09%09%09%09%09btn%20%3D%20mPop.triggerNode%3B%0A%09%09%09%09else%0A%09%09%09%09%09btn%20%3D%20null%3B%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%7D%0A%09%09%09if%20%28%21btn%29%0A%09%09%09%09return%20true%3B%0A%09%09%09if%20%28%24._zInfoHeader%29%20%7B%0A%09%09%09%09//%20Set%20%22Info%20Header%22%20ID.%0A%09%09%09%09Array.prototype.slice.call%28mPop.getElementsByAttribute%28%22dyn_id%22%2C%20%24._UID%20+%20%22-infoHeader%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09%09aEl%20%26%26%20aEl.setAttribute%28%22description%22%2C%20btn.id.match%28/%5Cd+/%29%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%0A%09%09%09if%20%28%24._zToggleInitMI%29%20%7B%0A%09%09%09%09//%20Set%20%22Toggle%20init.%20code%22%20state%0A%09%09%09%09Array.prototype.slice.call%28mPop.getElementsByAttribute%28%22dyn_id%22%2C%20%24._UID%20+%20%22-toggleInitCode%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09%09if%20%28%21aEl%29%0A%09%09%09%09%09%09return%20true%3B%0A%09%09%09%09%09let%20initCode%20%3D%20%28btn%20%26%26%20btn.cbInitCode%29%20%7C%7C%20%22%22%2C%0A%09%09%09%09%09%09tt%20%3D%20%22Toggle%20initialization%20code.%22%3B%0A%09%09%09%09%09if%20%28/%5E%5Cn*return%28%3F%3A%3B%7C%5Cs*%5Cn%29/.test%28initCode%29%29%20%7B%0A%09%09%09%09%09%09aEl.removeAttribute%28%22_checked%22%29%3B%0A%09%09%09%09%09%09aEl.setAttribute%28%22tooltiptext%22%2C%20tt%20+%20%22%5Cn%5CnInitialization%20code%20of%20this%20button%20is%20DISABLED.%22%29%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09aEl.setAttribute%28%22_checked%22%2C%20%22true%22%29%3B%0A%09%09%09%09%09%09aEl.setAttribute%28%22tooltiptext%22%2C%20tt%20+%20%22%5Cn%5CnInitialization%20code%20of%20this%20button%20is%20ENABLED.%22%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20%28/%5E%5Cs*%28%3F%3A%5C/%5C*Initialization%20Code%5C*%5C/%5Cs*%29%3F%24/.test%28initCode%29%29%20%7B%0A%09%09%09%09%09%09aEl.setAttribute%28%22disabled%22%2C%20%22true%22%29%3B%0A%09%09%09%09%09%09aEl.setAttribute%28%22tooltiptext%22%2C%20tt%20+%20%22%5Cn%5CnInitialization%20tab%20of%20this%20button%20is%20empty.%5CnThere%20is%20no%20need%20to%20toggle%20initialization%20here.%22%29%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09aEl.removeAttribute%28%22disabled%22%29%3B%0A%09%09%09%09%09%09aEl.setAttribute%28%22tooltiptext%22%2C%20tt%20+%20%22%5Cn%5CnInitialization%20code%20of%20this%20button%20is%20ENABLED.%22%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%0A%09%09%09if%20%28%24._zOtherActionsGMI%29%20%7B%0A%09%09%09%09//%20Set%20%22Update%20button%22%20state%0A%09%09%09%09Array.prototype.slice.call%28mPop.getElementsByAttribute%28%22dyn_id%22%2C%20%24._UID%20+%20%22-updateButton%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09%09let%20ref%20%3D%20%24.%24%28%24.upd%29%20%7C%7C%20%24.%24%28%24.upd%20+%20%22-sub%22%29%3B%0A%09%09%09%09%09if%20%28ref%20%26%26%20ref.hasAttribute%28%22hidden%22%29%29%0A%09%09%09%09%09%09aEl%20%26%26%20aEl.setAttribute%28%22disabled%22%2C%20%22true%22%29%3B%0A%09%09%09%09%09else%0A%09%09%09%09%09%09aEl%20%26%26%20aEl.removeAttribute%28%22disabled%22%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09//%20Set%20%22Button%20help%22%20state%0A%09%09%09%09Array.prototype.slice.call%28mPop.getElementsByAttribute%28%22dyn_id%22%2C%20%24._UID%20+%20%22-buttonHelp%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09%09let%20ref%20%3D%20%24.%24%28%24.hlp%29%20%7C%7C%20%24.%24%28%24.hlp%20+%20%22-sub%22%29%3B%0A%09%09%09%09%09if%20%28ref%20%26%26%20ref.hasAttribute%28%22hidden%22%29%29%0A%09%09%09%09%09%09aEl%20%26%26%20aEl.setAttribute%28%22disabled%22%2C%20%22true%22%29%3B%0A%09%09%09%09%09else%0A%09%09%09%09%09%09aEl%20%26%26%20aEl.removeAttribute%28%22disabled%22%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%0A%09%09%09if%20%28%24._zAddGMI%29%20%7B%0A%09%09%09%09//%20Disable%20%22Install%20to%20position%22%20buttons%20when%20the%20clipboard%20doesn%27t%20contain%20a%20Custom%20Button%20URI.%0A%09%09%09%09Array.prototype.slice.call%28mPop.getElementsByAttribute%28%22dyn_id%22%2C%20%24._UID%20+%20%22-installToPosition%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09%09if%20%28%24._startURI.test%28gClipboard.read%28%29%29%29%0A%09%09%09%09%09%09aEl%20%26%26%20aEl.removeAttribute%28%22disabled%22%29%3B%0A%09%09%09%09%09else%0A%09%09%09%09%09%09aEl%20%26%26%20aEl.setAttribute%28%22disabled%22%2C%20%22true%22%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%0A%09%09%09if%20%28%22gCustomizeMode%22%20in%20window%29%20%7B%0A%09%09%09%09Array.prototype.slice.call%28mPop.getElementsByAttribute%28%22dyn_id%22%2C%20%24._UID%20+%20%22-moveToPanelToolbar%22%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09%09%09if%20%28btn.getAttribute%28%22cui-areatype%22%29%20%3D%3D%3D%20%22menu-panel%22%29%20%7B%0A%09%09%09%09%09%09aEl%20%26%26%20aEl.setAttribute%28%22label%22%2C%20%22Move%20to%20Toolbar%22%29%3B%0A%09%09%09%09%09%09aEl%20%26%26%20aEl.setAttribute%28%22tooltiptext%22%2C%20%22Move%20button%20to%20Toolbar.%22%29%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09aEl%20%26%26%20aEl.setAttribute%28%22label%22%2C%20%22Move%20to%20Menu%22%29%3B%0A%09%09%09%09%09%09aEl%20%26%26%20aEl.setAttribute%28%22tooltiptext%22%2C%20%22Move%20button%20to%20Menu.%22%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%0A%09%09%09//%20Hide%20menuitems%20depending%20on%20which%20menu%20groups%20are%20enabled.%0A%09%09%09Array.prototype.slice.call%28mPop.getElementsByTagName%28%22menuitem%22%29%29.forEach%28function%28aMi%29%20%7B%0A%09%09%09%09let%20id%20%3D%20aMi.id%3B%0A%09%09%09%09if%20%28id%20%26%26%20RegExp%28%24.co%29.test%28id%29%29%0A%09%09%09%09%09aMi.collapsed%20%3D%20%24._zCopyGMI%3B%0A%09%09%09%09if%20%28id%20%26%26%20RegExp%28%24.ed%29.test%28id%29%29%0A%09%09%09%09%09aMi.collapsed%20%3D%20%24._zEditGMI%3B%0A%09%09%09%09if%20%28id%20%26%26%20RegExp%28%24.add%29.test%28id%29%29%0A%09%09%09%09%09aMi.collapsed%20%3D%20%24._zAddGMI%3B%0A%09%09%09%09if%20%28id%20%26%26%20RegExp%28%24.rem%29.test%28id%29%20%7C%7C%0A%09%09%09%09%09id%20%26%26%20RegExp%28%24.mTP%29.test%28id%29%20%7C%7C%0A%09%09%09%09%09id%20%26%26%20RegExp%28%24.mTT%29.test%28id%29%20%7C%7C%0A%09%09%09%09%09id%20%26%26%20RegExp%28%24.rFT%29.test%28id%29%20%7C%7C%0A%09%09%09%09%09id%20%26%26%20RegExp%28%24.rFP%29.test%28id%29%29%0A%09%09%09%09%09aMi.collapsed%20%3D%20%24._zDeleteGMI%3B%0A%09%09%09%09if%20%28id%20%26%26%20RegExp%28%24.cus%29.test%28id%29%29%0A%09%09%09%09%09aMi.collapsed%20%3D%20%24._zHideCustomizeFromCBContext%3B%0A%09%09%09%09if%20%28id%20%26%26%20RegExp%28%24.cl%29.test%28id%29%20%7C%7C%0A%09%09%09%09%09id%20%26%26%20RegExp%28%24.book%29.test%28id%29%20%7C%7C%0A%09%09%09%09%09id%20%26%26%20RegExp%28%24.hlp%29.test%28id%29%20%7C%7C%0A%09%09%09%09%09id%20%26%26%20RegExp%28%24.upd%29.test%28id%29%29%0A%09%09%09%09%09aMi.collapsed%20%3D%20%24._zOtherActionsGMI%3B%0A%09%09%09%09if%20%28id%20%26%26%20RegExp%28%24._ID%20+%20%24._UID%20+%20%22-moveToPanelToolbar%22%29.test%28id%29%29%0A%09%09%09%09%09aMi.collapsed%20%3D%20%21%28%22gCustomizeMode%22%20in%20window%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%09%24.HandleMGSeps%28mPop%2C%20mPop.getElementsByTagName%28%22menugroup%22%29%29%3B%0A%09%09%7D%3B%0A%09%09removeEventListener%28%22popupshowing%22%2C%20popShowing%2C%20false%29%3B%0A%09%09if%20%28aRem%29%0A%09%09%09return%3B%0A%09%09addEventListener%28%22popupshowing%22%2C%20popShowing%2C%20false%29%3B%0A%09%7D%2C%0A%0A%09ContextFunctions%3A%20%7B%0A%09%09infoHeader%3A%20function%28aBtn%29%20%7B%0A%09%09%09if%20%28%21aBtn%29%0A%09%09%09%09return%3B%0A%09%09%09gClipboard.write%28aBtn.id%29%3B%0A%09%09%09%24.mainPop.hidePopup%28%29%3B%0A%09%09%7D%2C%0A%0A%09%09editInTab%3A%20function%28aBtn%29%20%7B%0A%09%09%09if%20%28%21aBtn%29%0A%09%09%09%09return%3B%0A%09%09%09if%20%28typeof%20window%5B%24._UID%5D%5B%22EditCBInTab%22%5D%20%3D%3D%3D%20%22function%22%29%0A%09%09%09%09window%5B%24._UID%5D%5B%22EditCBInTab%22%5D%28aBtn%29%3B%0A%09%09%7D%2C%0A%0A%09%09removeToPalette%3A%20function%28aBtn%29%20%7B%0A%09%09%09if%20%28%21aBtn%29%0A%09%09%09%09return%3B%0A%09%09%09if%20%28%22CustomizableUI%22%20in%20window%29%20%7B%0A%09%09%09%09let%20cBox%3B%0A%09%09%09%09if%20%28%24._zRemoveToPaletteShowAlert%29%0A%09%09%09%09%09cBox%20%3D%20custombuttons.confirmBox%28self.name%2C%20%22Are%20to%20sure%20you%20want%20to%20move%20this%22%20+%0A%09%09%09%09%09%09%22%20button%20to%20the%20application%27s%20palette%3F%22%2C%20%22Yes%22%2C%20%22Cancel%22%29%3B%0A%09%09%09%09else%0A%09%09%09%09%09cBox%20%3D%20true%3B%0A%09%09%09%09if%20%28cBox%29%20%7B%0A%09%09%09%09%09gCustomizeMode.removeFromArea%28aBtn%29%0A%09%09%09%09%7D%20else%0A%09%09%09%09%09return%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09%24._normalInstall%20%3D%20true%3B%0A%09%09%09%09try%20%7B%0A%09%09%09%09%09%24._cbs.installWebButton%28null%2C%20aBtn.URI%2C%20false%29%3B%0A%09%09%09%09%7D%20catch%20%28aError%29%20%7B%0A%09%09%09%09%09loadURI%28aBtn.URI%29%3B%0A%09%09%09%09%7D%20finally%20%7B%0A%09%09%09%09%09custombuttons.removeButton%28aBtn%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%2C%0A%0A%09%09moveToPanelToolbar%3A%20function%28aBtn%29%20%7B%0A%09%09%09if%20%28%21aBtn%29%0A%09%09%09%09return%3B%0A%09%09%09if%20%28aBtn.getAttribute%28%22cui-areatype%22%29%20%3D%3D%3D%20%22menu-panel%22%29%0A%09%09%09%09gCustomizeMode.addToToolbar%28aBtn%29%0A%09%09%09else%0A%09%09%09%09gCustomizeMode.addToPanel%28aBtn%29%0A%09%09%7D%2C%0A%0A%09%09toggleInitCode%3A%20function%28aBtn%29%20%7B%0A%09%09%09if%20%28%21aBtn%29%0A%09%09%09%09return%3B%0A%09%09%09const%20PREFIX%20%3D%20%22return%3B%20//%20Disabled%20by%20CB%20Context%20Menu%20Extended%20button%5Cn%5Cn%22%3B%0A%09%09%09var%20initCode%20%3D%20aBtn.cbInitCode%2C%0A%09%09%09%09btnLabel%20%3D%20aBtn.name%20%7C%7C%20aBtn.label%20%7C%7C%20%22%22%2C%0A%09%09%09%09btnState%3B%0A%09%09%09let%20regEx%20%3D%20/%5E%5Cs*return%3B%3F%28%3F%3A%5Cs*%5C/%5C/%5B%5E%5Cn%5Cr%5D*%29%3F%5Cn+/%3B%0A%09%09%09if%20%28regEx.test%28initCode%29%29%20%7B%0A%09%09%09%09initCode%20%3D%20initCode.replace%28regEx%2C%20%22%22%29%3B%0A%09%09%09%09btnState%20%3D%20true%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09initCode%20%3D%20PREFIX%20+%20initCode%3B%0A%09%09%09%09btnState%20%3D%20false%3B%0A%09%09%09%7D%0A%09%09%09try%20%7B%0A%09%09%09%09let%20link%20%3D%20custombuttons.makeButtonLink%28%22edit%22%2C%20aBtn.id%29%3B%0A%09%09%09%09let%20param%20%3D%20%24._cbs.getButtonParameters%28link%29%3B%0A%09%09%09%09param%20%3D%20param.wrappedJSObject%20%7C%7C%20param%3B%0A%09%09%09%09param.initCode%20%3D%20initCode%3B%0A%09%09%09%09%24._cbs.installButton%28param%29%3B%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09%09LOG%28aErr%29%3B%0A%09%09%09%7D%20finally%20%7B%0A%09%09%09%09%24.notifyme%28btnLabel%2C%20%22Initialization%20code%20has%20been%20%22%20+%20%28btnState%20%3F%20%22ENABLED.%22%20%3A%20%22%20DISABLED.%22%29%2C%0A%09%09%09%09%09btnState%20%3F%20%24.getHelp%28%22AlertImg%22%29%20%3A%20%24.getHelp%28%22WarningImg%22%29%2C%0A%09%09%09%09%09null%29%3B%0A%09%09%09%7D%0A%09%09%7D%2C%0A%0A%09%09//%20Move%20buttons%20group%0A%09%09moveWithin%3A%20function%28aBtn%2C%20aPos%29%20%7B%0A%09%09%09if%20%28%21aBtn%29%0A%09%09%09%09return%3B%0A%09%09%09try%20%7B%0A%09%09%09%09//%20Should%20use%20CustomizableUI.moveWidgetWithinArea%2C%20but%20it%27s%20a%20total%20nightmare%20filled%20with%20nonsense%21%21%21%20%AC%AC%0A%09%09%09%09let%20toolbar%20%3D%20aBtn.parentNode%3B%0A%09%09%09%09if%20%28typeof%20aPos%20%3D%3D%3D%20%22number%22%29%20%7B%0A%09%09%09%09%09if%20%28aPos%20%3D%3D%3D%200%29%0A%09%09%09%09%09%09%24.MoveButton%28aBtn%2C%20toolbar.firstChild%29%3B%0A%09%09%09%09%09else%0A%09%09%09%09%09%09%24.MoveButton%28aBtn%2C%20toolbar.lastChild%29%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09if%20%28aPos%29%0A%09%09%09%09%09%09%24.MoveButton%28aBtn%2C%20aBtn.previousSibling%29%3B%0A%09%09%09%09%09else%0A%09%09%09%09%09%09%24.MoveButton%28aBtn%2C%20%28aBtn.nextSibling%29.nextSibling%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09%09Cu.reportError%28%5Bself.name%20+%20%22%3A%20%22%2C%20aBtn%2C%20aPos%2C%20aErr%2C%20aErr.stack%5D.join%28%22%5Cn%22%29%29%3B%0A%09%09%09%7D%0A%09%09%7D%2C%0A%0A%09%09move%3A%20function%28aBtn%29%20%7B%0A%09%09%09if%20%28%21aBtn%29%0A%09%09%09%09return%3B%0A%09%09%09%24._moveButtonID%20%3D%20aBtn.id%3B%0A%09%09%09%24._showCursorFeedback%20%26%26%20window.setCursor%28%22move%22%29%3B%0A%09%09%09%5B%22click%22%2C%20%22mouseup%22%2C%20%22mousedown%22%2C%20%22contextmenu%22%5D.forEach%28function%28aLi%29%20%7B%0A%09%09%09%09if%20%28aLi%20%3D%3D%3D%20%22click%22%29%0A%09%09%09%09%09window.addEventListener%28aLi%2C%20%24.MoveListener%2C%20true%29%3B%0A%09%09%09%09else%0A%09%09%09%09%09window.addEventListener%28aLi%2C%20%24.DefaultPrevention%2C%20true%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%09if%20%28%24._zShowMoveAlert%29%20%7B%0A%09%09%09%09let%20check%20%3D%20%7B%0A%09%09%09%09%09value%3A%20%21%24._zShowMoveAlert%0A%09%09%09%09%7D%3B%0A%09%09%09%09Services.prompt.alertCheck%28null%2C%0A%09%09%09%09%09self.name%2C%0A%09%09%09%09%09%22You%20have%20chosen%20the%20button%20named%20%5C%22%22%20+%20aBtn.name%20+%20%22%5C%22%20to%20be%20moved.%5Cn%22%20+%0A%09%09%09%09%09%22After%20closing%20this%20dialog%2C%20click%20ANY%20toolbarbutton%20element%20inside%20ANY%20toolbar.%5Cn%22%20+%0A%09%09%09%09%09%22Left%20click%20will%20position%20the%20button%20to%20the%20left%20of%20the%20target.%5Cn%22%20+%0A%09%09%09%09%09%22Right%20click%20will%20position%20the%20button%20to%20the%20right%20of%20the%20target.%5Cn%5Cn%22%20+%0A%09%09%09%09%09%22To%20cancel%20the%20movement%2C%20just%20click%20ANY%20element%20inside%20the%20browser%20that%20IS%20NOT%20a%20toolbarbutton.%5Cn%22%2C%0A%09%09%09%09%09%22Stop%20showing%20this%20alert.%22%2C%0A%09%09%09%09%09check%29%3B%0A%09%09%09%09%24.sPref%28%22zShowMoveAlert%22%2C%20%21check.value%29%3B%0A%09%09%09%7D%0A%09%09%7D%2C%0A%0A%09%09//%20Clone%20button%20menu%20item%0A%09%09cloneButton%3A%20function%28aE%2C%20aBtn%29%20%7B%0A%09%09%09if%20%28%21aBtn%29%0A%09%09%09%09return%3B%0A%09%09%09//%20aE.preventDefault%28%29%3B%0A%09%09%09aE.stopPropagation%28%29%3B%0A%09%09%09if%20%28%21aBtn%20%7C%7C%20%21%24.hasMod%28aE%2C%200%29%29%0A%09%09%09%09return%3B%0A%09%09%09if%20%28aE.button%20%3D%3D%3D%200%29%0A%09%09%09%09custombuttons.cloneButton%28aBtn%29%3B%0A%09%09%09else%20if%20%28aE.button%20%3D%3D%3D%201%29%0A%09%09%09%09custombuttons.cloneButton%28aBtn%2C%20true%29%3B%0A%09%09%7D%2C%0A%0A%09%09//%20Copy%20buttons%20group%0A%09%09copyButtons%3A%20function%28aBtn%2C%20aType%29%20%7B%0A%09%09%09if%20%28%21aBtn%29%0A%09%09%09%09return%3B%0A%09%09%09switch%20%28aType%29%20%7B%0A%09%09%09%09case%20%22URI%22%3A%0A%09%09%09%09%09%24._cbs.writeToClipboard%28aBtn.URI%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22BBCode%22%3A%0A%09%09%09%09%09gClipboard.write%28%22%5Burl%3D%22%20+%20aBtn.URI%20+%20%22%5D%22%20+%20aBtn.name%20+%20%22%5B/url%5D%22%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22HTML%22%3A%0A%09%09%09%09%09gClipboard.write%28%22%3Ca%20href%3D%5C%22%22%20+%20aBtn.URI%20+%20%22%5C%22%3E%22%20+%20aBtn.name%20+%20%22%3C/a%3E%22%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22Image%22%3A%0A%09%09%09%09%09gClipboard.write%28aBtn.image%20%7C%7C%20%24.getStdImage%28aBtn.getAttribute%28%22cb-stdicon%22%29%29%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D%2C%0A%0A%09%09//%20Add/Install%20buttons%20group%0A%09%09addInstall%3A%20function%28aBtn%2C%20aType%29%20%7B%0A%09%09%09if%20%28%21aBtn%29%0A%09%09%09%09return%3B%0A%09%09%09%24._normalInstall%20%3D%20false%3B%0A%09%09%09%24._toRight%20%3D%20false%3B%0A%09%09%09%24._zAnchor%20%3D%20aBtn.id%20%7C%7C%20aBtn.getAttribute%28%22id%22%29%20%7C%7C%20%22%22%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09if%20%28%21%24._zAnchor%29%0A%09%09%09%09%09return%20true%3B%0A%09%09%09%09let%20clipContent%20%3D%20gClipboard.read%28%29%3B%0A%09%09%09%09switch%20%28aType%29%20%7B%0A%09%09%09%09%09case%20%22instL%22%3A%0A%09%09%09%09%09%09if%20%28%24._startURI.test%28clipContent%29%29%0A%09%09%09%09%09%09%09%24._cbs.installButton%28%24._cbs.parseButtonURI%28clipContent%29%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22addL%22%3A%0A%09%09%09%09%09%09custombuttons.addButton%28%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22add%22%3A%0A%09%09%09%09%09%09%24._normalInstall%20%3D%20true%3B%0A%09%09%09%09%09%09custombuttons.addButton%28%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22addR%22%3A%0A%09%09%09%09%09%09%24._toRight%20%3D%20true%3B%0A%09%09%09%09%09%09custombuttons.addButton%28%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20%22instR%22%3A%0A%09%09%09%09%09%09%24._toRight%20%3D%20true%3B%0A%09%09%09%09%09%09if%20%28%24._startURI.test%28clipContent%29%29%0A%09%09%09%09%09%09%09%24._cbs.installButton%28%24._cbs.parseButtonURI%28clipContent%29%29%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%7D%2C%0A%0A%09%09exportImportButtons%3A%20%7B%0A%09%09%09exportXML%3A%20function%28aBtn%29%20%7B%0A%09%09%09%09if%20%28%21aBtn%29%0A%09%09%09%09%09return%3B%0A%09%09%09%09%24.saveXML%28aBtn.name%20%7C%7C%20aBtn.label%20%7C%7C%20%22No%20Name%21%21%21%22%2C%0A%09%09%09%09%09aBtn.id.match%28/%5Cd+/%29%2C%0A%09%09%09%09%09aBtn.URI%2C%0A%09%09%09%09%09aBtn.image%20%7C%7C%20%24.getStdImage%28aBtn.getAttribute%28%22cb-stdicon%22%29%29%29%3B%0A%09%09%09%7D%2C%0A%0A%09%09%09importXML%3A%20function%28aBtn%2C%20aToRight%29%20%7B%0A%09%09%09%09let%20dir%20%3D%20%24._getExpStorage%28true%29%3B%0A%09%09%09%09let%20fp%20%3D%20Cc%5B%22@mozilla.org/filepicker%3B1%22%5D.createInstance%28Ci.nsIFilePicker%29%3B%0A%09%09%09%09fp.init%28window%2C%20%22Import%20an%20XML%20file%20and%20install%20it%20as%20a%20new%20button%22%2C%20Ci.nsIFilePicker.modeOpenMultiple%29%3B%0A%09%09%09%09fp.appendFilters%28Ci.nsIFilePicker.filterXML%29%3B%0A%09%09%09%09fp.appendFilter%28%22All%20Files%22%2C%20%22*.*%22%29%3B%0A%09%09%09%09fp.displayDirectory%20%3D%20dir%3B%0A%09%09%09%09var%20paths%20%3D%20%5B%5D%2C%0A%09%09%09%09%09URIs%20%3D%20%5B%5D%3B%0A%09%09%09%09if%20%28fp.show%28%29%20%3D%3D%3D%20Ci.nsIFilePicker.returnOK%29%20%7B%0A%09%09%09%09%09let%20files%20%3D%20fp.files%3B%0A%09%09%09%09%09while%20%28files.hasMoreElements%28%29%29%20%7B%0A%09%09%09%09%09%09let%20file%20%3D%20files.getNext%28%29.QueryInterface%28Ci.nsIFile%29%3B%0A%09%09%09%09%09%09paths.push%28file.path%29%3B%0A%09%09%09%09%09%09dir%20%3D%20file.parent.path%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%0A%09%09%09%09%09return%3B%0A%09%09%09%09%24.sPref%28%22zLastUsedLocation%22%2C%20dir%29%3B%0A%09%09%09%09var%20toRight%20%3D%20aToRight%2C%0A%09%09%09%09%09anchor%20%3D%20aBtn.id%20%7C%7C%20aBtn.getAttribute%28%22id%22%29%20%7C%7C%20%22%22%3B%0A%09%09%09%09for%20%28var%20p%20%3D%20paths.length%20-%201%3B%20p%20%3E%3D%200%3B%20p--%29%20%7B%0A%09%09%09%09%09let%20xmlData%20%3D%20%24.readFile%28paths%5Bp%5D%29%3B%20//%20OS.File.read%20sucks%21%21%21%21%20It%27s%20sloooow%20as%20hell%20inside%20loops/forEach%21%21%21%0A%09%09%09%09%09if%20%28%21xmlData%29%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09let%20xmlDOM%3B%0A%09%09%09%09%09try%20%7B%0A%09%09%09%09%09%09xmlDOM%20%3D%20%24.stringToDOM%28xmlData%29.documentElement%3B%0A%09%09%09%09%09%7D%20catch%20%28aErr%29%20%7B%7D%0A%09%09%09%09%09if%20%28%21xmlDOM%29%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09var%20cbNS%20%3D%20%22http%3A//xsms.nm.ru/custombuttons/%22%3B%0A%09%09%09%09%09if%20%28xmlDOM.localName%20%3D%3D%3D%20%22custombutton%22%20%26%26%0A%09%09%09%09%09%09%28xmlDOM.getAttribute%28%22xmlns%3Acb%22%29%20%3D%3D%3D%20cbNS%20%7C%7C%20xmlDOM.getAttribute%28%22xmlns%22%29%20%3D%3D%3D%20cbNS%29%29%20%7B%0A%09%09%09%09%09%09URIs.push%28%22custombutton%3A%5Cx2F%5Cx2F%22%20+%20escape%28xmlData%29%29%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%24.notifyme%28self.name%2C%0A%09%09%09%09%09%09%09%22Import%20Fail%21%21%21%5CnNot%20a%20valid%20Custom%20Buttons%20XML%20file%21%21%21%22%2C%0A%09%09%09%09%09%09%09%24.getHelp%28%22ErrorImg%22%29%2C%0A%09%09%09%09%09%09%09null%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09for%20%28var%20u%20%3D%20URIs.length%20-%201%3B%20u%20%3E%3D%200%3B%20u--%29%20%7B%0A%09%09%09%09%09%09%24._normalInstall%20%3D%20false%3B%0A%09%09%09%09%09%09%24._toRight%20%3D%20toRight%3B%0A%09%09%09%09%09%09%24._zAnchor%20%3D%20anchor%3B%0A%09%09%09%09%09%09%24._cbs.installButton%28%24._cbs.parseButtonURI%28URIs%5Bu%5D%29%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%201000%29%3B%0A%09%09%09%7D%2C%0A%0A%09%09%09importFromOverlay%3A%20function%28aBtn%2C%20aToRight%29%20%7B%0A%09%09%09%09let%20dir%20%3D%20%24._getExpStorage%28true%29%3B%0A%09%09%09%09let%20fp%20%3D%20Cc%5B%22@mozilla.org/filepicker%3B1%22%5D.createInstance%28Ci.nsIFilePicker%29%3B%0A%09%09%09%09fp.init%28window%2C%20%22Selct%20a%20CB%20overlay%20file%20to%20import%20buttons%20from%22%2C%20Ci.nsIFilePicker.modeOpen%29%3B%0A%09%09%09%09fp.appendFilter%28%22XUL%20files%22%2C%20%22*.xul%22%29%3B%0A%09%09%09%09fp.appendFilter%28%22All%20files%22%2C%20%22*.*%22%29%3B%0A%09%09%09%09fp.displayDirectory%20%3D%20dir%3B%0A%09%09%09%09if%20%28fp.show%28%29%20%3D%3D%3D%20Ci.nsIFilePicker.returnOK%29%20%7B%0A%09%09%09%09%09if%20%28fp.file%20%26%26%20fp.file.exists%28%29%29%0A%09%09%09%09%09%09dir%20%3D%20fp.file.parent.QueryInterface%28Ci.nsIFile%29%3B%0A%09%09%09%09%7D%20else%0A%09%09%09%09%09return%3B%0A%09%09%09%09%24.sPref%28%22zLastUsedLocation%22%2C%20fp.file.parent.path%29%3B%0A%09%09%09%09OS.File.read%28fp.file.path%29.then%28function%20onSuccess%28aReadData%29%20%7B%0A%09%09%09%09%09let%20data%20%3D%20new%20TextDecoder%28%29.decode%28aReadData%29.replace%28/%3E%5Cs+%3C/g%2C%20%22%3E%3C%22%29%3B%0A%09%09%09%09%09let%20overlayDoc%20%3D%20%28new%20DOMParser%29.parseFromString%28data%2C%20%22application/xml%22%29.documentElement%3B%0A%09%09%09%09%09let%20allPalettes%20%3D%20overlayDoc.getElementsByTagName%28%22toolbarpalette%22%29%3B%0A%09%09%09%09%09let%20allUsedPalettes%20%3D%20%5B%5D%3B%0A%09%09%09%09%09for%20%28let%20i%20%3D%20allPalettes.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%29%20%7B%0A%09%09%09%09%09%09if%20%28allPalettes%5Bi%5D.childNodes.length%20%3E%200%29%0A%09%09%09%09%09%09%09allUsedPalettes.push%28allPalettes%5Bi%5D%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09var%20win%20%3D%20%24.getHelp%28%22ImportFromOverlayWindow%22%29%3B%0A%09%09%09%09%09win%20%3D%20win.replace%28/_btn_opener_/g%2C%20%22opener.document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29%22%29%3B%0A%09%09%09%09%09win%20%3D%20win.replace%28/%3E%5Cs+%3C/g%2C%20%22%3E%3C%22%29%3B%0A%09%09%09%09%09var%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28win%29%3B%0A%09%09%09%09%09let%20overlayWin%20%3D%20window.openDialog%28url%2C%20%22%22%2C%20%22chrome%2C%20dialog%3Dno%2C%20centerscreen%2C%20resizable%2C%20sizemode%3Dnormal%22%29%3B%0A%09%09%09%09%09overlayWin.allUsedPalettes%20%3D%20allUsedPalettes%3B%0A%09%09%09%09%09overlayWin.anchor%20%3D%20aBtn.id%20%7C%7C%20aBtn.getAttribute%28%22id%22%29%20%7C%7C%20%22%22%3B%0A%09%09%09%09%09overlayWin.toRight%20%3D%20aToRight%3B%0A%09%09%09%09%7D%2C%20function%20onFailure%28aRejectReason%29%20%7B%0A%09%09%09%09%09Cu.reportError%28%5Bself.name%20+%20%22%3A%20%22%2C%20aWhere%2C%20aRejectReason%2C%20aRejectReason.stack%5D.join%28%22%5Cn%22%29%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%7D%2C%0A%0A%09%09%09installFromOverlay%3A%20function%28aBtns%2C%20aAnchor%2C%20aToRight%29%20%7B%0A%09%09%09%09let%20toRight%20%3D%20aToRight%2C%0A%09%09%09%09%09anchor%20%3D%20aAnchor%2C%0A%09%09%09%09%09URIs%20%3D%20%5B%5D%3B%0A%09%09%09%09Array.prototype.slice.call%28aBtns%29.forEach%28function%28aBtn%29%20%7B%0A%09%09%09%09%09var%20btn%20%3D%20aBtn._btn%3B%0A%09%09%09%09%09let%20name%20%3D%20btn.getAttribute%28%22label%22%29%20%7C%7C%20%22%22%3B%0A%09%09%09%09%09%28name%20%3D%3D%3D%20%22%22%29%20%26%26%20%28name%20%3D%20%22Name%20me%21%21%22%29%3B%0A%09%09%09%09%09let%20init%20%3D%20btn.getAttribute%28%22cb-init%22%29%2C%0A%09%09%09%09%09%09img%20%3D%20btn.getAttribute%28%22image%22%29%20%7C%7C%20%24.getImg%28btn.getAttribute%28%22cb-stdicon%22%29%29%2C%0A%09%09%09%09%09%09key%20%3D%20btn.getAttribute%28%22accelkey%22%29%20%7C%7C%20%22%22%2C%0A%09%09%09%09%09%09code%20%3D%20btn.getAttribute%28%22cb-oncommand%22%29%2C%0A%09%09%09%09%09%09help%20%3D%20btn.getAttribute%28%22Help%22%29%2C%0A%09%09%09%09%09%09mode%20%3D%20btn.getAttribute%28%22mode%22%29%20%7C%7C%20%22%22%3B%0A%09%09%09%09%09let%20URI%20%3D%20%24.createURI%28name%2C%20img%2C%20code%2C%20help%2C%20init%2C%20key%2C%20mode%29%3B%0A%09%09%09%09%09URIs.push%28URI%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09for%20%28var%20u%20%3D%20URIs.length%20-%201%3B%20u%20%3E%3D%200%3B%20u--%29%20%7B%0A%09%09%09%09%09%09%24._normalInstall%20%3D%20false%3B%0A%09%09%09%09%09%09%24._toRight%20%3D%20toRight%3B%0A%09%09%09%09%09%09%24._zAnchor%20%3D%20anchor%3B%0A%09%09%09%09%09%09if%20%28%21%24._zAnchor%29%0A%09%09%09%09%09%09%09%24._normalInstall%20%3D%20true%3B%0A%09%09%09%09%09%09%24._cbs.installButton%28%24._cbs.parseButtonURI%28URIs%5Bu%5D%29%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%2C%201000%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09MoveButton%3A%20function%28aBtn%2C%20aAnchor%29%20%7B%0A%09%09try%20%7B%0A%09%09%09var%20toolbar%20%3D%20aAnchor.parentNode%3B%0A%09%09%09toolbar.insertBefore%28aBtn%2C%20aAnchor%29%3B%0A%09%09%09%24.persistCurrentSets%28aAnchor.id%20%7C%7C%20aAnchor.getAttribute%28%22id%22%29%2C%0A%09%09%09%09aBtn.id%20%7C%7C%20aBtn.getAttribute%28%22id%22%29%29%3B%0A%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09Cu.reportError%28%5Bself.name%20+%20%22%3A%20%22%2C%20aBtn%2C%20aAnchor%2C%20aErr%2C%20aErr.stack%5D.join%28%22%5Cn%22%29%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09MoveListener%3A%20function%28aE%29%20%7B%0A%09%09%24._showCursorFeedback%20%26%26%20window.setCursor%28%22auto%22%29%3B%0A%09%09%24.DefaultPrevention%28aE%29%3B%0A%09%09%5B%22click%22%2C%20%22mouseup%22%2C%20%22mousedown%22%2C%20%22contextmenu%22%5D.forEach%28function%28aLi%29%20%7B%0A%09%09%09if%20%28aLi%20%3D%3D%3D%20%22click%22%29%0A%09%09%09%09window.removeEventListener%28aLi%2C%20%24.MoveListener%2C%20true%29%3B%0A%09%09%09else%0A%09%09%09%09window.removeEventListener%28aLi%2C%20%24.DefaultPrevention%2C%20true%29%3B%0A%09%09%7D%29%3B%0A%09%09if%20%28aE.target.tagName%20%21%3D%3D%20%22toolbarbutton%22%29%0A%09%09%09return%3B%0A%09%09let%20anchor%3B%0A%09%09try%20%7B%0A%09%09%09anchor%20%3D%20aE.button%20%3C%201%20%3F%20aE.target%20%3A%20aE.target.nextSibling%3B%0A%09%09%09let%20btnID%20%3D%20%24._moveButtonID%3B%0A%09%09%09%24.MoveButton%28%24.%24%28btnID%29%2C%20anchor%29%3B%0A%09%09%7D%20catch%20%28aErr%29%20%7B%7D%20finally%20%7B%0A%09%09%09%24._moveButtonID%20%3D%20null%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09persistCurrentSets%3A%20function%28aAnchorID%2C%20aBtnID%29%20%7B%0A%09%09let%20isAustralis%20%3D%20%22CustomizableUI%22%20in%20window%3B%0A%09%09if%20%28isAustralis%20%26%26%20%21%21aAnchorID%20%26%26%20%21%21aBtnID%29%20%7B%0A%09%09%09try%20%7B%0A%09%09%09%09var%20placement%20%3D%20CustomizableUI.getPlacementOfWidget%28aAnchorID%29%3B%0A%09%09%09%09var%20area%20%3D%20placement%20%26%26%20placement.area%3B%0A%09%09%09%09var%20pos%20%3D%20placement%20%26%26%20placement.position%3B%0A%09%09%09%09if%20%28aBtnID%29%20%7B%0A%09%09%09%09%09CustomizableUI.addWidgetToArea%28%0A%09%09%09%09%09%09aBtnID%2C%0A%09%09%09%09%09%09area%20%7C%7C%20CustomizableUI.AREA_NAVBAR%2C%0A%09%09%09%09%09%09typeof%20pos%20%3D%3D%3D%20%22number%22%20%3F%20pos%20%3A%20undefined%0A%09%09%09%09%09%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09%09LOG%28aErr%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09let%20toolbars%20%3D%20document.querySelectorAll%28%22toolbar%5Bcustomizable%3D%27true%27%5D%5Bcurrentset%5D%22%29%3B%0A%09%09for%20%28let%20toolbar%20of%20toolbars%29%20%7B%0A%09%09%09if%20%28%21isAustralis%29%20%7B%0A%09%09%09%09let%20set%20%3D%20toolbar.currentSet%3B%0A%09%09%09%09toolbar.setAttribute%28%22currentset%22%2C%20set%29%3B%0A%09%09%09%7D%0A%09%09%09document.persist%28toolbar.id%2C%20%22currentset%22%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09DefaultPrevention%3A%20function%28aE%29%20%7B%0A%09%09aE.preventDefault%28%29%3B%0A%09%09aE.stopImmediatePropagation%20%26%26%20aE.stopImmediatePropagation%28%29%3B%0A%09%09aE.stopPropagation%28%29%3B%0A%09%7D%2C%0A%0A%09CreateNewItems%3A%20function%28%29%20%7B%0A%09%09let%20popSet%20%3D%20%24.%24%28%22mainPopupSet%22%29%3B%0A%09%09let%20mPop%20%3D%20%24.%24%28%24._ID%20+%20%24._UID%20+%20%22-newItemsMenupopup%22%29%3B%0A%09%09if%20%28popSet%20%26%26%20%21mPop%29%20%7B%0A%09%09%09mPop%20%3D%20%24.parseXML%28%24.getHelp%28%22NewContextItems%22%29%0A%09%09%09%09.replace%28/_T_H_A_T_/g%2C%20%22document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29.CBCME%22%29%0A%09%09%09%09.replace%28/_U_I_D_/g%2C%20%24._UID%29%0A%09%09%09%09.replace%28/_B_A_S_E_I_D_/g%2C%20%24._ID%20+%20%24._UID%29%29%3B%0A%09%09%09popSet.appendChild%28mPop%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09RemoveNewItems%3A%20function%28%29%20%7B%0A%09%09let%20placedEls%20%3D%20Array.slice%28document.getElementsByAttribute%28%22_placed%22%2C%20%24._UID%20+%20%22placed-items%22%29%29%3B%0A%09%09Array.prototype.slice.call%28placedEls%29.forEach%28function%28aEl%29%20%7B%0A%09%09%09aEl%20%26%26%20aEl.parentNode.removeChild%28aEl%29%3B%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09InsertNewItems%3A%20function%28aDelayedInsertion%29%20%7B%0A%09%09let%20iID%20%3D%20%24._ID%20+%20%24._UID%3B%0A%09%09let%20ctxs%20%3D%20%5B%24.mainPop%2C%20%24.subPop%5D%3B%0A%0A%09%09Array.prototype.slice.call%28ctxs%29.forEach%28function%28aMPop%2C%20aI%29%20%7B%0A%09%09%09let%20suffix%20%3D%20%28aI%20%3D%3D%3D%200%29%20%3F%20%22%22%20%3A%20%22-sub%22%3B%0A%09%09%09let%20suffixForClone%20%3D%20%28aI%20%3D%3D%3D%200%29%20%3F%20%22-main%22%20%3A%20%22-sub%22%3B%0A%09%09%09if%20%28%24._zInfoHeader%29%0A%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-infoHeader%22%29%2C%200%2C%20suffixForClone%2C%20false%29%3B%0A%09%09%09if%20%28%24._zEditGMI%29%0A%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-editButtonsGroup%22%29%2C%20%24.ed%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09else%20%7B%0A%09%09%09%09if%20%28%24._zToggleInitMI%29%0A%09%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-toggleInitCode%22%29%2C%20%24.ed%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09%09if%20%28typeof%20gBrowser%20%3D%3D%3D%20%22object%22%29%20%7B%0A%09%09%09%09%09if%20%28%24._zEditInTabMI%29%0A%09%09%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-editInTab%22%29%2C%20%24.ed%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09if%20%28%24._zCopyGMI%29%0A%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-copyButtonsGroup%22%29%2C%20%24.co%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09else%20%7B%0A%09%09%09%09if%20%28%24._zCopyImageMI%29%0A%09%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-copyButtonImage%22%29%2C%20%24.co%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09%09if%20%28%24._zCopyAsHTMLMI%29%0A%09%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-copyButtonAsHTML%22%29%2C%20%24.co%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09%09if%20%28%24._zCopyAsBBCodeMI%29%0A%09%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-copyButtonAsBBCode%22%29%2C%20%24.co%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09%7D%0A%09%09%09if%20%28%24._zDeleteGMI%29%0A%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-deleteButtonsGroup%22%29%2C%20%24.rem%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09else%20%7B%0A%09%09%09%09if%20%28%24._zRemoveToPaletteMI%29%0A%09%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-removeToPalette%22%29%2C%20%24.rem%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09%7D%0A%09%09%09if%20%28%24._zOtherActionsGMI%29%0A%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-otherActionsButtonsGroup%22%29%2C%20%24.upd%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09if%20%28%24._zXMLExpImpGMI%29%0A%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-exportImportButtons%22%29%2C%20%24.s3%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09else%20%7B%0A%09%09%09%09if%20%28%24._zOverlayImportLeftMI%29%0A%09%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-importFromOverlayToLeft%22%29%2C%20%24.s3%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09%09if%20%28%24._zOverlayImportRightMI%29%0A%09%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-importFromOverlayToRight%22%29%2C%20%24.s3%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09%09if%20%28%24._zXMLImportLeftMI%29%0A%09%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-importButtonToLeft%22%29%2C%20%24.s3%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09%09if%20%28%24._zXMLImportRightMI%29%0A%09%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-importButtonToRight%22%29%2C%20%24.s3%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09%09if%20%28%24._zXMLExportMI%29%0A%09%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-exportButtonAsXML%22%29%2C%20%24.s3%20+%20suffix%2C%20suffixForClone%2C%20true%29%3B%0A%09%09%09%7D%0A%09%09%09if%20%28%24._zMoveGMI%29%0A%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-moveButtonsGroup%22%29%2C%201%2C%20suffixForClone%2C%20false%29%3B%0A%09%09%09if%20%28%24._zAddGMI%29%0A%09%09%09%09%24._ANI%28aMPop%2C%20%24.%24%28iID%20+%20%22-addInstallButtonsGroup%22%29%2C%201%2C%20suffixForClone%2C%20false%29%3B%0A%09%09%7D%29%3B%0A%0A%09%09if%20%28%24._zMoveGMIInTC%20%7C%7C%0A%09%09%09%24._zAddGMIInTC%20%7C%7C%0A%09%09%09%24._zXMLExpImpGMIInTC%29%20%7B%0A%09%09%09let%20tBarCtxs%20%3D%20window%5B%24._UID%5D%5B%22TCIDs%22%5D%3B%0A%09%09%09for%20%28let%20i%20%3D%20tBarCtxs.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%29%20%7B%0A%09%09%09%09let%20tBarCtx%20%3D%20%24.%24%28tBarCtxs%5Bi%5D%29%3B%0A%09%09%09%09tBarCtx%20%26%26%20%24._ANI%28tBarCtx%2C%20%24.%24%28%24._UID%20+%20%22-separatorForMenuGroups%22%29%2C%201%2C%20null%2C%20false%2C%20true%29%3B%0A%09%09%09%09if%20%28%24._zXMLExpImpGMIInTC%29%0A%09%09%09%09%09tBarCtx%20%26%26%20%24._ANI%28tBarCtx%2C%20%24.%24%28iID%20+%20%22-exportImportButtons%22%29%2C%201%2C%20%22-toolbar-context%22%2C%20false%29%3B%0A%09%09%09%09if%20%28%24._zMoveGMIInTC%29%0A%09%09%09%09%09tBarCtx%20%26%26%20%24._ANI%28tBarCtx%2C%20%24.%24%28iID%20+%20%22-moveButtonsGroup%22%29%2C%201%2C%20%22-toolbar-context%22%2C%20false%29%3B%0A%09%09%09%09if%20%28%24._zAddGMIInTC%29%0A%09%09%09%09%09tBarCtx%20%26%26%20%24._ANI%28tBarCtx%2C%20%24.%24%28iID%20+%20%22-addInstallButtonsGroup%22%29%2C%201%2C%20%22-toolbar-context%22%2C%20false%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09//%20setTimeout%28function%28%29%20%7B%0A%09%09//%20%09let%20elsToIntegrate%20%3D%20%24._zElementsForIntegration.split%28%22%2C%22%29%3B%0A%09%09//%20%09if%20%28elsToIntegrate.length%20%3C%201%29%0A%09%09//%20%09%09return%20true%3B%0A%09%09//%20%09let%20createGroup%20%3D%20function%28aArr%29%20%7B%0A%09%09//%20%09%09let%20mG%20%3D%20%24.%24CNS%28%22menugroup%22%2C%20%7B%0A%09%09//%20%09%09%09_placed%3A%20%24._UID%20+%20%22placed-items%22%2C%0A%09%09//%20%09%09%09id%3A%20%24._UID%20+%20%22cbcme_integration%22%20+%20parseInt%28Math.random%28%29%20*%2010000%2C%2010%29%0A%09%09//%20%09%09%7D%29%3B%0A%09%09//%20%09%09for%20%28let%20i%20%3D%200%3B%20i%20%3C%20aArr.length%3B%20i++%29%20%7B%0A%09%09//%20%09%09%09aArr%5Bi%5D.removeAttribute%28%22cbcme_integration%22%29%3B%0A%09%09//%20%09%09%09aArr%5Bi%5D.removeAttribute%28%22id%22%29%3B%0A%09%09//%20%09%09%09mG.appendChild%28aArr%5Bi%5D%29%3B%0A%09%09//%20%09%09%7D%0A%09%09//%20%09%09return%20mG%3B%0A%09%09//%20%09%7D%3B%0A%09%09//%20%09Array.prototype.slice.call%28ctxs%29.forEach%28function%28aMPop%2C%20aI%29%20%7B%0A%09%09//%20%09%09let%20suffix%20%3D%20%28aI%20%3D%3D%3D%200%29%20%3F%20%22%22%20%3A%20%22-sub%22%3B%0A%09%09//%20%09%09let%20groupEls%20%3D%20%5B%5D%3B%0A%09%09//%20%09%09Array.prototype.slice.call%28elsToIntegrate%29.forEach%28function%28aAttrVal%29%20%7B%0A%09%09//%20%09%09%09Array.prototype.slice.call%28document.getElementsByAttribute%28%22cbcme_integration%22%2C%20aAttrVal%29%29.forEach%28function%28aEl%29%20%7B%0A%09%09//%20%09%09%09%09aEl%20%26%26%20groupEls.push%28aEl.cloneNode%28true%29%29%3B%0A%09%09//%20%09%09%09%7D%29%3B%0A%09%09//%20%09%09%7D%29%3B%0A%09%09//%20%09%09aMPop.insertBefore%28createGroup%28groupEls%29%2C%20%24.%24%28%24.s3%20+%20suffix%29%29%3B%0A%09%09//%20%09%7D%29%3B%0A%09%09//%20%7D%2C%20aDelayedInsertion%20%3F%205000%20%3A%2010%29%3B%0A%09%7D%2C%0A%0A%09ScanForElementsToIntegrate%3A%20function%28%29%20%7B%0A%09%09let%20temp%20%3D%20%5B%5D%3B%0A%09%09let%20allBaseEls%20%3D%20Array.slice%28document.getElementsByAttribute%28%22cbcme_integration%22%2C%20%22*%22%29%29%3B%0A%09%09Array.prototype.slice.call%28allBaseEls%29.forEach%28function%28aBaseEl%2C%20ai%2C%20aNN%29%20%7B%0A%09%09%09temp.push%28aBaseEl.getAttribute%28%22cbcme_integration%22%29%29%3B%0A%09%09%7D%29%3B%0A%09%09let%20attrs%20%3D%20temp.filter%28function%28v%2C%20i%2C%20a%29%20%7B%20//%20Remove%20duplicated%0A%09%09%09return%20a.indexOf%28v%29%20%3D%3D%3D%20i%3B%0A%09%09%7D%29%3B%0A%09%09if%20%28%21attrs%20%7C%7C%20attrs.length%20%3D%3D%3D%200%29%0A%09%09%09Services.prompt.alert%28null%2C%20self.name%2C%0A%09%09%09%09%22No%20element%20has%20been%20found%20that%20could%20be%20integrated%20into%20CB%20context%20menu.%22%29%3B%0A%09%09else%0A%09%09%09%24.sPref%28%22zElementsForIntegration%22%2C%20attrs.join%28%22%2C%22%29%29%3B%0A%09%7D%2C%0A%0A%09_ANI%3A%20function%28aMPop%2C%20aEl%2C%20aInsertPoint%2C%20aSuffix%2C%20aAfter%2C%20aRemID%29%20%7B%20//%20Append%20New%20Items%0A%09%09let%20el%20%3D%20aEl.cloneNode%28true%29%3B%0A%09%09el.setAttribute%28%22_placed%22%2C%20%24._UID%20+%20%22placed-items%22%29%3B%0A%09%09if%20%28aRemID%29%20//%20ONLY%20FOR%20SEPARATORS%21%21%21%0A%09%09%09el.removeAttribute%28%22id%22%29%3B%0A%09%09else%0A%09%09%09el.setAttribute%28%22id%22%2C%20el.getAttribute%28%22id%22%29%20+%20aSuffix%29%3B%0A%09%09if%20%28el.hasChildNodes%28%29%29%20%7B%0A%09%09%09for%20%28let%20i%20%3D%20el.childNodes.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%29%20%7B%0A%09%09%09%09cEl%20%3D%20el.childNodes%5Bi%5D%3B%0A%09%09%09%09cEl.hasAttribute%28%22id%22%29%20%26%26%20cEl.setAttribute%28%22id%22%2C%20cEl.getAttribute%28%22id%22%29%20+%20aSuffix%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09switch%20%28aInsertPoint%29%20%7B%0A%09%09%09case%200%3A%20//%20Insert%20first%20or%20after%20first%0A%09%09%09%09aMPop.insertBefore%28el%2C%20%28aAfter%20%3F%0A%09%09%09%09%09aMPop.firstChild.nextSibling%20%3A%0A%09%09%09%09%09aMPop.firstChild%29%29%3B%0A%09%09%09%09break%3B%0A%09%09%09case%201%3A%20//%20Insert%20last%0A%09%09%09%09aMPop.appendChild%28el%29%3B%0A%09%09%09%09break%3B%0A%09%09%09default%3A%20//%20Insert%20after%20or%20before%20specific%20element%0A%09%09%09%09try%20%7B%0A%09%09%09%09%09aMPop.insertBefore%28el%2C%20%28aAfter%20%3F%0A%09%09%09%09%09%09%24.%24%28aInsertPoint%29.nextSibling%20%3A%0A%09%09%09%09%09%09%24.%24%28aInsertPoint%29%29%29%3B%0A%09%09%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09%09%09aMPop.appendChild%28el%29%3B%0A%09%09%09%09%09LOG%28aErr%29%3B%0A%09%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09CreateOptionsMenu%3A%20function%28%29%20%7B%0A%09%09var%20popSet%20%3D%20%24.%24%28%22mainPopupSet%22%29%3B%0A%09%09var%20m%20%3D%20%24.%24%28%24._UID%20+%20%22_optionsPopup%22%29%3B%0A%09%09if%20%28%21%21popSet%20%26%26%20%21m%29%20%7B%0A%09%09%09popSet.appendChild%28%24.%24CNS%28%22menupopup%22%2C%20%7B%0A%09%09%09%09id%3A%20%24._UID%20+%20%22_optionsPopup%22%2C%0A%09%09%09%09onpopupshowing%3A%20%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.CBCME.PopulateOptionsPopup%28this%29%22%2C%0A%09%09%09%09onpopuphiding%3A%20%22event.stopPropagation%28%29%3Bthis.textContent%3D%27%27%3B%22%2C%0A%09%09%09%09menugenerated%3A%20true%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09PopulateOptionsPopup%3A%20function%28aNode%29%20%7B%0A%09%09let%20indvItems%20%3D%20aNode.appendChild%28%24.%24CNS%28%22menu%22%2C%20%7B%0A%09%09%09label%3A%20%22Individual%20menu%20items%22%2C%0A%09%09%7D%29%29.appendChild%28%24.%24CNS%28%22menupopup%22%2C%20%7B%0A%09%09%09onpopupshowing%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09onpopuphiding%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09menugenerated%3A%20true%2C%0A%09%09%7D%29%29%3B%0A%09%09indvItems.appendChild%28%24.%24CNS%28%22dialogheader%22%2C%20%7B%0A%09%09%09title%3A%20%22Enable/Disable%20individual%20menu%20items%22%2C%0A%09%09%09tooltiptext%3A%20%22Enable/Disable%20menu%20items%20individually%20to%20be%20shown/hidden%20from%20the%20%22%20+%0A%09%09%09%09%22Custom%20Buttons%20context%20menu.%5Cn%5CnNote%3A%20You%20can%20only%20show/hide%20individual%20items%20if%22%20+%0A%09%09%09%09%22%20the%20group%20to%20which%20the%20item%20belongs%20is%20disabled.%22%2C%0A%09%09%09style%3A%20%22margin%3A%205px%200%205px%200%3Bpadding%3A%202px%200%202px%205px%3Bborder%3Anone%3Bfont-size%3Asmaller%3B%22%2C%0A%09%09%7D%29%29%3B%0A%09%09%5B%0A%09%09%09%5B%22zInfoHeader%22%2C%0A%09%09%09%09%22Show%20info%20header%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%5C%22Info%20header%5C%22%20at%20the%20top%20of%20the%20CB%20context%20menu.%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zEditInTabMI%22%2C%0A%09%09%09%09%22Show%20%27Edit%20in%20tab...%27%20in%20CB%20context%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Edit%20button%20in%20tab...%27%20menu%20item%20in%20CB%20context%20menu.%22%2C%0A%09%09%09%09%22zEditGMI%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zToggleInitMI%22%2C%0A%09%09%09%09%22Show%20%27Toggle%20initialization%27%20in%20CB%20context%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Toggle%20initialization%27%20menu%20item%20in%20CB%20context%20menu.%22%2C%0A%09%09%09%09%22zEditGMI%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zRemoveToPaletteMI%22%2C%0A%09%09%09%09%22Show%20%27Remove%20to%20palette...%27%20in%20CB%20context%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Remove%20to%20palette...%27%20menu%20item%20in%20CB%20context%20menu.%22%2C%0A%09%09%09%09%22zDeleteGMI%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zCopyAsBBCodeMI%22%2C%0A%09%09%09%09%22Show%20%27Copy%20button%20as%20BBCode%27%20in%20CB%20context%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Copy%20button%20as%20BBCode%27%20menu%20item%20in%20CB%20context%20menu.%22%2C%0A%09%09%09%09%22zCopyGMI%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zCopyAsHTMLMI%22%2C%0A%09%09%09%09%22Show%20%27Copy%20button%20as%20HTML%27%20in%20CB%20context%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Copy%20button%20as%20HTML%27%20menu%20item%20in%20CB%20context%20menu.%22%2C%0A%09%09%09%09%22zCopyGMI%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zCopyImageMI%22%2C%0A%09%09%09%09%22Show%20%27Copy%20button%20image%27%20in%20CB%20context%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Copy%20button%20image%27%20menu%20item%20in%20CB%20context%20menu.%22%2C%0A%09%09%09%09%22zCopyGMI%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zXMLExportMI%22%2C%0A%09%09%09%09%22Show%20%27Export%20button%20as%20XML%27%20in%20CB%20context%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Export%20button%20as%20XML%27%20menu%20item%20in%20CB%20context%20menu.%22%2C%0A%09%09%09%09%22zXMLExpImpGMI%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zXMLImportLeftMI%22%2C%0A%09%09%09%09%22Show%20%27Import%20XML%20button%20to%20left%27%20in%20CB%20context%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Import%20XML%20button%20to%20left%27%20menu%20item%20in%20CB%20context%20menu.%22%2C%0A%09%09%09%09%22zXMLExpImpGMI%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zXMLImportRightMI%22%2C%0A%09%09%09%09%22Show%20%27Import%20XML%20button%20to%20right%27%20in%20CB%20context%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Import%20XML%20button%20to%20right%27%20menu%20item%20in%20CB%20context%20menu.%22%2C%0A%09%09%09%09%22zXMLExpImpGMI%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zOverlayImportLeftMI%22%2C%0A%09%09%09%09%22Show%20%27Import%20From%20Overlay%20to%20left%27%20in%20CB%20context%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Import%20From%20Overlay%20to%20left%27%20menu%20item%20in%20CB%20context%20menu.%22%2C%0A%09%09%09%09%22zXMLExpImpGMI%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zOverlayImportRightMI%22%2C%0A%09%09%09%09%22Show%20%27Import%20From%20Overlay%20to%20right%27%20in%20CB%20context%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Import%20From%20Overlay%20to%20right%27%20menu%20item%20in%20CB%20context%20menu.%22%2C%0A%09%09%09%09%22zXMLExpImpGMI%22%0A%09%09%09%5D%0A%09%09%5D.forEach%28function%28aP%29%20%7B%0A%09%09%09indvItems.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20aP%5B1%5D%2C%0A%09%09%09%09type%3A%20%22checkbox%22%2C%0A%09%09%09%09closemenu%3A%20%22none%22%2C%0A%09%09%09%09hidden%3A%20%28aP%5B0%5D%20%3D%3D%3D%20%22zEditInTabMI%22%20%26%26%20%28typeof%20gBrowser%20%21%3D%3D%20%22object%22%29%29%20%7C%7C%0A%09%09%09%09%09%28aP%5B3%5D%20%26%26%20%24%5B%22_%22%20+%20aP%5B3%5D%5D%29%2C%0A%09%09%09%09tooltiptext%3A%20aP%5B2%5D%2C%0A%09%09%09%09checked%3A%20%24%5B%22_%22%20+%20aP%5B0%5D%5D%2C%0A%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.CBCME.sPref%28%27%22%20+%20aP%5B0%5D%20+%20%22%27%2C%20%21document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.CBCME.gPref%28%27%22%20+%20aP%5B0%5D%20+%20%22%27%29%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%29%3B%0A%09%09let%20groupOpts%20%3D%20aNode.appendChild%28%24.%24CNS%28%22menu%22%2C%20%7B%0A%09%09%09label%3A%20%22Groups%20of%20menu%20items%22%2C%0A%09%09%7D%29%29.appendChild%28%24.%24CNS%28%22menupopup%22%2C%20%7B%0A%09%09%09onpopupshowing%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09onpopuphiding%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09menugenerated%3A%20true%2C%0A%09%09%7D%29%29%3B%0A%09%09groupOpts.appendChild%28%24.%24CNS%28%22dialogheader%22%2C%20%7B%0A%09%09%09title%3A%20%22Custom%20Buttons%20context%20menu%22%2C%0A%09%09%09tooltiptext%3A%20%22Groups%20of%20menus%20for%20the%20Custom%20Buttons%20context%20menu.%22%2C%0A%09%09%09style%3A%20%22margin%3A%205px%200%205px%200%3Bpadding%3A%202px%200%202px%205px%3Bborder%3Anone%3Bfont-size%3Asmaller%3B%22%2C%0A%09%09%7D%29%29%3B%0A%09%09%5B%0A%09%09%09%5B%22zEditGMI%22%2C%0A%09%09%09%09%22Show%20%27Edit%20buttons%27%20group%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Edit%20buttons%27%20menu%20group%20in%20CB%20context%20menu.%5CnItems%20in%20this%20group%3A%5Cn%22%20+%0A%09%09%09%09%22*%20Edit%20button...%5Cn*%20Edit%20in%20tab...%5Cn*%20Toggle%20initialization%22%2C%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zDeleteGMI%22%2C%0A%09%09%09%09%22Show%20%27Delete%20buttons%27%20group%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Delete%20buttons%27%20menu%20group%20in%20CB%20context%20menu.%5CnItems%20in%20this%20group%3A%5Cn%22%20+%0A%09%09%09%09%22*%20Delete%20button%5Cn*%20Remove%20to%20palette%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zCopyGMI%22%2C%0A%09%09%09%09%22Show%20%27Copy%20buttons%27%20group%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Edit%20buttons%27%20menu%20group%20in%20CB%20context%20menu.%5CnItems%20in%20this%20group%3A%5Cn%22%20+%0A%09%09%09%09%22*%20Copy%20to%20clipboard%5Cn*%20Copy%20button%20as%20BBCode%5Cn*%20Copy%20button%20as%20HTML%5Cn*%20Copy%20button%20image%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zXMLExpImpGMI%22%2C%0A%09%09%09%09%22Show%20%27Export/Import%20buttons%27%20group%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Export/Import%20buttons%27%20menu%20group%20in%20CB%20context%20menu.%5CnItems%20in%20this%20group%3A%5Cn%22%20+%0A%09%09%09%09%22*%20Export%20button%20as%20XML%5Cn*%20Import%20XML%20button%20to%20left%5Cn*%20Import%20XML%20button%20to%20right%5Cn%22%20+%0A%09%09%09%09%22*%20Import%20from%20Overlay%20to%20left%5Cn*%20Import%20from%20Overlay%20to%20right%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zOtherActionsGMI%22%2C%0A%09%09%09%09%22Show%20%27Other%20actions%27%20group%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Other%20actions%27%20menu%20group%20in%20CB%20context%20menu.%5CnItems%20in%20this%20group%3A%5Cn%22%20+%0A%09%09%09%09%22*%20Clone%20button%5Cn*%20Bookmark%20Button%5Cn*%20Button%20Help%5Cn*%20Update%20Button%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zMoveGMI%22%2C%0A%09%09%09%09%22Show%20%27Move%20buttons%27%20group%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Move%20buttons%27%20menu%20group%20in%20CB%20context%20menu.%5CnItems%20in%20this%20group%3A%5Cn%22%20+%0A%09%09%09%09%22*%20Move%20to%20the%20beginning%5Cn*%20Move%20to%20the%20left%5Cn*%20Select%20to%20move%5Cn*%20Move%20to%20right%5Cn%22%20+%0A%09%09%09%09%22*%20Move%20to%20the%20end%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zAddGMI%22%2C%0A%09%09%09%09%22Show%20%27Add/Install%20buttons%27%20group%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Add/Install%20buttons%27%20menu%20group%20in%20CB%20context%20menu.%5CnItems%20in%20this%20group%3A%5Cn%22%20+%0A%09%09%09%09%22*%20Install%20to%20the%20left%5Cn*%20Add%20to%20the%20left%5Cn*%20Add%20to%20palette%20%28Default%20behavior%29%5Cn%22%20+%0A%09%09%09%09%22*%20Add%20to%20the%20right%5Cn*%20Install%20to%20the%20right%22%0A%09%09%09%5D%0A%09%09%5D.forEach%28function%28aP%29%20%7B%0A%09%09%09groupOpts.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20aP%5B1%5D%2C%0A%09%09%09%09type%3A%20%22checkbox%22%2C%0A%09%09%09%09closemenu%3A%20%22none%22%2C%0A%09%09%09%09tooltiptext%3A%20aP%5B2%5D%2C%0A%09%09%09%09checked%3A%20%24%5B%22_%22%20+%20aP%5B0%5D%5D%2C%0A%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.CBCME.sPref%28%27%22%20+%20aP%5B0%5D%20+%20%22%27%2C%20%21document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.CBCME.gPref%28%27%22%20+%20aP%5B0%5D%20+%20%22%27%29%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%29%3B%0A%09%09groupOpts.appendChild%28%24.%24CNS%28%22dialogheader%22%2C%20%7B%0A%09%09%09title%3A%20%22Toolbars%20context%20menu%22%2C%0A%09%09%09tooltiptext%3A%20%22Groups%20of%20menus%20for%20the%20toolbars%20context%20menu.%22%2C%0A%09%09%09style%3A%20%22margin%3A%205px%200%205px%200%3Bpadding%3A%202px%200%202px%205px%3Bborder%3Anone%3Bfont-size%3Asmaller%3B%22%2C%0A%09%09%7D%29%29%3B%0A%09%09%5B%0A%09%09%09%5B%22zXMLExpImpGMIInTC%22%2C%0A%09%09%09%09%22Show%20%27Export/Import%20buttons%27%20group%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Export/Import%20buttons%27%20menu%20group%20in%20toolbars%20context%20menu.%5CnItems%20in%20this%20group%3A%5Cn%22%20+%0A%09%09%09%09%22*%20Export%20button%20as%20XML%5Cn*%20Import%20XML%20button%20to%20left%5Cn*%20Import%20XML%20button%20to%20right%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zMoveGMIInTC%22%2C%0A%09%09%09%09%22Show%20%27Move%20buttons%27%20group%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Move%20buttons%27%20menu%20group%20in%20toolbars%20context%20menu.%5CnItems%20in%20this%20group%3A%5Cn%22%20+%0A%09%09%09%09%22*%20Move%20to%20the%20beginning%5Cn*%20Move%20to%20the%20left%5Cn*%20Select%20to%20move%5Cn*%20Move%20to%20right%5Cn%22%20+%0A%09%09%09%09%22*%20Move%20to%20the%20end%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zAddGMIInTC%22%2C%0A%09%09%09%09%22Show%20%27Add/Install%20buttons%27%20group%22%2C%0A%09%09%09%09%22Show/Hide%20the%20%27Add/Install%20buttons%27%20menu%20group%20in%20toolbars%20context%20menu.%5CnItems%20in%20this%20group%3A%5Cn%22%20+%0A%09%09%09%09%22*%20Install%20to%20the%20left%5Cn*%20Add%20to%20the%20left%5Cn*%20Add%20to%20palette%20%28Default%20behavior%29%5Cn%22%20+%0A%09%09%09%09%22*%20Add%20to%20the%20right%5Cn*%20Install%20to%20the%20right%22%0A%09%09%09%5D%2C%0A%09%09%5D.forEach%28function%28aP%29%20%7B%0A%09%09%09groupOpts.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20aP%5B1%5D%2C%0A%09%09%09%09type%3A%20%22checkbox%22%2C%0A%09%09%09%09closemenu%3A%20%22none%22%2C%0A%09%09%09%09tooltiptext%3A%20aP%5B2%5D%2C%0A%09%09%09%09checked%3A%20%24%5B%22_%22%20+%20aP%5B0%5D%5D%2C%0A%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.CBCME.sPref%28%27%22%20+%20aP%5B0%5D%20+%20%22%27%2C%20%21document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.CBCME.gPref%28%27%22%20+%20aP%5B0%5D%20+%20%22%27%29%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%29%3B%0A%0A%09%09let%20genOptMenu%20%3D%20aNode.appendChild%28%24.%24CNS%28%22menu%22%2C%20%7B%0A%09%09%09label%3A%20%22General%20options%22%2C%0A%09%09%7D%29%29.appendChild%28%24.%24CNS%28%22menupopup%22%2C%20%7B%0A%09%09%09onpopupshowing%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09onpopuphiding%3A%20%22event.stopPropagation%28%29%3B%22%2C%0A%09%09%09menugenerated%3A%20true%2C%0A%09%09%7D%29%29%3B%0A%09%09%5B%0A%09%09%09%5B%22zDragAndDrop%22%2C%0A%09%09%09%09%22Drag%26Drop%20capabilities%22%2C%0A%09%09%09%09%22If%20enabled%2C%20Custom%20Buttons%20buttons%20can%20be%20installed%20by%20simply%20drag%20and%20dropping%20a%20%22%20+%0A%09%09%09%09%22Custom%20Buttons%20URL%20or%20a%20CB%20XML%20file%20into%20any%20toolbar.%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zDragAndDropControlKey%22%2C%0A%09%09%09%09%22Drag%26Drop%20-%20Require%20Control%20key%22%2C%0A%09%09%09%09%22If%20enabled%2C%20the%20Control%20key%20must%20be%20pressed%20for%20the%20drag%20operation%20to%20attempt%20to%22%20+%0A%09%09%09%09%22%20install%20a%20button.%5Cn%5CnNote%3A%20It%27s%20recommended%20to%20at%20least%20enable%20one%20modifier%20key.%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zDragAndDropAltKey%22%2C%0A%09%09%09%09%22Drag%26Drop%20-%20Require%20Alt%20key%22%2C%0A%09%09%09%09%22If%20enabled%2C%20the%20Alt%20key%20must%20be%20pressed%20for%20the%20drag%20operation%20to%20attempt%20to%22%20+%0A%09%09%09%09%22%20install%20a%20button.%5Cn%5CnNote%3A%20It%27s%20recommended%20to%20at%20least%20enable%20one%20modifier%20key.%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zHideCustomizeFromCBContext%22%2C%0A%09%09%09%09%22Hide%20%27Customize...%27%20menu%20item%20from%20CB%20context%22%2C%0A%09%09%09%09%22Hide%20%27Customize...%27%20menu%20item%20from%20CB%20context%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zInvertIconsColor%22%2C%0A%09%09%09%09%22Invert%20dark%20icons%20colours%22%2C%0A%09%09%09%09%22Most%20of%20the%20icons%20used%20by%20this%20button%20are%20dark/black.%20Whit%20this%20option%20enabled%2C%20a%20%22%20+%0A%09%09%09%09%22white%20filter%20is%20applied%20to%20those%20icons%20to%20make%20them%20visible%20on%20dark%20themes.%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zShowIDOnExportedButtons%22%2C%0A%09%09%09%09%22Show%20ID%20on%20exported%20buttons%22%2C%0A%09%09%09%09%22If%20enabled%2C%20it%20will%20add%20the%20number%20ID%20to%20the%20XML%20file%20name%20of%20exported%20buttons.%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zShowMoveAlert%22%2C%0A%09%09%09%09%22Show%20move%20alert%22%2C%0A%09%09%09%09%22If%20enabled%2C%20a%20dialog%20with%20instrucctions%20will%20appear%20every%20time%20a%20button%20is%20%22%20+%0A%09%09%09%09%22selected%20to%20be%20moved.%22%0A%09%09%09%5D%2C%0A%09%09%09%5B%22zRemoveToPaletteShowAlert%22%2C%0A%09%09%09%09%22Show%20%27Remove%20to%20palette%27%20alert%22%2C%0A%09%09%09%09%22If%20enabled%2C%20a%20dialog%20will%20appear%20every%20time%20a%20button%20is%20%22%20+%0A%09%09%09%09%22removed%20to%20the%20application%20palette.%22%0A%09%09%09%5D%0A%09%09%5D.forEach%28function%28aP%29%20%7B%0A%09%09%09genOptMenu.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09%09label%3A%20aP%5B1%5D%2C%0A%09%09%09%09type%3A%20%22checkbox%22%2C%0A%09%09%09%09closemenu%3A%20%22none%22%2C%0A%09%09%09%09tooltiptext%3A%20aP%5B2%5D%2C%0A%09%09%09%09checked%3A%20%24%5B%22_%22%20+%20aP%5B0%5D%5D%2C%0A%09%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.CBCME.sPref%28%27%22%20+%20aP%5B0%5D%20+%20%22%27%2C%20%21document.getElementById%28%27%22%20+%20self.id%20+%0A%09%09%09%09%09%22%27%29.CBCME.gPref%28%27%22%20+%20aP%5B0%5D%20+%20%22%27%29%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%7D%29%3B%0A%09%09genOptMenu.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09label%3A%20%22Set%20custom%20export%20path%22%2C%0A%09%09%09tooltiptext%3A%20%22Set%20a%20custom%20path%20location%20to%20store%20exported%20XML%20buttons.%22%2C%0A%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29.%22%20+%0A%09%09%09%09%22CBCME.SetCustomPath%28%29%3B%22%2C%0A%09%09%7D%29%29%3B%0A%09%09genOptMenu.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09%09label%3A%20%22Clear%20last%20used%20path%22%2C%0A%09%09%09tooltiptext%3A%20%22Every%20time%20any%20import%20option%20is%20used%2C%20the%20last%20opened%20location%20is%20stored.%20%22%20+%0A%09%09%09%09%22This%20option%20clears%20that%20last%20used%20folder%20and%20resets%20it%20to%20the%20default%20export%20location.%22%2C%0A%09%09%09oncommand%3A%20%22event.stopPropagation%28%29%3BServices.prefs.clearUserPref%28%27%22%20+%20%24.Branch%20+%0A%09%09%09%09%22zLastUsedLocation%27%29%3B%22%2C%0A%09%09%7D%29%29%3B%0A%09%09//%20genOptMenu.appendChild%28%24.%24CNS%28%22dialogheader%22%2C%20%7B%0A%09%09//%20%09title%3A%20%22Buttons%20integration%22%2C%0A%09%09//%20%09tooltiptext%3A%20%22CB%20Context%20Menu%20Extended%20can%20add%20to%20the%20CB%20context%20items%20from%20other%20buttons.%22%20+%0A%09%09//%20%09%09%22%22%2C%0A%09%09//%20%09style%3A%20%22margin%3A%205px%200%205px%200%3Bpadding%3A%202px%200%202px%205px%3Bborder%3Anone%3Bfont-size%3Asmaller%3B%22%2C%0A%09%09//%20%7D%29%29%3B%0A%09%09//%20genOptMenu.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09//%20%09label%3A%20%22Scan%20for%20elements%20to%20integrate%22%2C%0A%09%09//%20%09tooltiptext%3A%20%22Open%20the%20folder%20where%20all%20backup%20files%20are%20stored.%22%2C%0A%09%09//%20%09oncommand%3A%20%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27%22%20+%20self.id%20+%0A%09%09//%20%09%09%22%27%29.CBCME.ScanForElementsToIntegrate%28%29%3B%22%2C%0A%09%09//%20%7D%29%29%3B%0A%09%09//%20genOptMenu.appendChild%28%24.%24CNS%28%22menuitem%22%2C%20%7B%0A%09%09//%20%09label%3A%20%22Edit%20integrated%20items%22%2C%0A%09%09//%20%09tooltiptext%3A%20%22Open%20the%20folder%20where%20all%20backup%20files%20are%20stored.%22%2C%0A%09%09//%20%09oncommand%3A%20%22event.stopPropagation%28%29%3Bdocument.getElementById%28%27%22%20+%20self.id%20+%0A%09%09//%20%09%09%22%27%29.CBCME.ScanForElementsToIntegrate%28%29%3B%22%2C%0A%09%09//%20%7D%29%29%3B%0A%09%7D%2C%0A%0A%09SetCustomPath%3A%20function%28%29%20%7B%0A%09%09let%20msg%20%3D%20%22Full%20path%20to%20a%20custom%20location%20to%20store%20exported%20XML%20buttons.%5Cn%22%20+%0A%09%09%09%22Example%20Windows%3A%20C%3A%5C%5CUsers%5C%5CUserName%5C%5CDocuments%5Cn%22%20+%0A%09%09%09%22Example%20Linux%3A%20/home/username/Documents%22%3B%0A%09%09let%20value%20%3D%20%24.promptme%28msg%2C%20%24._zImpExpCustomLocation%29%3B%0A%09%09if%20%28value%29%0A%09%09%09%24.sPref%28%22zImpExpCustomLocation%22%2C%20value%29%3B%0A%09%7D%2C%0A%0A%09HandlePrefListener%3A%20function%28aRem%29%20%7B%0A%09%09var%20prefs%20%3D%20%24.DefPrefs%3B%0A%09%09for%20%28let%20key%20in%20prefs%29%20%7B%0A%09%09%09let%20pref%20%3D%20%24.Branch%20+%20key%3B%0A%09%09%09if%20%28prefs.hasOwnProperty%28key%29%29%20%7B%0A%09%09%09%09if%20%28aRem%29%0A%09%09%09%09%09Services.prefs.removeObserver%28pref%2C%20%24.PrefListener%2C%20false%29%3B%0A%09%09%09%09else%0A%09%09%09%09%09Services.prefs.addObserver%28pref%2C%20%24.PrefListener%2C%20false%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09PrefListener%3A%20%7B%0A%09%09observe%3A%20function%28aSubject%2C%20aTopic%2C%20aPStr%29%20%7B%0A%09%09%09if%20%28aTopic%20%3D%3D%3D%20%22nsPref%3Achanged%22%29%20%7B%0A%09%09%09%09let%20prefName%20%3D%20aPStr.slice%28%24.Branch.length%29%3B%0A%09%09%09%09%24%5B%22_%22%20+%20prefName%5D%20%3D%20%24.gPref%28prefName%29%3B%0A%09%09%09%09switch%20%28prefName%29%20%7B%0A%09%09%09%09%09case%20%22zInvertIconsColor%22%3A%0A%09%09%09%09%09%09%24.HandleInversion%28%29%3B%0A%09%09%09%09%09case%20%22zInfoHeader%22%3A%0A%09%09%09%09%09case%20%22zMoveGMI%22%3A%0A%09%09%09%09%09case%20%22zMoveGMIInTC%22%3A%0A%09%09%09%09%09case%20%22zEditInTabMI%22%3A%0A%09%09%09%09%09case%20%22zRemoveToPaletteMI%22%3A%0A%09%09%09%09%09case%20%22zToggleInitMI%22%3A%0A%09%09%09%09%09case%20%22zEditGMI%22%3A%0A%09%09%09%09%09case%20%22zDeleteGMI%22%3A%0A%09%09%09%09%09case%20%22zCopyAsBBCodeMI%22%3A%0A%09%09%09%09%09case%20%22zCopyAsHTMLMI%22%3A%0A%09%09%09%09%09case%20%22zCopyImageMI%22%3A%0A%09%09%09%09%09case%20%22zCopyGMI%22%3A%0A%09%09%09%09%09case%20%22zAddGMI%22%3A%0A%09%09%09%09%09case%20%22zAddGMIInTC%22%3A%0A%09%09%09%09%09case%20%22zOtherActionsGMI%22%3A%0A%09%09%09%09%09case%20%22zXMLExportMI%22%3A%0A%09%09%09%09%09case%20%22zXMLImportLeftMI%22%3A%0A%09%09%09%09%09case%20%22zXMLImportRightMI%22%3A%0A%09%09%09%09%09case%20%22zOverlayImportLeftMI%22%3A%0A%09%09%09%09%09case%20%22zOverlayImportRightMI%22%3A%0A%09%09%09%09%09case%20%22zXMLExpImpGMI%22%3A%0A%09%09%09%09%09case%20%22zXMLExpImpGMIInTC%22%3A%0A%09%09%09%09%09case%20%22zElementsForIntegration%22%3A%0A%09%09%09%09%09%09%24.HandleNewItems%28%29%3B%0A%09%09%09%09%09%09if%20%28prefName%20%3D%3D%3D%20%22zEditGMI%22%20%7C%7C%0A%09%09%09%09%09%09%09prefName%20%3D%3D%3D%20%22zDeleteGMI%22%20%7C%7C%0A%09%09%09%09%09%09%09prefName%20%3D%3D%3D%20%22zCopyGMI%22%20%7C%7C%0A%09%09%09%09%09%09%09prefName%20%3D%3D%3D%20%22zXMLExpImpGMI%22%29%20%7B%0A%09%09%09%09%09%09%09let%20optM%20%3D%20%24.%24%28%24._UID%20+%20%22_optionsPopup%22%29%3B%0A%09%09%09%09%09%09%09optM.textContent%20%3D%20%22%22%3B%0A%09%09%09%09%09%09%09%24.PopulateOptionsPopup%28optM%29%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20%28%21%24._zMoveGMIInTC%20%26%26%0A%09%09%09%09%09%21%24._zAddGMIInTC%20%26%26%0A%09%09%09%09%09%21%24._zXMLExpImpGMIInTC%29%20%7B%0A%09%09%09%09%09%24.HandleTBContext%28true%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09HandleNewItems%3A%20function%28%29%20%7B%0A%09%09clearTimeout%28%24._removeTimer%29%3B%0A%09%09%24._removeTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09%24.RemoveNewItems%28%29%3B%0A%09%09%09%24._removeTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%09%09%09%09%24.InsertNewItems%28false%29%3B%0A%09%09%09%7D%2C%20250%29%3B%0A%09%09%7D%2C%20250%29%3B%0A%09%7D%2C%0A%0A%09CSSLoader%3A%20function%28%29%20%7B%0A%09%09let%20css%3B%0A%09%09try%20%7B%0A%09%09%09css%20%3D%20%22@namespace%20url%28%22%20+%20xulns%20+%20%22%29%3B%22%20+%20%24.getHelp%28%22StyleSheet%22%29%0A%09%09%09%09.replace%28/_B_A_S_E_I_D_/g%2C%20%24._ID%20+%20%24._UID%29%0A%09%09%09%09.replace%28/_U_I_D_/g%2C%20%24._UID%29%0A%09%09%09%09.replace%28/%5Cn/g%2C%20%22%22%29%3B%0A%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09css%20%3D%20false%3B%0A%09%09%7D%0A%09%09if%20%28%21css%29%0A%09%09%09return%3B%0A%0A%09%09if%20%28%21window%5B%24._UID%5D%5B%22StyleSheet%22%5D%29%20%7B%0A%09%09%09window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%3D%20css%3B%0A%09%09%09%24.styleSheet%28css%29%3B%0A%09%09%7D%20else%20if%20%28window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%26%26%20window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%21%3D%3D%20css%29%20%7B%0A%09%09%09%24.styleSheet%28window%5B%24._UID%5D%5B%22StyleSheet%22%5D%2C%20true%29%3B%0A%09%09%09window%5B%24._UID%5D%5B%22StyleSheet%22%5D%20%3D%20css%3B%0A%09%09%09%24.styleSheet%28css%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09%24CNS%3A%20function%28aElName%2C%20aAttrs%2C%20aNS%29%20%7B%0A%09%09var%20el%20%3D%20document.createElementNS%28%28aNS%20%3F%20aNS%20%3A%20xulns%29%2C%20aElName%29%3B%0A%09%09if%20%28aElName%20%3D%3D%3D%20%22menuitem%22%29%0A%09%09%09el.setAttribute%28%22class%22%2C%20%22menuitem-iconic%22%29%3B%0A%09%09if%20%28aAttrs%29%20%7B%0A%09%09%09Object.keys%28aAttrs%29.forEach%28function%28n%29%20%7B%0A%09%09%09%09if%20%28aAttrs%5Bn%5D%20%21%3D%3D%20%22%22%29%0A%09%09%09%09%09el.setAttribute%28n%2C%20aAttrs%5Bn%5D%29%3B%0A%09%09%09%7D%29%3B%0A%09%09%7D%0A%09%09return%20el%3B%0A%09%7D%2C%0A%0A%09%24%3A%20function%28aID%2C%20aParent%29%20%7B%0A%09%09if%20%28%21aParent%29%0A%09%09%09return%20document.getElementById%28aID%29%3B%0A%09%09return%20aParent.getElementById%28aID%29%3B%0A%09%7D%2C%0A%0A%09parseXML%3A%20function%28aXML%29%20%7B%20//%20Return%20parsed%20XML%0A%09%09aXML%20%3D%20aXML.replace%28/%3E%5Cs+%3C/g%2C%20%22%3E%3C%22%29%3B%20//%20Linearize%20XML%0A%09%09return%20%28new%20DOMParser%29.parseFromString%28aXML%2C%20%22application/xml%22%29.documentElement%3B%0A%09%7D%2C%0A%0A%09getHelp%3A%20function%28aPlaceholder%29%20%7B%20//%20Get%20specific%20data%2C%20surrounded%20by%20%22placeholders%22%2C%20from%20the%20Help%20tab.%0A%09%09return%20document.getElementById%28self.id%29.getAttribute%28%22Help%22%29.split%28%22%3C%21--%22%20+%20aPlaceholder%20+%20%22--%3E%22%29%5B1%5D%3B%0A%09%7D%2C%0A%0A%09styleSheet%3A%20function%28aCSS%2C%20aRemFlag%29%20%7B%0A%09%09var%20sss%20%3D%20Cc%5B%22@mozilla.org/content/style-sheet-service%3B1%22%5D.getService%28Ci.nsIStyleSheetService%29%3B%0A%09%09var%20uri%20%3D%20Services.io.newURI%28%22data%3Atext/css%2C%22%20+%20encodeURIComponent%28aCSS%29%2C%20null%2C%20null%29%3B%0A%09%09if%20%28sss.sheetRegistered%28uri%2C%20sss.USER_SHEET%29%29%0A%09%09%09sss.unregisterSheet%28uri%2C%20sss.USER_SHEET%29%3B%0A%09%09if%20%28aRemFlag%29%0A%09%09%09return%3B%0A%09%09sss.loadAndRegisterSheet%28uri%2C%20sss.USER_SHEET%29%3B%0A%09%7D%2C%0A%0A%09notifyme%3A%20function%28aTitle%2C%20aMsg%2C%20aImg%2C%20aCallback%29%20%7B%20//%20Notification%20function%0A%09%09let%20origin%20%3D%20%28Services.prefs.getPrefType%28%22ui.alertNotificationOrigin%22%29%20%21%3D%3D%200%29%20%3F%0A%09%09%09Services.prefs.getIntPref%28%22ui.alertNotificationOrigin%22%29%20%3A%0A%09%09%09null%3B%0A%09%09let%20win%20%3D%20Services.ww.openWindow%28null%2C%20%22chrome%3A//global/content/alerts/alert.xul%22%2C%0A%09%09%09%22_blank%22%2C%20%22chrome%2Ctitlebar%3Dno%2Cpopup%3Dyes%22%2C%20null%29%3B%0A%09%09win.arguments%20%3D%20%5BaImg%2C%20aTitle%2C%20aMsg%2C%20%21%21aCallback%2C%20%22%22%2C%20origin%2C%20%22%22%2C%20%22%22%2C%20null%2C%20%28%21%21aCallback%20%3F%20aCallback%20%3A%20null%29%5D%3B%0A%09%7D%2C%0A%0A%09getStdImage%3A%20function%28aIId%29%20%7B%0A%09%09if%20%28/%5Ecustombuttons-stdicon-%28%5Cd%29%24/.test%28aIId%29%29%0A%09%09%09switch%20%28+RegExp.%241%29%20%7B%0A%09%09%09%09case%201%3A%0A%09%09%09%09%09return%20%22chrome%3A//custombuttons/skin/button.png%22%3B%0A%09%09%09%09case%202%3A%0A%09%09%09%09%09return%20%22chrome%3A//custombuttons/skin/stdicons/rbutton.png%22%3B%0A%09%09%09%09case%203%3A%0A%09%09%09%09%09return%20%22chrome%3A//custombuttons/skin/stdicons/gbutton.png%22%3B%0A%09%09%09%09case%204%3A%0A%09%09%09%09%09return%20%22chrome%3A//custombuttons/skin/stdicons/bbutton.png%22%3B%0A%09%09%09%7D%0A%09%09return%20aIId%20%7C%7C%20%22chrome%3A//custombuttons/skin/button.png%22%3B%0A%09%7D%2C%0A%0A%09stringToDOM%3A%20function%28aStr%29%20%7B%0A%09%09var%20parser%20%3D%20new%20DOMParser%28%29%2C%0A%09%09%09dom%20%3D%20parser.parseFromString%28aStr%2C%20%22text/xml%22%29%3B%0A%09%09if%20%28dom.documentElement.nodeName%20%3D%3D%3D%20%22parsererror%22%29%20%7B%0A%09%09%09LOG%28%22Parse%20error%21%21%21%20Not%20a%20valid%20XML%20file%28%3F%29%21%21%21%5Cn%22%20+%0A%09%09%09%09%22Source%3A%5Cn%5Cn%22%20+%20aStr%29%3B%0A%09%09%09return%20null%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20dom%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09getImg%3A%20function%28aSrc%29%20%7B%0A%09%09switch%20%28aSrc%29%20%7B%0A%09%09%09case%20%22custombuttons-stdicon-1%22%3A%0A%09%09%09%09return%20%22chrome%3A//custombuttons/skin/button.png%22%3B%0A%09%09%09case%20%22custombuttons-stdicon-2%22%3A%0A%09%09%09%09return%20%22chrome%3A//custombuttons/skin/stdicons/rbutton.png%22%3B%0A%09%09%09case%20%22custombuttons-stdicon-3%22%3A%0A%09%09%09%09return%20%22chrome%3A//custombuttons/skin/stdicons/gbutton.png%22%3B%0A%09%09%09case%20%22custombuttons-stdicon-4%22%3A%0A%09%09%09%09return%20%22chrome%3A//custombuttons/skin/stdicons/bbutton.png%22%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09saveXML%3A%20function%28aName%2C%20aId%2C%20aURI%2C%20aImg%29%20%7B%0A%09%09if%20%28%21aURI%20%7C%7C%20%21/%5Ecustombutton%5C%3A%5C/%5C//.test%28aURI%29%29%0A%09%09%09return%3B%0A%09%09var%20cbXML%20%3D%20aURI.replace%28/%5Ecustombutton%5C%3A%5C/%5C//%2C%20%22%22%29%3B%0A%09%09var%20data%20%3D%20unescape%28cbXML%29%3B%0A%09%09var%20header%20%3D%20%22%3Ccustombutton%20xmlns%3Acb%3D%5C%22http%3A//xsms.nm.ru/custombuttons/%5C%22%22%20+%0A%09%09%09%22%20xmlns%3Ahtml%3D%5C%22http%3A//www.w3.org/1999/xhtml%5C%22%3E%5Cn%22%20+%0A%09%09%09%22%3Chtml%3Ahead%3E%5Cn%22%20+%0A%09%09%09%22%09%3Chtml%3Atitle%3E%5Cx3C%21%5BCDATA%5B%22%20+%20%24.escHTML%28aName%29%20+%20%22%5D%5D%5Cx3e%3C/html%3Atitle%3E%5Cn%22%20+%0A%09%09%09%22%09%3Chtml%3Alink%20rel%3D%5C%22shortcut%20icon%5C%22%20href%3D%5C%22%22%20+%20aImg%20+%20%22%5C%22/%3E%5Cn%22%20+%0A%09%09%09%22%09%3Chtml%3Astyle%20type%3D%5C%22text/css%5C%22%3E%5Cx3C%21%5BCDATA%5B%22%20+%20%24.getHelp%28%22StyleForXMLFiles%22%29%20+%0A%09%09%09%22%5D%5D%5Cx3e%3C/html%3Astyle%3E%5Cn%22%20+%0A%09%09%09%22%3C/html%3Ahead%3E%5Cn%22%20+%0A%09%09%09%22%3Chtml%3Abody%3E%5Cn%22%20+%0A%09%09%09%22%09%3Chtml%3Adiv%20id%3D%5C%22wrapper%5C%22%3E%5Cn%22%20+%0A%09%09%09%22%09%09%3Chtml%3Adiv%20id%3D%5C%22button%5C%22%3E%5Cn%22%20+%0A%09%09%09%22%09%09%09%3Chtml%3Aa%20href%3D%5C%22%22%20+%20aURI%20+%20%22%5C%22%20rel%3D%5C%22nofollow%5C%22%20title%3D%5C%22Install%20%22%20+%0A%09%09%09%24.escHTML%28aName%29%20+%20%22%5C%22%3E%5Cn%22%20+%0A%09%09%09%22%09%09%09%09%5Cx3C%21%5BCDATA%5BInstall%20this%20button%5D%5D%5Cx3e%5Cn%22%20+%0A%09%09%09%22%09%09%09%3C/html%3Aa%3E%5Cn%22%20+%0A%09%09%09%22%09%09%3C/html%3Adiv%3E%5Cn%22%20+%0A%09%09%09%22%09%09%3Chtml%3Aa%20id%3D%5C%22about%5C%22%20href%3D%5C%22https%3A//addons.mozilla.org/addon/custom-buttons/%5C%22%3E%5Cn%22%20+%0A%09%09%09%22%09%09%09%5Cx3C%21%5BCDATA%5BAbout%20CustomButtons%5D%5D%5Cx3e%5Cn%22%20+%0A%09%09%09%22%09%09%3C/html%3Aa%3E%5Cn%22%20+%0A%09%09%09%22%09%09%3Chtml%3Adiv%20id%3D%5C%22credits%5C%22%3E%5Cn%22%20+%0A%09%09%09%22%09%09%09%3Chtml%3Aa%20href%3D%5C%22http%3A//custombuttons.sourceforge.net/forum/viewtopic.php%3Ft%3D3599%5C%22%3E%5Cn%22%20+%0A%09%09%09%22%09%09%09%09%5Cx3C%21%5BCDATA%5BXML%20created%20with%5D%5D%5Cx3e%5Cn%22%20+%0A%09%09%09%22%09%09%09%09%3Chtml%3Abr/%3E%5Cn%22%20+%0A%09%09%09%22%09%09%09%09%5Cx3C%21%5BCDATA%5BCB%20Context%20Menu%20Extended%5D%5D%5Cx3e%5Cn%22%20+%0A%09%09%09%22%09%09%09%3C/html%3Aa%3E%5Cn%22%20+%0A%09%09%09%22%09%09%3C/html%3Adiv%3E%5Cn%22%20+%0A%09%09%09%22%09%3C/html%3Adiv%3E%5Cn%22%20+%0A%09%09%09%22%3C/html%3Abody%3E%22%3B%0A%09%09data%20%3D%20data%0A%09%09%09.replace%28/%3Ccustombutton%20xmlns%5C%3Acb%3D%5C%22http%5C%3A%5C/%5C/xsms%5C.nm%5C.ru%5C/custombuttons%5C/%5C%22%3E/%2C%20header%29%3B%0A%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09let%20file%20%3D%20%24._getExpStorage%28%29%3B%0A%09%09%09file.append%28%28%24.legalize%28aName%29%20+%20%22-ID%22%20+%20%28%24._zShowIDOnExportedButtons%20%3F%20aId%20%3A%20%22%22%29%20+%20%22.xml%22%29.trim%28%29%29%3B%0A%09%09%09%24.writeFile%28file.path%2C%20data%2C%20%22unique%22%29%3B%0A%09%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09%09%24.notifyme%28%22Button%20%5C%22%22%20+%20aName%20+%20%22%5C%22%20%22%20+%20%22exported%20successfully.%22%2C%0A%09%09%09%09%09%22Click%20here%20to%20open%20export%20location.%22%2C%0A%09%09%09%09%09aImg%2C%0A%09%09%09%09%09%24.alertCallback%29%3B%0A%09%09%09%7D%2C%20100%29%3B%0A%09%09%7D%2C%20100%29%3B%0A%09%7D%2C%0A%0A%09writeFile%3A%20function%28aPath%2C%20aData%2C%20aSaveType%29%20%7B%0A%09%09try%20%7B%0A%09%09%09var%20file%20%3D%20new%20%24._nsIFile%28aPath%29%3B%0A%09%09%09var%20fos%20%3D%20Cc%5B%22@mozilla.org/network/file-output-stream%3B1%22%5D.createInstance%28Ci.nsIFileOutputStream%29%3B%0A%09%09%09switch%20%28aSaveType%29%20%7B%0A%09%09%09%09case%20%22append%22%3A%0A%09%09%09%09%09fos.init%28file%2C%200x02%20%7C%200x08%20%7C%200x10%2C%200x1B6%2C%200%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22unique%22%3A%0A%09%09%09%09%09file.createUnique%28Ci.nsIFile.NORMAL_FILE_TYPE%2C%200x1B6%29%3B%0A%09%09%09%09%09fos.init%28file%2C%200x02%20%7C%200x08%20%7C%200x20%2C%200x1B6%2C%200%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09default%3A%0A%09%09%09%09%09fos.init%28file%2C%200x02%20%7C%200x08%20%7C%200x20%2C%200x1B6%2C%200%29%3B%0A%09%09%09%7D%0A%09%09%09var%20cos%20%3D%20Cc%5B%22@mozilla.org/intl/converter-output-stream%3B1%22%5D.createInstance%28Ci.nsIConverterOutputStream%29%3B%0A%09%09%09cos.init%28fos%2C%20%22UTF-8%22%2C%200%2C%200%29%3B%0A%09%09%09cos.writeString%28aData%29%3B%0A%09%09%09cos.close%28%29%3B%0A%09%09%09fos.close%28%29%3B%0A%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09Cu.reportError%28%5Bself.name%20+%20%22%3A%20%22%2C%20aPath%2C%20aData%2C%20aSaveType%2C%20aErr%2C%20aErr.stack%5D.join%28%22%5Cn%22%29%29%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09readFile%3A%20function%28aPath%29%20%7B%0A%09%09var%20data%20%3D%20%22%22%3B%0A%09%09var%20file%20%3D%20null%3B%0A%09%09try%20%7B%0A%09%09%09file%20%3D%20new%20this._nsIFile%28aPath%29%3B%0A%09%09%09var%20fis%20%3D%20Cc%5B%22@mozilla.org/network/file-input-stream%3B1%22%5D.createInstance%28Ci.nsIFileInputStream%29%3B%0A%09%09%09fis.init%28file%2C%20-1%2C%200%2C%200%29%3B%0A%09%09%09var%20cis%20%3D%20Cc%5B%22@mozilla.org/intl/converter-input-stream%3B1%22%5D.createInstance%28Ci.nsIConverterInputStream%29%3B%0A%09%09%09cis.init%28fis%2C%20%22UTF-8%22%2C%200%2C%20Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER%29%3B%0A%09%09%09let%20str%20%3D%20%7B%7D%2C%0A%09%09%09%09read%20%3D%200%3B%0A%09%09%09do%20%7B%0A%09%09%09%09read%20%3D%20cis.readString%280xffffffff%2C%20str%29%3B%0A%09%09%09%09data%20+%3D%20str.value%3B%0A%09%09%09%7D%20while%20%28read%20%21%3D%3D%200%29%3B%0A%09%09%09cis.close%28%29%3B%0A%09%09%09fis.close%28%29%3B%0A%09%09%7D%20catch%20%28aErr%29%20%7B%0A%09%09%09Cu.reportError%28%5Bself.name%20+%20%22%3A%20%22%2C%20aPath%2C%20aErr%2C%20aErr.stack%5D.join%28%22%5Cn%22%29%29%3B%0A%09%09%09return%20null%3B%0A%09%09%7D%0A%09%09return%20data%3B%0A%09%7D%2C%0A%0A%09/**%0A%09%20*%20Using%20a%20parsed%20string%20for%20the%20template%20variable%20it%27s%20infinitely%20faster%20than%20calling%0A%09%20*%20the%20template%20file%20with%20XMLHttpRequest.%0A%09%20*/%0A%09createURI%3A%20function%28aName%2C%20aImg%2C%20aCode%2C%20aHelp%2C%20aInit%2C%20aKey%2C%20aMode%29%20%7B%0A%09%09let%20template%20%3D%20%28new%20DOMParser%29.parseFromString%28%27%3C%3Fxml%20version%3D%221.0%22%3F%3E%3Ccustombutton%20xmlns%3Acb%3D%27%20+%0A%09%09%09%27%22http%3A//xsms.nm.ru/custombuttons/%22%3E%3Cname/%3E%3Cimage/%3E%3Cmode/%3E%3Cinitcode/%3E%3Ccode/%3E%3Caccelke%27%20+%0A%09%09%09%27y/%3E%3Chelp/%3E%3Cattributes/%3E%3C/custombutton%3E%27%2C%20%22application/xml%22%29%3B%0A%09%09let%20sTxt%20%3D%20custombutton.buttonSetText%3B%0A%09%09sTxt%28template%2C%20%22name%22%2C%20aName%2C%200%29%3B%0A%09%09sTxt%28template%2C%20%22image%22%2C%20aImg%2C%201%29%3B%0A%09%09sTxt%28template%2C%20%22mode%22%2C%20aMode%2C%200%29%3B%0A%09%09sTxt%28template%2C%20%22initcode%22%2C%20%24.escCDATA%28aInit%29%2C%201%29%3B%0A%09%09sTxt%28template%2C%20%22code%22%2C%20%24.escCDATA%28aCode%29%2C%201%29%3B%0A%09%09sTxt%28template%2C%20%22accelkey%22%2C%20aKey%2C%201%29%3B%0A%09%09sTxt%28template%2C%20%22help%22%2C%20%24.escCDATA%28aHelp%29%2C%201%29%3B%0A%09%09return%20%22custombutton%3A%5Cx2F%5Cx2F%22%20+%20escape%28new%20XMLSerializer%28%29.serializeToString%28template%29%29%3B%0A%09%7D%2C%0A%0A%09escCDATA%3A%20function%28aStr%29%20%7B%20//%20Unescaped%20CDATA%20tags%20can%20break%20buttons%20in%20XML%20format.%0A%09%09return%20aStr%0A%09%09%09.replace%28/%5D%5D%5Cx3e/g%2C%20%22%5C%5C%22%20+%20%22x5D%22%20+%20%22%5C%5C%22%20+%20%22x5D%22%20+%20%22%5C%5C%22%20+%20%22x3e%22%29%0A%09%09%09.replace%28/%5D%5D%26gt%5C%3B/g%2C%20%22%5C%5C%22%20+%20%22x5D%22%20+%20%22%5C%5C%22%20+%20%22x5D%22%20+%20%22%5C%5C%22%20+%20%22x3e%22%29%3B%0A%09%7D%2C%0A%0A%09escHTML%3A%20function%28aStr%29%20%7B%0A%09%09aStr%20%3D%20String%28aStr%29%0A%09%09%09.replace%28/%26/g%2C%20%22%26amp%3B%22%29%0A%09%09%09.replace%28/%3C/g%2C%20%22%26lt%3B%22%29%0A%09%09%09.replace%28/%3E/g%2C%20%22%26gt%3B%22%29%0A%09%09%09.replace%28/%22/g%2C%20%22%26quot%3B%22%29%0A%09%09%09.replace%28/%27/g%2C%20%22%26apos%3B%22%29%3B%0A%09%09return%20aStr%3B%0A%09%7D%2C%0A%0A%09promptme%3A%20function%28aMsg%2C%20aVal%29%20%7B%0A%09%09let%20retVal%20%3D%20%7B%0A%09%09%09value%3A%20aVal%0A%09%09%7D%3B%0A%09%09if%20%28Services.prompt.prompt%28null%2C%20%28self.label%20%7C%7C%20self.name%29%2C%20aMsg%2C%20retVal%2C%20null%2C%20%7B%7D%29%29%0A%09%09%09return%20retVal.value%3B%0A%09%09else%0A%09%09%09return%20false%3B%0A%09%09return%20false%3B%0A%09%7D%2C%0A%0A%09hasMod%3A%20function%28aE%2C%20aMod%29%20%7B%0A%09%09switch%20%28aMod%29%20%7B%0A%09%09%09case%200%3A%0A%09%09%09%09return%20%21aE.shiftKey%20%26%26%20%21aE.ctrlKey%20%26%26%20%21aE.altKey%3B%0A%09%09%09case%20%22a%22%3A%0A%09%09%09%09return%20%21aE.shiftKey%20%26%26%20%21aE.ctrlKey%20%26%26%20aE.altKey%3B%0A%09%09%09case%20%22c%22%3A%0A%09%09%09%09return%20%21aE.shiftKey%20%26%26%20aE.ctrlKey%20%26%26%20%21aE.altKey%3B%0A%09%09%09case%20%22s%22%3A%0A%09%09%09%09return%20aE.shiftKey%20%26%26%20%21aE.ctrlKey%20%26%26%20%21aE.altKey%3B%0A%09%09%09case%20%22ca%22%3A%0A%09%09%09%09return%20%21aE.shiftKey%20%26%26%20aE.ctrlKey%20%26%26%20aE.altKey%3B%0A%09%09%09case%20%22sc%22%3A%0A%09%09%09%09return%20aE.shiftKey%20%26%26%20aE.ctrlKey%20%26%26%20%21aE.altKey%3B%0A%09%09%09case%20%22sa%22%3A%0A%09%09%09%09return%20aE.shiftKey%20%26%26%20%21aE.ctrlKey%20%26%26%20aE.altKey%3B%0A%09%09%09case%20%22sca%22%3A%0A%09%09%09%09return%20aE.shiftKey%20%26%26%20aE.ctrlKey%20%26%26%20aE.altKey%3B%0A%09%09%7D%0A%09%7D%2C%0A%0A%09legalize%3A%20function%28aStr%29%20%7B%20//%20Removes%20illegal%20characters%20in%20file%20names.%0A%09%09return%20aStr.replace%28/%5B%5C%7B%5C%3D%5C%7D%5C@%5C%21%5C%25%5C%24%5C+%5C/%3A%5C%u2018%5C%22%5C%60%5C*%5C%3F%3C%26%23%3E%5C%7C%5C%5C%5D/g%2C%20%22%22%29%3B%0A%09%7D%2C%0A%7D%3B%0A%0Athis.CBCME.ed%20%3D%20%24._ID%20+%20%22-edit%22%3B%0Athis.CBCME.rem%20%3D%20%24._ID%20+%20%22-remove%22%3B%0Athis.CBCME.cl%20%3D%20%24._ID%20+%20%22-clone%22%3B%0Athis.CBCME.co%20%3D%20%24._ID%20+%20%22-copyURI%22%3B%0Athis.CBCME.upd%20%3D%20%24._ID%20+%20%22-updateButton%22%3B%0Athis.CBCME.book%20%3D%20%24._ID%20+%20%22-bookmarkButton%22%3B%0Athis.CBCME.hlp%20%3D%20%24._ID%20+%20%22-buttonHelp%22%3B%0Athis.CBCME.add%20%3D%20%24._ID%20+%20%22-addnewbutton%22%3B%0Athis.CBCME.cus%20%3D%20%24._ID%20+%20%22-customize%22%3B%0Athis.CBCME.s1%20%3D%20%24._ID%20+%20%22-separator1%22%3B%0Athis.CBCME.s2%20%3D%20%24._ID%20+%20%22-separator2%22%3B%0Athis.CBCME.s3%20%3D%20%24._ID%20+%20%22-separator3%22%3B%0Athis.CBCME.mTP%20%3D%20%24._ID%20+%20%22-move-moveToPanel%22%3B%0Athis.CBCME.mTT%20%3D%20%24._ID%20+%20%22-move-moveToToolbar%22%3B%0Athis.CBCME.rFT%20%3D%20%24._ID%20+%20%22-move-removeFromToolbar%22%3B%0Athis.CBCME.rFP%20%3D%20%24._ID%20+%20%22-move-removeFromPanel%22%3B%0A%0Athis.CBCME.Branch%20%3D%20%22CB.ContextMenuExtended.Id%22%20+%20self.id.slice%2820%29%20+%20%22.%22%3B%0A%0Athis.CBCME.DefPrefs%20%3D%20%7B%0A%09zInfoHeader%3A%20true%2C%0A%09zXMLExportMI%3A%20true%2C%0A%09zXMLImportLeftMI%3A%20true%2C%0A%09zXMLImportRightMI%3A%20true%2C%0A%09zXMLExpImpGMI%3A%20true%2C%0A%09zXMLExpImpGMIInTC%3A%20true%2C%0A%09zOverlayImportLeftMI%3A%20true%2C%0A%09zOverlayImportRightMI%3A%20true%2C%0A%09zMoveGMI%3A%20true%2C%0A%09zMoveGMIInTC%3A%20true%2C%0A%09zEditInTabMI%3A%20true%2C%0A%09zRemoveToPaletteMI%3A%20true%2C%0A%09zRemoveToPaletteShowAlert%3A%20true%2C%0A%09zToggleInitMI%3A%20true%2C%0A%09zEditGMI%3A%20true%2C%0A%09zDeleteGMI%3A%20true%2C%0A%09zCopyAsBBCodeMI%3A%20true%2C%0A%09zCopyAsHTMLMI%3A%20true%2C%0A%09zCopyImageMI%3A%20true%2C%0A%09zCopyGMI%3A%20true%2C%0A%09zOtherActionsGMI%3A%20true%2C%0A%09zAddGMI%3A%20true%2C%0A%09zAddGMIInTC%3A%20true%2C%0A%09zBackupGMI%3A%20true%2C%0A%09zHideCustomizeFromCBContext%3A%20true%2C%0A%09zShowMoveAlert%3A%20true%2C%0A%09zInvertIconsColor%3A%20false%2C%0A%09zImpExpCustomLocation%3A%20%22%22%2C%0A%09zLastUsedLocation%3A%20%22%22%2C%0A%09zDragAndDrop%3A%20true%2C%0A%09zDragAndDropControlKey%3A%20true%2C%0A%09zDragAndDropAltKey%3A%20true%2C%0A%09zShowIDOnExportedButtons%3A%20true%2C%0A%09zElementsForIntegration%3A%20%22%22%2C%0A%7D%3B%0A%0Athis.CBCME.gPref%20%3D%20function%28aKey%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getBranch%28self.CBCME.Branch%29%3B%0A%09switch%20%28typeof%20self.CBCME.DefPrefs%5BaKey%5D%29%20%7B%0A%09%09case%20%22boolean%22%3A%0A%09%09%09return%20branch.getBoolPref%28aKey%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22number%22%3A%0A%09%09%09return%20branch.getIntPref%28aKey%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22string%22%3A%0A%09%09%09return%20branch.getComplexValue%28aKey%2C%20Ci.nsISupportsString%29.data%3B%0A%09%09%09break%3B%0A%09%7D%0A%09return%20null%3B%0A%7D%3B%0A%0Athis.CBCME.sPref%20%3D%20function%28aKey%2C%20aVal%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getBranch%28self.CBCME.Branch%29%3B%0A%09switch%20%28typeof%20aVal%29%20%7B%0A%09%09case%20%22boolean%22%3A%0A%09%09%09branch.setBoolPref%28aKey%2C%20aVal%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22number%22%3A%0A%09%09%09branch.setIntPref%28aKey%2C%20aVal%29%3B%0A%09%09%09break%3B%0A%09%09case%20%22string%22%3A%0A%09%09%09let%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%09%09%09str.data%20%3D%20aVal%3B%0A%09%09%09branch.setComplexValue%28%28aKey%29%2C%20Ci.nsISupportsString%2C%20str%29%3B%0A%09%09%09break%3B%0A%09%7D%0A%7D%3B%0A%0Athis.CBCME.InitPrefs%20%3D%20function%28%29%20%7B%0A%09let%20branch%20%3D%20Services.prefs.getDefaultBranch%28self.CBCME.Branch%29%2C%0A%09%09defaults%20%3D%20%24.DefPrefs%3B%0A%09for%20%28let%20key%20in%20defaults%29%20%7B%0A%09%09if%20%28defaults.hasOwnProperty%28key%29%29%20%7B%0A%09%09%09let%20val%20%3D%20defaults%5Bkey%5D%3B%0A%09%09%09switch%20%28typeof%20val%29%20%7B%0A%09%09%09%09case%20%22boolean%22%3A%0A%09%09%09%09%09branch.setBoolPref%28key%2C%20val%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22number%22%3A%0A%09%09%09%09%09branch.setIntPref%28key%2C%20val%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20%22string%22%3A%0A%09%09%09%09%09let%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%09%09%09%09%09str.data%20%3D%20val%3B%0A%09%09%09%09%09branch.setComplexValue%28%28key%29%2C%0A%09%09%09%09%09%09Ci.nsISupportsString%2C%20str%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%7D%3B%0A%0Athis.CBCME.Init%28%29%3B%0A%0A%28function%28%29%20%7B%0A%09if%20%28typeof%20gBrowser%20%21%3D%3D%20%22object%22%29%20%7B%0A%09%09if%20%28window%5B%24._UID%5D%5B%22EditCBInTab%22%5D%29%0A%09%09%09delete%20window%5B%24._UID%5D%5B%22EditCBInTab%22%5D%3B%0A%09%09return%3B%0A%09%7D%0A%09const%20editorBaseUri%20%3D%20%22chrome%3A//custombuttons/content/editor.xul%22%3B%0A%09const%20cbIdTabAttr%20%3D%20%22custombuttons-editInTab-id%22%3B%0A%09window%5B%24._UID%5D%5B%22EditCBInTab%22%5D%20%3D%20function%28aBtn%2C%20aNewTab%29%20%7B%0A%09%09if%20%28%21aBtn%29%0A%09%09%09aBtn%20%3D%20custombuttons.popupNode%3B%0A%09%09if%20%28%21aBtn%29%0A%09%09%09return%3B%0A%09%09var%20link%20%3D%20custombuttons.makeButtonLink%28%22edit%22%2C%20aBtn.id%29%3B%0A%09%09var%20cbs%20%3D%20Cc%5B%22@xsms.nm.ru/custombuttons/cbservice%3B1%22%5D%0A%09%09%09.getService%28Ci.cbICustomButtonsService%29%3B%0A%09%09var%20param%20%3D%20cbs.getButtonParameters%28link%29%3B%0A%09%09var%20editorUriFull%20%3D%20editorBaseUri%20+%20%22%3Fwindow%3D%22%20+%20cbs.getWindowId%28document.documentURI%29%20+%20%22%26id%3D%22%20+%20aBtn.id%3B%0A%09%09var%20editorUri%20%3D%20cbs.mode%20%26%2064%20%7C%7C%20%21Object.create%20%3F%20editorUriFull%20%3A%20editorBaseUri%3B%0A%0A%09%09var%20rawParam%20%3D%20unwrap%28param%29%3B%0A%09%09var%20isSeaMonkey%20%3D%20%22Services%22%20in%20window%20%26%26%20Services.appinfo.name%20%3D%3D%3D%20%22SeaMonkey%22%3B%0A%09%09var%20ws%20%3D%20Cc%5B%22@mozilla.org/appshell/window-mediator%3B1%22%5D%0A%09%09%09.getService%28Ci.nsIWindowMediator%29%0A%09%09%09.getEnumerator%28isSeaMonkey%20%3F%20null%20%3A%20%22navigator%3Abrowser%22%29%3B%0A%09%09while%20%28ws.hasMoreElements%28%29%29%20%7B%0A%09%09%09let%20win%20%3D%20ws.getNext%28%29%3B%0A%09%09%09if%20%28isSeaMonkey%20%26%26%20win.location.href%20%21%3D%3D%20%22chrome%3A//navigator/content/navigator.xul%22%29%0A%09%09%09%09continue%3B%0A%09%09%09let%20gBrowser%20%3D%20win.gBrowser%3B%0A%09%09%09let%20tabs%20%3D%20gBrowser.tabs%20%7C%7C%20gBrowser.tabContainer.childNodes%3B%0A%09%09%09for%20%28let%20i%20%3D%200%2C%20l%20%3D%20tabs.length%3B%20i%20%3C%20l%3B%20++i%29%20%7B%0A%09%09%09%09let%20tab%20%3D%20tabs%5Bi%5D%3B%0A%09%09%09%09if%20%28tab%20%3D%3D%3D%20aNewTab%29%0A%09%09%09%09%09continue%3B%0A%09%09%09%09let%20browser%20%3D%20tab.linkedBrowser%3B%0A%09%09%09%09if%20%28%21browser%29%0A%09%09%09%09%09continue%3B%0A%09%09%09%09let%20win%20%3D%20browser.contentWindow%3B%0A%09%09%09%09let%20loc%20%3D%20win.location.href%3B%0A%09%09%09%09if%20%28loc.substr%280%2C%20editorBaseUri.length%29%20%21%3D%3D%20editorBaseUri%29%0A%09%09%09%09%09continue%3B%0A%09%09%09%09let%20isSameEditor%20%3D%20%28loc%20%3D%3D%3D%20editorUriFull%29%3B%0A%09%09%09%09if%20%28%21isSameEditor%29%20%7B%0A%09%09%09%09%09let%20rawWin%20%3D%20unwrap%28win%29%3B%0A%09%09%09%09%09let%20winParam%20%3D%20%28%22arguments%22%20in%20rawWin%20%26%26%20rawWin.arguments.length%29%20%3F%0A%09%09%09%09%09%09unwrap%28rawWin.arguments%5B0%5D%29%20%3A%0A%09%09%09%09%09%09rawWin.editor%20%26%26%20rawWin.editor.param%3B%0A%09%09%09%09%09isSameEditor%20%3D%20%28winParam%20%26%26%20winParam.buttonLink%20%3D%3D%3D%20link%29%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20%28isSameEditor%29%20%7B%0A%09%09%09%09%09gBrowser.selectedTab%20%3D%20tab%3B%0A%09%09%09%09%09win.focus%28%29%3B%0A%09%09%09%09%09aNewTab%20%26%26%20setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09gBrowser.removeTab%28aNewTab%29%3B%0A%09%09%09%09%09%7D%2C%200%29%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09var%20tab%20%3D%20aNewTab%3B%0A%09%09if%20%28%21tab%29%20%7B%0A%09%09%09tab%20%3D%20gBrowser.selectedTab%20%3D%20gBrowser.addTab%28editorUri%29%3B%0A%09%09%09initSessionStore%28%29%3B%0A%09%09%09tab.setAttribute%28cbIdTabAttr%2C%20aBtn.id%29%3B%0A%09%09%7D%0A%0A%09%09var%20browser%20%3D%20tab.linkedBrowser%3B%0A%09%09browser.addEventListener%28%22DOMContentLoaded%22%2C%20function%20load%28aE%29%20%7B%0A%09%09%09var%20doc%20%3D%20aE.target%3B%0A%09%09%09if%20%28doc.location.href%20%21%3D%3D%20editorUri%29%0A%09%09%09%09return%3B%0A%09%09%09browser.removeEventListener%28aE.type%2C%20load%2C%20false%29%3B%0A%0A%09%09%09var%20win%20%3D%20doc.defaultView%3B%0A%09%09%09win.arguments%20%3D%20%5Bparam%5D%3B%0A%0A%09%09%09var%20iconLink%20%3D%20doc.createElementNS%28%22http%3A//www.w3.org/1999/xhtml%22%2C%20%22link%22%29%3B%0A%09%09%09iconLink.rel%20%3D%20%22shortcut%20icon%22%3B%0A%09%09%09iconLink.href%20%3D%20%24.getStdImage%28rawParam.image%29%3B%0A%09%09%09iconLink.style.display%20%3D%20%22none%22%3B%0A%09%09%09doc.documentElement.insertBefore%28iconLink%2C%20doc.documentElement.firstChild%29%3B%0A%0A%09%09%09var%20alreadyAsked%20%3D%20false%3B%0A%0A%09%09%09function%20checkUnsaved%28aE%29%20%7B%0A%09%09%09%09if%20%28alreadyAsked%29%0A%09%09%09%09%09return%3B%0A%09%09%09%09var%20dlg%20%3D%20unwrap%28doc%29.documentElement%3B%0A%09%09%09%09if%20%28%0A%09%09%09%09%09%22_fireButtonEvent%22%20in%20dlg%20%3F%20%21dlg._fireButtonEvent%28%22cancel%22%29%20%3A%20%21dlg.cancelDialog%28%29%29%0A%09%09%09%09%09aE.preventDefault%28%29%3B%0A%09%09%09%7D%0A%0A%09%09%09function%20onDialogCancel%28aE%29%20%7B%0A%09%09%09%09alreadyAsked%20%3D%20true%3B%0A%09%09%09%09win.setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09alreadyAsked%20%3D%20false%3B%0A%09%09%09%09%7D%2C%20100%29%3B%0A%09%09%09%7D%0A%0A%09%09%09function%20destroy%28aE%29%20%7B%0A%09%09%09%09win.removeEventListener%28%22dialogcancel%22%2C%20onDialogCancel%2C%20false%29%3B%0A%09%09%09%09win.removeEventListener%28%22beforeunload%22%2C%20checkUnsaved%2C%20false%29%3B%0A%09%09%09%09win.removeEventListener%28%22unload%22%2C%20destroy%2C%20false%29%3B%0A%09%09%09%7D%0A%09%09%09win.addEventListener%28%22dialogcancel%22%2C%20onDialogCancel%2C%20false%29%3B%0A%09%09%09win.addEventListener%28%22beforeunload%22%2C%20checkUnsaved%2C%20false%29%3B%0A%09%09%09win.addEventListener%28%22unload%22%2C%20destroy%2C%20false%29%3B%0A%09%09%7D%2C%20false%29%3B%0A%09%7D%3B%0A%0A%09function%20unwrap%28aObj%29%20%7B%0A%09%09return%20aObj.wrappedJSObject%20%7C%7C%20aObj%3B%0A%09%7D%0A%0A%0A%09function%20initSessionStore%28%29%20%7B%0A%09%09initSessionStore%20%3D%20function%28%29%20%7B%7D%3B%0A%09%09var%20ss%20%3D%20%28Cc%5B%22@mozilla.org/browser/sessionstore%3B1%22%5D%20%7C%7C%0A%09%09%09Cc%5B%22@mozilla.org/suite/sessionstore%3B1%22%5D%29.getService%28Ci.nsISessionStore%29%3B%0A%09%09ss.persistTabAttribute%28cbIdTabAttr%29%3B%0A%09%7D%0A%0A%09function%20checkTab%28aTab%29%20%7B%0A%09%09var%20cbId%20%3D%20aTab.getAttribute%28cbIdTabAttr%29%3B%0A%09%09if%20%28%21cbId%29%0A%09%09%09return%3B%0A%09%09initSessionStore%28%29%3B%0A%09%09let%20btn%20%3D%20document.getElementById%28cbId%29%3B%0A%09%09if%20%28btn%29%0A%09%09%09window%5B%24._UID%5D%5B%22EditCBInTab%22%5D%28btn%2C%20aTab%29%3B%0A%09%7D%0A%0A%09const%20editorBaseUriLength%20%3D%20editorBaseUri.length%3B%0A%09if%20%28%21window%5B%24._UID%5D%5B%22Listener1%22%5D%29%20%7B%0A%09%09window%5B%24._UID%5D%5B%22Listener1%22%5D%20%3D%20true%3B%0A%09%09addEventListener%28%22DOMContentLoaded%22%2C%20function%28aE%29%20%7B%0A%09%09%09var%20doc%20%3D%20aE.target%3B%0A%09%09%09if%20%28doc.location.href.substr%280%2C%20editorBaseUri.length%29%20%21%3D%3D%20editorBaseUri%29%0A%09%09%09%09return%3B%0A%09%09%09var%20tabs%20%3D%20gBrowser.tabs%20%7C%7C%20gBrowser.tabContainer.childNodes%3B%0A%09%09%09var%20i%20%3D%200%2C%0A%09%09%09%09iLen%20%3D%20tabs.length%3B%0A%09%09%09for%20%28%3B%20i%20%3C%20iLen%3B%20++i%29%20%7B%0A%09%09%09%09let%20tab%20%3D%20tabs%5Bi%5D%3B%0A%09%09%09%09let%20browser%20%3D%20tab.linkedBrowser%3B%0A%09%09%09%09if%20%28browser%20%26%26%20%28browser.contentDocument%20%3D%3D%3D%20doc%29%29%20%7B%0A%09%09%09%09%09checkTab%28tab%29%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%2C%20true%2C%20gBrowser%29%3B%0A%09%7D%0A%09checkTab%28gBrowser.selectedTab%29%3B%0A%0A%09addDestructor%28function%28aReason%29%20%7B%0A%09%09if%20%28aReason%20%3D%3D%3D%20%22delete%22%29%0A%09%09%09window%5B%24._UID%5D%5B%22EditCBInTab%22%5D%20%3D%20false%3B%0A%09%7D%2C%20self%29%3B%0A%7D%29%28%29%3B%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*CODE*/%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%0A%5B%2C%5D%0A%0A%26lt%3B%21--StyleSheet--%26gt%3B/*%20DO%20NOT%20DELETE%20THIS%20LINE%21%21%21%20*/%0A/************************************/%0A/*%20You%20can%20add%20your%20own%20styles%20here%20*/%0A/************************************/%0A%0A%0A%0A%0A%0A/*%20Style%20for%20buttons%20with%20initialization%20code%20disabled%20*/%0Atoolbarbutton%5Bid%5E%3D%22custombuttons-button%22%5D%5Bcb-init%5E%3D%22return%3B%22%5D%3Anot%28%5Bcb-edit-state%5D%29%20%7B%0A%09outline%3A%201px%20dotted%20red%20%21important%3B%0A%09outline-offset%3A%20-1px%20%21important%3B%0A%7D%0A/*%20Dialogheader%20element%20style%20*/%0Amenupopup%5Bid%5E%3D%22custombuttons-contextpopup%22%5D%20dialogheader%20%7B%0A%09margin%3A%200%20%21important%3B%0A%09padding%3A%202px%205px%202px%205px%20%21important%3B%0A%09border%3Anone%20%21important%3B%0A%7D%0Amenupopup%5Bid%5E%3D%22custombuttons-contextpopup%22%5D%20dialogheader%20.dialogheader-description%2C%0Amenupopup%5Bid%5E%3D%22custombuttons-contextpopup%22%5D%20dialogheader%20.dialogheader-title%20%7B%0A%09font-size%3Asmall%20%21important%3B%0A%09font-weight%3A%20600%20%21important%3B%0A%7D%0A/*******************************************************/%0A/*%20FROM%20THIS%20POINT%20DOWN%20DO%20NOT%20EDIT/DELETE%20ANYTHING%21%21%21%20*/%0A/*******************************************************/%0A/*%20Menugroups%20styles%20*/%0Amenupopup%20menugroup%20%7B%0A%09background-color%3A%20menu%20%21important%3B%0A%09padding%3A%202px%200%202px%200%20%21important%3B%0A%7D%0Amenuseparator.menuseparator-next-to-menugroup%20%7B%0A%09-moz-margin-start%3A%20-28px%20%21important%3B%0A%7D%0Amenuseparator.menuseparator-next-to-menugroup.above%20%7B%0A%09margin-bottom%3A%20-2px%20%21important%3B%0A%7D%0Amenuseparator.menuseparator-next-to-menugroup.bellow%20%7B%0A%09margin-top%3A%20-4px%20%21important%3B%0A%7D%0Amenupopup%20menugroup%20%26gt%3B%20.menuitem-iconic%20%7B%0A%09-moz-box-flex%3A%201%20%21important%3B%0A%09-moz-box-pack%3A%20center%20%21important%3B%0A%09-moz-box-align%3A%20center%20%21important%3B%0A%7D%0Amenupopup%20menugroup%20%26gt%3B%20.menuitem-iconic%20%26gt%3B%20.menu-iconic-left%20%7B%0A%09-moz-appearance%3A%20none%3B%0A%7D%0Amenupopup%20menugroup%20%26gt%3B%20.menuitem-iconic%20%26gt%3B%20.menu-iconic-left%20%26gt%3B%20.menu-iconic-icon%20%7B%0A%09width%3A%2016px%20%21important%3B%0A%09height%3A%2016px%20%21important%3B%0A%09margin%3A%205px%20%21important%3B%0A%7D%0Amenupopup%20menugroup%20%26gt%3B%20.menuitem-iconic%20%26gt%3B%20.menu-iconic-left%20%7B%0A%09visibility%3A%20visible%3B%0A%09/*%20override%20toolkit/themes/linux/global/menu.css%20*/%0A%09-moz-padding-end%3A%200%20%21important%3B%0A%09-moz-margin-end%3A%200%20%21important%3B%0A%7D%0Amenupopup%20menugroup%20%26gt%3B%20.menu-iconic%20%26gt%3B%20.menu-iconic-text%2C%0Amenupopup%20menugroup%20%26gt%3B%20.menuitem-iconic%20%26gt%3B%20.menu-iconic-text%2C%0Amenupopup%20menugroup%20%26gt%3B%20.menuitem-iconic%20%26gt%3B%20.menu-accel-container%20%7B%0A%09display%3A%20none%20%21important%3B%0A%7D%0Amenupopup%5Bid%5E%3D%22custombuttons-contextpopup%22%5D%20menugroup%20%26gt%3B%20.menu-iconic%20%7B%0A%09display%3A%20none%20%21important%3B%0A%7D%0A/*%20Apply%20white%20filter%20to%20dark%20icons%20*/%0Amenupopup%5Bid%3D%22toolbar-context-menu%22%5D%20menuitem.menuitem-iconic.inverted-color-for-this-image%20%26gt%3B%20.menu-iconic-left%20%26gt%3B%20.menu-iconic-icon%2C%0Amenupopup%5Bid%5E%3D%22custombuttons-contextpopup%22%5D%20menuitem.menuitem-iconic.inverted-color-for-this-image%20%26gt%3B%20.menu-iconic-left%20%26gt%3B%20.menu-iconic-icon%20%7B%0A%09filter%3A%20url%28%22data%3Aimage/svg+xml%3Butf8%2C%26lt%3Bsvg%20height%3D%270%27%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%26gt%3B%26lt%3Bfilter%20id%3D%27white%27%20x%3D%270%25%27%20y%3D%270%25%27%20width%3D%27100%25%27%20height%3D%27100%25%27%20%26gt%3B%26lt%3BfeComponentTransfer%26gt%3B%26lt%3BfeFuncR%20type%3D%27table%27%20tableValues%3D%27.6%200%27/%26gt%3B%26lt%3BfeFuncG%20type%3D%27table%27%20tableValues%3D%27.6%200%27/%26gt%3B%26lt%3BfeFuncB%20type%3D%27table%27%20tableValues%3D%27.6%200%27/%26gt%3B%26lt%3B/feComponentTransfer%26gt%3B%26lt%3B/filter%26gt%3B%26lt%3B/svg%26gt%3B%23white%22%29%20%21important%3B%3B%0A%7D%0A/*%20Some%20menu%20items%20images%20*/%0A%0A%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-editButton%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA1UlEQVQ4jZXRMS6EQRjG8R9aIW5BodiI3cK32UsoNDiCTiGhdgNX2MIdHEHhBDa7iZLQaHwK7xdj882YfZKnmXn//5nM8JMRTgrd8pt9NNiQwG2h1wm8jZdYf8C6OKHFDNOlXiTwEc6xi+dgRqlgKp8G7zF3F5I59moEKdz1FJvdQEnQ4GMJfsVhOpQTjP+B17CTE/TBbxgm8C2Oc4KbAgyXsd4reMIEZxkY7kuCFp8huRJ/vaqgxWMPWCWoSa9gHhs1XaSCob8vXtsvDLorHYRtlQ7gGx8FeJbEVZdgAAAAAElFTkSuQmCC%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-editInTab%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAVUlEQVQ4je3TMQqAMAxG4e+QXkGo9+zgGbyFbXddslbtqBh48CeQR5bAgoZjkIYkwo7c4UpSRcj6dXfJCwRTh+2poFfrL/iUoKHEYIQae1I0o+9cMJ+eknf9YNTGeAAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-deleteButton%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACZ0lEQVQ4jX2TwU8aQRjF96QiyzoEhAQjC8KugrLACgRDNGpCPBkSBM/e9KjG/2Ov3PgTNm007lYF1N0VG+toD1bbi0kbLzU9NE16fD0UcU3QL5nTzO+97818wzCdomtrSrtcVuuEEOaVUggh7VJJPVlaUl5sXK2v1x9qNVxUKtDjcdpLpAPT250dGPk8NFGsd50fajVcrKzAWliAOTcHXRSpYhNRCCFmqURvt7dhZrMwZBmGLEOLRhWmXS6rF5VKFzYLBRgzM9AFgSqEkC68tQVzehpmKtVdWiSiMnVCiB6PUzts5HIwMhlogkDNUonebW7CkmVYySQsScKZJEGPRp+7rBNCdFGkdtiUZZipFL5sbOAsncaZJKEtSThPJKCHwy8idnPqgkDtsJVMwpyYgBEKweR5WDzfG7aLaIJADUnC8egoGhyHFsfhhBCYHg80n+91+EnAKBYpXV7GEcuixXE4dbtheb049/mgBwJvuxvFIr1aXcUhx6Fpgz/6/fgUCOA6GEQjGOyd3ygW6VW1igOWRYNlcTw0BNPjwbnfj8uREXzmedyMjeFOENAMhZ5Fum1Xq9CdThwMDqLpcuHU7Ybm81E9EKDXwSBuIhF8Gx/H/eQkvksSjM6cMCeLi+plpYJ9hwP6wAAOnU60OA57w8PdQWrwPP0qirifmsJDOo2f2SweczmYsZjKNDMZZa+/H/t9ffjgcOCIZbHbge0RW+Ew/ZFM4jGXw+9CAX9mZ0ETif+fSnW56k8Cu15vz5tWCCGGINBf+Tz+zs/jLputvzjwjmWV94Sob72zQghpx2Lq9ZMzwzD/AFavaEYFPJnjAAAAAElFTkSuQmCC%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-moveToPanelToolbar%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAiElEQVQ4jaWTMRYAEQxENcON9sbqvYEzaFTu4AAaW2WfzZOw6EhmknwYo6xobYnWFi1HFWfnWnau/TbpxVsmAfAB8CSm/d8pDBkst83PElATUKe5NLNkfgMX7+w1GQGTqg7BrhJXC1GQaI+I9zESf0aTqkpwORcR1vI1jta2wfFT5iZHP3ImfgAnspfZxwDhtQAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-removeToPalette%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA00lEQVQ4je3RMUoDURAG4E9FJIW38Ri2OYBuId7A0kawsvASgQgW2VVRxCCimBhbSauLbCw8gW6eRZ7LIloICzYOfMzwePwMDP/VTO2z1KbVprUXdaM8CjVjlkcsVgEPHE6YFoSctyfKR96fZ73MmX4qCAUhZasKGHP9SnihnBB+UtTmDrtVwIDLe8KIcEe4jQaE4Zd5GP912KkCzrk5JhzNVgtZ7L34ltWk0UF9gytW+2xcsN4nOSU5+UaPJGUtY/OMlebOuM18l4XfwFxzG/xpfQC39YSYUCcNEQAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-copyButton%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABaElEQVQ4jZWTP0pDQRDGv503O7N/LIKFnQQLxcIueIKAeAAtPESOIHgGr2JjYaOdojY2AbWQaBE7QWIk5D2L7AvJS0LMB9MsM7/9ZncGzrlTADmAohqqegUgYIlyAEPvfQtAvRKbAGgZoEjFY6nq5TxHAAoRaddqtdoUIN1WygEosiz7DiHsV8AvCfKc8mYBqrqNUf87Vauq2iqdMPMngLV5DsqzGXnvjzH9yNcrAUrFGA9E5LXM+xcghNAQkTYzd2KMTRHZWwkgIk/M3CWinrX2PtUsB4jILhH1MfruCyL6SQO2HBBCaGRZ9kVEfefcHRH1rbVvzrmtKYCIPABYrwJSz10R6RhjBsz8DmAj5YwAzPwBoDDG/BJRT1UPSwAzd4ioR0Q9EbnFxPCMAaq6o6o31trHFI3U71GMsWmtvVfVq2R7rDT+C787N8YMvPcnmF2wunPuDMAQo0Wclff+HAuWaSJy59zpH5p9c+KFTeQaAAAAAElFTkSuQmCC%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-copyButtonAsBBCode%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAQUlEQVQ4jWNgGEzgPxomVR4iwcrKgtMAJDncBpDg0lEDaGIACwszQQOganAZwEK5C1hZWfEkJLgc3jAgOykPDAAA1ZJAKLTFPOgAAAAASUVORK5CYII%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-copyButtonAsHTML%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABCUlEQVQ4jc1QSZLDIAwUSIBkKLsKX/0Q/4Ov+Zt8QBfNIXGKbJOcpqaPvSEa4N+h1tpKKbqu63Fy67oepRSttbaP4Zyz5pwt56wnP3JvS+Z53kVEp2kyEdFlWW7GZVnaqM3zvN+FRWSbpqmLiDGzllKeXimlNGZWEbGrdzu1TUQ6M1tK6WV4LEkpKTObiHQA2ICZe0rJYowqIr+PdLm2xRg1pWTM3CGE0EMIRkRfFxCRhhAshNABADYi6kRkiKgxxrclMcaGiEpERkSXL5w7IGJHRPPeKyI+lSBiu2qGiHfhE7tzTr335pxTABhL2oO2P4ZvRgBQ55wBgA78yH3cqV2Nx8Ad34b/Hj+OllHLBbr2CwAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-copyButtonImage%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAnUlEQVQ4jc3RPQ4BURTF8Z+PgrAPtUJnIxZgBZagkolVqDWWIliARCFR6GSq0Twyw2SemcpJTnPzzv/edy//ohOymj7mARl6NRoOQ6YAiGmNFAm6TQBpePdAJwYYYIF+rpaE8CoGaGEbarsw7qfaVYCl4rY3mOOGaQwwU326O8Zhyi/AJPwxdv8rRmWAyw/hl89lgCZ+69AgvPcXegKfOWlGgoA/rgAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-moveToBeg%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAZ0lEQVQ4jWNgGBbgPxLGBVgYGBimkWuAIAMDwx58FuAzQI2BgeEWIRfiMsCFgYHhPZo8NozVgGwGBobfRGjGaUAWpQbAvPCOEgMYGCCBeBOPPAMhAxgYING4mxIDGBggCWkqHvmhDABfPU+2X4C8bwAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-moveToLeft%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAWElEQVQ4jc3SwQqAIBBF0Wv50S2iWuh32yoQmyLnETjwlvfgQhj9FmBW4gJEJXYBdVyADViNhS/x224v64lNYFcBgEMFLCQDydj0BLSI6x/UiBu4EAn4/0620kHHnAdtJgAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-selectForMove%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAb0lEQVQ4jaVTwRHAIAjLBh3JUR2pI7Uf0rNeQMHc5aFIgKhAjG4soQN4jGmRMbkk0oxM5joNCmxBtXgbl2c5s4dLdPaJKMO8qtLYXcfDQgw2+I6PMSb/RvOqeubOvgBiM3WNCmWB46c8ixz9yDD5BTKZP4tDu3tDAAAAAElFTkSuQmCC%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-moveToRight%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAWklEQVQ4jdXOywqAMAxE0fvd0oViwZ+u1YUGivQRG7rowOwyh8AMcVYgAKsVuDTIwvPut+cLNJGQHNZaRLRAEfkDHBYgOwbYAJ9p1Ixrkc+6xgJ0jwF2y3h8blGPQc2PYAhrAAAAAElFTkSuQmCC%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-moveToLast%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAXklEQVQ4jWNgGLZgKgMDAwse+f9IGKeC3QwMDIKUGPCfgYHhJgMDgxohA/4TwO8YGBhcKDHgPwMDw28GBoasATPgHQMDgzM+L2ADyIGoikeeYDQKELAApwEUJ6QhBACQ0k+uTGwshwAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-installToLeft%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAkklEQVQ4jWNgYGD4TwDfYSAA/jMwMCxmYGBIwYEdiTEgC498IQMDQyW5BrRA5W+TYwBM8xsGBgYhUg0gWjM2A0jSjG5AIQMi+t4xMDC8JICvohtQiWTAJwYGhvcE8D1sXpgAFXvOwMDAQ6oXyDIEVzQSbQi+hAQz5BK5BjAwQAI2j5ABy6GGYMOu+DTDDCA7OwMAJLpYCfv41WYAAAAASUVORK5CYII%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-addToLeft%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAk0lEQVQ4jd2SMQ7CMAxFnxRbscLIwB25Sye6hZHr9BJMDKxsCLO4EgM0oQsSX8oQR+8lcgz/l1LKXlK6q4hvzE5RroADxzUwwAF4AOMaeBb4R0EDBhhCMPTCNW4bA5pCMMV+PqtYtrOKuia5AbsQ+BeLreV8UVE31WtI+l8QeSfp68FLliTLv9Ahac9BQ9I3iT/JEyAATnbY6abGAAAAAElFTkSuQmCC%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-addNormal%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAOklEQVQ4jWNgwA00GBgY/kOxCh51owZQwwANHNgLyQB3POrgisjFlBugggO7IylyxqOO8kAcNYBCAwDaTUQAd6ycCwAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-addToRight%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAlElEQVQ4jd2SMQ7CMAwAT4qtRmFk6B/5S6dmKyPf6SeYGFjZEGHAkUpFpXhhqKUMsXUXyzHsMs5AASaAQ4wXFSkSwjOldGoRZOAFjDXhlWTrYFwmPZLBBMO6sCWZ7NVs0GyC2e61tjmT4jgAvQZ5qGiJXbx6O+ij6v0Ddzfg6JlBEwy/f6EZroLlHrhg+N5EN/z/eAMK7U52zxjmpAAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-installToRight%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAkElEQVQ4jWNgwA/uMDAw/CeA8QJHBgaGFBx4MSEDKhkYGArxyGcRMuA2VEELuQYIMTAwvMFjCEEDCBlClAH4DIEbcJWBgeElAfyOARFthegG3GNgYHhPAH9CMqCSVC/wMDAwPIcqnoDNC+RoJsoAfJqJMuASHs1EGZDHgAgwsgxgYGBgcIUqxIaXE2MAwewMAOuRWAkKu/ZhAAAAAElFTkSuQmCC%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-cloneButton%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABVElEQVQ4jY2RvUoDURCFB8Ts7Jxzl4hF8gpWFr6A2OQBtMkbBBsXtDHY2VgqgmBnb5un8AFiI4idhTZiwioJa3PvZV03rAPT3J9vzjkjJEeqWqhqWelPACcisiZt5T/PAAxFpC8ifTN7SZJk6SGtgNJ/jkXyXlUXAB5EBK0APzkWgItut3tsZq81a9/OudNf1poAIrJpZu+q+pVl2TWAAYABycckSZYkb/8AzGwSJpnZk7d2V7N25t8sAFyJyHpVQRZCFJEND8hr1gZVSyTPVymYNgFEpAfgiOSlmT2rahEBJPcA5ADyNE33AwBAXguyNLMpgG1VLf+jQCvWokUR6UdAlmWHTettUuCcC8FGwIeqzp1z47CuTqezVVHQC+ehzWwnAkgepGk6r3mctGUQAavKr+lm1T2AYRtgpqqFc25cD5HkYbhfCSC5a2ZvdfmVLkiOfgDZPYQeKDzJFgAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-bookmarkButton%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAVUlEQVQ4jWNgwAQnGRgY/uPAJ7CoxwC4NMPwqAGjBtDfgMkMDAxTyDXgEAMDAysUHybVgCcMDAziSGLiDAwMT4k14CcDA4M5FnELqBxBkIpHLg1dAAANUWsJ9RcJ5gAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-buttonHelp%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABt0lEQVQ4jaVTvYqTURAdUmTFmXPO3KC+griID2ERBF/OWpYtLK3FYJIirQoiFjabkEYQ9sdlY7KQz2Bs8vPl29IDt5k7c2bmnHvNGuiQL1IaErgK91W4rwhcpjSQ1G3m18FUjuBeiezBfcnAentEfob7MqWhmeFOscgJwTMcHT02M0vgR53AzB5Gu/1E5Fjk+IAklSOCZ2Z2fxsT+WlH4LGoNXORk5QGu53hXm07b1Gkt/vxNa3fRTuO4V5J6lpKw0K+ryc8KOUlI24IzAjM5Jg3BUyqn1TfCFxFxK3ISSJHHelUgZui8nq/ok4IXncyXxXmuyJ9Y8QNAxcW7qu6WAysCcwaIrfkmDfzwn31/wQELrcBePxhxE+6L1I6MbOWmbUK842A3yKn9FjUSM4tpUECX+suSOoSvJZjLsecwEyh57WJHiX1pZA9k9SF+7JpY0c63dkIfD+wMeJpeFQ70pSGm9fle+VztNeEv2r1EDUt1Ac7DHIschLtODYzEznea+N/zexeKeWZqOnm1bo1gJSGcK+S6tO9LtY6yY/hUW063yneQVI3qT4DF7vvHDgvZK8hpJmZ/QNEuKA1I+S/swAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-updateButton%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABR0lEQVQ4jZVSoU4DQRA9RVD06M3szNzbLQqHIRgMhg9AYVBgsISPQIHDERIE/AOiEhSiDlJSR0gQTSCkBkqhh7kmhfba60s2m+y8mX0zb6KoJMysDmCzLH8EIvIqIu1KpbI4ley9P1bVRxF5Y+ZOfmdE1AdwVpjIzCoiLWbOJp00TbeK+mwycyYibQCX3vtTM2skSdIfLmBmzbGyzawJYG/4vVarrRFRj5kz59ynqt4B2B4pEELYKZjHPhF9mdkNgGTi8MYhhLCSpunqrHlzIYQNIkpn/tF7vywiLSLqjlscAMn/OQ0Ch6p6T0TfuefdarW6MIjHcRx7709yh9ZHCqjq07BVSZL0zawB4MrM6sz8QUQ/AI6KpB+UWKDzKIrmC/sHcJ3L7znnXpi545x7NrPbIpv/wMyWmPldVR+mkieo2AVwUZb/C8XFZqB7/2XEAAAAAElFTkSuQmCC%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-importButtonToLeft%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABAElEQVQ4ja2TPW6EMBBGLQWYn2+MVjIFVaocIiUtt6A2NadOIuUAkWaL1ZK1YCFFRnrd+Nnf2A7hP4qInJl3ISI/FQBwM9sFwLnAzLxtW49tfNac/iQws40AQC8iH6cRYoyb4wLoAXwy83EMAG6xzCsir6r6paquqscCVXUzWxuJ6E1EvkXEAbhCnZi8aZqCQgDDKhiG4f1yufyoqgO4SVRdRFaKWPedRMRDCGFZln4Yhip16bZQ5TgCM7uqFtZ5ntM4jtR1nZ8OcU9wl0zTxCmlYwExuYg48fbZ5pxtmiY+FhA5Czsxed3UXte/VFXlOWc7Fzx8nkeK6zqplwOe1hWnmXJdQQOp+wAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-exportButtonAsXML%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA+klEQVQ4jaXSTUrEQBAF4IBJ1283gc4iK0HwELoQcpJZDAGZyTqnVsEDCM9FGIdgEoPzlk3XV110FcVGiOix67qncRzbrXuLEZF7Efms6/qr7/uHYRjy7mIza1X1Q0SgqshNxvH1+LwLMbPWzN5VFWYGM4OqomkanE79y/l89q36LCJvzAxVhdqEiAqYGTlnHIZD/gv5CTFBVbFv8IWEECAiKIribrsTEczsV6c1oCxLhBCu95kZ7r4bqKoKRHQ93wKY+f/AWm4HwgoQU4S7zxZIVSEy7QEzg5hATPPRLkBKCSklxBjh0SfMFzDhOXD5Rnff9wKi+Qi35Bsbo3PRzNeKnwAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-importFromOverlayToLeft%22%5D%2C%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-importFromOverlayToRight%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAXElEQVQ4jeWRMQoAIQwE3Sqybf7/1lwl3qnBhMPKhW3EjBMs5WQAGEm7GSBV8gCS5lVV17BRdTcMwAB0WLvkmYwvhwDtfKUdBng5B4hUqtj0vRnAux+ljMG0wp88qEdk0ygMKpAAAAAASUVORK5CYII%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bid%5E%3D%22_B_A_S_E_I_D_-importButtonToRight%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABCklEQVQ4jY2TPWrDUBCEFyJpf2YlDE+Fq1Q5REq1voVqufapk0AOEBgXjm3ZGEkDXzOw32MfrMhy3hZYT9M0VNUHzIxmRlXl4vA0TVlVFeu6vtPUVFOabxCM42jTNOVzr6Z0d6qtCEopHMfRjsdjmfdmxoigmS0LzIx93/NwOOhcslng4YwIlr5wGIbqdDrtRUTcnQDo7neBmdHdb0QEARAAI4K73e5vGIZPEZGIIPLS3wRN03COmjIQt5fc/VdVP66CzHwUvEpE8J8fd3+/9gCYbRLA+icC+Aawn/cA2LbtusDdv56HRUQyk13XMTOXBSJSXpVt124WXPbNfMnqCiIi8+N5ZvUWtuYMEVRyXaZT/HMAAAAASUVORK5CYII%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0A%0Amenupopup%5Bid%5E%3D%22custombuttons-contextpopup%22%5D%20menuitem%5Bdyn_id%3D%22_U_I_D_-toggleInitCode%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC1ElEQVQ4jW2TTUsbURiFB1xoUeI1OnPjXGeiJlgU1CiE0QY1SDCKoPkBohcqlbpoR9y4cOE/8CfcncV8dERisWo6GmP8gFYa6xcUa1voqmWgf+B0U8WoZ33e57zwnleS7kkQQlKUmpaiWBaltkWpbSmKlaLUXCSE3PcXKUWpud7U5BQmJ3E2O4vz2Vmcmya+TE/jmHOsNTc7CUrNR4ctWRZ70Sgu5+ZwODqKfCSCnZ4ebIdCyPX2Yq+nB4WJCdihEJKKIh4k70WjOJmexn4kAtswYGmaWNV1c7W+3rQ0Tay3tmLXMJDr7saK14vbTQQhZL2pyTk1TexHIsiHw8h1dWGDMX43JE5IYDMUco6iUWw9fYqkqjqLhBApVV3NP42N4XBkBB86O5Hr6kKuuxu7nZ3I3IcwFjgcH8dhMIgVTUOKMS5ZsiwKL18iH4nA0jSxwRjPtrdj2+fDVnU1NsrKiiDpYFB8jsWQJgRJVRWSRal9NjODbDiMzYGBBUmSpLWSEv6+rAxb5eWwXS5kCbmFJOrrzcvXr5Fxu5FgzJYsSu3TV69gGwY2BwcXbowb5eXcdrmwW1WFA1nGkcfDbwBX8/PIUfofIMvimHOsVVU9OE+WEH4gy/ioqih4vTj1+XjaMMT11BT2NA1xTRNSyuPh+aEhrFVUYKWmBnFCAnchRx4PL3i9uPD7cdXSgq+mie/9/cjoOuKMcUkQQtJ+v5MNBJB+8gQrDQ3HccaKIKc+H79qacGvjg78GR7Gz7Y2pHTdua12glLTfvYM62437MZG7A4PIx0MimVVjS2raixtGOJiagq/w2H8DYWQ8fuxpOvFlU4qikgqClZLS7FDKQqxGE4mJnD24gW+PX+O674+/GhtRcbvxxtNK67y7YkoNROy7CQrK/GushK22428x4N9TcO2ruOtrjsPku9rkRCSoNRM1tZaCcbsBGP2cl2dtVRb++g7/wOHlWTmy2AYugAAAABJRU5ErkJggg%3D%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenupopup%5Bid%5E%3D%22custombuttons-contextpopup%22%5D%20menuitem%5Bdyn_id%3D%22_U_I_D_-toggleInitCode%22%5D%5B_checked%3D%22true%22%5D%5Bdisabled%3D%22true%22%5D%2C%0Amenupopup%5Bid%5E%3D%22custombuttons-contextpopup%22%5D%20menuitem%5Bdyn_id%3D%22_U_I_D_-toggleInitCode%22%5D%5B_checked%3D%22true%22%5D%20%7B%0A%09list-style-image%3A%20url%28%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACRUlEQVQ4jZWRXUhTcRjG/xyQebM8IUHYjYFGLMrDWGZobqh9mRfVTREU0oUVfSIFaVSHcM7R8mxzug9d/yM22/LUmnY0ZzSIupAMBXXFwm1IDpkfuxhdP10EojDWeq7f38PvfV9C/icCKWZcDFX0KkJKqqSswLK5wzxhiYPEzgYbcPNLE84EG7BrcGcoZ56xM3ytrIVlvgMt327DEjZCJZUgN7qbcKxYgGfzejRPNaF5qgnm7waopD25FSh6FaFbk1fQFTHi6tcLcEdtuPjpHPa/3if8E8535zeq/WUQ43bcn7uOngUT9HMPUeZXxThazG4okm7SSLoJt4XmCVtAt6WsESO6ogaYFnj0LzqgG62EZojT/R2yEqHEsxsnR+tQKG4HcZANLSVV0kufz2NwqQ8d0Va8SXpwbfIyNIEDm9R7CNpnHkGY16Mz3A61vwx5fXmU7WV1e4dKIS0PwPbLAGmlH7aYCYfecjGOcpv+byewho14MH0H/Ow9iHE7jo/XYMdAIYw/nsCbdIMmrQisvcSJiVpwr7itaxIHESoCGjh/mqEPt+Bp5DG8CQp+rgUjaz48X7HgQ3oYd2duoCpQzme8NONiqFauRH/cAWGhDYZoK4ZXvfCsOjGWlkATdlS+K5/O+i4lVdJTE8fgS4hwLXXCkmiDL+XGeNqP0x/roZMPclkLCCGk6EURPSJXwLcsQloXEfoto3W2GTVyVWb1TFFJpbR+og7D6z44F82oe1+dXT1Tyv1qvnrkcOromDamC+qyqv8BhAM2Q6EvPcUAAAAASUVORK5CYII%3D%22%29%20%21important%3B%0A%09-moz-image-region%3A%20auto%20%21important%3B%0A%7D%0Amenuitem%5Bdyn_id%3D%22_U_I_D_-exportButtonAsXML%22%5D%5Bdisabled%3D%22true%22%5D%20.menu-iconic-icon%2C%0Amenuitem%5Bdyn_id%3D%22_U_I_D_-installToPosition%22%5D%5Bdisabled%3D%22true%22%5D%20.menu-iconic-icon%2C%0Amenuitem%5Bdyn_id%3D%22_U_I_D_-buttonHelp%22%5D%5Bdisabled%3D%22true%22%5D%20.menu-iconic-icon%2C%0Amenuitem%5Bdyn_id%3D%22_U_I_D_-updateButton%22%5D%5Bdisabled%3D%22true%22%5D%20.menu-iconic-icon%2C%0Amenuitem%5Bdyn_id%3D%22_U_I_D_-toggleInitCode%22%5D%5B_checked%3D%22true%22%5D%5Bdisabled%3D%22true%22%5D%20.menu-iconic-icon%20%7B%0A%09opacity%3A%200.5%20%21important%3B%0A%7D%0A%26lt%3B%21--StyleSheet--%26gt%3B%0A%0A%26lt%3B%21--NewContextItems--%26gt%3B%26lt%3Bmenupopup%20id%3D%22_B_A_S_E_I_D_-newItemsMenupopup%22%0A%09%09%09%09%09%09%09%09%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%0A%09%09%09%09%09%09%09%09%20cb_id%3D%22_U_I_D_%22%26gt%3B%0A%26lt%3Bmenuseparator%20id%3D%22_U_I_D_-separatorForMenuGroups%22%0A%09%09%09%20%20%20cb_id%3D%22_U_I_D_%22%0A%09%09%09%20%20%20class%3D%22menuseparator-next-to-menugroup%22/%26gt%3B%0A%26lt%3Bdialogheader%20id%3D%22_B_A_S_E_I_D_-infoHeader%22%0A%09%09%20%20title%3D%22Button%20ID%20%23%22%0A%09%09%20%20tooltiptext%3D%22Click%20this%20header%20to%20copy%20this%20button%20full%20ID%20to%20the%20clipboard.%22%0A%09%09%20%20dyn_id%3D%22_U_I_D_-infoHeader%22%0A%09%09%20%20onclick%3D%22_T_H_A_T_.ContextFunctions.infoHeader%28custombuttons.popupNode%29%3B%22/%26gt%3B%0A%26lt%3Bmenugroup%20id%3D%22_B_A_S_E_I_D_-editButtonsGroup%22%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-editButton%22%0A%09%09%09%20%20label%3D%22Edit%20Button...%22%0A%09%09%09%20%20tooltiptext%3D%22Edit%20button.%22%0A%09%09%09%20%20oncommand%3D%22custombuttons.editButton%28custombuttons.popupNode%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-editInTab%22%0A%09%09%09%20%20label%3D%22Edit%20Button%20in%20Tab...%22%0A%09%09%09%20%20tooltiptext%3D%22Edit%20button%20in%20a%20new%20tab%20instead%20of%20a%20window.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.editInTab%28custombuttons.popupNode%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-toggleInitCode%22%0A%09%09%09%20%20label%3D%22Toggle%20initialization%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.toggleInitCode%28custombuttons.popupNode%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%22%0A%09%09%09%20%20dyn_id%3D%22_U_I_D_-toggleInitCode%22/%26gt%3B%0A%26lt%3B/menugroup%26gt%3B%0A%26lt%3Bmenugroup%20id%3D%22_B_A_S_E_I_D_-deleteButtonsGroup%22%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-deleteButton%22%0A%09%09%09%20%20label%3D%22Delete%20button...%22%0A%09%09%09%20%20tooltiptext%3D%22Delete%20button.%22%0A%09%09%09%20%20oncommand%3D%22custombuttons.removeButton%28custombuttons.popupNode%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-moveToPanelToolbar%22%0A%09%09%09%20%20label%3D%22Move%20to%20panel/toolbar%22%0A%09%09%09%20%20tooltiptext%3D%22Move%20buton%20to%20panel%20or%20to%20toolbar.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.moveToPanelToolbar%28custombuttons.popupNode%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%22%0A%09%09%09%20%20dyn_id%3D%22_U_I_D_-moveToPanelToolbar%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-removeToPalette%22%0A%09%09%09%20%20label%3D%22Remove%20To%20Pallete...%22%0A%09%09%09%20%20tooltiptext%3D%22Remove%20button%20to%20palette.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.removeToPalette%28custombuttons.popupNode%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%22/%26gt%3B%0A%26lt%3B/menugroup%26gt%3B%0A%26lt%3Bmenugroup%20id%3D%22_B_A_S_E_I_D_-copyButtonsGroup%22%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-copyButton%22%0A%09%09%09%20%20label%3D%22Copy%20button%20URI%22%0A%09%09%09%20%20tooltiptext%3D%22Copy%20button%20URI.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.copyButtons%28custombuttons.popupNode%2C%20%27URI%27%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-copyButtonAsBBCode%22%0A%09%09%09%20%20label%3D%22Copy%20button%20as%20BBCode%22%0A%09%09%09%20%20tooltiptext%3D%22Copy%20button%20as%20BBCode.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.copyButtons%28custombuttons.popupNode%2C%20%27BBCode%27%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-copyButtonAsHTML%22%0A%09%09%09%20%20label%3D%22Copy%20button%20as%20HTML%22%0A%09%09%09%20%20tooltiptext%3D%22Copy%20button%20as%20HTML.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.copyButtons%28custombuttons.popupNode%2C%20%27HTML%27%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-copyButtonImage%22%0A%09%09%09%20%20label%3D%22Copy%20button%20image%22%0A%09%09%09%20%20tooltiptext%3D%22Copy%20button%20image.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.copyButtons%28custombuttons.popupNode%2C%20%27Image%27%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%26lt%3B/menugroup%26gt%3B%0A%26lt%3Bmenugroup%20id%3D%22_B_A_S_E_I_D_-moveButtonsGroup%22%0A%09%09%20%20%20dyn_id%3D%22_U_I_D_-ifIsButtonForTBContext%22%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-moveToBeg%22%0A%09%09%09%20%20label%3D%22Move%20To%20Beginning%22%0A%09%09%09%20%20tooltiptext%3D%22Move%20button%20to%20the%20beginning%20of%20its%20toolbar.%22%0A%09%09%09%20%20closemenu%3D%22none%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.moveWithin%28custombuttons.popupNode%2C%200%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-moveToLeft%22%0A%09%09%09%20%20label%3D%22Move%20To%20Left%22%0A%09%09%09%20%20tooltiptext%3D%22Move%20button%20to%20the%20left.%22%0A%09%09%09%20%20closemenu%3D%22none%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.moveWithin%28custombuttons.popupNode%2C%20true%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-selectForMove%22%0A%09%09%09%20%20label%3D%22Select%20for%20move%22%0A%09%09%09%20%20tooltiptext%3D%22Select%20button%20for%20move.%22%0A%09%09%09%20%20onclick%3D%22_T_H_A_T_.ContextFunctions.move%28custombuttons.popupNode%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-moveToRight%22%0A%09%09%09%20%20label%3D%22Move%20To%20Right%22%0A%09%09%09%20%20tooltiptext%3D%22Move%20button%20to%20the%20right.%22%0A%09%09%09%20%20closemenu%3D%22none%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.moveWithin%28custombuttons.popupNode%2C%20false%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-moveToLast%22%0A%09%09%09%20%20label%3D%22Move%20To%20End%22%0A%09%09%09%20%20tooltiptext%3D%22Move%20button%20to%20the%20end%20of%20is%20toolbar.%22%0A%09%09%09%20%20closemenu%3D%22none%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.moveWithin%28custombuttons.popupNode%2C%20999%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%26lt%3B/menugroup%26gt%3B%0A%26lt%3Bmenugroup%20id%3D%22_B_A_S_E_I_D_-addInstallButtonsGroup%22%0A%09%09%20%20%20dyn_id%3D%22_U_I_D_-ifIsButtonForTBContext%22%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-installToLeft%22%0A%09%09%09%20%20label%3D%22Install%20Left%22%0A%09%09%09%20%20tooltiptext%3D%22Install%20button%20from%20clipboard%20and%20place%20it%20to%20the%20left%20of%20current%20button.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.addInstall%28custombuttons.popupNode%2C%20%27instL%27%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22%0A%09%09%09%20%20dyn_id%3D%22_U_I_D_-installToPosition%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-addToLeft%22%0A%09%09%09%20%20label%3D%22Add%20Left%22%0A%09%09%09%20%20tooltiptext%3D%22Add%20a%20new%20button%20placed%20to%20the%20left%20of%20current%20button.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.addInstall%28custombuttons.popupNode%2C%20%27addL%27%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-addNormal%22%0A%09%09%09%20%20label%3D%22Add%22%0A%09%09%09%20%20tooltiptext%3D%22Add%20new%20button.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.addInstall%28custombuttons.popupNode%2C%20%27add%27%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-addToRight%22%0A%09%09%09%20%20label%3D%22Add%20Right%22%0A%09%09%09%20%20tooltiptext%3D%22Add%20a%20new%20button%20placed%20to%20the%20right%20of%20current%20button.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.addInstall%28custombuttons.popupNode%2C%20%27addR%27%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-installToRight%22%0A%09%09%09%20%20label%3D%22Install%20Right%22%0A%09%09%09%20%20tooltiptext%3D%22Install%20button%20from%20clipboard%20and%20place%20it%20to%20the%20right%20of%20current%20button.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.addInstall%28custombuttons.popupNode%2C%20%27instR%27%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22%0A%09%09%09%20%20dyn_id%3D%22_U_I_D_-installToPosition%22/%26gt%3B%0A%26lt%3B/menugroup%26gt%3B%0A%26lt%3Bmenugroup%20id%3D%22_B_A_S_E_I_D_-otherActionsButtonsGroup%22%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-cloneButton%22%0A%09%09%09%20%20label%3D%22Clone%20Button%22%0A%09%09%09%20%20tooltiptext%3D%22Clone%20button.%22%0A%09%09%09%20%20closemenu%3D%22single%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20onclick%3D%22_T_H_A_T_.ContextFunctions.cloneButton%28event%2C%20custombuttons.popupNode%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-bookmarkButton%22%0A%09%09%09%20%20label%3D%22Bookmark%20button%22%0A%09%09%09%20%20tooltiptext%3D%22Bookmark%20button.%22%0A%09%09%09%20%20oncommand%3D%22custombuttons.bookmarkButton%28%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-buttonHelp%22%0A%09%09%09%20%20label%3D%22Button%20Help%22%0A%09%09%09%20%20tooltiptext%3D%22Button%20help.%22%0A%09%09%09%20%20oncommand%3D%22custombuttons.uChelpButton%28%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22%0A%09%09%09%20%20dyn_id%3D%22_U_I_D_-buttonHelp%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-updateButton%22%0A%09%09%09%20%20label%3D%22Update%20Button%22%0A%09%09%09%20%20tooltiptext%3D%22Update%20button.%22%0A%09%09%09%20%20oncommand%3D%22custombuttons.updateButton%28%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22%0A%09%09%09%20%20dyn_id%3D%22_U_I_D_-updateButton%22/%26gt%3B%0A%26lt%3B/menugroup%26gt%3B%0A%26lt%3Bmenugroup%20id%3D%22_B_A_S_E_I_D_-exportImportButtons%22%0A%09%09%20%20%20dyn_id%3D%22_U_I_D_-ifIsButtonForTBContext%22%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-importButtonToLeft%22%0A%09%09%09%20%20label%3D%22Import%20XML%20To%20left%22%0A%09%09%09%20%20tooltiptext%3D%22Import%20an%20XML%20button%20file%20and%20install%20it%20to%20the%20left%20of%20the%20current%20button.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.exportImportButtons.importXML%28custombuttons.popupNode%2C%20false%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-importFromOverlayToLeft%22%0A%09%09%09%20%20label%3D%22Import%20From%20Overlay%20to%20left%22%0A%09%09%09%20%20tooltiptext%3D%22Import%20button%20from%20an%20overlay%20file%20and%20intall%20it%20to%20the%20left%20of%20the%20current%20button.%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20onclick%3D%22_T_H_A_T_.ContextFunctions.exportImportButtons.importFromOverlay%28custombuttons.popupNode%2C%20false%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-exportButtonAsXML%22%0A%09%09%09%20%20label%3D%22Export%20as%20XML%22%0A%09%09%09%20%20tooltiptext%3D%22Export%20button%20as%20an%20XML%20file.%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20onclick%3D%22_T_H_A_T_.ContextFunctions.exportImportButtons.exportXML%28custombuttons.popupNode%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22%0A%09%09%09%20%20dyn_id%3D%22_U_I_D_-exportButtonAsXML%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-importFromOverlayToRight%22%0A%09%09%09%20%20label%3D%22Import%20From%20Overlay%20to%20right%22%0A%09%09%09%20%20tooltiptext%3D%22Import%20button%20from%20an%20overlay%20file%20and%20intall%20it%20to%20the%20right%20of%20the%20current%20button.%22%0A%09%09%09%20%20oncommand%3D%22event.stopPropagation%28%29%3B%22%0A%09%09%09%20%20onclick%3D%22_T_H_A_T_.ContextFunctions.exportImportButtons.importFromOverlay%28custombuttons.popupNode%2C%20true%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%09%26lt%3Bmenuitem%20id%3D%22_B_A_S_E_I_D_-importButtonToRight%22%0A%09%09%09%20%20label%3D%22Import%20XML%20To%20Right%22%0A%09%09%09%20%20tooltiptext%3D%22Import%20an%20XML%20button%20file%20and%20install%20it%20to%20the%20right%20of%20the%20current%20button.%22%0A%09%09%09%20%20oncommand%3D%22_T_H_A_T_.ContextFunctions.exportImportButtons.importXML%28custombuttons.popupNode%2C%20true%29%3B%22%0A%09%09%09%20%20class%3D%22menuitem-iconic%20marked-for-inversion%22/%26gt%3B%0A%26lt%3B/menugroup%26gt%3B%0A%26lt%3B/menupopup%26gt%3B%0A%26lt%3B%21--NewContextItems--%26gt%3B%0A%0A%26lt%3B%21--StyleForXMLFiles--%26gt%3Bbody%7Bfont-size%3Amedium%3Bmargin%3A0%7Dbody%2Ccode%3Abefore%2Chelp%3Abefore%2Cinitcode%3Abefore%7Bfont-family%3A%22Verdana%22%2Csans-serif%7D%23wrapper%7Bposition%3Afixed%3Btop%3A1em%3Bright%3A1em%3Bmax-width%3A15%25%3Btext-align%3Acenter%7D%23button%7Bbackground-color%3A%23299a0b%3Bborder%3A1px%20solid%20%233a7404%3Bborder-radius%3A.5em%3Bpadding%3A0%3Bmargin-bottom%3A1em%3Bbox-shadow%3A1px%202px%203px%20rgba%280%2C0%2C0%2C.25%29%7D%23button%20a%7Bcolor%3A%23f0f0f0%3Bfont-weight%3A700%3Btext-shadow%3A-.5pt%20-.5px%20.5pt%20rgba%280%2C0%2C0%2C1%29%3Bpadding%3A.8em%3Btext-decoration%3Anone%7D%3A-moz-any-link%3Afocus%7Bcolor%3Agrey%3Boutline-color%3Atransparent%3Btext-decoration%3Anone%7D%23button%20a%2Ccode%2Ccode%3Abefore%2Cinitcode%2Cinitcode%3Abefore%2Chelp%2Chelp%3Abefore%7Bdisplay%3Ablock%7D%23credits%7Bposition%3Afixed%3Bbottom%3A1em%3Bright%3A1em%3Bfont-size%3Asmall%7D%23about%7Bfont-size%3Asmall%7Dcustombutton%7Bbackground%3Aurl%28data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABAElEQVQ4jW2TQXLFMAhDff+b2vEHYw5AF38eVTNdZAIxCEkmw31VptU5T7mvOuepc56K2B2f85TZrEwr99VxptUwm2U2695PZVrH937KfZX76txsVsTus0yrEbEr0/4F4AyQc56eDMiI2F0IbYoj9h9ZSCV2XzXUA1BVL8BvBvSMiN20zWY38VZ5gDEkYtfAYTRToA3qiQJk2hcA7W8gpaxG0nPvp4aiQ5UCzOV2GKAgLUEfpsGCfaBR92TonapmdCoAjHTIgLa6/14gbgow8oj9uwe6SMQ0qTz9P9oDZOgCkfMNJnqWaV8P3ouDRorUXEA4H1wbtMmVjcrQ7TSb9QMtXcwa4wpbXgAAAABJRU5ErkJggg%3D%3D%29%20fixed%20%23f6f6f1%3Bmargin%3A1em%7Ddate%2Cimage%2Cmode%2Caccelkey%7Bdisplay%3Anone%7Dname%7Bfont-weight%3A700%3Bfont-size%3Ax-large%7Dcode%3Abefore%2Chelp%3Abefore%2Cinitcode%3Abefore%7Bfont-weight%3A700%3Bfont-size%3Alarge%3Bmargin%3A0%200%201em%3Bpadding%3A.5em%7Dcode%3Abefore%7Bcontent%3A%22Code%20Tab%22%7Dhelp%3Abefore%7Bcontent%3A%22Help%20Tab%22%7Dinitcode%3Abefore%7Bcontent%3A%22Initialization%20Code%20Tab%22%7Dcode%2Cinitcode%2Chelp%7Bbackground-color%3A%23fcfcfc%3Bfont-size%3A.875em%3Bfont-family%3AConsolas%2C%22Bitstream%20Vera%20Sans%20Mono%22%2C%22Courier%20New%22%2CCourier%2Cmonospace%21important%3Bmargin%3A1em%202em%201em%200%20%21important%3Bpadding%3A1em%3Btext-align%3Aleft%3Bbox-shadow%3A2px%202px%200%20rgba%28170%2C160%2C130%2C0.5%29%2C4px%204px%200%20rgba%28200%2C190%2C165%2C0.5%29%3Bmax-width%3A80%25%3Bmin-width%3A80%25%3Bwhite-space%3Apre-wrap%3Bword-wrap%3Abreak-word%7D%26lt%3B%21--StyleForXMLFiles--%26gt%3B%0A%26lt%3B%21--AlertImg--%26gt%3Bdata%3Aimage/png%3Bbase64%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%26lt%3B%21--AlertImg--%26gt%3B%0A%26lt%3B%21--WarningImg--%26gt%3Bdata%3Aimage/png%3Bbase64%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%3D%26lt%3B%21--WarningImg--%26gt%3B%0A%26lt%3B%21--ErrorImg--%26gt%3Bdata%3Aimage/png%3Bbase64%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%3D%3D%26lt%3B%21--ErrorImg--%26gt%3B%0A%26lt%3B%21--ImportFromOverlayWindow--%26gt%3B%26lt%3B%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin%22%20type%3D%22text/css%22%3F%26gt%3B%0A%26lt%3B%3Fxml-stylesheet%20href%3D%22data%3Atext/css%3Bcharset%3Dutf-8%2C%0Atoolbarbutton%20%26gt%3B%20.toolbarbutton-text%20%7B%0A%09text-align%3A%20left%20%21important%3B%0A%7D%0Atoolbarbutton%20.toolbarbutton-icon%20%7B%0A%09width%3A%2016px%20%21important%3B%0A%09max-width%3A%2016px%20%21important%3B%0A%09height%3A%2016px%20%21important%3B%0A%09max-height%3A%2016px%20%21important%3B%0A%7D%0A%22%20type%3D%22text/css%22%20%3F%26gt%3B%0A%26lt%3Bwindow%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%0A%09%20%20%20%20orient%3D%22vertical%22%0A%09%20%20%20%20windowtype%3D%22overlay%3Aimporter%22%0A%09%20%20%20%20onload%3D%22gOverlayImporter.onLoad%28%29%3B%22%26gt%3B%0A%26lt%3Bscript%26gt%3B%26lt%3B%21%5BCDATA%5B%0Avar%20fromButton%20%3D%20_btn_opener_%3B%0A%0Afunction%20%24%28id%29%20document.getElementById%28id%29%3B%0Avar%20gOverlayImporter%20%3D%20%7B%0A%09MaxColumnWidth%3A%20180%2C%0A%09_btnsPerCol%3A%200%2C%0A%0A%09onLoad%3A%20function%28%29%20%7B%0A%09%09gOverlayImporter.populateTabs%28%29%3B%0A%09%7D%2C%0A%0A%09populateTabs%3A%20function%28%29%20%7B%0A%09%09var%20palettes%20%3D%20window.allUsedPalettes%3B%0A%09%09Array.prototype.slice.call%28palettes%29.forEach%28function%28aPal%29%20%7B%0A%09%09%09%24%28aPal.id%20+%20%22_tab%22%29.hidden%20%3D%20false%3B%0A%09%09%09gOverlayImporter.appendToTab%28aPal%29%3B%0A%09%09%7D%29%3B%0A%09%7D%2C%0A%0A%09appendToTab%3A%20function%28aPal%29%20%7B%0A%09%09var%20btns1%20%3D%20aPal.getElementsByTagName%28%22toolbarbutton%22%29%3B%0A%09%09var%20btns2%20%3D%20%5B%5D%3B%0A%09%09for%20%28let%20a%20%3D%20btns1.length%20-%201%3B%20a%20%26gt%3B%3D%200%3B%20a--%29%20%7B%0A%09%09%09btns2.push%28%5Bbtns1%5Ba%5D.getAttribute%28%22label%22%29%20%7C%7C%20btns1%5Ba%5D.getAttribute%28%22id%22%29%2C%0A%09%09%09%09btns1%5Ba%5D.getAttribute%28%22image%22%29%20%7C%7C%20fromButton.CBCME.getImg%28btns1%5Ba%5D.getAttribute%28%22cb-stdicon%22%29%29%2C%0A%09%09%09%09btns1%5Ba%5D.getAttribute%28%22tooltiptext%22%29%2C%0A%09%09%09%09btns1%5Ba%5D%0A%09%09%09%5D%29%3B%0A%09%09%7D%0A%09%09btns2.sort%28function%28a%2C%20b%29%20%7B%0A%09%09%09return%20a%5B0%5D.toLowerCase%28%29%20%26gt%3B%20b%5B0%5D.toLowerCase%28%29%3B%0A%09%09%7D%29%3B%0A%09%09var%20btnPerRow%20%3D%205%3B%0A%09%09var%20breakPoint%20%3D%200%3B%0A%09%09var%20btnCol%20%3D%20%5B%5D%3B%0A%09%09var%20hbox%20%3D%20%24%28aPal.id%20+%20%22_tabpanel%22%29.appendChild%28fromButton.CBCME.%24CNS%28%22hbox%22%29%29%3B%0A%09%09var%20createCol%20%3D%20function%28aArr%29%20%7B%0A%09%09%09let%20vbox%20%3D%20hbox.appendChild%28fromButton.CBCME.%24CNS%28%22vbox%22%2C%20%7B%0A%09%09%09%09maxwidth%3A%20%28gOverlayImporter.MaxColumnWidth%20%3D%3D%3D%200%29%20%3F%20%22%22%20%3A%20gOverlayImporter.MaxColumnWidth%2C%0A%09%09%09%09oncommand%3A%20%22event.target.checked%20%3D%20%21event.target.checked%3BgOverlayImporter.HandleItems%28event.target%29%3Bevent.stopPropagation%28%29%3B%22%2C%0A%09%09%09%7D%29%29%3B%0A%09%09%09var%20i%20%3D%200%2C%0A%09%09%09%09iLen%20%3D%20aArr.length%3B%0A%09%09%09for%20%28%3B%20i%20%26lt%3B%20iLen%3B%20i++%29%20%7B%0A%09%09%09%09let%20btn%20%3D%20vbox.appendChild%28fromButton.CBCME.%24CNS%28%22toolbarbutton%22%2C%20%7B%0A%09%09%09%09%09label%3A%20aArr%5Bi%5D%5B0%5D%2C%0A%09%09%09%09%09type%3A%20%22checkbox%22%2C%0A%09%09%09%09%09checked%3A%20false%2C%0A%09%09%09%09%09autocheck%3A%20false%2C%0A%09%09%09%09%09image%3A%20aArr%5Bi%5D%5B1%5D%2C%0A%09%09%09%09%09crop%3A%20%22end%22%2C%0A%09%09%09%09%09tooltiptext%3A%20aArr%5Bi%5D%5B2%5D%2C%0A%09%09%09%09%7D%29%29%3B%0A%09%09%09%09btn._btn%20%3D%20aArr%5Bi%5D%5B3%5D%3B%0A%09%09%09%09vbox.appendChild%28btn%29%3B%0A%09%09%09%7D%0A%09%09%7D%3B%0A%09%09gOverlayImporter._btnsPerCol%20%3D%20parseInt%28%28btns2.length%20/%20btnPerRow%29%20+%201%2C%2010%29%3B%0A%09%09var%20b%20%3D%200%2C%0A%09%09%09tLen%20%3D%20btns2.length%3B%0A%09%09for%20%28%3B%20b%20%26lt%3B%20tLen%3B%20b++%29%20%7B%0A%09%09%09breakPoint++%3B%0A%09%09%09btnCol.push%28%5Bbtns2%5Bb%5D%5B0%5D%2C%0A%09%09%09%09btns2%5Bb%5D%5B1%5D%2C%0A%09%09%09%09btns2%5Bb%5D%5B2%5D%2C%0A%09%09%09%09btns2%5Bb%5D%5B3%5D%0A%09%09%09%5D%29%3B%0A%09%09%09if%20%28%28btnCol.length%20%3D%3D%3D%20gOverlayImporter._btnsPerCol%29%20%7C%7C%20%28b%20+%201%29%20%3D%3D%3D%20btns2.length%29%20%7B%0A%09%09%09%09breakPoint%20%3D%200%3B%0A%09%09%09%09createCol%28btnCol%29%3B%0A%09%09%09%09btnCol%20%3D%20%5B%5D%3B%0A%09%09%09%09continue%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09HandleItems%3A%20function%28aEl%29%20%7B%0A%09%09if%20%28aEl.checked%29%0A%09%09%09aEl.setAttribute%28%22_checked%22%2C%20%22true%22%29%3B%0A%09%09else%0A%09%09%09aEl.removeAttribute%28%22_checked%22%29%3B%0A%09%7D%2C%0A%7D%3B%0A%5D%5D%26gt%3B%26lt%3B/script%26gt%3B%0A%09%26lt%3Btabbox%20flex%3D%221%22%26gt%3B%0A%09%09%26lt%3Btabs%26gt%3B%0A%09%09%09%26lt%3Btab%20id%3D%22BrowserToolbarPalette_tab%22%20label%3D%22%20BrowserToolbarPalette%20%22%20hidden%3D%22true%22%20/%26gt%3B%0A%09%09%09%26lt%3Btab%20id%3D%22MailToolbarPalette_tab%22%20label%3D%22%20MailToolbarPalette%20%22%20hidden%3D%22true%22%20/%26gt%3B%0A%09%09%09%26lt%3Btab%20id%3D%22MsgComposeToolbarPalette_tab%22%20label%3D%22%20MsgComposeToolbarPalette%20%22%20hidden%3D%22true%22%20/%26gt%3B%0A%09%09%09%26lt%3Btab%20id%3D%22calendarToolbarPalette_tab%22%20label%3D%22%20calendarToolbarPalette%20%22%20hidden%3D%22true%22%20/%26gt%3B%0A%09%09%09%26lt%3Btab%20id%3D%22NvuToolbarPalette_tab%22%20label%3D%22%20NvuToolbarPalette%20%22%20hidden%3D%22true%22%20/%26gt%3B%0A%09%09%26lt%3B/tabs%26gt%3B%0A%09%09%26lt%3Btabpanels%20flex%3D%221%22%26gt%3B%0A%09%09%09%26lt%3Btabpanel%20id%3D%22BrowserToolbarPalette_tabpanel%22/%26gt%3B%0A%09%09%09%26lt%3Btabpanel%20id%3D%22MailToolbarPalette_tabpanel%22/%26gt%3B%0A%09%09%09%26lt%3Btabpanel%20id%3D%22MsgComposeToolbarPalette_tabpanel%22/%26gt%3B%0A%09%09%09%26lt%3Btabpanel%20id%3D%22calendarToolbarPalette_tabpanel%22/%26gt%3B%0A%09%09%09%26lt%3Btabpanel%20id%3D%22NvuToolbarPalette_tabpanel%22/%26gt%3B%0A%09%09%26lt%3B/tabpanels%26gt%3B%0A%09%26lt%3B/tabbox%26gt%3B%0A%09%26lt%3Bhbox%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%09%26lt%3Bbutton%20label%3D%22Install%20all%20selected%20buttons%22%20oncommand%3D%22fromButton.CBCME.ContextFunctions.exportImportButtons.installFromOverlay%28document.getElementsByAttribute%28%27_checked%27%2C%20%27*%27%29%2C%20window.anchor%2C%20window.toRight%29%3Bclose%28%29%3B%22/%26gt%3B%0A%09%09%26lt%3Bbutton%20label%3D%22Cancel%22%20oncommand%3D%22close%28%29%3B%22/%26gt%3B%0A%09%09%26lt%3Bspacer%20flex%3D%221%22/%26gt%3B%0A%09%26lt%3B/hbox%26gt%3B%0A%26lt%3B/window%26gt%3B%26lt%3B%21--ImportFromOverlayWindow--%26gt%3B%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" rel="nofollow" title="Install CB Context Menu Extended">
				<![CDATA[Install this button]]>
			</html:a>
		</html:div>
		<html:a id="about" href="https://addons.mozilla.org/addon/custom-buttons/">
			<![CDATA[About CustomButtons]]>
		</html:a>
		<html:div id="credits">
			<html:a href="http://custombuttons.sourceforge.net/forum/viewtopic.php?t=3599">
				<![CDATA[XML created with]]>
				<html:br/>
				<![CDATA[CB Context Menu Extended]]>
			</html:a>
		</html:div>
	</html:div>
</html:body>
  <name>CB Context Menu Extended</name>
  <image><![CDATA[data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABR0lEQVQ4jbWSMS9DURTH/2lYRBCxChFhkMbQKPXuvSbUo/feQWzWRkw+gESFgcFjZbGYROv13jvYdGpLGt+BzUYi2i6eQdq8xmvyCP/kN538Ts659wD/kakFdzAWO+0KLYxOX/Q0BLJsRpgwj0SqdQDIVLyBIA4qXm+zAZF6j0pdICu5SSb1E+N6u1E7ua97QTilasE3Q6aDSZNlUn/4ZQBwim/JIA6L7/GWNWLpSicVevUHT9U2ESL0mZVSa6ENItQm5XoDQIRKc86EephYvOwHAKdcc4M4vqvuNxskbDfKhHomXJX8MgAclWtXQTjl6m7LFAnbjVJhbvzyr0NTam4meT0cWojbubFZOzsEABbPz1OhX6yUWgJCfiOVauvr+kyaSf1q8Txv1EIeEkC43mHC1P0yAGRuvb42dH9bxUrmx0Pv/Vf5BN2P64WRvFlYAAAAAElFTkSuQmCC]]></image>
  <mode>0</mode>
  <initcode><![CDATA[var $ = this.CBCME = {
	_UID: "__cb_context_menu_extended_" + self.id.slice(20),
	_nsIFile: Components.Constructor("@mozilla.org/file/local;1", "nsIFile", "initWithPath"),
	_ID: "custombuttons-contextpopup",
	_moveTimer: 0,
	_removeTimer: 0,
	_showCursorFeedback: true,
	_cbs: custombuttons.cbService,
	_normalInstall: null,
	_toRight: null,
	_moveButtonID: null,
	_startURI: /custombutton\x3A\x2F\x2F/,

	get mainPop() {
		return $.$($._ID);
	},

	get subPop() {
		return $.$($._ID + "-sub");
	},

	_getExpStorage: function(aFromImport) {
		let d;
		try {
			d = new $._nsIFile($._zLastUsedLocation);
			if (aFromImport && d.exists() && d.isDirectory())
				return d;
			else
				d = new $._nsIFile($._zImpExpCustomLocation);
			if (!d.exists() || !d.isDirectory())
				throw new Error("");
		} catch (aErr) {
			d = Services.dirsvc.get("Home", Ci.nsIFile);
			d.append("CB Context Menu Extended");
			if (!d.exists() || !d.isDirectory())
				d.create(Ci.nsIFile.DIRECTORY_TYPE, 0x1FF);
		}
		return d;
	},

	alertCallback: {
		observe: function(aSubject, aTopic, aData) {
			if (aTopic !== "alertclickcallback")
				return;
			$._getExpStorage().reveal();
		}
	},

	Init: function() {
		if (!("setCursor" in window))
			$._showCursorFeedback = false;

		if (!("Services" in window))
			Cu.import("resource://gre/modules/Services.jsm");

		self.onclick = function(aE) {
			if (aE.button === 0 && $.hasMod(aE, 0))
				$.TogglePopup();
		};

		$.InitPrefs();

		if (!($._UID in window)) {
			window[$._UID] = {
				Initialized: false,
				EditCBInTab: null,
				Listener1: false,
				Observer: false,
				TCIDs: false,
				StyleSheet: false,
			};
		}

		if (window[$._UID]["Initialized"]) // SeaMonkey nightmare!!! ¬¬
			return true;

		for (let p in $.DefPrefs) {
			if ($.DefPrefs.hasOwnProperty(p))
				$["_" + p] = $.gPref(p);
		}

		window[$._UID]["TCIDs"] = $.HandleToolbarsForDragAndDrop(null, true); // Double purpose. Register listeners and get toolbars context IDs.
		$.CreateNewItems();
		$.CreateOptionsMenu();
		$.CSSLoader();
		$.HandleInversion();
		$.HandleCBContext();
		$.HandleTBContext();
		$.InsertNewItems(true);

		if (!(window[$._UID]["Initialized"])) {
			window[$._UID]["Initialized"] = true;
			$.HandlePrefListener();
		}

		if (!window[$._UID]["Observer"]) {
			window[$._UID]["Observer"] = true;

			let AddInstallButtonsObserver = {
				observe: function(aButton, topic, data) {
					if ($._normalInstall)
						return true;
					let anchorEl = $.$($._zAnchor)
					if (!anchorEl || (anchorEl.tagName && anchorEl.tagName !== "toolbarbutton"))
						return true;
					$.MoveButton(aButton, $._toRight ? anchorEl.nextSibling : anchorEl);
				}
			};

			let winID = $._cbs.getWindowId(document.documentURI);
			let notPrefix = $._cbs.getNotificationPrefix(winID);
			Services.obs.addObserver(AddInstallButtonsObserver, notPrefix + "installButton", false);

			addDestructor(function(aReason) {
				if (aReason === "delete" || aReason === "update") {
					try {
						Services.obs.removeObserver(AddInstallButtonsObserver, notPrefix + "installButton", false);
					} finally {
						window[$._UID]["Observer"] = false;
					}
				}
			});
		}

		addDestructor(function(aReason) {
			if (aReason === "update" || aReason === "delete") {
				$.styleSheet(window[$._UID]["StyleSheet"], true);
				let selfEls = document.getElementsByAttribute("cb_id", $._UID);
				Array.prototype.slice.call(selfEls).forEach(function(aEl) {
					aEl && aEl.parentNode.removeChild(aEl);
				});
				$.RemoveNewItems();
				$.HandlePrefListener(true);
				$.HandleToolbarsForDragAndDrop(true);
				window[$._UID]["Initialized"] = false;
				window[$._UID]["StyleSheet"] = false;
			}
			if (aReason === "delete") {
				$.HandleCBContext(true);
				$.HandleTBContext(true);
				(Services.prefs.getBranch($.Branch)).deleteBranch("");
				Services.prefs.savePrefFile(null);
				delete window[$._UID];
			}
		});
	},

	HandleToolbarsForDragAndDrop: function(aRem, aReturnContexts) {
		let tNodes;
		if ("CustomizableUI" in window)
			tNodes = Array.slice(document.getElementsByClassName("customization-target"));
		else {
			tNodes = Array.slice(gNavToolbox.childNodes);
			tNodes = tNodes.concat(gNavToolbox.externalToolbars);
			tNodes = tNodes.filter(node => node.tagName === "toolbar");
		}
		let dropEvts = ["drop", "dragover", "dragenter"];
		for (let i = tNodes.length - 1; i >= 0; i--) {
			dropEvts.forEach(function(aLi) {
				tNodes[i].removeEventListener(aLi, $.DragAndDropHandler[aLi], false);
			});
			if (aRem)
				continue;
			dropEvts.forEach(function(aLi) {
				tNodes[i].addEventListener(aLi, $.DragAndDropHandler[aLi], false);
			});
		}
		if (aReturnContexts) {
			let ctxIDs = [];
			let tBars = tNodes.filter(node => node.hasAttribute("context"));
			for (let i = tBars.length - 1; i >= 0; i--) {
				let id = tBars[i].getAttribute("context");
				(ctxIDs.indexOf(id) === -1) && ctxIDs.push(id);
			}
			return ctxIDs;
		}
	},

	_allowDrop: null,
	RequiredMods: function(aE) {
		let useCtrlKey = $._zDragAndDropControlKey,
			useAltKey = $._zDragAndDropAltKey;
		if (aE.ctrlKey && aE.altKey && (!useCtrlKey || !useAltKey))
			return false;
		// XOR http://www.howtocreate.co.uk/xor.html
		if (aE.ctrlKey ? !useCtrlKey : useCtrlKey)
			return false;
		if (aE.altKey ? !useAltKey : useAltKey)
			return false;
		return true;
	},

	DragAndDropHandler: {
		dragenter: function(aE) {
			$._allowDrop = $.RequiredMods(aE);
			aE.stopPropagation();
		},

		dragover: function(aE) {
			aE.preventDefault();
			$._allowDrop = $.RequiredMods(aE);
			aE.stopPropagation();
		},

		drop: function(aE) {
			var dt = aE.dataTransfer;
			if (!$._allowDrop)
				return true;

			var URI = dt.getData("text/x-moz-url-data").trim();
			if (!$._startURI.test(URI))
				URI = dt.getData("text/plain").trim();
			if (!$._startURI.test(URI))
				URI = false;
			let files = dt.files;
			if (!URI && files && files.length > 0) {
				URI = [];
				for (let f = files.length - 1; f >= 0; f--) {
					if (files[f].type === "text/xml") {
						let xmlData = $.readFile(files[f].mozFullPath); // OS.File.read sucks!!!! It's sloooow as hell inside loops/forEach!!!
						if (!xmlData)
							continue;
						let xmlDOM;
						try {
							xmlDOM = $.stringToDOM(xmlData).documentElement;
						} catch (aErr) {}
						if (!xmlDOM)
							continue;
						var cbNS = "http://xsms.nm.ru/custombuttons/";
						if (xmlDOM.localName === "custombutton" &&
							(xmlDOM.getAttribute("xmlns:cb") === cbNS || xmlDOM.getAttribute("xmlns") === cbNS)) {
							URI.push("custombutton:\x2F\x2F" + escape(xmlData));
						} else {
							$.notifyme(self.name,
								"Import Fail!!!\nNot a valid Custom Buttons XML file!!!",
								$.getHelp("ErrorImg"),
								null);
						}
					}
				}
			}
			setTimeout(function() {
				if (!URI)
					return true;
				var tgt = aE.target;
				var anchor = null,
					lastTBChild;
				if (tgt && tgt.tagName && tgt.tagName === "toolbarbutton")
					anchor = tgt;
				$._normalInstall = false;
				$._toRight = false;
				if (!!anchor)
					$._zAnchor = anchor.id || anchor.getAttribute("id") || "";
				else {
					lastTBChild = this.lastChild;
					while (!lastTBChild.hasAttribute("id")) {
						try {
							lastTBChild = this.lastChild.previousSibling;
						} catch (aErr) {
							lastTBChild = null;
						}
					}
					if (lastTBChild)
						$._zAnchor = lastTBChild.id || lastTBChild.getAttribute("id") || "";
				}
				if (!$._zAnchor)
					$._normalInstall = true;
				if (Array.isArray(URI)) {
					for (let i = URI.length - 1; i >= 0; i--) {
						$._cbs.installButton($._cbs.parseButtonURI(URI[i]));
					}
				} else
					$._cbs.installButton($._cbs.parseButtonURI(URI));
			}, 1000);
			aE.stopPropagation();
		}
	},

	TogglePopup: function() {
		let pop = $.$($._UID + "_optionsPopup");
		if (pop) {
			if (pop.state === "open")
				pop.hidePopup();
			else
				pop.openPopup(self, "after_start", 0, 0, false, false, null);
		}
	},

	HandleAllSeps: function(aSeps) {
		var seps = aSeps;
		if (seps.length !== 0) {
			let v = 0,
				vLen = seps.length;
			for (; v < vLen; v++) {
				let sep = seps[v];
				let prev = sep.previousSibling || sep,
					next = sep.nextSibling || sep;
				while (prev && (prev.collapsed || prev.hidden)) {
					prev = prev.previousSibling;
				}
				while (next && (next.collapsed || next.hidden)) {
					next = next.nextSibling;
				}
				if ((prev && prev.tagName === "menuseparator") || (next && next.tagName === "menuseparator"))
					sep.collapsed = true;
				else
					sep.collapsed = false;
				if ((prev && prev.tagName === "menugroup") && (next && next.tagName === "menugroup"))
					sep.collapsed = true;
				else
					sep.collapsed = false;
			}
			let c = 0,
				cLen = seps.length;
			for (; c < cLen; c++) {
				let sep = seps[c];
				let prev = sep.previousSibling || sep,
					next = sep.nextSibling || sep;
				while (prev && (prev.collapsed || prev.hidden)) {
					prev = prev.previousSibling;
				}
				while (next && (next.collapsed || next.hidden)) {
					next = next.nextSibling;
				}
				if (prev && prev.tagName === "menugroup")
					sep.classList.add("menuseparator-next-to-menugroup", "bellow");
				if (next && next.tagName === "menugroup")
					sep.classList.add("menuseparator-next-to-menugroup", "above");
				if (!(prev && prev.tagName === "menugroup") && !(next && next.tagName === "menugroup"))
					sep.classList.remove("menuseparator-next-to-menugroup", "bellow", "above");
			}
		}
	},

	HandleMGSeps: function(aMPop, aMGs) {
		var pop;
		if (aMGs.length !== 0) {
			for (var i = aMGs.length - 1; i >= 0; i--) {
				let aMG = aMGs[i];
				pop = aMG.parentNode;
				let prev = aMG.previousSibling || aMG,
					next = aMG.nextSibling || aMG;
				(aMG === pop.firstChild) && (prev = false);
				(aMG === pop.lastChild) && (next = false);
				while (prev && (prev.collapsed || prev.hidden)) {
					prev = prev.previousSibling;
				}
				if (prev && prev.tagName && prev.tagName !== "menuseparator" && prev.tagName !== "menugroup")
					$._ANI(pop, $.$($._UID + "-separatorForMenuGroups"), aMG.id || aMG.getAttribute("id"), null, false, true);
				while (next && (next.collapsed || next.hidden)) {
					next = next.nextSibling;
				}
				if (next && next.tagName && next.tagName !== "menuseparator" && next.tagName !== "menugroup")
					$._ANI(pop, $.$($._UID + "-separatorForMenuGroups"), aMG.id || aMG.getAttribute("id"), null, true, true);
			}
		}
		$.HandleAllSeps(aMPop.getElementsByTagName("menuseparator"));
	},

	HandleInversion: function() {
		let mPop = $.$($._ID + $._UID + "-newItemsMenupopup");
		let allBtnsToInvert = mPop.getElementsByClassName("marked-for-inversion");
		var i = 0,
			iLen = allBtnsToInvert.length;
		for (; i < iLen; i++) {
			if ($._zInvertIconsColor)
				allBtnsToInvert[i].classList.add("inverted-color-for-this-image");
			else
				allBtnsToInvert[i].classList.remove("inverted-color-for-this-image");
		}
	},

	HandleTBContext: function(aRem) {
		if (!$._zMoveGMIInTC &&
			!$._zAddGMIInTC &&
			!$._zXMLExpImpGMIInTC &&
			!aRem) {
			return true;
		}
		let popShowing = function(aE) {
			var mPop = aE.target;
			if (mPop.localName !== "menupopup" || !mPop.id || window[$._UID]["TCIDs"].indexOf(mPop.id) === -1)
				return true;
			let isBtn = mPop.triggerNode && mPop.triggerNode.tagName && mPop.triggerNode.tagName === "toolbarbutton";
			// Hide default menuitems depending on which menu groups are enabled.
			let addLabel = $.$("custombuttons-contextpopup-addnewbutton").getAttribute("label");
			Array.prototype.slice.call(mPop.getElementsByTagName("menuitem")).forEach(function(aMi) {
				if (aMi.label && addLabel && aMi.label == addLabel)
					aMi.collapsed = $._zAddGMIInTC;
			});
			// Non-Custom Buttons can't be exported. Duh!
			Array.prototype.slice.call(mPop.getElementsByAttribute("dyn_id", $._UID + "-exportButtonAsXML")).forEach(function(aEl) {
				aEl && aEl.setAttribute("disabled", "true");
			});
			// Disable "Install to position" buttons when the clipboard doesn't contain a Custom Button URI.
			Array.prototype.slice.call(mPop.getElementsByAttribute("dyn_id", $._UID + "-installToPosition")).forEach(function(aEl) {
				if ($._startURI.test(gClipboard.read()))
					aEl && aEl.removeAttribute("disabled");
				else
					aEl && aEl.setAttribute("disabled", "true");
			});
			Array.prototype.slice.call(mPop.getElementsByAttribute("dyn_id", $._UID + "-ifIsButtonForTBContext")).forEach(function(aEl) {
				aEl && (aEl.collapsed = !isBtn);
			});
			$.HandleAllSeps(mPop.getElementsByTagName("menuseparator"));
			aE.stopPropagation();
		};
		removeEventListener("popupshowing", popShowing, false);
		if (aRem)
			return true;
		addEventListener("popupshowing", popShowing, false);
	},

	HandleCBContext: function(aRem) {
		let popShowing = function(aE) {
			var mPop = aE.target;
			if (mPop.localName !== "menupopup" || !mPop.id || !/^custombuttons-contextpopup/.test(mPop.id))
				return true;
			var btn;
			try { // DO NOT USE custombuttons.popupNode!!! ¬¬
				if (document.popupNode)
					btn = document.popupNode;
				else if (mPop.triggerNode)
					btn = mPop.triggerNode;
				else
					btn = null;
			} catch (aErr) {}
			if (!btn)
				return true;
			if ($._zInfoHeader) {
				// Set "Info Header" ID.
				Array.prototype.slice.call(mPop.getElementsByAttribute("dyn_id", $._UID + "-infoHeader")).forEach(function(aEl) {
					aEl && aEl.setAttribute("description", btn.id.match(/\d+/));
				});
			}
			if ($._zToggleInitMI) {
				// Set "Toggle init. code" state
				Array.prototype.slice.call(mPop.getElementsByAttribute("dyn_id", $._UID + "-toggleInitCode")).forEach(function(aEl) {
					if (!aEl)
						return true;
					let initCode = (btn && btn.cbInitCode) || "",
						tt = "Toggle initialization code.";
					if (/^\n*return(?:;|\s*\n)/.test(initCode)) {
						aEl.removeAttribute("_checked");
						aEl.setAttribute("tooltiptext", tt + "\n\nInitialization code of this button is DISABLED.");
					} else {
						aEl.setAttribute("_checked", "true");
						aEl.setAttribute("tooltiptext", tt + "\n\nInitialization code of this button is ENABLED.");
					}
					if (/^\s*(?:\/\*Initialization Code\*\/\s*)?$/.test(initCode)) {
						aEl.setAttribute("disabled", "true");
						aEl.setAttribute("tooltiptext", tt + "\n\nInitialization tab of this button is empty.\nThere is no need to toggle initialization here.");
					} else {
						aEl.removeAttribute("disabled");
						aEl.setAttribute("tooltiptext", tt + "\n\nInitialization code of this button is ENABLED.");
					}
				});
			}
			if ($._zOtherActionsGMI) {
				// Set "Update button" state
				Array.prototype.slice.call(mPop.getElementsByAttribute("dyn_id", $._UID + "-updateButton")).forEach(function(aEl) {
					let ref = $.$($.upd) || $.$($.upd + "-sub");
					if (ref && ref.hasAttribute("hidden"))
						aEl && aEl.setAttribute("disabled", "true");
					else
						aEl && aEl.removeAttribute("disabled");
				});
				// Set "Button help" state
				Array.prototype.slice.call(mPop.getElementsByAttribute("dyn_id", $._UID + "-buttonHelp")).forEach(function(aEl) {
					let ref = $.$($.hlp) || $.$($.hlp + "-sub");
					if (ref && ref.hasAttribute("hidden"))
						aEl && aEl.setAttribute("disabled", "true");
					else
						aEl && aEl.removeAttribute("disabled");
				});
			}
			if ($._zAddGMI) {
				// Disable "Install to position" buttons when the clipboard doesn't contain a Custom Button URI.
				Array.prototype.slice.call(mPop.getElementsByAttribute("dyn_id", $._UID + "-installToPosition")).forEach(function(aEl) {
					if ($._startURI.test(gClipboard.read()))
						aEl && aEl.removeAttribute("disabled");
					else
						aEl && aEl.setAttribute("disabled", "true");
				});
			}
			if ("gCustomizeMode" in window) {
				Array.prototype.slice.call(mPop.getElementsByAttribute("dyn_id", $._UID + "-moveToPanelToolbar")).forEach(function(aEl) {
					if (btn.getAttribute("cui-areatype") === "menu-panel") {
						aEl && aEl.setAttribute("label", "Move to Toolbar");
						aEl && aEl.setAttribute("tooltiptext", "Move button to Toolbar.");
					} else {
						aEl && aEl.setAttribute("label", "Move to Menu");
						aEl && aEl.setAttribute("tooltiptext", "Move button to Menu.");
					}
				});
			}
			// Hide menuitems depending on which menu groups are enabled.
			Array.prototype.slice.call(mPop.getElementsByTagName("menuitem")).forEach(function(aMi) {
				let id = aMi.id;
				if (id && RegExp($.co).test(id))
					aMi.collapsed = $._zCopyGMI;
				if (id && RegExp($.ed).test(id))
					aMi.collapsed = $._zEditGMI;
				if (id && RegExp($.add).test(id))
					aMi.collapsed = $._zAddGMI;
				if (id && RegExp($.rem).test(id) ||
					id && RegExp($.mTP).test(id) ||
					id && RegExp($.mTT).test(id) ||
					id && RegExp($.rFT).test(id) ||
					id && RegExp($.rFP).test(id))
					aMi.collapsed = $._zDeleteGMI;
				if (id && RegExp($.cus).test(id))
					aMi.collapsed = $._zHideCustomizeFromCBContext;
				if (id && RegExp($.cl).test(id) ||
					id && RegExp($.book).test(id) ||
					id && RegExp($.hlp).test(id) ||
					id && RegExp($.upd).test(id))
					aMi.collapsed = $._zOtherActionsGMI;
				if (id && RegExp($._ID + $._UID + "-moveToPanelToolbar").test(id))
					aMi.collapsed = !("gCustomizeMode" in window);
			});
			$.HandleMGSeps(mPop, mPop.getElementsByTagName("menugroup"));
		};
		removeEventListener("popupshowing", popShowing, false);
		if (aRem)
			return;
		addEventListener("popupshowing", popShowing, false);
	},

	ContextFunctions: {
		infoHeader: function(aBtn) {
			if (!aBtn)
				return;
			gClipboard.write(aBtn.id);
			$.mainPop.hidePopup();
		},

		editInTab: function(aBtn) {
			if (!aBtn)
				return;
			if (typeof window[$._UID]["EditCBInTab"] === "function")
				window[$._UID]["EditCBInTab"](aBtn);
		},

		removeToPalette: function(aBtn) {
			if (!aBtn)
				return;
			if ("CustomizableUI" in window) {
				let cBox;
				if ($._zRemoveToPaletteShowAlert)
					cBox = custombuttons.confirmBox(self.name, "Are to sure you want to move this" +
						" button to the application's palette?", "Yes", "Cancel");
				else
					cBox = true;
				if (cBox) {
					gCustomizeMode.removeFromArea(aBtn)
				} else
					return;
			} else {
				$._normalInstall = true;
				try {
					$._cbs.installWebButton(null, aBtn.URI, false);
				} catch (aError) {
					loadURI(aBtn.URI);
				} finally {
					custombuttons.removeButton(aBtn);
				}
			}
		},

		moveToPanelToolbar: function(aBtn) {
			if (!aBtn)
				return;
			if (aBtn.getAttribute("cui-areatype") === "menu-panel")
				gCustomizeMode.addToToolbar(aBtn)
			else
				gCustomizeMode.addToPanel(aBtn)
		},

		toggleInitCode: function(aBtn) {
			if (!aBtn)
				return;
			const PREFIX = "return; // Disabled by CB Context Menu Extended button\n\n";
			var initCode = aBtn.cbInitCode,
				btnLabel = aBtn.name || aBtn.label || "",
				btnState;
			let regEx = /^\s*return;?(?:\s*\/\/[^\n\r]*)?\n+/;
			if (regEx.test(initCode)) {
				initCode = initCode.replace(regEx, "");
				btnState = true;
			} else {
				initCode = PREFIX + initCode;
				btnState = false;
			}
			try {
				let link = custombuttons.makeButtonLink("edit", aBtn.id);
				let param = $._cbs.getButtonParameters(link);
				param = param.wrappedJSObject || param;
				param.initCode = initCode;
				$._cbs.installButton(param);
			} catch (aErr) {
				LOG(aErr);
			} finally {
				$.notifyme(btnLabel, "Initialization code has been " + (btnState ? "ENABLED." : " DISABLED."),
					btnState ? $.getHelp("AlertImg") : $.getHelp("WarningImg"),
					null);
			}
		},

		// Move buttons group
		moveWithin: function(aBtn, aPos) {
			if (!aBtn)
				return;
			try {
				// Should use CustomizableUI.moveWidgetWithinArea, but it's a total nightmare filled with nonsense!!! ¬¬
				let toolbar = aBtn.parentNode;
				if (typeof aPos === "number") {
					if (aPos === 0)
						$.MoveButton(aBtn, toolbar.firstChild);
					else
						$.MoveButton(aBtn, toolbar.lastChild);
				} else {
					if (aPos)
						$.MoveButton(aBtn, aBtn.previousSibling);
					else
						$.MoveButton(aBtn, (aBtn.nextSibling).nextSibling);
				}
			} catch (aErr) {
				Cu.reportError([self.name + ": ", aBtn, aPos, aErr, aErr.stack].join("\n"));
			}
		},

		move: function(aBtn) {
			if (!aBtn)
				return;
			$._moveButtonID = aBtn.id;
			$._showCursorFeedback && window.setCursor("move");
			["click", "mouseup", "mousedown", "contextmenu"].forEach(function(aLi) {
				if (aLi === "click")
					window.addEventListener(aLi, $.MoveListener, true);
				else
					window.addEventListener(aLi, $.DefaultPrevention, true);
			});
			if ($._zShowMoveAlert) {
				let check = {
					value: !$._zShowMoveAlert
				};
				Services.prompt.alertCheck(null,
					self.name,
					"You have chosen the button named \"" + aBtn.name + "\" to be moved.\n" +
					"After closing this dialog, click ANY toolbarbutton element inside ANY toolbar.\n" +
					"Left click will position the button to the left of the target.\n" +
					"Right click will position the button to the right of the target.\n\n" +
					"To cancel the movement, just click ANY element inside the browser that IS NOT a toolbarbutton.\n",
					"Stop showing this alert.",
					check);
				$.sPref("zShowMoveAlert", !check.value);
			}
		},

		// Clone button menu item
		cloneButton: function(aE, aBtn) {
			if (!aBtn)
				return;
			// aE.preventDefault();
			aE.stopPropagation();
			if (!aBtn || !$.hasMod(aE, 0))
				return;
			if (aE.button === 0)
				custombuttons.cloneButton(aBtn);
			else if (aE.button === 1)
				custombuttons.cloneButton(aBtn, true);
		},

		// Copy buttons group
		copyButtons: function(aBtn, aType) {
			if (!aBtn)
				return;
			switch (aType) {
				case "URI":
					$._cbs.writeToClipboard(aBtn.URI);
					break;
				case "BBCode":
					gClipboard.write("[url=" + aBtn.URI + "]" + aBtn.name + "[/url]");
					break;
				case "HTML":
					gClipboard.write("<a href=\"" + aBtn.URI + "\">" + aBtn.name + "</a>");
					break;
				case "Image":
					gClipboard.write(aBtn.image || $.getStdImage(aBtn.getAttribute("cb-stdicon")));
					break;
			}
		},

		// Add/Install buttons group
		addInstall: function(aBtn, aType) {
			if (!aBtn)
				return;
			$._normalInstall = false;
			$._toRight = false;
			$._zAnchor = aBtn.id || aBtn.getAttribute("id") || "";
			setTimeout(function() {
				if (!$._zAnchor)
					return true;
				let clipContent = gClipboard.read();
				switch (aType) {
					case "instL":
						if ($._startURI.test(clipContent))
							$._cbs.installButton($._cbs.parseButtonURI(clipContent));
						break;
					case "addL":
						custombuttons.addButton();
						break;
					case "add":
						$._normalInstall = true;
						custombuttons.addButton();
						break;
					case "addR":
						$._toRight = true;
						custombuttons.addButton();
						break;
					case "instR":
						$._toRight = true;
						if ($._startURI.test(clipContent))
							$._cbs.installButton($._cbs.parseButtonURI(clipContent));
						break;
				}
			}, 100);
		},

		exportImportButtons: {
			exportXML: function(aBtn) {
				if (!aBtn)
					return;
				$.saveXML(aBtn.name || aBtn.label || "No Name!!!",
					aBtn.id.match(/\d+/),
					aBtn.URI,
					aBtn.image || $.getStdImage(aBtn.getAttribute("cb-stdicon")));
			},

			importXML: function(aBtn, aToRight) {
				let dir = $._getExpStorage(true);
				let fp = Cc["@mozilla.org/filepicker;1"].createInstance(Ci.nsIFilePicker);
				fp.init(window, "Import an XML file and install it as a new button", Ci.nsIFilePicker.modeOpenMultiple);
				fp.appendFilters(Ci.nsIFilePicker.filterXML);
				fp.appendFilter("All Files", "*.*");
				fp.displayDirectory = dir;
				var paths = [],
					URIs = [];
				if (fp.show() === Ci.nsIFilePicker.returnOK) {
					let files = fp.files;
					while (files.hasMoreElements()) {
						let file = files.getNext().QueryInterface(Ci.nsIFile);
						paths.push(file.path);
						dir = file.parent.path;
					}
				} else
					return;
				$.sPref("zLastUsedLocation", dir);
				var toRight = aToRight,
					anchor = aBtn.id || aBtn.getAttribute("id") || "";
				for (var p = paths.length - 1; p >= 0; p--) {
					let xmlData = $.readFile(paths[p]); // OS.File.read sucks!!!! It's sloooow as hell inside loops/forEach!!!
					if (!xmlData)
						continue;
					let xmlDOM;
					try {
						xmlDOM = $.stringToDOM(xmlData).documentElement;
					} catch (aErr) {}
					if (!xmlDOM)
						continue;
					var cbNS = "http://xsms.nm.ru/custombuttons/";
					if (xmlDOM.localName === "custombutton" &&
						(xmlDOM.getAttribute("xmlns:cb") === cbNS || xmlDOM.getAttribute("xmlns") === cbNS)) {
						URIs.push("custombutton:\x2F\x2F" + escape(xmlData));
					} else {
						$.notifyme(self.name,
							"Import Fail!!!\nNot a valid Custom Buttons XML file!!!",
							$.getHelp("ErrorImg"),
							null);
					}
				}
				setTimeout(function() {
					for (var u = URIs.length - 1; u >= 0; u--) {
						$._normalInstall = false;
						$._toRight = toRight;
						$._zAnchor = anchor;
						$._cbs.installButton($._cbs.parseButtonURI(URIs[u]));
					}
				}, 1000);
			},

			importFromOverlay: function(aBtn, aToRight) {
				let dir = $._getExpStorage(true);
				let fp = Cc["@mozilla.org/filepicker;1"].createInstance(Ci.nsIFilePicker);
				fp.init(window, "Selct a CB overlay file to import buttons from", Ci.nsIFilePicker.modeOpen);
				fp.appendFilter("XUL files", "*.xul");
				fp.appendFilter("All files", "*.*");
				fp.displayDirectory = dir;
				if (fp.show() === Ci.nsIFilePicker.returnOK) {
					if (fp.file && fp.file.exists())
						dir = fp.file.parent.QueryInterface(Ci.nsIFile);
				} else
					return;
				$.sPref("zLastUsedLocation", fp.file.parent.path);
				OS.File.read(fp.file.path).then(function onSuccess(aReadData) {
					let data = new TextDecoder().decode(aReadData).replace(/>\s+</g, "><");
					let overlayDoc = (new DOMParser).parseFromString(data, "application/xml").documentElement;
					let allPalettes = overlayDoc.getElementsByTagName("toolbarpalette");
					let allUsedPalettes = [];
					for (let i = allPalettes.length - 1; i >= 0; i--) {
						if (allPalettes[i].childNodes.length > 0)
							allUsedPalettes.push(allPalettes[i]);
					}
					var win = $.getHelp("ImportFromOverlayWindow");
					win = win.replace(/_btn_opener_/g, "opener.document.getElementById('" + self.id + "')");
					win = win.replace(/>\s+</g, "><");
					var url = "data:application/vnd.mozilla.xul+xml;text/plain," + encodeURIComponent(win);
					let overlayWin = window.openDialog(url, "", "chrome, dialog=no, centerscreen, resizable, sizemode=normal");
					overlayWin.allUsedPalettes = allUsedPalettes;
					overlayWin.anchor = aBtn.id || aBtn.getAttribute("id") || "";
					overlayWin.toRight = aToRight;
				}, function onFailure(aRejectReason) {
					Cu.reportError([self.name + ": ", aWhere, aRejectReason, aRejectReason.stack].join("\n"));
				});
			},

			installFromOverlay: function(aBtns, aAnchor, aToRight) {
				let toRight = aToRight,
					anchor = aAnchor,
					URIs = [];
				Array.prototype.slice.call(aBtns).forEach(function(aBtn) {
					var btn = aBtn._btn;
					let name = btn.getAttribute("label") || "";
					(name === "") && (name = "Name me!!");
					let init = btn.getAttribute("cb-init"),
						img = btn.getAttribute("image") || $.getImg(btn.getAttribute("cb-stdicon")),
						key = btn.getAttribute("accelkey") || "",
						code = btn.getAttribute("cb-oncommand"),
						help = btn.getAttribute("Help"),
						mode = btn.getAttribute("mode") || "";
					let URI = $.createURI(name, img, code, help, init, key, mode);
					URIs.push(URI);
				});
				setTimeout(function() {
					for (var u = URIs.length - 1; u >= 0; u--) {
						$._normalInstall = false;
						$._toRight = toRight;
						$._zAnchor = anchor;
						if (!$._zAnchor)
							$._normalInstall = true;
						$._cbs.installButton($._cbs.parseButtonURI(URIs[u]));
					}
				}, 1000);
			}
		}
	},

	MoveButton: function(aBtn, aAnchor) {
		try {
			var toolbar = aAnchor.parentNode;
			toolbar.insertBefore(aBtn, aAnchor);
			$.persistCurrentSets(aAnchor.id || aAnchor.getAttribute("id"),
				aBtn.id || aBtn.getAttribute("id"));
		} catch (aErr) {
			Cu.reportError([self.name + ": ", aBtn, aAnchor, aErr, aErr.stack].join("\n"));
		}
	},

	MoveListener: function(aE) {
		$._showCursorFeedback && window.setCursor("auto");
		$.DefaultPrevention(aE);
		["click", "mouseup", "mousedown", "contextmenu"].forEach(function(aLi) {
			if (aLi === "click")
				window.removeEventListener(aLi, $.MoveListener, true);
			else
				window.removeEventListener(aLi, $.DefaultPrevention, true);
		});
		if (aE.target.tagName !== "toolbarbutton")
			return;
		let anchor;
		try {
			anchor = aE.button < 1 ? aE.target : aE.target.nextSibling;
			let btnID = $._moveButtonID;
			$.MoveButton($.$(btnID), anchor);
		} catch (aErr) {} finally {
			$._moveButtonID = null;
		}
	},

	persistCurrentSets: function(aAnchorID, aBtnID) {
		let isAustralis = "CustomizableUI" in window;
		if (isAustralis && !!aAnchorID && !!aBtnID) {
			try {
				var placement = CustomizableUI.getPlacementOfWidget(aAnchorID);
				var area = placement && placement.area;
				var pos = placement && placement.position;
				if (aBtnID) {
					CustomizableUI.addWidgetToArea(
						aBtnID,
						area || CustomizableUI.AREA_NAVBAR,
						typeof pos === "number" ? pos : undefined
					);
				}
			} catch (aErr) {
				LOG(aErr);
			}
		}
		let toolbars = document.querySelectorAll("toolbar[customizable='true'][currentset]");
		for (let toolbar of toolbars) {
			if (!isAustralis) {
				let set = toolbar.currentSet;
				toolbar.setAttribute("currentset", set);
			}
			document.persist(toolbar.id, "currentset");
		}
	},

	DefaultPrevention: function(aE) {
		aE.preventDefault();
		aE.stopImmediatePropagation && aE.stopImmediatePropagation();
		aE.stopPropagation();
	},

	CreateNewItems: function() {
		let popSet = $.$("mainPopupSet");
		let mPop = $.$($._ID + $._UID + "-newItemsMenupopup");
		if (popSet && !mPop) {
			mPop = $.parseXML($.getHelp("NewContextItems")
				.replace(/_T_H_A_T_/g, "document.getElementById('" + self.id + "').CBCME")
				.replace(/_U_I_D_/g, $._UID)
				.replace(/_B_A_S_E_I_D_/g, $._ID + $._UID));
			popSet.appendChild(mPop);
		}
	},

	RemoveNewItems: function() {
		let placedEls = Array.slice(document.getElementsByAttribute("_placed", $._UID + "placed-items"));
		Array.prototype.slice.call(placedEls).forEach(function(aEl) {
			aEl && aEl.parentNode.removeChild(aEl);
		});
	},

	InsertNewItems: function(aDelayedInsertion) {
		let iID = $._ID + $._UID;
		let ctxs = [$.mainPop, $.subPop];

		Array.prototype.slice.call(ctxs).forEach(function(aMPop, aI) {
			let suffix = (aI === 0) ? "" : "-sub";
			let suffixForClone = (aI === 0) ? "-main" : "-sub";
			if ($._zInfoHeader)
				$._ANI(aMPop, $.$(iID + "-infoHeader"), 0, suffixForClone, false);
			if ($._zEditGMI)
				$._ANI(aMPop, $.$(iID + "-editButtonsGroup"), $.ed + suffix, suffixForClone, true);
			else {
				if ($._zToggleInitMI)
					$._ANI(aMPop, $.$(iID + "-toggleInitCode"), $.ed + suffix, suffixForClone, true);
				if (typeof gBrowser === "object") {
					if ($._zEditInTabMI)
						$._ANI(aMPop, $.$(iID + "-editInTab"), $.ed + suffix, suffixForClone, true);
				}
			}
			if ($._zCopyGMI)
				$._ANI(aMPop, $.$(iID + "-copyButtonsGroup"), $.co + suffix, suffixForClone, true);
			else {
				if ($._zCopyImageMI)
					$._ANI(aMPop, $.$(iID + "-copyButtonImage"), $.co + suffix, suffixForClone, true);
				if ($._zCopyAsHTMLMI)
					$._ANI(aMPop, $.$(iID + "-copyButtonAsHTML"), $.co + suffix, suffixForClone, true);
				if ($._zCopyAsBBCodeMI)
					$._ANI(aMPop, $.$(iID + "-copyButtonAsBBCode"), $.co + suffix, suffixForClone, true);
			}
			if ($._zDeleteGMI)
				$._ANI(aMPop, $.$(iID + "-deleteButtonsGroup"), $.rem + suffix, suffixForClone, true);
			else {
				if ($._zRemoveToPaletteMI)
					$._ANI(aMPop, $.$(iID + "-removeToPalette"), $.rem + suffix, suffixForClone, true);
			}
			if ($._zOtherActionsGMI)
				$._ANI(aMPop, $.$(iID + "-otherActionsButtonsGroup"), $.upd + suffix, suffixForClone, true);
			if ($._zXMLExpImpGMI)
				$._ANI(aMPop, $.$(iID + "-exportImportButtons"), $.s3 + suffix, suffixForClone, true);
			else {
				if ($._zOverlayImportLeftMI)
					$._ANI(aMPop, $.$(iID + "-importFromOverlayToLeft"), $.s3 + suffix, suffixForClone, true);
				if ($._zOverlayImportRightMI)
					$._ANI(aMPop, $.$(iID + "-importFromOverlayToRight"), $.s3 + suffix, suffixForClone, true);
				if ($._zXMLImportLeftMI)
					$._ANI(aMPop, $.$(iID + "-importButtonToLeft"), $.s3 + suffix, suffixForClone, true);
				if ($._zXMLImportRightMI)
					$._ANI(aMPop, $.$(iID + "-importButtonToRight"), $.s3 + suffix, suffixForClone, true);
				if ($._zXMLExportMI)
					$._ANI(aMPop, $.$(iID + "-exportButtonAsXML"), $.s3 + suffix, suffixForClone, true);
			}
			if ($._zMoveGMI)
				$._ANI(aMPop, $.$(iID + "-moveButtonsGroup"), 1, suffixForClone, false);
			if ($._zAddGMI)
				$._ANI(aMPop, $.$(iID + "-addInstallButtonsGroup"), 1, suffixForClone, false);
		});

		if ($._zMoveGMIInTC ||
			$._zAddGMIInTC ||
			$._zXMLExpImpGMIInTC) {
			let tBarCtxs = window[$._UID]["TCIDs"];
			for (let i = tBarCtxs.length - 1; i >= 0; i--) {
				let tBarCtx = $.$(tBarCtxs[i]);
				tBarCtx && $._ANI(tBarCtx, $.$($._UID + "-separatorForMenuGroups"), 1, null, false, true);
				if ($._zXMLExpImpGMIInTC)
					tBarCtx && $._ANI(tBarCtx, $.$(iID + "-exportImportButtons"), 1, "-toolbar-context", false);
				if ($._zMoveGMIInTC)
					tBarCtx && $._ANI(tBarCtx, $.$(iID + "-moveButtonsGroup"), 1, "-toolbar-context", false);
				if ($._zAddGMIInTC)
					tBarCtx && $._ANI(tBarCtx, $.$(iID + "-addInstallButtonsGroup"), 1, "-toolbar-context", false);
			}
		}

		// setTimeout(function() {
		// 	let elsToIntegrate = $._zElementsForIntegration.split(",");
		// 	if (elsToIntegrate.length < 1)
		// 		return true;
		// 	let createGroup = function(aArr) {
		// 		let mG = $.$CNS("menugroup", {
		// 			_placed: $._UID + "placed-items",
		// 			id: $._UID + "cbcme_integration" + parseInt(Math.random() * 10000, 10)
		// 		});
		// 		for (let i = 0; i < aArr.length; i++) {
		// 			aArr[i].removeAttribute("cbcme_integration");
		// 			aArr[i].removeAttribute("id");
		// 			mG.appendChild(aArr[i]);
		// 		}
		// 		return mG;
		// 	};
		// 	Array.prototype.slice.call(ctxs).forEach(function(aMPop, aI) {
		// 		let suffix = (aI === 0) ? "" : "-sub";
		// 		let groupEls = [];
		// 		Array.prototype.slice.call(elsToIntegrate).forEach(function(aAttrVal) {
		// 			Array.prototype.slice.call(document.getElementsByAttribute("cbcme_integration", aAttrVal)).forEach(function(aEl) {
		// 				aEl && groupEls.push(aEl.cloneNode(true));
		// 			});
		// 		});
		// 		aMPop.insertBefore(createGroup(groupEls), $.$($.s3 + suffix));
		// 	});
		// }, aDelayedInsertion ? 5000 : 10);
	},

	ScanForElementsToIntegrate: function() {
		let temp = [];
		let allBaseEls = Array.slice(document.getElementsByAttribute("cbcme_integration", "*"));
		Array.prototype.slice.call(allBaseEls).forEach(function(aBaseEl, ai, aNN) {
			temp.push(aBaseEl.getAttribute("cbcme_integration"));
		});
		let attrs = temp.filter(function(v, i, a) { // Remove duplicated
			return a.indexOf(v) === i;
		});
		if (!attrs || attrs.length === 0)
			Services.prompt.alert(null, self.name,
				"No element has been found that could be integrated into CB context menu.");
		else
			$.sPref("zElementsForIntegration", attrs.join(","));
	},

	_ANI: function(aMPop, aEl, aInsertPoint, aSuffix, aAfter, aRemID) { // Append New Items
		let el = aEl.cloneNode(true);
		el.setAttribute("_placed", $._UID + "placed-items");
		if (aRemID) // ONLY FOR SEPARATORS!!!
			el.removeAttribute("id");
		else
			el.setAttribute("id", el.getAttribute("id") + aSuffix);
		if (el.hasChildNodes()) {
			for (let i = el.childNodes.length - 1; i >= 0; i--) {
				cEl = el.childNodes[i];
				cEl.hasAttribute("id") && cEl.setAttribute("id", cEl.getAttribute("id") + aSuffix);
			}
		}
		switch (aInsertPoint) {
			case 0: // Insert first or after first
				aMPop.insertBefore(el, (aAfter ?
					aMPop.firstChild.nextSibling :
					aMPop.firstChild));
				break;
			case 1: // Insert last
				aMPop.appendChild(el);
				break;
			default: // Insert after or before specific element
				try {
					aMPop.insertBefore(el, (aAfter ?
						$.$(aInsertPoint).nextSibling :
						$.$(aInsertPoint)));
				} catch (aErr) {
					aMPop.appendChild(el);
					LOG(aErr);
				}
		}
	},

	CreateOptionsMenu: function() {
		var popSet = $.$("mainPopupSet");
		var m = $.$($._UID + "_optionsPopup");
		if (!!popSet && !m) {
			popSet.appendChild($.$CNS("menupopup", {
				id: $._UID + "_optionsPopup",
				onpopupshowing: "event.stopPropagation();document.getElementById('" + self.id +
					"').CBCME.PopulateOptionsPopup(this)",
				onpopuphiding: "event.stopPropagation();this.textContent='';",
				menugenerated: true,
			}));
		}
	},

	PopulateOptionsPopup: function(aNode) {
		let indvItems = aNode.appendChild($.$CNS("menu", {
			label: "Individual menu items",
		})).appendChild($.$CNS("menupopup", {
			onpopupshowing: "event.stopPropagation();",
			onpopuphiding: "event.stopPropagation();",
			menugenerated: true,
		}));
		indvItems.appendChild($.$CNS("dialogheader", {
			title: "Enable/Disable individual menu items",
			tooltiptext: "Enable/Disable menu items individually to be shown/hidden from the " +
				"Custom Buttons context menu.\n\nNote: You can only show/hide individual items if" +
				" the group to which the item belongs is disabled.",
			style: "margin: 5px 0 5px 0;padding: 2px 0 2px 5px;border:none;font-size:smaller;",
		}));
		[
			["zInfoHeader",
				"Show info header",
				"Show/Hide the \"Info header\" at the top of the CB context menu."
			],
			["zEditInTabMI",
				"Show 'Edit in tab...' in CB context",
				"Show/Hide the 'Edit button in tab...' menu item in CB context menu.",
				"zEditGMI"
			],
			["zToggleInitMI",
				"Show 'Toggle initialization' in CB context",
				"Show/Hide the 'Toggle initialization' menu item in CB context menu.",
				"zEditGMI"
			],
			["zRemoveToPaletteMI",
				"Show 'Remove to palette...' in CB context",
				"Show/Hide the 'Remove to palette...' menu item in CB context menu.",
				"zDeleteGMI"
			],
			["zCopyAsBBCodeMI",
				"Show 'Copy button as BBCode' in CB context",
				"Show/Hide the 'Copy button as BBCode' menu item in CB context menu.",
				"zCopyGMI"
			],
			["zCopyAsHTMLMI",
				"Show 'Copy button as HTML' in CB context",
				"Show/Hide the 'Copy button as HTML' menu item in CB context menu.",
				"zCopyGMI"
			],
			["zCopyImageMI",
				"Show 'Copy button image' in CB context",
				"Show/Hide the 'Copy button image' menu item in CB context menu.",
				"zCopyGMI"
			],
			["zXMLExportMI",
				"Show 'Export button as XML' in CB context",
				"Show/Hide the 'Export button as XML' menu item in CB context menu.",
				"zXMLExpImpGMI"
			],
			["zXMLImportLeftMI",
				"Show 'Import XML button to left' in CB context",
				"Show/Hide the 'Import XML button to left' menu item in CB context menu.",
				"zXMLExpImpGMI"
			],
			["zXMLImportRightMI",
				"Show 'Import XML button to right' in CB context",
				"Show/Hide the 'Import XML button to right' menu item in CB context menu.",
				"zXMLExpImpGMI"
			],
			["zOverlayImportLeftMI",
				"Show 'Import From Overlay to left' in CB context",
				"Show/Hide the 'Import From Overlay to left' menu item in CB context menu.",
				"zXMLExpImpGMI"
			],
			["zOverlayImportRightMI",
				"Show 'Import From Overlay to right' in CB context",
				"Show/Hide the 'Import From Overlay to right' menu item in CB context menu.",
				"zXMLExpImpGMI"
			]
		].forEach(function(aP) {
			indvItems.appendChild($.$CNS("menuitem", {
				label: aP[1],
				type: "checkbox",
				closemenu: "none",
				hidden: (aP[0] === "zEditInTabMI" && (typeof gBrowser !== "object")) ||
					(aP[3] && $["_" + aP[3]]),
				tooltiptext: aP[2],
				checked: $["_" + aP[0]],
				oncommand: "event.stopPropagation();document.getElementById('" + self.id +
					"').CBCME.sPref('" + aP[0] + "', !document.getElementById('" + self.id +
					"').CBCME.gPref('" + aP[0] + "'));",
			}));
		});
		let groupOpts = aNode.appendChild($.$CNS("menu", {
			label: "Groups of menu items",
		})).appendChild($.$CNS("menupopup", {
			onpopupshowing: "event.stopPropagation();",
			onpopuphiding: "event.stopPropagation();",
			menugenerated: true,
		}));
		groupOpts.appendChild($.$CNS("dialogheader", {
			title: "Custom Buttons context menu",
			tooltiptext: "Groups of menus for the Custom Buttons context menu.",
			style: "margin: 5px 0 5px 0;padding: 2px 0 2px 5px;border:none;font-size:smaller;",
		}));
		[
			["zEditGMI",
				"Show 'Edit buttons' group",
				"Show/Hide the 'Edit buttons' menu group in CB context menu.\nItems in this group:\n" +
				"* Edit button...\n* Edit in tab...\n* Toggle initialization",
			],
			["zDeleteGMI",
				"Show 'Delete buttons' group",
				"Show/Hide the 'Delete buttons' menu group in CB context menu.\nItems in this group:\n" +
				"* Delete button\n* Remove to palette"
			],
			["zCopyGMI",
				"Show 'Copy buttons' group",
				"Show/Hide the 'Edit buttons' menu group in CB context menu.\nItems in this group:\n" +
				"* Copy to clipboard\n* Copy button as BBCode\n* Copy button as HTML\n* Copy button image"
			],
			["zXMLExpImpGMI",
				"Show 'Export/Import buttons' group",
				"Show/Hide the 'Export/Import buttons' menu group in CB context menu.\nItems in this group:\n" +
				"* Export button as XML\n* Import XML button to left\n* Import XML button to right\n" +
				"* Import from Overlay to left\n* Import from Overlay to right"
			],
			["zOtherActionsGMI",
				"Show 'Other actions' group",
				"Show/Hide the 'Other actions' menu group in CB context menu.\nItems in this group:\n" +
				"* Clone button\n* Bookmark Button\n* Button Help\n* Update Button"
			],
			["zMoveGMI",
				"Show 'Move buttons' group",
				"Show/Hide the 'Move buttons' menu group in CB context menu.\nItems in this group:\n" +
				"* Move to the beginning\n* Move to the left\n* Select to move\n* Move to right\n" +
				"* Move to the end"
			],
			["zAddGMI",
				"Show 'Add/Install buttons' group",
				"Show/Hide the 'Add/Install buttons' menu group in CB context menu.\nItems in this group:\n" +
				"* Install to the left\n* Add to the left\n* Add to palette (Default behavior)\n" +
				"* Add to the right\n* Install to the right"
			]
		].forEach(function(aP) {
			groupOpts.appendChild($.$CNS("menuitem", {
				label: aP[1],
				type: "checkbox",
				closemenu: "none",
				tooltiptext: aP[2],
				checked: $["_" + aP[0]],
				oncommand: "event.stopPropagation();document.getElementById('" + self.id +
					"').CBCME.sPref('" + aP[0] + "', !document.getElementById('" + self.id +
					"').CBCME.gPref('" + aP[0] + "'));",
			}));
		});
		groupOpts.appendChild($.$CNS("dialogheader", {
			title: "Toolbars context menu",
			tooltiptext: "Groups of menus for the toolbars context menu.",
			style: "margin: 5px 0 5px 0;padding: 2px 0 2px 5px;border:none;font-size:smaller;",
		}));
		[
			["zXMLExpImpGMIInTC",
				"Show 'Export/Import buttons' group",
				"Show/Hide the 'Export/Import buttons' menu group in toolbars context menu.\nItems in this group:\n" +
				"* Export button as XML\n* Import XML button to left\n* Import XML button to right"
			],
			["zMoveGMIInTC",
				"Show 'Move buttons' group",
				"Show/Hide the 'Move buttons' menu group in toolbars context menu.\nItems in this group:\n" +
				"* Move to the beginning\n* Move to the left\n* Select to move\n* Move to right\n" +
				"* Move to the end"
			],
			["zAddGMIInTC",
				"Show 'Add/Install buttons' group",
				"Show/Hide the 'Add/Install buttons' menu group in toolbars context menu.\nItems in this group:\n" +
				"* Install to the left\n* Add to the left\n* Add to palette (Default behavior)\n" +
				"* Add to the right\n* Install to the right"
			],
		].forEach(function(aP) {
			groupOpts.appendChild($.$CNS("menuitem", {
				label: aP[1],
				type: "checkbox",
				closemenu: "none",
				tooltiptext: aP[2],
				checked: $["_" + aP[0]],
				oncommand: "event.stopPropagation();document.getElementById('" + self.id +
					"').CBCME.sPref('" + aP[0] + "', !document.getElementById('" + self.id +
					"').CBCME.gPref('" + aP[0] + "'));",
			}));
		});

		let genOptMenu = aNode.appendChild($.$CNS("menu", {
			label: "General options",
		})).appendChild($.$CNS("menupopup", {
			onpopupshowing: "event.stopPropagation();",
			onpopuphiding: "event.stopPropagation();",
			menugenerated: true,
		}));
		[
			["zDragAndDrop",
				"Drag&Drop capabilities",
				"If enabled, Custom Buttons buttons can be installed by simply drag and dropping a " +
				"Custom Buttons URL or a CB XML file into any toolbar."
			],
			["zDragAndDropControlKey",
				"Drag&Drop - Require Control key",
				"If enabled, the Control key must be pressed for the drag operation to attempt to" +
				" install a button.\n\nNote: It's recommended to at least enable one modifier key."
			],
			["zDragAndDropAltKey",
				"Drag&Drop - Require Alt key",
				"If enabled, the Alt key must be pressed for the drag operation to attempt to" +
				" install a button.\n\nNote: It's recommended to at least enable one modifier key."
			],
			["zHideCustomizeFromCBContext",
				"Hide 'Customize...' menu item from CB context",
				"Hide 'Customize...' menu item from CB context"
			],
			["zInvertIconsColor",
				"Invert dark icons colours",
				"Most of the icons used by this button are dark/black. Whit this option enabled, a " +
				"white filter is applied to those icons to make them visible on dark themes."
			],
			["zShowIDOnExportedButtons",
				"Show ID on exported buttons",
				"If enabled, it will add the number ID to the XML file name of exported buttons."
			],
			["zShowMoveAlert",
				"Show move alert",
				"If enabled, a dialog with instrucctions will appear every time a button is " +
				"selected to be moved."
			],
			["zRemoveToPaletteShowAlert",
				"Show 'Remove to palette' alert",
				"If enabled, a dialog will appear every time a button is " +
				"removed to the application palette."
			]
		].forEach(function(aP) {
			genOptMenu.appendChild($.$CNS("menuitem", {
				label: aP[1],
				type: "checkbox",
				closemenu: "none",
				tooltiptext: aP[2],
				checked: $["_" + aP[0]],
				oncommand: "event.stopPropagation();document.getElementById('" + self.id +
					"').CBCME.sPref('" + aP[0] + "', !document.getElementById('" + self.id +
					"').CBCME.gPref('" + aP[0] + "'));",
			}));
		});
		genOptMenu.appendChild($.$CNS("menuitem", {
			label: "Set custom export path",
			tooltiptext: "Set a custom path location to store exported XML buttons.",
			oncommand: "event.stopPropagation();document.getElementById('" + self.id + "')." +
				"CBCME.SetCustomPath();",
		}));
		genOptMenu.appendChild($.$CNS("menuitem", {
			label: "Clear last used path",
			tooltiptext: "Every time any import option is used, the last opened location is stored. " +
				"This option clears that last used folder and resets it to the default export location.",
			oncommand: "event.stopPropagation();Services.prefs.clearUserPref('" + $.Branch +
				"zLastUsedLocation');",
		}));
		// genOptMenu.appendChild($.$CNS("dialogheader", {
		// 	title: "Buttons integration",
		// 	tooltiptext: "CB Context Menu Extended can add to the CB context items from other buttons." +
		// 		"",
		// 	style: "margin: 5px 0 5px 0;padding: 2px 0 2px 5px;border:none;font-size:smaller;",
		// }));
		// genOptMenu.appendChild($.$CNS("menuitem", {
		// 	label: "Scan for elements to integrate",
		// 	tooltiptext: "Open the folder where all backup files are stored.",
		// 	oncommand: "event.stopPropagation();document.getElementById('" + self.id +
		// 		"').CBCME.ScanForElementsToIntegrate();",
		// }));
		// genOptMenu.appendChild($.$CNS("menuitem", {
		// 	label: "Edit integrated items",
		// 	tooltiptext: "Open the folder where all backup files are stored.",
		// 	oncommand: "event.stopPropagation();document.getElementById('" + self.id +
		// 		"').CBCME.ScanForElementsToIntegrate();",
		// }));
	},

	SetCustomPath: function() {
		let msg = "Full path to a custom location to store exported XML buttons.\n" +
			"Example Windows: C:\\Users\\UserName\\Documents\n" +
			"Example Linux: /home/username/Documents";
		let value = $.promptme(msg, $._zImpExpCustomLocation);
		if (value)
			$.sPref("zImpExpCustomLocation", value);
	},

	HandlePrefListener: function(aRem) {
		var prefs = $.DefPrefs;
		for (let key in prefs) {
			let pref = $.Branch + key;
			if (prefs.hasOwnProperty(key)) {
				if (aRem)
					Services.prefs.removeObserver(pref, $.PrefListener, false);
				else
					Services.prefs.addObserver(pref, $.PrefListener, false);
			}
		}
	},

	PrefListener: {
		observe: function(aSubject, aTopic, aPStr) {
			if (aTopic === "nsPref:changed") {
				let prefName = aPStr.slice($.Branch.length);
				$["_" + prefName] = $.gPref(prefName);
				switch (prefName) {
					case "zInvertIconsColor":
						$.HandleInversion();
					case "zInfoHeader":
					case "zMoveGMI":
					case "zMoveGMIInTC":
					case "zEditInTabMI":
					case "zRemoveToPaletteMI":
					case "zToggleInitMI":
					case "zEditGMI":
					case "zDeleteGMI":
					case "zCopyAsBBCodeMI":
					case "zCopyAsHTMLMI":
					case "zCopyImageMI":
					case "zCopyGMI":
					case "zAddGMI":
					case "zAddGMIInTC":
					case "zOtherActionsGMI":
					case "zXMLExportMI":
					case "zXMLImportLeftMI":
					case "zXMLImportRightMI":
					case "zOverlayImportLeftMI":
					case "zOverlayImportRightMI":
					case "zXMLExpImpGMI":
					case "zXMLExpImpGMIInTC":
					case "zElementsForIntegration":
						$.HandleNewItems();
						if (prefName === "zEditGMI" ||
							prefName === "zDeleteGMI" ||
							prefName === "zCopyGMI" ||
							prefName === "zXMLExpImpGMI") {
							let optM = $.$($._UID + "_optionsPopup");
							optM.textContent = "";
							$.PopulateOptionsPopup(optM);
						}
						break;
				}
				if (!$._zMoveGMIInTC &&
					!$._zAddGMIInTC &&
					!$._zXMLExpImpGMIInTC) {
					$.HandleTBContext(true);
				}
			}
		}
	},

	HandleNewItems: function() {
		clearTimeout($._removeTimer);
		$._removeTimer = setTimeout(function() {
			$.RemoveNewItems();
			$._removeTimer = setTimeout(function() {
				$.InsertNewItems(false);
			}, 250);
		}, 250);
	},

	CSSLoader: function() {
		let css;
		try {
			css = "@namespace url(" + xulns + ");" + $.getHelp("StyleSheet")
				.replace(/_B_A_S_E_I_D_/g, $._ID + $._UID)
				.replace(/_U_I_D_/g, $._UID)
				.replace(/\n/g, "");
		} catch (aErr) {
			css = false;
		}
		if (!css)
			return;

		if (!window[$._UID]["StyleSheet"]) {
			window[$._UID]["StyleSheet"] = css;
			$.styleSheet(css);
		} else if (window[$._UID]["StyleSheet"] && window[$._UID]["StyleSheet"] !== css) {
			$.styleSheet(window[$._UID]["StyleSheet"], true);
			window[$._UID]["StyleSheet"] = css;
			$.styleSheet(css);
		}
	},

	$CNS: function(aElName, aAttrs, aNS) {
		var el = document.createElementNS((aNS ? aNS : xulns), aElName);
		if (aElName === "menuitem")
			el.setAttribute("class", "menuitem-iconic");
		if (aAttrs) {
			Object.keys(aAttrs).forEach(function(n) {
				if (aAttrs[n] !== "")
					el.setAttribute(n, aAttrs[n]);
			});
		}
		return el;
	},

	$: function(aID, aParent) {
		if (!aParent)
			return document.getElementById(aID);
		return aParent.getElementById(aID);
	},

	parseXML: function(aXML) { // Return parsed XML
		aXML = aXML.replace(/>\s+</g, "><"); // Linearize XML
		return (new DOMParser).parseFromString(aXML, "application/xml").documentElement;
	},

	getHelp: function(aPlaceholder) { // Get specific data, surrounded by "placeholders", from the Help tab.
		return document.getElementById(self.id).getAttribute("Help").split("<!--" + aPlaceholder + "-->")[1];
	},

	styleSheet: function(aCSS, aRemFlag) {
		var sss = Cc["@mozilla.org/content/style-sheet-service;1"].getService(Ci.nsIStyleSheetService);
		var uri = Services.io.newURI("data:text/css," + encodeURIComponent(aCSS), null, null);
		if (sss.sheetRegistered(uri, sss.USER_SHEET))
			sss.unregisterSheet(uri, sss.USER_SHEET);
		if (aRemFlag)
			return;
		sss.loadAndRegisterSheet(uri, sss.USER_SHEET);
	},

	notifyme: function(aTitle, aMsg, aImg, aCallback) { // Notification function
		let origin = (Services.prefs.getPrefType("ui.alertNotificationOrigin") !== 0) ?
			Services.prefs.getIntPref("ui.alertNotificationOrigin") :
			null;
		let win = Services.ww.openWindow(null, "chrome://global/content/alerts/alert.xul",
			"_blank", "chrome,titlebar=no,popup=yes", null);
		win.arguments = [aImg, aTitle, aMsg, !!aCallback, "", origin, "", "", null, (!!aCallback ? aCallback : null)];
	},

	getStdImage: function(aIId) {
		if (/^custombuttons-stdicon-(\d)$/.test(aIId))
			switch (+RegExp.$1) {
				case 1:
					return "chrome://custombuttons/skin/button.png";
				case 2:
					return "chrome://custombuttons/skin/stdicons/rbutton.png";
				case 3:
					return "chrome://custombuttons/skin/stdicons/gbutton.png";
				case 4:
					return "chrome://custombuttons/skin/stdicons/bbutton.png";
			}
		return aIId || "chrome://custombuttons/skin/button.png";
	},

	stringToDOM: function(aStr) {
		var parser = new DOMParser(),
			dom = parser.parseFromString(aStr, "text/xml");
		if (dom.documentElement.nodeName === "parsererror") {
			LOG("Parse error!!! Not a valid XML file(?)!!!\n" +
				"Source:\n\n" + aStr);
			return null;
		} else {
			return dom;
		}
	},

	getImg: function(aSrc) {
		switch (aSrc) {
			case "custombuttons-stdicon-1":
				return "chrome://custombuttons/skin/button.png";
			case "custombuttons-stdicon-2":
				return "chrome://custombuttons/skin/stdicons/rbutton.png";
			case "custombuttons-stdicon-3":
				return "chrome://custombuttons/skin/stdicons/gbutton.png";
			case "custombuttons-stdicon-4":
				return "chrome://custombuttons/skin/stdicons/bbutton.png";
		}
	},

	saveXML: function(aName, aId, aURI, aImg) {
		if (!aURI || !/^custombutton\:\/\//.test(aURI))
			return;
		var cbXML = aURI.replace(/^custombutton\:\/\//, "");
		var data = unescape(cbXML);
		var header = "<custombutton xmlns:cb=\"http://xsms.nm.ru/custombuttons/\"" +
			" xmlns:html=\"http://www.w3.org/1999/xhtml\">\n" +
			"<html:head>\n" +
			"	<html:title>\x3C![CDATA[" + $.escHTML(aName) + "]]\x3e</html:title>\n" +
			"	<html:link rel=\"shortcut icon\" href=\"" + aImg + "\"/>\n" +
			"	<html:style type=\"text/css\">\x3C![CDATA[" + $.getHelp("StyleForXMLFiles") +
			"]]\x3e</html:style>\n" +
			"</html:head>\n" +
			"<html:body>\n" +
			"	<html:div id=\"wrapper\">\n" +
			"		<html:div id=\"button\">\n" +
			"			<html:a href=\"" + aURI + "\" rel=\"nofollow\" title=\"Install " +
			$.escHTML(aName) + "\">\n" +
			"				\x3C![CDATA[Install this button]]\x3e\n" +
			"			</html:a>\n" +
			"		</html:div>\n" +
			"		<html:a id=\"about\" href=\"https://addons.mozilla.org/addon/custom-buttons/\">\n" +
			"			\x3C![CDATA[About CustomButtons]]\x3e\n" +
			"		</html:a>\n" +
			"		<html:div id=\"credits\">\n" +
			"			<html:a href=\"http://custombuttons.sourceforge.net/forum/viewtopic.php?t=3599\">\n" +
			"				\x3C![CDATA[XML created with]]\x3e\n" +
			"				<html:br/>\n" +
			"				\x3C![CDATA[CB Context Menu Extended]]\x3e\n" +
			"			</html:a>\n" +
			"		</html:div>\n" +
			"	</html:div>\n" +
			"</html:body>";
		data = data
			.replace(/<custombutton xmlns\:cb=\"http\:\/\/xsms\.nm\.ru\/custombuttons\/\">/, header);
		setTimeout(function() {
			let file = $._getExpStorage();
			file.append(($.legalize(aName) + "-ID" + ($._zShowIDOnExportedButtons ? aId : "") + ".xml").trim());
			$.writeFile(file.path, data, "unique");
			setTimeout(function() {
				$.notifyme("Button \"" + aName + "\" " + "exported successfully.",
					"Click here to open export location.",
					aImg,
					$.alertCallback);
			}, 100);
		}, 100);
	},

	writeFile: function(aPath, aData, aSaveType) {
		try {
			var file = new $._nsIFile(aPath);
			var fos = Cc["@mozilla.org/network/file-output-stream;1"].createInstance(Ci.nsIFileOutputStream);
			switch (aSaveType) {
				case "append":
					fos.init(file, 0x02 | 0x08 | 0x10, 0x1B6, 0);
					break;
				case "unique":
					file.createUnique(Ci.nsIFile.NORMAL_FILE_TYPE, 0x1B6);
					fos.init(file, 0x02 | 0x08 | 0x20, 0x1B6, 0);
					break;
				default:
					fos.init(file, 0x02 | 0x08 | 0x20, 0x1B6, 0);
			}
			var cos = Cc["@mozilla.org/intl/converter-output-stream;1"].createInstance(Ci.nsIConverterOutputStream);
			cos.init(fos, "UTF-8", 0, 0);
			cos.writeString(aData);
			cos.close();
			fos.close();
		} catch (aErr) {
			Cu.reportError([self.name + ": ", aPath, aData, aSaveType, aErr, aErr.stack].join("\n"));
		}
	},

	readFile: function(aPath) {
		var data = "";
		var file = null;
		try {
			file = new this._nsIFile(aPath);
			var fis = Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream);
			fis.init(file, -1, 0, 0);
			var cis = Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream);
			cis.init(fis, "UTF-8", 0, Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);
			let str = {},
				read = 0;
			do {
				read = cis.readString(0xffffffff, str);
				data += str.value;
			} while (read !== 0);
			cis.close();
			fis.close();
		} catch (aErr) {
			Cu.reportError([self.name + ": ", aPath, aErr, aErr.stack].join("\n"));
			return null;
		}
		return data;
	},

	/**
	 * Using a parsed string for the template variable it's infinitely faster than calling
	 * the template file with XMLHttpRequest.
	 */
	createURI: function(aName, aImg, aCode, aHelp, aInit, aKey, aMode) {
		let template = (new DOMParser).parseFromString('<?xml version="1.0"?><custombutton xmlns:cb=' +
			'"http://xsms.nm.ru/custombuttons/"><name/><image/><mode/><initcode/><code/><accelke' +
			'y/><help/><attributes/></custombutton>', "application/xml");
		let sTxt = custombutton.buttonSetText;
		sTxt(template, "name", aName, 0);
		sTxt(template, "image", aImg, 1);
		sTxt(template, "mode", aMode, 0);
		sTxt(template, "initcode", $.escCDATA(aInit), 1);
		sTxt(template, "code", $.escCDATA(aCode), 1);
		sTxt(template, "accelkey", aKey, 1);
		sTxt(template, "help", $.escCDATA(aHelp), 1);
		return "custombutton:\x2F\x2F" + escape(new XMLSerializer().serializeToString(template));
	},

	escCDATA: function(aStr) { // Unescaped CDATA tags can break buttons in XML format.
		return aStr
			.replace(/]]\x3e/g, "\\" + "x5D" + "\\" + "x5D" + "\\" + "x3e")
			.replace(/]]&gt\;/g, "\\" + "x5D" + "\\" + "x5D" + "\\" + "x3e");
	},

	escHTML: function(aStr) {
		aStr = String(aStr)
			.replace(/&/g, "&amp;")
			.replace(/</g, "&lt;")
			.replace(/>/g, "&gt;")
			.replace(/"/g, "&quot;")
			.replace(/'/g, "&apos;");
		return aStr;
	},

	promptme: function(aMsg, aVal) {
		let retVal = {
			value: aVal
		};
		if (Services.prompt.prompt(null, (self.label || self.name), aMsg, retVal, null, {}))
			return retVal.value;
		else
			return false;
		return false;
	},

	hasMod: function(aE, aMod) {
		switch (aMod) {
			case 0:
				return !aE.shiftKey && !aE.ctrlKey && !aE.altKey;
			case "a":
				return !aE.shiftKey && !aE.ctrlKey && aE.altKey;
			case "c":
				return !aE.shiftKey && aE.ctrlKey && !aE.altKey;
			case "s":
				return aE.shiftKey && !aE.ctrlKey && !aE.altKey;
			case "ca":
				return !aE.shiftKey && aE.ctrlKey && aE.altKey;
			case "sc":
				return aE.shiftKey && aE.ctrlKey && !aE.altKey;
			case "sa":
				return aE.shiftKey && !aE.ctrlKey && aE.altKey;
			case "sca":
				return aE.shiftKey && aE.ctrlKey && aE.altKey;
		}
	},

	legalize: function(aStr) { // Removes illegal characters in file names.
		return aStr.replace(/[\{\=\}\@\!\%\$\+\/:\‘\"\`\*\?<&#>\|\\]/g, "");
	},
};

this.CBCME.ed = $._ID + "-edit";
this.CBCME.rem = $._ID + "-remove";
this.CBCME.cl = $._ID + "-clone";
this.CBCME.co = $._ID + "-copyURI";
this.CBCME.upd = $._ID + "-updateButton";
this.CBCME.book = $._ID + "-bookmarkButton";
this.CBCME.hlp = $._ID + "-buttonHelp";
this.CBCME.add = $._ID + "-addnewbutton";
this.CBCME.cus = $._ID + "-customize";
this.CBCME.s1 = $._ID + "-separator1";
this.CBCME.s2 = $._ID + "-separator2";
this.CBCME.s3 = $._ID + "-separator3";
this.CBCME.mTP = $._ID + "-move-moveToPanel";
this.CBCME.mTT = $._ID + "-move-moveToToolbar";
this.CBCME.rFT = $._ID + "-move-removeFromToolbar";
this.CBCME.rFP = $._ID + "-move-removeFromPanel";

this.CBCME.Branch = "CB.ContextMenuExtended.Id" + self.id.slice(20) + ".";

this.CBCME.DefPrefs = {
	zInfoHeader: true,
	zXMLExportMI: true,
	zXMLImportLeftMI: true,
	zXMLImportRightMI: true,
	zXMLExpImpGMI: true,
	zXMLExpImpGMIInTC: true,
	zOverlayImportLeftMI: true,
	zOverlayImportRightMI: true,
	zMoveGMI: true,
	zMoveGMIInTC: true,
	zEditInTabMI: true,
	zRemoveToPaletteMI: true,
	zRemoveToPaletteShowAlert: true,
	zToggleInitMI: true,
	zEditGMI: true,
	zDeleteGMI: true,
	zCopyAsBBCodeMI: true,
	zCopyAsHTMLMI: true,
	zCopyImageMI: true,
	zCopyGMI: true,
	zOtherActionsGMI: true,
	zAddGMI: true,
	zAddGMIInTC: true,
	zBackupGMI: true,
	zHideCustomizeFromCBContext: true,
	zShowMoveAlert: true,
	zInvertIconsColor: false,
	zImpExpCustomLocation: "",
	zLastUsedLocation: "",
	zDragAndDrop: true,
	zDragAndDropControlKey: true,
	zDragAndDropAltKey: true,
	zShowIDOnExportedButtons: true,
	zElementsForIntegration: "",
};

this.CBCME.gPref = function(aKey) {
	let branch = Services.prefs.getBranch(self.CBCME.Branch);
	switch (typeof self.CBCME.DefPrefs[aKey]) {
		case "boolean":
			return branch.getBoolPref(aKey);
			break;
		case "number":
			return branch.getIntPref(aKey);
			break;
		case "string":
			return branch.getComplexValue(aKey, Ci.nsISupportsString).data;
			break;
	}
	return null;
};

this.CBCME.sPref = function(aKey, aVal) {
	let branch = Services.prefs.getBranch(self.CBCME.Branch);
	switch (typeof aVal) {
		case "boolean":
			branch.setBoolPref(aKey, aVal);
			break;
		case "number":
			branch.setIntPref(aKey, aVal);
			break;
		case "string":
			let str = Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString);
			str.data = aVal;
			branch.setComplexValue((aKey), Ci.nsISupportsString, str);
			break;
	}
};

this.CBCME.InitPrefs = function() {
	let branch = Services.prefs.getDefaultBranch(self.CBCME.Branch),
		defaults = $.DefPrefs;
	for (let key in defaults) {
		if (defaults.hasOwnProperty(key)) {
			let val = defaults[key];
			switch (typeof val) {
				case "boolean":
					branch.setBoolPref(key, val);
					break;
				case "number":
					branch.setIntPref(key, val);
					break;
				case "string":
					let str = Cc["@mozilla.org/supports-string;1"].createInstance(Ci.nsISupportsString);
					str.data = val;
					branch.setComplexValue((key),
						Ci.nsISupportsString, str);
					break;
			}
		}
	}
};

this.CBCME.Init();

(function() {
	if (typeof gBrowser !== "object") {
		if (window[$._UID]["EditCBInTab"])
			delete window[$._UID]["EditCBInTab"];
		return;
	}
	const editorBaseUri = "chrome://custombuttons/content/editor.xul";
	const cbIdTabAttr = "custombuttons-editInTab-id";
	window[$._UID]["EditCBInTab"] = function(aBtn, aNewTab) {
		if (!aBtn)
			aBtn = custombuttons.popupNode;
		if (!aBtn)
			return;
		var link = custombuttons.makeButtonLink("edit", aBtn.id);
		var cbs = Cc["@xsms.nm.ru/custombuttons/cbservice;1"]
			.getService(Ci.cbICustomButtonsService);
		var param = cbs.getButtonParameters(link);
		var editorUriFull = editorBaseUri + "?window=" + cbs.getWindowId(document.documentURI) + "&id=" + aBtn.id;
		var editorUri = cbs.mode & 64 || !Object.create ? editorUriFull : editorBaseUri;

		var rawParam = unwrap(param);
		var isSeaMonkey = "Services" in window && Services.appinfo.name === "SeaMonkey";
		var ws = Cc["@mozilla.org/appshell/window-mediator;1"]
			.getService(Ci.nsIWindowMediator)
			.getEnumerator(isSeaMonkey ? null : "navigator:browser");
		while (ws.hasMoreElements()) {
			let win = ws.getNext();
			if (isSeaMonkey && win.location.href !== "chrome://navigator/content/navigator.xul")
				continue;
			let gBrowser = win.gBrowser;
			let tabs = gBrowser.tabs || gBrowser.tabContainer.childNodes;
			for (let i = 0, l = tabs.length; i < l; ++i) {
				let tab = tabs[i];
				if (tab === aNewTab)
					continue;
				let browser = tab.linkedBrowser;
				if (!browser)
					continue;
				let win = browser.contentWindow;
				let loc = win.location.href;
				if (loc.substr(0, editorBaseUri.length) !== editorBaseUri)
					continue;
				let isSameEditor = (loc === editorUriFull);
				if (!isSameEditor) {
					let rawWin = unwrap(win);
					let winParam = ("arguments" in rawWin && rawWin.arguments.length) ?
						unwrap(rawWin.arguments[0]) :
						rawWin.editor && rawWin.editor.param;
					isSameEditor = (winParam && winParam.buttonLink === link);
				}
				if (isSameEditor) {
					gBrowser.selectedTab = tab;
					win.focus();
					aNewTab && setTimeout(function() {
						gBrowser.removeTab(aNewTab);
					}, 0);
					return;
				}
			}
		}

		var tab = aNewTab;
		if (!tab) {
			tab = gBrowser.selectedTab = gBrowser.addTab(editorUri);
			initSessionStore();
			tab.setAttribute(cbIdTabAttr, aBtn.id);
		}

		var browser = tab.linkedBrowser;
		browser.addEventListener("DOMContentLoaded", function load(aE) {
			var doc = aE.target;
			if (doc.location.href !== editorUri)
				return;
			browser.removeEventListener(aE.type, load, false);

			var win = doc.defaultView;
			win.arguments = [param];

			var iconLink = doc.createElementNS("http://www.w3.org/1999/xhtml", "link");
			iconLink.rel = "shortcut icon";
			iconLink.href = $.getStdImage(rawParam.image);
			iconLink.style.display = "none";
			doc.documentElement.insertBefore(iconLink, doc.documentElement.firstChild);

			var alreadyAsked = false;

			function checkUnsaved(aE) {
				if (alreadyAsked)
					return;
				var dlg = unwrap(doc).documentElement;
				if (
					"_fireButtonEvent" in dlg ? !dlg._fireButtonEvent("cancel") : !dlg.cancelDialog())
					aE.preventDefault();
			}

			function onDialogCancel(aE) {
				alreadyAsked = true;
				win.setTimeout(function() {
					alreadyAsked = false;
				}, 100);
			}

			function destroy(aE) {
				win.removeEventListener("dialogcancel", onDialogCancel, false);
				win.removeEventListener("beforeunload", checkUnsaved, false);
				win.removeEventListener("unload", destroy, false);
			}
			win.addEventListener("dialogcancel", onDialogCancel, false);
			win.addEventListener("beforeunload", checkUnsaved, false);
			win.addEventListener("unload", destroy, false);
		}, false);
	};

	function unwrap(aObj) {
		return aObj.wrappedJSObject || aObj;
	}


	function initSessionStore() {
		initSessionStore = function() {};
		var ss = (Cc["@mozilla.org/browser/sessionstore;1"] ||
			Cc["@mozilla.org/suite/sessionstore;1"]).getService(Ci.nsISessionStore);
		ss.persistTabAttribute(cbIdTabAttr);
	}

	function checkTab(aTab) {
		var cbId = aTab.getAttribute(cbIdTabAttr);
		if (!cbId)
			return;
		initSessionStore();
		let btn = document.getElementById(cbId);
		if (btn)
			window[$._UID]["EditCBInTab"](btn, aTab);
	}

	const editorBaseUriLength = editorBaseUri.length;
	if (!window[$._UID]["Listener1"]) {
		window[$._UID]["Listener1"] = true;
		addEventListener("DOMContentLoaded", function(aE) {
			var doc = aE.target;
			if (doc.location.href.substr(0, editorBaseUri.length) !== editorBaseUri)
				return;
			var tabs = gBrowser.tabs || gBrowser.tabContainer.childNodes;
			var i = 0,
				iLen = tabs.length;
			for (; i < iLen; ++i) {
				let tab = tabs[i];
				let browser = tab.linkedBrowser;
				if (browser && (browser.contentDocument === doc)) {
					checkTab(tab);
					break;
				}
			}
		}, true, gBrowser);
	}
	checkTab(gBrowser.selectedTab);

	addDestructor(function(aReason) {
		if (aReason === "delete")
			window[$._UID]["EditCBInTab"] = false;
	}, self);
})();]]></initcode>
  <code><![CDATA[/*CODE*/]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help>
[,]

&lt;!--StyleSheet--&gt;/* DO NOT DELETE THIS LINE!!! */
/************************************/
/* You can add your own styles here */
/************************************/





/* Style for buttons with initialization code disabled */
toolbarbutton[id^="custombuttons-button"][cb-init^="return;"]:not([cb-edit-state]) {
	outline: 1px dotted red !important;
	outline-offset: -1px !important;
}
/* Dialogheader element style */
menupopup[id^="custombuttons-contextpopup"] dialogheader {
	margin: 0 !important;
	padding: 2px 5px 2px 5px !important;
	border:none !important;
}
menupopup[id^="custombuttons-contextpopup"] dialogheader .dialogheader-description,
menupopup[id^="custombuttons-contextpopup"] dialogheader .dialogheader-title {
	font-size:small !important;
	font-weight: 600 !important;
}
/*******************************************************/
/* FROM THIS POINT DOWN DO NOT EDIT/DELETE ANYTHING!!! */
/*******************************************************/
/* Menugroups styles */
menupopup menugroup {
	background-color: menu !important;
	padding: 2px 0 2px 0 !important;
}
menuseparator.menuseparator-next-to-menugroup {
	-moz-margin-start: -28px !important;
}
menuseparator.menuseparator-next-to-menugroup.above {
	margin-bottom: -2px !important;
}
menuseparator.menuseparator-next-to-menugroup.bellow {
	margin-top: -4px !important;
}
menupopup menugroup &gt; .menuitem-iconic {
	-moz-box-flex: 1 !important;
	-moz-box-pack: center !important;
	-moz-box-align: center !important;
}
menupopup menugroup &gt; .menuitem-iconic &gt; .menu-iconic-left {
	-moz-appearance: none;
}
menupopup menugroup &gt; .menuitem-iconic &gt; .menu-iconic-left &gt; .menu-iconic-icon {
	width: 16px !important;
	height: 16px !important;
	margin: 5px !important;
}
menupopup menugroup &gt; .menuitem-iconic &gt; .menu-iconic-left {
	visibility: visible;
	/* override toolkit/themes/linux/global/menu.css */
	-moz-padding-end: 0 !important;
	-moz-margin-end: 0 !important;
}
menupopup menugroup &gt; .menu-iconic &gt; .menu-iconic-text,
menupopup menugroup &gt; .menuitem-iconic &gt; .menu-iconic-text,
menupopup menugroup &gt; .menuitem-iconic &gt; .menu-accel-container {
	display: none !important;
}
menupopup[id^="custombuttons-contextpopup"] menugroup &gt; .menu-iconic {
	display: none !important;
}
/* Apply white filter to dark icons */
menupopup[id="toolbar-context-menu"] menuitem.menuitem-iconic.inverted-color-for-this-image &gt; .menu-iconic-left &gt; .menu-iconic-icon,
menupopup[id^="custombuttons-contextpopup"] menuitem.menuitem-iconic.inverted-color-for-this-image &gt; .menu-iconic-left &gt; .menu-iconic-icon {
	filter: url("data:image/svg+xml;utf8,&lt;svg height='0' xmlns='http://www.w3.org/2000/svg'&gt;&lt;filter id='white' x='0%' y='0%' width='100%' height='100%' &gt;&lt;feComponentTransfer&gt;&lt;feFuncR type='table' tableValues='.6 0'/&gt;&lt;feFuncG type='table' tableValues='.6 0'/&gt;&lt;feFuncB type='table' tableValues='.6 0'/&gt;&lt;/feComponentTransfer&gt;&lt;/filter&gt;&lt;/svg&gt;#white") !important;;
}
/* Some menu items images */


menuitem[id^="_B_A_S_E_I_D_-editButton"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA1UlEQVQ4jZXRMS6EQRjG8R9aIW5BodiI3cK32UsoNDiCTiGhdgNX2MIdHEHhBDa7iZLQaHwK7xdj882YfZKnmXn//5nM8JMRTgrd8pt9NNiQwG2h1wm8jZdYf8C6OKHFDNOlXiTwEc6xi+dgRqlgKp8G7zF3F5I59moEKdz1FJvdQEnQ4GMJfsVhOpQTjP+B17CTE/TBbxgm8C2Oc4KbAgyXsd4reMIEZxkY7kuCFp8huRJ/vaqgxWMPWCWoSa9gHhs1XaSCob8vXtsvDLorHYRtlQ7gGx8FeJbEVZdgAAAAAElFTkSuQmCC") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-editInTab"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAVUlEQVQ4je3TMQqAMAxG4e+QXkGo9+zgGbyFbXddslbtqBh48CeQR5bAgoZjkIYkwo7c4UpSRcj6dXfJCwRTh+2poFfrL/iUoKHEYIQae1I0o+9cMJ+eknf9YNTGeAAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-deleteButton"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACZ0lEQVQ4jX2TwU8aQRjF96QiyzoEhAQjC8KugrLACgRDNGpCPBkSBM/e9KjG/2Ov3PgTNm007lYF1N0VG+toD1bbi0kbLzU9NE16fD0UcU3QL5nTzO+97818wzCdomtrSrtcVuuEEOaVUggh7VJJPVlaUl5sXK2v1x9qNVxUKtDjcdpLpAPT250dGPk8NFGsd50fajVcrKzAWliAOTcHXRSpYhNRCCFmqURvt7dhZrMwZBmGLEOLRhWmXS6rF5VKFzYLBRgzM9AFgSqEkC68tQVzehpmKtVdWiSiMnVCiB6PUzts5HIwMhlogkDNUonebW7CkmVYySQsScKZJEGPRp+7rBNCdFGkdtiUZZipFL5sbOAsncaZJKEtSThPJKCHwy8idnPqgkDtsJVMwpyYgBEKweR5WDzfG7aLaIJADUnC8egoGhyHFsfhhBCYHg80n+91+EnAKBYpXV7GEcuixXE4dbtheb049/mgBwJvuxvFIr1aXcUhx6Fpgz/6/fgUCOA6GEQjGOyd3ygW6VW1igOWRYNlcTw0BNPjwbnfj8uREXzmedyMjeFOENAMhZ5Fum1Xq9CdThwMDqLpcuHU7Ybm81E9EKDXwSBuIhF8Gx/H/eQkvksSjM6cMCeLi+plpYJ9hwP6wAAOnU60OA57w8PdQWrwPP0qirifmsJDOo2f2SweczmYsZjKNDMZZa+/H/t9ffjgcOCIZbHbge0RW+Ew/ZFM4jGXw+9CAX9mZ0ETif+fSnW56k8Cu15vz5tWCCGGINBf+Tz+zs/jLputvzjwjmWV94Sob72zQghpx2Lq9ZMzwzD/AFavaEYFPJnjAAAAAElFTkSuQmCC") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-moveToPanelToolbar"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAiElEQVQ4jaWTMRYAEQxENcON9sbqvYEzaFTu4AAaW2WfzZOw6EhmknwYo6xobYnWFi1HFWfnWnau/TbpxVsmAfAB8CSm/d8pDBkst83PElATUKe5NLNkfgMX7+w1GQGTqg7BrhJXC1GQaI+I9zESf0aTqkpwORcR1vI1jta2wfFT5iZHP3ImfgAnspfZxwDhtQAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-removeToPalette"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA00lEQVQ4je3RMUoDURAG4E9FJIW38Ri2OYBuId7A0kawsvASgQgW2VVRxCCimBhbSauLbCw8gW6eRZ7LIloICzYOfMzwePwMDP/VTO2z1KbVprUXdaM8CjVjlkcsVgEPHE6YFoSctyfKR96fZ73MmX4qCAUhZasKGHP9SnihnBB+UtTmDrtVwIDLe8KIcEe4jQaE4Zd5GP912KkCzrk5JhzNVgtZ7L34ltWk0UF9gytW+2xcsN4nOSU5+UaPJGUtY/OMlebOuM18l4XfwFxzG/xpfQC39YSYUCcNEQAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-copyButton"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABaElEQVQ4jZWTP0pDQRDGv503O7N/LIKFnQQLxcIueIKAeAAtPESOIHgGr2JjYaOdojY2AbWQaBE7QWIk5D2L7AvJS0LMB9MsM7/9ZncGzrlTADmAohqqegUgYIlyAEPvfQtAvRKbAGgZoEjFY6nq5TxHAAoRaddqtdoUIN1WygEosiz7DiHsV8AvCfKc8mYBqrqNUf87Vauq2iqdMPMngLV5DsqzGXnvjzH9yNcrAUrFGA9E5LXM+xcghNAQkTYzd2KMTRHZWwkgIk/M3CWinrX2PtUsB4jILhH1MfruCyL6SQO2HBBCaGRZ9kVEfefcHRH1rbVvzrmtKYCIPABYrwJSz10R6RhjBsz8DmAj5YwAzPwBoDDG/BJRT1UPSwAzd4ioR0Q9EbnFxPCMAaq6o6o31trHFI3U71GMsWmtvVfVq2R7rDT+C787N8YMvPcnmF2wunPuDMAQo0Wclff+HAuWaSJy59zpH5p9c+KFTeQaAAAAAElFTkSuQmCC") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-copyButtonAsBBCode"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAQUlEQVQ4jWNgGEzgPxomVR4iwcrKgtMAJDncBpDg0lEDaGIACwszQQOganAZwEK5C1hZWfEkJLgc3jAgOykPDAAA1ZJAKLTFPOgAAAAASUVORK5CYII=") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-copyButtonAsHTML"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABCUlEQVQ4jc1QSZLDIAwUSIBkKLsKX/0Q/4Ov+Zt8QBfNIXGKbJOcpqaPvSEa4N+h1tpKKbqu63Fy67oepRSttbaP4Zyz5pwt56wnP3JvS+Z53kVEp2kyEdFlWW7GZVnaqM3zvN+FRWSbpqmLiDGzllKeXimlNGZWEbGrdzu1TUQ6M1tK6WV4LEkpKTObiHQA2ICZe0rJYowqIr+PdLm2xRg1pWTM3CGE0EMIRkRfFxCRhhAshNABADYi6kRkiKgxxrclMcaGiEpERkSXL5w7IGJHRPPeKyI+lSBiu2qGiHfhE7tzTr335pxTABhL2oO2P4ZvRgBQ55wBgA78yH3cqV2Nx8Ad34b/Hj+OllHLBbr2CwAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-copyButtonImage"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAnUlEQVQ4jc3RPQ4BURTF8Z+PgrAPtUJnIxZgBZagkolVqDWWIliARCFR6GSq0Twyw2SemcpJTnPzzv/edy//ohOymj7mARl6NRoOQ6YAiGmNFAm6TQBpePdAJwYYYIF+rpaE8CoGaGEbarsw7qfaVYCl4rY3mOOGaQwwU326O8Zhyi/AJPwxdv8rRmWAyw/hl89lgCZ+69AgvPcXegKfOWlGgoA/rgAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-moveToBeg"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAZ0lEQVQ4jWNgGBbgPxLGBVgYGBimkWuAIAMDwx58FuAzQI2BgeEWIRfiMsCFgYHhPZo8NozVgGwGBobfRGjGaUAWpQbAvPCOEgMYGCCBeBOPPAMhAxgYING4mxIDGBggCWkqHvmhDABfPU+2X4C8bwAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-moveToLeft"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAWElEQVQ4jc3SwQqAIBBF0Wv50S2iWuh32yoQmyLnETjwlvfgQhj9FmBW4gJEJXYBdVyADViNhS/x224v64lNYFcBgEMFLCQDydj0BLSI6x/UiBu4EAn4/0620kHHnAdtJgAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-selectForMove"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAb0lEQVQ4jaVTwRHAIAjLBh3JUR2pI7Uf0rNeQMHc5aFIgKhAjG4soQN4jGmRMbkk0oxM5joNCmxBtXgbl2c5s4dLdPaJKMO8qtLYXcfDQgw2+I6PMSb/RvOqeubOvgBiM3WNCmWB46c8ixz9yDD5BTKZP4tDu3tDAAAAAElFTkSuQmCC") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-moveToRight"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAWklEQVQ4jdXOywqAMAxE0fvd0oViwZ+u1YUGivQRG7rowOwyh8AMcVYgAKsVuDTIwvPut+cLNJGQHNZaRLRAEfkDHBYgOwbYAJ9p1Ixrkc+6xgJ0jwF2y3h8blGPQc2PYAhrAAAAAElFTkSuQmCC") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-moveToLast"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAXklEQVQ4jWNgGLZgKgMDAwse+f9IGKeC3QwMDIKUGPCfgYHhJgMDgxohA/4TwO8YGBhcKDHgPwMDw28GBoasATPgHQMDgzM+L2ADyIGoikeeYDQKELAApwEUJ6QhBACQ0k+uTGwshwAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-installToLeft"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAkklEQVQ4jWNgYGD4TwDfYSAA/jMwMCxmYGBIwYEdiTEgC498IQMDQyW5BrRA5W+TYwBM8xsGBgYhUg0gWjM2A0jSjG5AIQMi+t4xMDC8JICvohtQiWTAJwYGhvcE8D1sXpgAFXvOwMDAQ6oXyDIEVzQSbQi+hAQz5BK5BjAwQAI2j5ABy6GGYMOu+DTDDCA7OwMAJLpYCfv41WYAAAAASUVORK5CYII=") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-addToLeft"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAk0lEQVQ4jd2SMQ7CMAxFnxRbscLIwB25Sye6hZHr9BJMDKxsCLO4EgM0oQsSX8oQR+8lcgz/l1LKXlK6q4hvzE5RroADxzUwwAF4AOMaeBb4R0EDBhhCMPTCNW4bA5pCMMV+PqtYtrOKuia5AbsQ+BeLreV8UVE31WtI+l8QeSfp68FLliTLv9Ahac9BQ9I3iT/JEyAATnbY6abGAAAAAElFTkSuQmCC") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-addNormal"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAOklEQVQ4jWNgwA00GBgY/kOxCh51owZQwwANHNgLyQB3POrgisjFlBugggO7IylyxqOO8kAcNYBCAwDaTUQAd6ycCwAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-addToRight"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAlElEQVQ4jd2SMQ7CMAwAT4qtRmFk6B/5S6dmKyPf6SeYGFjZEGHAkUpFpXhhqKUMsXUXyzHsMs5AASaAQ4wXFSkSwjOldGoRZOAFjDXhlWTrYFwmPZLBBMO6sCWZ7NVs0GyC2e61tjmT4jgAvQZ5qGiJXbx6O+ij6v0Ddzfg6JlBEwy/f6EZroLlHrhg+N5EN/z/eAMK7U52zxjmpAAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-installToRight"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAkElEQVQ4jWNgwA/uMDAw/CeA8QJHBgaGFBx4MSEDKhkYGArxyGcRMuA2VEELuQYIMTAwvMFjCEEDCBlClAH4DIEbcJWBgeElAfyOARFthegG3GNgYHhPAH9CMqCSVC/wMDAwPIcqnoDNC+RoJsoAfJqJMuASHs1EGZDHgAgwsgxgYGBgcIUqxIaXE2MAwewMAOuRWAkKu/ZhAAAAAElFTkSuQmCC") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-cloneButton"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABVElEQVQ4jY2RvUoDURCFB8Ts7Jxzl4hF8gpWFr6A2OQBtMkbBBsXtDHY2VgqgmBnb5un8AFiI4idhTZiwioJa3PvZV03rAPT3J9vzjkjJEeqWqhqWelPACcisiZt5T/PAAxFpC8ifTN7SZJk6SGtgNJ/jkXyXlUXAB5EBK0APzkWgItut3tsZq81a9/OudNf1poAIrJpZu+q+pVl2TWAAYABycckSZYkb/8AzGwSJpnZk7d2V7N25t8sAFyJyHpVQRZCFJEND8hr1gZVSyTPVymYNgFEpAfgiOSlmT2rahEBJPcA5ADyNE33AwBAXguyNLMpgG1VLf+jQCvWokUR6UdAlmWHTettUuCcC8FGwIeqzp1z47CuTqezVVHQC+ehzWwnAkgepGk6r3mctGUQAavKr+lm1T2AYRtgpqqFc25cD5HkYbhfCSC5a2ZvdfmVLkiOfgDZPYQeKDzJFgAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-bookmarkButton"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAVUlEQVQ4jWNgwAQnGRgY/uPAJ7CoxwC4NMPwqAGjBtDfgMkMDAxTyDXgEAMDAysUHybVgCcMDAziSGLiDAwMT4k14CcDA4M5FnELqBxBkIpHLg1dAAANUWsJ9RcJ5gAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-buttonHelp"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABt0lEQVQ4jaVTvYqTURAdUmTFmXPO3KC+griID2ERBF/OWpYtLK3FYJIirQoiFjabkEYQ9sdlY7KQz2Bs8vPl29IDt5k7c2bmnHvNGuiQL1IaErgK91W4rwhcpjSQ1G3m18FUjuBeiezBfcnAentEfob7MqWhmeFOscgJwTMcHT02M0vgR53AzB5Gu/1E5Fjk+IAklSOCZ2Z2fxsT+WlH4LGoNXORk5QGu53hXm07b1Gkt/vxNa3fRTuO4V5J6lpKw0K+ryc8KOUlI24IzAjM5Jg3BUyqn1TfCFxFxK3ISSJHHelUgZui8nq/ok4IXncyXxXmuyJ9Y8QNAxcW7qu6WAysCcwaIrfkmDfzwn31/wQELrcBePxhxE+6L1I6MbOWmbUK842A3yKn9FjUSM4tpUECX+suSOoSvJZjLsecwEyh57WJHiX1pZA9k9SF+7JpY0c63dkIfD+wMeJpeFQ70pSGm9fle+VztNeEv2r1EDUt1Ac7DHIschLtODYzEznea+N/zexeKeWZqOnm1bo1gJSGcK+S6tO9LtY6yY/hUW063yneQVI3qT4DF7vvHDgvZK8hpJmZ/QNEuKA1I+S/swAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-updateButton"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABR0lEQVQ4jZVSoU4DQRA9RVD06M3szNzbLQqHIRgMhg9AYVBgsISPQIHDERIE/AOiEhSiDlJSR0gQTSCkBkqhh7kmhfba60s2m+y8mX0zb6KoJMysDmCzLH8EIvIqIu1KpbI4ley9P1bVRxF5Y+ZOfmdE1AdwVpjIzCoiLWbOJp00TbeK+mwycyYibQCX3vtTM2skSdIfLmBmzbGyzawJYG/4vVarrRFRj5kz59ynqt4B2B4pEELYKZjHPhF9mdkNgGTi8MYhhLCSpunqrHlzIYQNIkpn/tF7vywiLSLqjlscAMn/OQ0Ch6p6T0TfuefdarW6MIjHcRx7709yh9ZHCqjq07BVSZL0zawB4MrM6sz8QUQ/AI6KpB+UWKDzKIrmC/sHcJ3L7znnXpi545x7NrPbIpv/wMyWmPldVR+mkieo2AVwUZb/C8XFZqB7/2XEAAAAAElFTkSuQmCC") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-importButtonToLeft"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABAElEQVQ4ja2TPW6EMBBGLQWYn2+MVjIFVaocIiUtt6A2NadOIuUAkWaL1ZK1YCFFRnrd+Nnf2A7hP4qInJl3ISI/FQBwM9sFwLnAzLxtW49tfNac/iQws40AQC8iH6cRYoyb4wLoAXwy83EMAG6xzCsir6r6paquqscCVXUzWxuJ6E1EvkXEAbhCnZi8aZqCQgDDKhiG4f1yufyoqgO4SVRdRFaKWPedRMRDCGFZln4Yhip16bZQ5TgCM7uqFtZ5ntM4jtR1nZ8OcU9wl0zTxCmlYwExuYg48fbZ5pxtmiY+FhA5Czsxed3UXte/VFXlOWc7Fzx8nkeK6zqplwOe1hWnmXJdQQOp+wAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-exportButtonAsXML"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA+klEQVQ4jaXSTUrEQBAF4IBJ1283gc4iK0HwELoQcpJZDAGZyTqnVsEDCM9FGIdgEoPzlk3XV110FcVGiOix67qncRzbrXuLEZF7Efms6/qr7/uHYRjy7mIza1X1Q0SgqshNxvH1+LwLMbPWzN5VFWYGM4OqomkanE79y/l89q36LCJvzAxVhdqEiAqYGTlnHIZD/gv5CTFBVbFv8IWEECAiKIribrsTEczsV6c1oCxLhBCu95kZ7r4bqKoKRHQ93wKY+f/AWm4HwgoQU4S7zxZIVSEy7QEzg5hATPPRLkBKCSklxBjh0SfMFzDhOXD5Rnff9wKi+Qi35Bsbo3PRzNeKnwAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-importFromOverlayToLeft"],
menuitem[id^="_B_A_S_E_I_D_-importFromOverlayToRight"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAXElEQVQ4jeWRMQoAIQwE3Sqybf7/1lwl3qnBhMPKhW3EjBMs5WQAGEm7GSBV8gCS5lVV17BRdTcMwAB0WLvkmYwvhwDtfKUdBng5B4hUqtj0vRnAux+ljMG0wp88qEdk0ygMKpAAAAAASUVORK5CYII=") !important;
	-moz-image-region: auto !important;
}
menuitem[id^="_B_A_S_E_I_D_-importButtonToRight"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABCklEQVQ4jY2TPWrDUBCEFyJpf2YlDE+Fq1Q5REq1voVqufapk0AOEBgXjm3ZGEkDXzOw32MfrMhy3hZYT9M0VNUHzIxmRlXl4vA0TVlVFeu6vtPUVFOabxCM42jTNOVzr6Z0d6qtCEopHMfRjsdjmfdmxoigmS0LzIx93/NwOOhcslng4YwIlr5wGIbqdDrtRUTcnQDo7neBmdHdb0QEARAAI4K73e5vGIZPEZGIIPLS3wRN03COmjIQt5fc/VdVP66CzHwUvEpE8J8fd3+/9gCYbRLA+icC+Aawn/cA2LbtusDdv56HRUQyk13XMTOXBSJSXpVt124WXPbNfMnqCiIi8+N5ZvUWtuYMEVRyXaZT/HMAAAAASUVORK5CYII=") !important;
	-moz-image-region: auto !important;
}

menupopup[id^="custombuttons-contextpopup"] menuitem[dyn_id="_U_I_D_-toggleInitCode"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC1ElEQVQ4jW2TTUsbURiFB1xoUeI1OnPjXGeiJlgU1CiE0QY1SDCKoPkBohcqlbpoR9y4cOE/8CfcncV8dERisWo6GmP8gFYa6xcUa1voqmWgf+B0U8WoZ33e57zwnleS7kkQQlKUmpaiWBaltkWpbSmKlaLUXCSE3PcXKUWpud7U5BQmJ3E2O4vz2Vmcmya+TE/jmHOsNTc7CUrNR4ctWRZ70Sgu5+ZwODqKfCSCnZ4ebIdCyPX2Yq+nB4WJCdihEJKKIh4k70WjOJmexn4kAtswYGmaWNV1c7W+3rQ0Tay3tmLXMJDr7saK14vbTQQhZL2pyTk1TexHIsiHw8h1dWGDMX43JE5IYDMUco6iUWw9fYqkqjqLhBApVV3NP42N4XBkBB86O5Hr6kKuuxu7nZ3I3IcwFjgcH8dhMIgVTUOKMS5ZsiwKL18iH4nA0jSxwRjPtrdj2+fDVnU1NsrKiiDpYFB8jsWQJgRJVRWSRal9NjODbDiMzYGBBUmSpLWSEv6+rAxb5eWwXS5kCbmFJOrrzcvXr5Fxu5FgzJYsSu3TV69gGwY2BwcXbowb5eXcdrmwW1WFA1nGkcfDbwBX8/PIUfofIMvimHOsVVU9OE+WEH4gy/ioqih4vTj1+XjaMMT11BT2NA1xTRNSyuPh+aEhrFVUYKWmBnFCAnchRx4PL3i9uPD7cdXSgq+mie/9/cjoOuKMcUkQQtJ+v5MNBJB+8gQrDQ3HccaKIKc+H79qacGvjg78GR7Gz7Y2pHTdua12glLTfvYM62437MZG7A4PIx0MimVVjS2raixtGOJiagq/w2H8DYWQ8fuxpOvFlU4qikgqClZLS7FDKQqxGE4mJnD24gW+PX+O674+/GhtRcbvxxtNK67y7YkoNROy7CQrK/GushK22428x4N9TcO2ruOtrjsPku9rkRCSoNRM1tZaCcbsBGP2cl2dtVRb++g7/wOHlWTmy2AYugAAAABJRU5ErkJggg==") !important;
	-moz-image-region: auto !important;
}
menupopup[id^="custombuttons-contextpopup"] menuitem[dyn_id="_U_I_D_-toggleInitCode"][_checked="true"][disabled="true"],
menupopup[id^="custombuttons-contextpopup"] menuitem[dyn_id="_U_I_D_-toggleInitCode"][_checked="true"] {
	list-style-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACRUlEQVQ4jZWRXUhTcRjG/xyQebM8IUHYjYFGLMrDWGZobqh9mRfVTREU0oUVfSIFaVSHcM7R8mxzug9d/yM22/LUmnY0ZzSIupAMBXXFwm1IDpkfuxhdP10EojDWeq7f38PvfV9C/icCKWZcDFX0KkJKqqSswLK5wzxhiYPEzgYbcPNLE84EG7BrcGcoZ56xM3ytrIVlvgMt327DEjZCJZUgN7qbcKxYgGfzejRPNaF5qgnm7waopD25FSh6FaFbk1fQFTHi6tcLcEdtuPjpHPa/3if8E8535zeq/WUQ43bcn7uOngUT9HMPUeZXxThazG4okm7SSLoJt4XmCVtAt6WsESO6ogaYFnj0LzqgG62EZojT/R2yEqHEsxsnR+tQKG4HcZANLSVV0kufz2NwqQ8d0Va8SXpwbfIyNIEDm9R7CNpnHkGY16Mz3A61vwx5fXmU7WV1e4dKIS0PwPbLAGmlH7aYCYfecjGOcpv+byewho14MH0H/Ow9iHE7jo/XYMdAIYw/nsCbdIMmrQisvcSJiVpwr7itaxIHESoCGjh/mqEPt+Bp5DG8CQp+rgUjaz48X7HgQ3oYd2duoCpQzme8NONiqFauRH/cAWGhDYZoK4ZXvfCsOjGWlkATdlS+K5/O+i4lVdJTE8fgS4hwLXXCkmiDL+XGeNqP0x/roZMPclkLCCGk6EURPSJXwLcsQloXEfoto3W2GTVyVWb1TFFJpbR+og7D6z44F82oe1+dXT1Tyv1qvnrkcOromDamC+qyqv8BhAM2Q6EvPcUAAAAASUVORK5CYII=") !important;
	-moz-image-region: auto !important;
}
menuitem[dyn_id="_U_I_D_-exportButtonAsXML"][disabled="true"] .menu-iconic-icon,
menuitem[dyn_id="_U_I_D_-installToPosition"][disabled="true"] .menu-iconic-icon,
menuitem[dyn_id="_U_I_D_-buttonHelp"][disabled="true"] .menu-iconic-icon,
menuitem[dyn_id="_U_I_D_-updateButton"][disabled="true"] .menu-iconic-icon,
menuitem[dyn_id="_U_I_D_-toggleInitCode"][_checked="true"][disabled="true"] .menu-iconic-icon {
	opacity: 0.5 !important;
}
&lt;!--StyleSheet--&gt;

&lt;!--NewContextItems--&gt;&lt;menupopup id="_B_A_S_E_I_D_-newItemsMenupopup"
								 xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
								 cb_id="_U_I_D_"&gt;
&lt;menuseparator id="_U_I_D_-separatorForMenuGroups"
			   cb_id="_U_I_D_"
			   class="menuseparator-next-to-menugroup"/&gt;
&lt;dialogheader id="_B_A_S_E_I_D_-infoHeader"
		  title="Button ID #"
		  tooltiptext="Click this header to copy this button full ID to the clipboard."
		  dyn_id="_U_I_D_-infoHeader"
		  onclick="_T_H_A_T_.ContextFunctions.infoHeader(custombuttons.popupNode);"/&gt;
&lt;menugroup id="_B_A_S_E_I_D_-editButtonsGroup"&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-editButton"
			  label="Edit Button..."
			  tooltiptext="Edit button."
			  oncommand="custombuttons.editButton(custombuttons.popupNode);"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-editInTab"
			  label="Edit Button in Tab..."
			  tooltiptext="Edit button in a new tab instead of a window."
			  oncommand="_T_H_A_T_.ContextFunctions.editInTab(custombuttons.popupNode);"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-toggleInitCode"
			  label="Toggle initialization"
			  oncommand="_T_H_A_T_.ContextFunctions.toggleInitCode(custombuttons.popupNode);"
			  class="menuitem-iconic"
			  dyn_id="_U_I_D_-toggleInitCode"/&gt;
&lt;/menugroup&gt;
&lt;menugroup id="_B_A_S_E_I_D_-deleteButtonsGroup"&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-deleteButton"
			  label="Delete button..."
			  tooltiptext="Delete button."
			  oncommand="custombuttons.removeButton(custombuttons.popupNode);"
			  class="menuitem-iconic"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-moveToPanelToolbar"
			  label="Move to panel/toolbar"
			  tooltiptext="Move buton to panel or to toolbar."
			  oncommand="_T_H_A_T_.ContextFunctions.moveToPanelToolbar(custombuttons.popupNode);"
			  class="menuitem-iconic"
			  dyn_id="_U_I_D_-moveToPanelToolbar"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-removeToPalette"
			  label="Remove To Pallete..."
			  tooltiptext="Remove button to palette."
			  oncommand="_T_H_A_T_.ContextFunctions.removeToPalette(custombuttons.popupNode);"
			  class="menuitem-iconic"/&gt;
&lt;/menugroup&gt;
&lt;menugroup id="_B_A_S_E_I_D_-copyButtonsGroup"&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-copyButton"
			  label="Copy button URI"
			  tooltiptext="Copy button URI."
			  oncommand="_T_H_A_T_.ContextFunctions.copyButtons(custombuttons.popupNode, 'URI');"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-copyButtonAsBBCode"
			  label="Copy button as BBCode"
			  tooltiptext="Copy button as BBCode."
			  oncommand="_T_H_A_T_.ContextFunctions.copyButtons(custombuttons.popupNode, 'BBCode');"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-copyButtonAsHTML"
			  label="Copy button as HTML"
			  tooltiptext="Copy button as HTML."
			  oncommand="_T_H_A_T_.ContextFunctions.copyButtons(custombuttons.popupNode, 'HTML');"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-copyButtonImage"
			  label="Copy button image"
			  tooltiptext="Copy button image."
			  oncommand="_T_H_A_T_.ContextFunctions.copyButtons(custombuttons.popupNode, 'Image');"
			  class="menuitem-iconic marked-for-inversion"/&gt;
&lt;/menugroup&gt;
&lt;menugroup id="_B_A_S_E_I_D_-moveButtonsGroup"
		   dyn_id="_U_I_D_-ifIsButtonForTBContext"&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-moveToBeg"
			  label="Move To Beginning"
			  tooltiptext="Move button to the beginning of its toolbar."
			  closemenu="none"
			  oncommand="_T_H_A_T_.ContextFunctions.moveWithin(custombuttons.popupNode, 0);"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-moveToLeft"
			  label="Move To Left"
			  tooltiptext="Move button to the left."
			  closemenu="none"
			  oncommand="_T_H_A_T_.ContextFunctions.moveWithin(custombuttons.popupNode, true);"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-selectForMove"
			  label="Select for move"
			  tooltiptext="Select button for move."
			  onclick="_T_H_A_T_.ContextFunctions.move(custombuttons.popupNode);"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-moveToRight"
			  label="Move To Right"
			  tooltiptext="Move button to the right."
			  closemenu="none"
			  oncommand="_T_H_A_T_.ContextFunctions.moveWithin(custombuttons.popupNode, false);"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-moveToLast"
			  label="Move To End"
			  tooltiptext="Move button to the end of is toolbar."
			  closemenu="none"
			  oncommand="_T_H_A_T_.ContextFunctions.moveWithin(custombuttons.popupNode, 999);"
			  class="menuitem-iconic marked-for-inversion"/&gt;
&lt;/menugroup&gt;
&lt;menugroup id="_B_A_S_E_I_D_-addInstallButtonsGroup"
		   dyn_id="_U_I_D_-ifIsButtonForTBContext"&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-installToLeft"
			  label="Install Left"
			  tooltiptext="Install button from clipboard and place it to the left of current button."
			  oncommand="_T_H_A_T_.ContextFunctions.addInstall(custombuttons.popupNode, 'instL');"
			  class="menuitem-iconic marked-for-inversion"
			  dyn_id="_U_I_D_-installToPosition"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-addToLeft"
			  label="Add Left"
			  tooltiptext="Add a new button placed to the left of current button."
			  oncommand="_T_H_A_T_.ContextFunctions.addInstall(custombuttons.popupNode, 'addL');"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-addNormal"
			  label="Add"
			  tooltiptext="Add new button."
			  oncommand="_T_H_A_T_.ContextFunctions.addInstall(custombuttons.popupNode, 'add');"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-addToRight"
			  label="Add Right"
			  tooltiptext="Add a new button placed to the right of current button."
			  oncommand="_T_H_A_T_.ContextFunctions.addInstall(custombuttons.popupNode, 'addR');"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-installToRight"
			  label="Install Right"
			  tooltiptext="Install button from clipboard and place it to the right of current button."
			  oncommand="_T_H_A_T_.ContextFunctions.addInstall(custombuttons.popupNode, 'instR');"
			  class="menuitem-iconic marked-for-inversion"
			  dyn_id="_U_I_D_-installToPosition"/&gt;
&lt;/menugroup&gt;
&lt;menugroup id="_B_A_S_E_I_D_-otherActionsButtonsGroup"&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-cloneButton"
			  label="Clone Button"
			  tooltiptext="Clone button."
			  closemenu="single"
			  oncommand="event.stopPropagation();"
			  onclick="_T_H_A_T_.ContextFunctions.cloneButton(event, custombuttons.popupNode);"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-bookmarkButton"
			  label="Bookmark button"
			  tooltiptext="Bookmark button."
			  oncommand="custombuttons.bookmarkButton();"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-buttonHelp"
			  label="Button Help"
			  tooltiptext="Button help."
			  oncommand="custombuttons.uChelpButton();"
			  class="menuitem-iconic marked-for-inversion"
			  dyn_id="_U_I_D_-buttonHelp"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-updateButton"
			  label="Update Button"
			  tooltiptext="Update button."
			  oncommand="custombuttons.updateButton();"
			  class="menuitem-iconic marked-for-inversion"
			  dyn_id="_U_I_D_-updateButton"/&gt;
&lt;/menugroup&gt;
&lt;menugroup id="_B_A_S_E_I_D_-exportImportButtons"
		   dyn_id="_U_I_D_-ifIsButtonForTBContext"&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-importButtonToLeft"
			  label="Import XML To left"
			  tooltiptext="Import an XML button file and install it to the left of the current button."
			  oncommand="_T_H_A_T_.ContextFunctions.exportImportButtons.importXML(custombuttons.popupNode, false);"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-importFromOverlayToLeft"
			  label="Import From Overlay to left"
			  tooltiptext="Import button from an overlay file and intall it to the left of the current button."
			  oncommand="event.stopPropagation();"
			  onclick="_T_H_A_T_.ContextFunctions.exportImportButtons.importFromOverlay(custombuttons.popupNode, false);"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-exportButtonAsXML"
			  label="Export as XML"
			  tooltiptext="Export button as an XML file."
			  oncommand="event.stopPropagation();"
			  onclick="_T_H_A_T_.ContextFunctions.exportImportButtons.exportXML(custombuttons.popupNode);"
			  class="menuitem-iconic marked-for-inversion"
			  dyn_id="_U_I_D_-exportButtonAsXML"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-importFromOverlayToRight"
			  label="Import From Overlay to right"
			  tooltiptext="Import button from an overlay file and intall it to the right of the current button."
			  oncommand="event.stopPropagation();"
			  onclick="_T_H_A_T_.ContextFunctions.exportImportButtons.importFromOverlay(custombuttons.popupNode, true);"
			  class="menuitem-iconic marked-for-inversion"/&gt;
	&lt;menuitem id="_B_A_S_E_I_D_-importButtonToRight"
			  label="Import XML To Right"
			  tooltiptext="Import an XML button file and install it to the right of the current button."
			  oncommand="_T_H_A_T_.ContextFunctions.exportImportButtons.importXML(custombuttons.popupNode, true);"
			  class="menuitem-iconic marked-for-inversion"/&gt;
&lt;/menugroup&gt;
&lt;/menupopup&gt;
&lt;!--NewContextItems--&gt;

&lt;!--StyleForXMLFiles--&gt;body{font-size:medium;margin:0}body,code:before,help:before,initcode:before{font-family:"Verdana",sans-serif}#wrapper{position:fixed;top:1em;right:1em;max-width:15%;text-align:center}#button{background-color:#299a0b;border:1px solid #3a7404;border-radius:.5em;padding:0;margin-bottom:1em;box-shadow:1px 2px 3px rgba(0,0,0,.25)}#button a{color:#f0f0f0;font-weight:700;text-shadow:-.5pt -.5px .5pt rgba(0,0,0,1);padding:.8em;text-decoration:none}:-moz-any-link:focus{color:grey;outline-color:transparent;text-decoration:none}#button a,code,code:before,initcode,initcode:before,help,help:before{display:block}#credits{position:fixed;bottom:1em;right:1em;font-size:small}#about{font-size:small}custombutton{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABAElEQVQ4jW2TQXLFMAhDff+b2vEHYw5AF38eVTNdZAIxCEkmw31VptU5T7mvOuepc56K2B2f85TZrEwr99VxptUwm2U2695PZVrH937KfZX76txsVsTus0yrEbEr0/4F4AyQc56eDMiI2F0IbYoj9h9ZSCV2XzXUA1BVL8BvBvSMiN20zWY38VZ5gDEkYtfAYTRToA3qiQJk2hcA7W8gpaxG0nPvp4aiQ5UCzOV2GKAgLUEfpsGCfaBR92TonapmdCoAjHTIgLa6/14gbgow8oj9uwe6SMQ0qTz9P9oDZOgCkfMNJnqWaV8P3ouDRorUXEA4H1wbtMmVjcrQ7TSb9QMtXcwa4wpbXgAAAABJRU5ErkJggg==) fixed #f6f6f1;margin:1em}date,image,mode,accelkey{display:none}name{font-weight:700;font-size:x-large}code:before,help:before,initcode:before{font-weight:700;font-size:large;margin:0 0 1em;padding:.5em}code:before{content:"Code Tab"}help:before{content:"Help Tab"}initcode:before{content:"Initialization Code Tab"}code,initcode,help{background-color:#fcfcfc;font-size:.875em;font-family:Consolas,"Bitstream Vera Sans Mono","Courier New",Courier,monospace!important;margin:1em 2em 1em 0 !important;padding:1em;text-align:left;box-shadow:2px 2px 0 rgba(170,160,130,0.5),4px 4px 0 rgba(200,190,165,0.5);max-width:80%;min-width:80%;white-space:pre-wrap;word-wrap:break-word}&lt;!--StyleForXMLFiles--&gt;
&lt;!--AlertImg--&gt;data:image/png;base64,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&lt;!--AlertImg--&gt;
&lt;!--WarningImg--&gt;data:image/png;base64,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&lt;!--WarningImg--&gt;
&lt;!--ErrorImg--&gt;data:image/png;base64,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&lt;!--ErrorImg--&gt;
&lt;!--ImportFromOverlayWindow--&gt;&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;?xml-stylesheet href="chrome://global/skin" type="text/css"?&gt;
&lt;?xml-stylesheet href="data:text/css;charset=utf-8,
toolbarbutton &gt; .toolbarbutton-text {
	text-align: left !important;
}
toolbarbutton .toolbarbutton-icon {
	width: 16px !important;
	max-width: 16px !important;
	height: 16px !important;
	max-height: 16px !important;
}
" type="text/css" ?&gt;
&lt;window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
	    orient="vertical"
	    windowtype="overlay:importer"
	    onload="gOverlayImporter.onLoad();"&gt;
&lt;script&gt;&lt;![CDATA[
var fromButton = _btn_opener_;

function $(id) document.getElementById(id);
var gOverlayImporter = {
	MaxColumnWidth: 180,
	_btnsPerCol: 0,

	onLoad: function() {
		gOverlayImporter.populateTabs();
	},

	populateTabs: function() {
		var palettes = window.allUsedPalettes;
		Array.prototype.slice.call(palettes).forEach(function(aPal) {
			$(aPal.id + "_tab").hidden = false;
			gOverlayImporter.appendToTab(aPal);
		});
	},

	appendToTab: function(aPal) {
		var btns1 = aPal.getElementsByTagName("toolbarbutton");
		var btns2 = [];
		for (let a = btns1.length - 1; a &gt;= 0; a--) {
			btns2.push([btns1[a].getAttribute("label") || btns1[a].getAttribute("id"),
				btns1[a].getAttribute("image") || fromButton.CBCME.getImg(btns1[a].getAttribute("cb-stdicon")),
				btns1[a].getAttribute("tooltiptext"),
				btns1[a]
			]);
		}
		btns2.sort(function(a, b) {
			return a[0].toLowerCase() &gt; b[0].toLowerCase();
		});
		var btnPerRow = 5;
		var breakPoint = 0;
		var btnCol = [];
		var hbox = $(aPal.id + "_tabpanel").appendChild(fromButton.CBCME.$CNS("hbox"));
		var createCol = function(aArr) {
			let vbox = hbox.appendChild(fromButton.CBCME.$CNS("vbox", {
				maxwidth: (gOverlayImporter.MaxColumnWidth === 0) ? "" : gOverlayImporter.MaxColumnWidth,
				oncommand: "event.target.checked = !event.target.checked;gOverlayImporter.HandleItems(event.target);event.stopPropagation();",
			}));
			var i = 0,
				iLen = aArr.length;
			for (; i &lt; iLen; i++) {
				let btn = vbox.appendChild(fromButton.CBCME.$CNS("toolbarbutton", {
					label: aArr[i][0],
					type: "checkbox",
					checked: false,
					autocheck: false,
					image: aArr[i][1],
					crop: "end",
					tooltiptext: aArr[i][2],
				}));
				btn._btn = aArr[i][3];
				vbox.appendChild(btn);
			}
		};
		gOverlayImporter._btnsPerCol = parseInt((btns2.length / btnPerRow) + 1, 10);
		var b = 0,
			tLen = btns2.length;
		for (; b &lt; tLen; b++) {
			breakPoint++;
			btnCol.push([btns2[b][0],
				btns2[b][1],
				btns2[b][2],
				btns2[b][3]
			]);
			if ((btnCol.length === gOverlayImporter._btnsPerCol) || (b + 1) === btns2.length) {
				breakPoint = 0;
				createCol(btnCol);
				btnCol = [];
				continue;
			}
		}
	},

	HandleItems: function(aEl) {
		if (aEl.checked)
			aEl.setAttribute("_checked", "true");
		else
			aEl.removeAttribute("_checked");
	},
};
]]&gt;&lt;/script&gt;
	&lt;tabbox flex="1"&gt;
		&lt;tabs&gt;
			&lt;tab id="BrowserToolbarPalette_tab" label=" BrowserToolbarPalette " hidden="true" /&gt;
			&lt;tab id="MailToolbarPalette_tab" label=" MailToolbarPalette " hidden="true" /&gt;
			&lt;tab id="MsgComposeToolbarPalette_tab" label=" MsgComposeToolbarPalette " hidden="true" /&gt;
			&lt;tab id="calendarToolbarPalette_tab" label=" calendarToolbarPalette " hidden="true" /&gt;
			&lt;tab id="NvuToolbarPalette_tab" label=" NvuToolbarPalette " hidden="true" /&gt;
		&lt;/tabs&gt;
		&lt;tabpanels flex="1"&gt;
			&lt;tabpanel id="BrowserToolbarPalette_tabpanel"/&gt;
			&lt;tabpanel id="MailToolbarPalette_tabpanel"/&gt;
			&lt;tabpanel id="MsgComposeToolbarPalette_tabpanel"/&gt;
			&lt;tabpanel id="calendarToolbarPalette_tabpanel"/&gt;
			&lt;tabpanel id="NvuToolbarPalette_tabpanel"/&gt;
		&lt;/tabpanels&gt;
	&lt;/tabbox&gt;
	&lt;hbox&gt;
		&lt;spacer flex="1"/&gt;
		&lt;button label="Install all selected buttons" oncommand="fromButton.CBCME.ContextFunctions.exportImportButtons.installFromOverlay(document.getElementsByAttribute('_checked', '*'), window.anchor, window.toRight);close();"/&gt;
		&lt;button label="Cancel" oncommand="close();"/&gt;
		&lt;spacer flex="1"/&gt;
	&lt;/hbox&gt;
&lt;/window&gt;&lt;!--ImportFromOverlayWindow--&gt;</help>
  <attributes/>
</custombutton>