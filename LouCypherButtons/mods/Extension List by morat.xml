<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/"
              xmlns:html="http://www.w3.org/1999/xhtml">
  <html:head>
    <html:title><![CDATA[Extension List]]></html:title>
    <html:link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAA2pJREFUOMtd01toWwUAxvH/OSdpTtKkSZpL00s6nbWdvbmr02qds06qiEhFRCclKEMEh3tcVeqL4ouIsIE4EUSr0BdR9rDOMepsVLau7Wpvq8XZy9qmSZZkSc/J7Vx88IL4e/vzPX8CQEeos61sCJnr8el1AHnPW9WiXuwzJNsBgFpvJtHhHs80urJHfluSZqKXGVSNORVAAPjy7chEU0tr3ckzS63z+aqPHu+093c3yyyUwqQr64knbpNZvMK5l0dNt1MShs47NgZObb20rsyOCgDRU28kdz+wxyfGziGIVgqBPj4ZyyC37EbwhdAMUIoaNZcHOXbfAjoWLk5I2aPvpA5JO7z7vM92yScaA3m7oacoS20YsatcGr3ARMxGvmYnimZSMmDV383SzCZdtSs0hQ3byM+aIfX3tL7X/6T70bIaQ4uvoacS6FKYg807GBrfYsrZyua2hlLSKWoGV9RGnq74nko72E0xbPFKubvN1Aq6YEHPKoiaQZW8yelJkWiwDy1dwCqV2LAK+BxW8orBH3GRoM/kkXZLwHJL0SU9mcawglYwid1QGRxJ8YtzH/ouD2gaZUMkrQkUyzra0hzJJh3aLXw7XSGJynLGpyXSGKqKqkhIVgv3um4hO6v4ZvMYb14fwL0whm7oWG48hSsxzxPNJthlKmt0xOW4ZTW3nINsFqfThveuBl4/YOXHO7/mQe8WJ8K/sjc7iffmM7z4Qg/l0FeIO51QaUPZkhAX88IXs3MaekLFYsRxmkkEPc/I1W2OjrYTnjvOdN1FAFRPDIDAx9cwivDh2dtnBUDqdTckPmiLe333yzga7sDIrBPL+xiYrCcanuKVVx+jZM+RMtbxWIMIWQdDn0bJDlV3SoC5IbcU6tYSvSFFQXeUkP0VOK0FnvOrHK+QiUTn6eiuxhosoNmyCK4Ssz+ksHXmX5MAysWN2Qn3/h7/aqqhdjFHPqZi6AKiLGBYNU6rGr3dXZSDK1hMiXJe5549AerDTiT+ohXyN7+LBh9qniradslr2zCjkhzfJv27wnCTTPt+D58NLjJ9IUfb3ir8iUMMD4/xXyLgEx11vRWhwz+5Qoe3a4IPm/6Ix3w/fcQ8Mz9oWoIHTwKN71573vRHPOa/b/wfGfADAcDlj3gu/TMkP89UAYo/4tH/buFPGOaETqnWnyIAAAAASUVORK5CYII="/>
    <html:style type="text/css"><![CDATA[body { font-size: medium; margin: 0; }
body, code:before, help:before, initcode:before {
  font-family: "Verdana", sans-serif;
}
#wrapper { position: fixed; top: 1em; right: 1em; text-align: center; }
p { font-size: small; text-align: center; }
#button {
  background-color: rgb(85, 168, 2);
  background-image: linear-gradient(to bottom, rgb(147, 200, 94), rgb(85, 168, 2));
  background-image: -moz-linear-gradient(top, rgb(147, 200, 94), rgb(85, 168, 2));
  background-image: -o-linear-gradient(top, rgb(147, 200, 94), rgb(85, 168, 2));
  background-image: -webkit-linear-gradient(top, rgb(147, 200, 94), rgb(85, 168, 2));
  border: 1px solid rgb(58, 116, 4);
  border-radius: .5em;
  -moz-border-radius: .5em;
  -webkit-border-radius: .5em;
  padding: 0;
  margin-bottom: 1em;
  box-shadow: 1px 2px 3px rgba(0, 0, 0, .25);
  -moz-box-shadow: 1px 2px 3px rgba(0, 0, 0, .25);
  -o-box-shadow: 1px 2px 3px rgba(0, 0, 0, .25);
  -webkit-box-shadow: 1px 2px 3px rgba(0, 0, 0, .25);
}
#button a {
  color: #000;
  text-shadow: -1pt -1px 0pt rgba(255, 255, 255, .5);
  padding: 1em;
  text-decoration: none;
}
#button a, code, code:before, initcode, initcode:before, help, help:before {
  display: block;
}
#credits { position: fixed; bottom: 1em; right: 1em; font-size: small; }
custombutton { background-color: rgb(171, 171, 171); margin: 1em; }
date, image, mode, accelkey { display: none; }
name { font-weight: bold; font-size: x-large; }
code:before, help:before, initcode:before {
  font-weight: bold;
  font-size: large;
  margin: 0 0 1em;
  padding: .5em;
}
code:before { content: "CODE"; }
help:before { content: "Help"; }
initcode:before { content: "Initialization Code"; }
code, initcode, help {
  background-color: rgb(255, 255, 255);
  border: 1px inset rgb(170, 170, 170);
  font: medium monospace;
  margin: 1em 1em 2em 0;
  padding: 1em;
  text-align: left;
  width: 840px;
  white-space: pre-wrap;
  word-wrap: break-word;
}
.clear { clear: both; }
]]></html:style>
  </html:head>
  <html:body>
    <html:div id="wrapper">
      <html:div id="button">
        <html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EExtension%20List%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAA2pJREFUOMtd01toWwUAxvH/OSdpTtKkSZpL00s6nbWdvbmr02qds06qiEhFRCclKEMEh3tcVeqL4ouIsIE4EUSr0BdR9rDOMepsVLau7Wpvq8XZy9qmSZZkSc/J7Vx88IL4e/vzPX8CQEeos61sCJnr8el1AHnPW9WiXuwzJNsBgFpvJtHhHs80urJHfluSZqKXGVSNORVAAPjy7chEU0tr3ckzS63z+aqPHu+093c3yyyUwqQr64knbpNZvMK5l0dNt1MShs47NgZObb20rsyOCgDRU28kdz+wxyfGziGIVgqBPj4ZyyC37EbwhdAMUIoaNZcHOXbfAjoWLk5I2aPvpA5JO7z7vM92yScaA3m7oacoS20YsatcGr3ARMxGvmYnimZSMmDV383SzCZdtSs0hQ3byM+aIfX3tL7X/6T70bIaQ4uvoacS6FKYg807GBrfYsrZyua2hlLSKWoGV9RGnq74nko72E0xbPFKubvN1Aq6YEHPKoiaQZW8yelJkWiwDy1dwCqV2LAK+BxW8orBH3GRoM/kkXZLwHJL0SU9mcawglYwid1QGRxJ8YtzH/ouD2gaZUMkrQkUyzra0hzJJh3aLXw7XSGJynLGpyXSGKqKqkhIVgv3um4hO6v4ZvMYb14fwL0whm7oWG48hSsxzxPNJthlKmt0xOW4ZTW3nINsFqfThveuBl4/YOXHO7/mQe8WJ8K/sjc7iffmM7z4Qg/l0FeIO51QaUPZkhAX88IXs3MaekLFYsRxmkkEPc/I1W2OjrYTnjvOdN1FAFRPDIDAx9cwivDh2dtnBUDqdTckPmiLe333yzga7sDIrBPL+xiYrCcanuKVVx+jZM+RMtbxWIMIWQdDn0bJDlV3SoC5IbcU6tYSvSFFQXeUkP0VOK0FnvOrHK+QiUTn6eiuxhosoNmyCK4Ssz+ksHXmX5MAysWN2Qn3/h7/aqqhdjFHPqZi6AKiLGBYNU6rGr3dXZSDK1hMiXJe5549AerDTiT+ohXyN7+LBh9qniradslr2zCjkhzfJv27wnCTTPt+D58NLjJ9IUfb3ir8iUMMD4/xXyLgEx11vRWhwz+5Qoe3a4IPm/6Ix3w/fcQ8Mz9oWoIHTwKN71573vRHPOa/b/wfGfADAcDlj3gu/TMkP89UAYo/4tH/buFPGOaETqnWnyIAAAAASUVORK5CYII%3D%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B/*Initialization%20code*/%0Aconst%20xulNS%20%3D%20%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%3B%0Avar%20data%20%3D%20%3Cwindow%20xmlns%3D%7BxulNS%7D%20onload%3D%7B%27opener.document.getElementById%28%22%27%20+%20this.id%20+%20%27%22%29.load%28%29%27%7D%3E%0A%20%20%20%20%3Ckeyset%3E%0A%20%20%20%20%20%20%3Ckey%20keycode%3D%22VK_ESCAPE%22%20oncommand%3D%22close%28%29%22/%3E%0A%20%20%20%20%3C/keyset%3E%0A%20%20%20%20%3Cvbox%20flex%3D%221%22%3E%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22textbox%22%20multiline%3D%22true%22%20readonly%3D%22false%22%20flex%3D%221%22/%3E%0A%20%20%20%20%20%20%3Chbox%3E%0A%20%20%20%20%20%20%20%20%3Cbutton%20label%3D%22Copy%22%20oncommand%3D%7B%27opener.document.getElementById%28%22%27%20+%20this.id%20+%20%27%22%29.copy%28%29%27%7D/%3E%0A%20%20%20%20%20%20%3C/hbox%3E%0A%20%20%20%20%3C/vbox%3E%0A%3C/window%3E%3B%0Avar%20bool%20%3D%20XML.prettyPrinting%3B%0AXML.prettyPrinting%20%3D%20false%3B%0Adata%20%3D%20%27%3C%3Fxml%20version%3D%221.0%22%3F%3E%3C%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20type%3D%22text/css%22%3F%3E%27%20+%20data.toXMLString%28%29%3B%0AXML.prettyPrinting%20%3D%20bool%3B%0Avar%20dialog%3B%0Athis.leftclick%20%3D%20function%28event%29%20%7B%0A%20%20var%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20data%3B%0A%20%20var%20feature%20%3D%20%22chrome%2Ccenterscreen%2Cwidth%3D400%2Cheight%3D200%2Cdialog%3Dno%22%3B%0A%20%20dialog%20%3D%20window.openDialog%28url%2C%20%22%22%2C%20feature%29%3B%0A%7D%0Athis.load%20%3D%20function%28%29%20%7B%0A%20%20var%20appInfo%20%3D%20Components.classes%5B%22@mozilla.org/xre/app-info%3B1%22%5D.%0A%20%20%20%20getService%28Components.interfaces.nsIXULAppInfo%29%3B%0A%20%20try%20%7B%0A%20%20%20%20var%20extensionManager%20%3D%20Components.classes%5B%22@mozilla.org/extensions/manager%3B1%22%5D.%0A%20%20%20%20%20%20getService%28Components.interfaces.nsIExtensionManager%29%3B%0A%20%20%20%20var%20type%20%3D%20Components.interfaces.nsIUpdateItem.TYPE_EXTENSION%3B%0A%20%20%20%20var%20count%20%3D%20new%20Object%28%29%3B%0A%20%20%20%20var%20list%20%3D%20extensionManager.getItemList%28type%2C%20count%29%3B%0A%20%20%20%20var%20out%20%3D%20new%20Array%28%29%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20count.value%3B%20i++%29%20%7B%0A%20%20%20%20%20%20out.push%28%22*%20%22%20+%20list%5Bi%5D.name%20+%20%22%20%22%20+%20list%5Bi%5D.version%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20out.sort%28%29%3B%0A%20%20%20%20out.unshift%28appInfo.name%20+%20%22%20%22%20+%20appInfo.version%20+%20%22%20Gecko%20%22%20+%20appInfo.platformVersion%2C%20%22%22%29%3B%0A%20%20%20%20dialog.document.title%20%3D%20%22Extension%20List%20%28%20%22%20+%20count.value%20+%20%22%20%29%22%3B%0A%20%20%20%20dialog.document.getElementById%28%22textbox%22%29.value%20%3D%20out.join%28%22%5Cn%22%29%3B%0A%20%20%7D%20catch%28e%29%20%7B%0A%20%20%20%20Components.utils.import%28%22resource%3A//gre/modules/AddonManager.jsm%22%29%3B%0A%20%20%20%20AddonManager.getAllAddons%28function%28aAddons%29%20%7B%0A%20%20%20%20%20%20var%20list%20%3D%20new%20Array%28%29%3B%0A%20%20%20%20%20%20aAddons.forEach%28function%28aAddon%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28aAddon.type%20%3D%3D%20%22extension%22%29%20list.push%28aAddon%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20var%20out%20%3D%20new%20Array%28%29%3B%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20list.length%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20out.push%28%22*%20%22%20+%20list%5Bi%5D.name%20+%20%22%20%22%20+%20list%5Bi%5D.version%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20out.sort%28%29%3B%0A%20%20%20%20%20%20out.unshift%28appInfo.name%20+%20%22%20%22%20+%20appInfo.version%20+%20%22%20Gecko%20%22%20+%20appInfo.platformVersion%2C%20%22%22%29%3B%0A%20%20%20%20%20%20dialog.document.title%20%3D%20%22Extension%20List%20%28%20%22%20+%20list.length%20+%20%22%20%29%22%3B%0A%20%20%20%20%20%20dialog.document.getElementById%28%22textbox%22%29.value%20%3D%20out.join%28%22%5Cn%22%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%0A%7D%0Athis.copy%20%3D%20function%28%29%20%7B%0A%20%20if%20%28navigator.platform.indexOf%28%22Win%22%29%29%20%7B%0A%20%20%20%20gClipboard.write%28dialog.document.getElementById%28%22textbox%22%29.value%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20gClipboard.write%28dialog.document.getElementById%28%22textbox%22%29.value.replace%28/%5Cn/g%2C%20%22%5Cr%5Cn%22%29%29%3B%0A%20%20%7D%0A%20%20dialog.close%28%29%3B%0A%7D%0Athis.setAttribute%28%22onclick%22%2C%20%22custombuttons.gQuot.mHandler%28event%2C%20this%29%22%29%3B%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*Code*/%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" rel="nofollow" title="Install Extension List">
        <![CDATA[Install this button]]>
        </html:a>
      </html:div>
      <html:a href="https://addons.mozilla.org/addon/custom-buttons/?src=custom-buttons-xml">
        <![CDATA[What's this?]]>
      </html:a>
      <html:div id="credits">
        <html:a href="http://custombuttons.sourceforge.net/forum/viewtopic.php?t=78#p197">
          <![CDATA[Custom Buttons XML]]><html:br/><![CDATA[Exporter/Importer]]>
        </html:a>
      </html:div>
    </html:div>
  </html:body>
  <date id="date" value="20120329"/>
  <name>Extension List</name>
  <image><![CDATA[data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAA2pJREFUOMtd01toWwUAxvH/OSdpTtKkSZpL00s6nbWdvbmr02qds06qiEhFRCclKEMEh3tcVeqL4ouIsIE4EUSr0BdR9rDOMepsVLau7Wpvq8XZy9qmSZZkSc/J7Vx88IL4e/vzPX8CQEeos61sCJnr8el1AHnPW9WiXuwzJNsBgFpvJtHhHs80urJHfluSZqKXGVSNORVAAPjy7chEU0tr3ckzS63z+aqPHu+093c3yyyUwqQr64knbpNZvMK5l0dNt1MShs47NgZObb20rsyOCgDRU28kdz+wxyfGziGIVgqBPj4ZyyC37EbwhdAMUIoaNZcHOXbfAjoWLk5I2aPvpA5JO7z7vM92yScaA3m7oacoS20YsatcGr3ARMxGvmYnimZSMmDV383SzCZdtSs0hQ3byM+aIfX3tL7X/6T70bIaQ4uvoacS6FKYg807GBrfYsrZyua2hlLSKWoGV9RGnq74nko72E0xbPFKubvN1Aq6YEHPKoiaQZW8yelJkWiwDy1dwCqV2LAK+BxW8orBH3GRoM/kkXZLwHJL0SU9mcawglYwid1QGRxJ8YtzH/ouD2gaZUMkrQkUyzra0hzJJh3aLXw7XSGJynLGpyXSGKqKqkhIVgv3um4hO6v4ZvMYb14fwL0whm7oWG48hSsxzxPNJthlKmt0xOW4ZTW3nINsFqfThveuBl4/YOXHO7/mQe8WJ8K/sjc7iffmM7z4Qg/l0FeIO51QaUPZkhAX88IXs3MaekLFYsRxmkkEPc/I1W2OjrYTnjvOdN1FAFRPDIDAx9cwivDh2dtnBUDqdTckPmiLe333yzga7sDIrBPL+xiYrCcanuKVVx+jZM+RMtbxWIMIWQdDn0bJDlV3SoC5IbcU6tYSvSFFQXeUkP0VOK0FnvOrHK+QiUTn6eiuxhosoNmyCK4Ssz+ksHXmX5MAysWN2Qn3/h7/aqqhdjFHPqZi6AKiLGBYNU6rGr3dXZSDK1hMiXJe5549AerDTiT+ohXyN7+LBh9qniradslr2zCjkhzfJv27wnCTTPt+D58NLjJ9IUfb3ir8iUMMD4/xXyLgEx11vRWhwz+5Qoe3a4IPm/6Ix3w/fcQ8Mz9oWoIHTwKN71573vRHPOa/b/wfGfADAcDlj3gu/TMkP89UAYo/4tH/buFPGOaETqnWnyIAAAAASUVORK5CYII=]]></image>
  <mode>0</mode>
  <initcode><![CDATA[/*Initialization code*/
const xulNS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
var data = <window xmlns={xulNS} onload={'opener.document.getElementById("' + this.id + '").load()'}>
    <keyset>
      <key keycode="VK_ESCAPE" oncommand="close()"/>
    </keyset>
    <vbox flex="1">
      <textbox id="textbox" multiline="true" readonly="false" flex="1"/>
      <hbox>
        <button label="Copy" oncommand={'opener.document.getElementById("' + this.id + '").copy()'}/>
      </hbox>
    </vbox>
</window>;
var bool = XML.prettyPrinting;
XML.prettyPrinting = false;
data = '<?xml version="1.0"?><?xml-stylesheet href="chrome://global/skin/" type="text/css"?>' + data.toXMLString();
XML.prettyPrinting = bool;
var dialog;
this.leftclick = function(event) {
  var url = "data:application/vnd.mozilla.xul+xml;text/plain," + data;
  var feature = "chrome,centerscreen,width=400,height=200,dialog=no";
  dialog = window.openDialog(url, "", feature);
}
this.load = function() {
  var appInfo = Components.classes["@mozilla.org/xre/app-info;1"].
    getService(Components.interfaces.nsIXULAppInfo);
  try {
    var extensionManager = Components.classes["@mozilla.org/extensions/manager;1"].
      getService(Components.interfaces.nsIExtensionManager);
    var type = Components.interfaces.nsIUpdateItem.TYPE_EXTENSION;
    var count = new Object();
    var list = extensionManager.getItemList(type, count);
    var out = new Array();
    for (var i = 0; i < count.value; i++) {
      out.push("* " + list[i].name + " " + list[i].version);
    }
    out.sort();
    out.unshift(appInfo.name + " " + appInfo.version + " Gecko " + appInfo.platformVersion, "");
    dialog.document.title = "Extension List ( " + count.value + " )";
    dialog.document.getElementById("textbox").value = out.join("\n");
  } catch(e) {
    Components.utils.import("resource://gre/modules/AddonManager.jsm");
    AddonManager.getAllAddons(function(aAddons) {
      var list = new Array();
      aAddons.forEach(function(aAddon) {
        if (aAddon.type == "extension") list.push(aAddon);
      });
      var out = new Array();
      for (var i = 0; i < list.length; i++) {
        out.push("* " + list[i].name + " " + list[i].version);
      }
      out.sort();
      out.unshift(appInfo.name + " " + appInfo.version + " Gecko " + appInfo.platformVersion, "");
      dialog.document.title = "Extension List ( " + list.length + " )";
      dialog.document.getElementById("textbox").value = out.join("\n");
    });
  }
}
this.copy = function() {
  if (navigator.platform.indexOf("Win")) {
    gClipboard.write(dialog.document.getElementById("textbox").value);
  } else {
    gClipboard.write(dialog.document.getElementById("textbox").value.replace(/\n/g, "\r\n"));
  }
  dialog.close();
}
this.setAttribute("onclick", "custombuttons.gQuot.mHandler(event, this)");]]></initcode>
  <code><![CDATA[/*Code*/]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help><![CDATA[]]></help>
  <attributes/>
</custombutton>