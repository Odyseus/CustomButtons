<?xml version="1.0" encoding="UTF-8"?>
<custombutton xmlns:cb="http://xsms.nm.ru/custombuttons/"
              xmlns:html="http://www.w3.org/1999/xhtml">
  <html:head>
    <html:title><![CDATA[Bottom Panel]]></html:title>
    <html:link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABxUlEQVR4XqWRP2oVURSHvztzXyZg/ENiZ2NjOsUtCHYuQndh4QIs3YCbsLBRwQUIgpViIQQFQdTE5M2bNzPnj+cy7zGFgRT+4OM7d5hzONybbj89enVwrbkngzO0wtBpEF7N9bgOr5SxG5HesF5wWePd0dt0//nP9d3D/ebkBJan0LZwVhwsC2ewCrpgHWdrAQcMaF/2eX83jbf2aE6BdRNcDq5Ctw534dXGhRaGHsyhwvn8IY/58MB5dAfcAcK2MYDPtRmoGmqKidMs4OGTilwDi4o5NefG3RFxzILsNDXkysmYclFKk4iFDdVpSAWohvWCfndH1cIW3g5RrOBGFjF+LwcS6fy1tWBTg3kxGl7UMIqSv/5oefbiGHX+SUrz0Lmciku7Fcetkm9c3+Xxg5uMNk9wKxjmHiZsQVgddwvgyo7x7s1Hcq5gr6mYA5ijmhDV0oSaIhIm8Onb2AcG2efdcWd704EhYrgXl/OMmYNPVME2mG1/sOLtC2ybwrZxYIYDuQ5Nceo6SAZiaA6JYmlaXcxY4NMTVrCTy0sk8uv3v+Tb9z/Sr0ZkEKQfkHEMK1o8FAQVAQdnSl0lPn05keTu/E/+ApLnoYXyGb2zAAAAAElFTkSuQmCC"/>
    <html:style type="text/css"><![CDATA[
body { font-size: medium; margin: 0; }
body, code:before, help:before, initcode:before {
  font-family: "Verdana", sans-serif;
}
#wrapper { position: fixed; top: 1em; right: 1em; text-align: center; }
p { font-size: small; text-align: center; }
#button {
  background-color: rgb(85, 168, 2);
  background-image: linear-gradient(to bottom, rgb(147, 200, 94), rgb(85, 168, 2));
  background-image: -moz-linear-gradient(top, rgb(147, 200, 94), rgb(85, 168, 2));
  background-image: -o-linear-gradient(top, rgb(147, 200, 94), rgb(85, 168, 2));
  background-image: -webkit-linear-gradient(top, rgb(147, 200, 94), rgb(85, 168, 2));
  border: 1px solid rgb(58, 116, 4);
  border-radius: .5em;
  -moz-border-radius: .5em;
  -webkit-border-radius: .5em;
  padding: 0;
  margin-bottom: 1em;
  box-shadow: 1px 2px 3px rgba(0, 0, 0, .25);
  -moz-box-shadow: 1px 2px 3px rgba(0, 0, 0, .25);
  -o-box-shadow: 1px 2px 3px rgba(0, 0, 0, .25);
  -webkit-box-shadow: 1px 2px 3px rgba(0, 0, 0, .25);
}
#button a {
  color: #000;
  text-shadow: -1pt -1px 0pt rgba(255, 255, 255, .5);
  padding: 1em;
  text-decoration: none;
}
:-moz-any-link:focus {
  color: white;
  outline-color: transparent;
  text-decoration: none;
}
#button a, code, code:before, initcode, initcode:before, help, help:before {
  display: block;
}
#credits { position: fixed; bottom: 1em; right: 1em; font-size: small; }
custombutton { background-color: rgb(171, 171, 171); margin: 1em; }
date, image, mode, accelkey { display: none; }
name { font-weight: bold; font-size: x-large; }
code:before, help:before, initcode:before {
  font-weight: bold;
  font-size: large;
  margin: 0 0 1em;
  padding: .5em;
}
code:before { content: "CODE"; }
help:before { content: "Help"; }
initcode:before { content: "Initialization Code"; }
code, initcode, help {
  background-color: rgb(255, 255, 255);
  border: 1px inset rgb(170, 170, 170);
  font: medium monospace;
  margin: 1em 1em 2em 0;
  padding: 1em;
  text-align: left;
  width: 840px;
  white-space: pre-wrap;
  word-wrap: break-word;
}
.clear { clear: both; }
]]></html:style>
  </html:head>
  <html:body>
    <html:div id="wrapper">
      <html:div id="button">
        <html:a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EBottom%20Panel%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABxUlEQVR4XqWRP2oVURSHvztzXyZg/ENiZ2NjOsUtCHYuQndh4QIs3YCbsLBRwQUIgpViIQQFQdTE5M2bNzPnj+cy7zGFgRT+4OM7d5hzONybbj89enVwrbkngzO0wtBpEF7N9bgOr5SxG5HesF5wWePd0dt0//nP9d3D/ebkBJan0LZwVhwsC2ewCrpgHWdrAQcMaF/2eX83jbf2aE6BdRNcDq5Ctw534dXGhRaGHsyhwvn8IY/58MB5dAfcAcK2MYDPtRmoGmqKidMs4OGTilwDi4o5NefG3RFxzILsNDXkysmYclFKk4iFDdVpSAWohvWCfndH1cIW3g5RrOBGFjF+LwcS6fy1tWBTg3kxGl7UMIqSv/5oefbiGHX+SUrz0Lmciku7Fcetkm9c3+Xxg5uMNk9wKxjmHiZsQVgddwvgyo7x7s1Hcq5gr6mYA5ijmhDV0oSaIhIm8Onb2AcG2efdcWd704EhYrgXl/OMmYNPVME2mG1/sOLtC2ybwrZxYIYDuQ5Nceo6SAZiaA6JYmlaXcxY4NMTVrCTy0sk8uv3v+Tb9z/Sr0ZkEKQfkHEMK1o8FAQVAQdnSl0lPn05keTu/E/+ApLnoYXyGb2zAAAAAElFTkSuQmCC%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B/*%20*****%20BEGIN%20LICENSE%20BLOCK%20*****%0A%20*%20Version%3A%20MPL%201.1/GPL%202.0/LGPL%202.1%0A%20*%0A%20*%20The%20contents%20of%20this%20file%20are%20subject%20to%20the%20Mozilla%20Public%20License%20Version%0A%20*%201.1%20%28the%20%22License%22%29%3B%20you%20may%20not%20use%20this%20file%20except%20in%20compliance%20with%0A%20*%20the%20License.%20You%20may%20obtain%20a%20copy%20of%20the%20License%20at%0A%20*%20http%3A//www.mozilla.org/MPL/%0A%20*%0A%20*%20Software%20distributed%20under%20the%20License%20is%20distributed%20on%20an%20%22AS%20IS%22%20basis%2C%0A%20*%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND%2C%20either%20express%20or%20implied.%20See%20the%20License%0A%20*%20for%20the%20specific%20language%20governing%20rights%20and%20limitations%20under%20the%0A%20*%20License.%0A%20*%0A%20*%20The%20Original%20Code%20is%20Bottom%20Panel%20for%20Custom%20Buttons.%0A%20*%0A%20*%20The%20Initial%20Developer%20of%20the%20Original%20Code%20is%20LouCypher.%0A%20*%20Portions%20created%20by%20the%20Initial%20Developer%20are%20Copyright%20%28C%29%202006%0A%20*%20the%20Initial%20Developer.%20All%20Rights%20Reserved.%0A%20*%0A%20*%20Contributor%28s%29%3A%0A%20*%20-%20LouCypher%3A%20original%20code%0A%20*%0A%20*%20Alternatively%2C%20the%20contents%20of%20this%20file%20may%20be%20used%20under%20the%20terms%20of%0A%20*%20either%20the%20GNU%20General%20Public%20License%20Version%202%20or%20later%20%28the%20%22GPL%22%29%2C%0A%20*%20in%20which%20case%20the%20provisions%20of%20the%20GPL%20are%20applicable%20instead%20of%20those%0A%20*%20above.%0A%20*%0A%20*%20*****%20END%20LICENSE%20BLOCK%20*****%20*/%0A%0A//%20http%3A//web.archive.org/web/20080531160014/http%3A//custombuttons.phpbbnow.com/viewtopic.php%3Ft%3D160%0A%0Afunction%20%24%28aId%29%20%7B%0A%20%20return%20document.getElementById%28aId%29%3B%0A%7D%0A%0Afunction%20%24xml%28aNode%2C%20aId%2C%20aXML%29%20%7B%0A%20%20var%20node%20%3D%20%24%28aId%29%3B%0A%20%20if%20%28node%29%20node.parentNode.removeChild%28node%29%3B%0A%20%20var%20xml%20%3D%20%28new%20DOMParser%29.parseFromString%28aXML%2C%20%22application/xml%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.documentElement%3B%0A%20%20return%20aNode.appendChild%28xml%29%0A%7D%0A%0A%24xml%28%24%28%22appcontent%22%29%2C%0A%20%20%20%20%20this.id%20+%20%22-splitter%22%2C%0A%20%20%20%20%20%27%3Csplitter%20xmlns%3D%22%27%20+%20xulns%20+%20%27%22%20id%3D%22%27%20+%20this.id%20+%20%27-splitter%22%27%20+%0A%20%20%20%20%20%27%20orient%3D%22vertical%22%20hidden%3D%22true%22%3E%27%20+%0A%20%20%20%20%20%27%3Cgrippy%20id%3D%22%27%20+%20this.id%20+%20%27-grippy%22%27%20+%0A%20%20%20%20%20%27%20oncommand%3D%22document.getElementById%28%5C%27%27%20+%20this.id%20+%0A%20%20%20%20%20%27%5C%27%29.grippy%28event%29%3B%22/%3E%3C/splitter%3E%27%29%3B%0A%0A//%20For%20a%20strange%20reason%2C%20the%20style%20doesn%27t%20automatically%20apply%0A//%20if%20it%27s%20added%20as%20an%20attribute%20in%20grippy%20element%20above%0A%24%28this.id%20+%20%22-grippy%22%29.style.backgroundImage%20%3D%20%22url%28chrome%3A//global/skin/splitter/grip-bottom.gif%29%22%3B%0A%0A%24xml%28%24%28%22appcontent%22%29%2C%0A%20%20%20%20%20this.id%20+%20%22-panel%22%2C%0A%20%20%20%20%20%27%3Cvbox%20xmlns%3D%22%27%20+%20xulns%20+%20%27%22%20id%3D%22%27%20+%20this.id%20+%20%27-panel%22%27%20+%20%0A%20%20%20%20%20%27%20height%3D%22300%22%20hidden%3D%22true%22%3E%27%20+%0A%20%20%20%20%20%27%3Ctoolbox%3E%27%20+%0A%20%20%20%20%20%27%3Ctoolbar%20align%3D%22center%22%3E%27%20+%0A%20%20%20%20%20%27%3Clabel%20id%3D%22%27%20+%20this.id%20+%20%27-label%22%20value%3D%22%27%20+%20this.label%20+%0A%20%20%20%20%20%27%22%20flex%3D%221%22%20crop%3D%22end%22/%3E%27%20+%0A%20%20%20%20%20%27%3Ctoolbarbutton%20class%3D%22tabs-closebutton%22%27%20+%0A%20%20%20%20%20%27%20oncommand%3D%22document.getElementById%28%5C%27%27%20+%20this.id%20+%20%27%5C%27%29.closePanel%28%29%3B%22/%3E%27%20+%0A%20%20%20%20%20%27%3C/toolbar%3E%27%20+%0A%20%20%20%20%20%27%3C/toolbox%3E%27%20+%0A%20%20%20%20%20%27%3Cbrowser%20id%3D%22%27%20+%20this.id%20+%20%27-browser%22%20type%3D%22content%22%20src%3D%22%22%20flex%3D%221%22%27%20+%0A%20%20%20%20%20%27%20contextmenu%3D%22contentAreaContextMenu%22%27%20+%0A%20%20%20%20%20%27%20contentcontextmenu%3D%22contentAreaContextMenu%22%27%20+%0A%20%20%20%20%20%27%20tooltip%3D%22aHTMLTooltip%22%27%20+%0A%20%20%20%20%20%27%20persist%3D%22cachedurl%22%20cachedurl%3D%22%22%20clickthrough%3D%22never%22%27%20+%0A%20%20%20%20%20%27%20onclick%3D%22return%20window.parent.contentAreaClick%28event%2C%20true%29%3B%22/%3E%27%20+%0A%20%20%20%20%20%27%3C/vbox%3E%27%29%3B%0A%0Athis.togglePanel%20%3D%20function%28%29%20%7B%0A%20%20%20if%20%28this.panel%20%26%26%20%28%24%28this.id%20+%20%22-browser%22%29.getAttribute%28%22src%22%29%20%21%3D%20content.location.href%29%29%20%7B%0A%20%20%20%20%24%28this.id%20+%20%22-browser%22%29.setAttribute%28%22src%22%2C%20content.location.href%29%3B%0A%20%20%20%20%24%28this.id%20+%20%22-browser%22%29.setAttribute%28%22cachedurl%22%2C%20content.location.href%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20this.panel%20%3D%20%21this.panel%3B%0A%20%20%20%20%24%28this.id%20+%20%22-browser%22%29.setAttribute%28%22src%22%2C%20this.panel%20%3F%20content.location.href%20%3A%20%22%22%29%3B%0A%20%20%20%20%24%28this.id%20+%20%22-browser%22%29.setAttribute%28%22cachedurl%22%2C%20this.panel%20%3F%20content.location.href%20%3A%20%22%22%29%3B%0A%20%20%20%20%24%28this.id%20+%20%22-panel%22%29.hidden%20%3D%20%21this.panel%3B%0A%20%20%20%20%24%28this.id%20+%20%22-splitter%22%29.hidden%20%3D%20%21this.panel%3B%0A%20%20%7D%0A%20%20%24%28this.id%20+%20%22-label%22%29.value%20%3D%20content.document.title%3B%0A%7D%0A%0Athis.closePanel%20%3D%20function%28%29%20%7B%0A%20%20this.panel%20%3D%20false%3B%0A%20%20%24%28this.id%20+%20%22-browser%22%29.setAttribute%28%22src%22%2C%20%22%22%29%3B%0A%20%20%24%28this.id%20+%20%22-browser%22%29.setAttribute%28%22cachedurl%22%2C%20%22%22%29%3B%0A%20%20%24%28this.id%20+%20%22-panel%22%29.hidden%20%3D%20true%3B%0A%20%20%24%28this.id%20+%20%22-splitter%22%29.hidden%20%3D%20true%3B%0A%7D%0A%0Athis.grippy%20%3D%20function%28aEvent%29%20%7B%0A%20%20aEvent.target.parentNode.nextSibling.collapsed%20%3D%20%21aEvent.target.parentNode.nextSibling.collapsed%3B%0A%20%20aEvent.target.style.backgroundImage%20%3D%20%28aEvent.target.parentNode.getAttribute%28%22state%22%29%20%3D%3D%20%22collapsed%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20%22url%28chrome%3A//global/skin/splitter/grip-bottom.gif%29%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20%22url%28chrome%3A//global/skin/splitter/grip-top.gif%29%22%3B%0A%7D%0A%0Athis.panel%20%3D%20false%3B%0A%0Athis.openPanel%20%3D%20function%20openPanel%28aTitle%2C%20aURL%29%20%7B%0A%20%20this.panel%20%3D%20%21this.panel%3B%0A%20%20%24%28this.id%20+%20%22-browser%22%29.setAttribute%28%22src%22%2C%20this.panel%20%3F%20aURL%20%3A%20%22%22%29%3B%0A%20%20%24%28this.id%20+%20%22-browser%22%29.setAttribute%28%22cachedurl%22%2C%20this.panel%20%3F%20aURL%20%3A%20%22%22%29%3B%0A%20%20%24%28this.id%20+%20%22-panel%22%29.hidden%20%3D%20%21this.panel%3B%0A%20%20%24%28this.id%20+%20%22-splitter%22%29.hidden%20%3D%20%21this.panel%3B%0A%20%20%24%28this.id%20+%20%22-label%22%29.value%20%3D%20aTitle%3B%0A%7D%0A%0Avar%20btn%20%3D%20this%3B%0Awindow.setTimeout%28function%28%29%20%7B%0A%20%20var%20jsConsole%20%3D%20document.getElementById%28%22console2-button%22%29%3B%0A%20%20if%20%28jsConsole%29%20%7B%0A%20%20%20%20jsConsole.setAttribute%28%22onclick%22%2C%0A%20%20%20%20%20%20%22if%28event.button%20%3D%3D%201%29%20document.getElementById%28%27%22%20+%20btn.id%20+%20%22%27%29.openPanel%28%27Error%20Console%27%2C%20%27chrome%3A//console2/content/console2.xul%27%29%3B%22%29%3B%0A%20%20%7D%0A%7D%29%0A%0AgCBPanel%20%3D%20this%3B%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5Bthis.togglePanel%28%29%3B%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E" rel="nofollow" title="Install Bottom Panel">
        <![CDATA[Install this button]]>
        </html:a>
      </html:div>
      <html:a href="https://addons.mozilla.org/addon/custom-buttons/?src=external-custombuttons-xml">
        <![CDATA[What's this?]]>
      </html:a>
      <html:div id="credits">
        <html:a href="http://custombuttons.sourceforge.net/forum/viewtopic.php?t=78#p197">
          <![CDATA[Custom Buttons XML]]><html:br/><![CDATA[Exporter/Importer]]>
        </html:a>
      </html:div>
    </html:div>
  </html:body>
  <name>Bottom Panel</name>
  <image><![CDATA[data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABxUlEQVR4XqWRP2oVURSHvztzXyZg/ENiZ2NjOsUtCHYuQndh4QIs3YCbsLBRwQUIgpViIQQFQdTE5M2bNzPnj+cy7zGFgRT+4OM7d5hzONybbj89enVwrbkngzO0wtBpEF7N9bgOr5SxG5HesF5wWePd0dt0//nP9d3D/ebkBJan0LZwVhwsC2ewCrpgHWdrAQcMaF/2eX83jbf2aE6BdRNcDq5Ctw534dXGhRaGHsyhwvn8IY/58MB5dAfcAcK2MYDPtRmoGmqKidMs4OGTilwDi4o5NefG3RFxzILsNDXkysmYclFKk4iFDdVpSAWohvWCfndH1cIW3g5RrOBGFjF+LwcS6fy1tWBTg3kxGl7UMIqSv/5oefbiGHX+SUrz0Lmciku7Fcetkm9c3+Xxg5uMNk9wKxjmHiZsQVgddwvgyo7x7s1Hcq5gr6mYA5ijmhDV0oSaIhIm8Onb2AcG2efdcWd704EhYrgXl/OMmYNPVME2mG1/sOLtC2ybwrZxYIYDuQ5Nceo6SAZiaA6JYmlaXcxY4NMTVrCTy0sk8uv3v+Tb9z/Sr0ZkEKQfkHEMK1o8FAQVAQdnSl0lPn05keTu/E/+ApLnoYXyGb2zAAAAAElFTkSuQmCC]]></image>
  <mode>0</mode>
  <initcode><![CDATA[/* ***** BEGIN LICENSE BLOCK *****
 * Version: MPL 1.1/GPL 2.0/LGPL 2.1
 *
 * The contents of this file are subject to the Mozilla Public License Version
 * 1.1 (the "License"); you may not use this file except in compliance with
 * the License. You may obtain a copy of the License at
 * http://www.mozilla.org/MPL/
 *
 * Software distributed under the License is distributed on an "AS IS" basis,
 * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 * for the specific language governing rights and limitations under the
 * License.
 *
 * The Original Code is Bottom Panel for Custom Buttons.
 *
 * The Initial Developer of the Original Code is LouCypher.
 * Portions created by the Initial Developer are Copyright (C) 2006
 * the Initial Developer. All Rights Reserved.
 *
 * Contributor(s):
 * - LouCypher: original code
 *
 * Alternatively, the contents of this file may be used under the terms of
 * either the GNU General Public License Version 2 or later (the "GPL"),
 * in which case the provisions of the GPL are applicable instead of those
 * above.
 *
 * ***** END LICENSE BLOCK ***** */

// http://web.archive.org/web/20080531160014/http://custombuttons.phpbbnow.com/viewtopic.php?t=160

function $(aId) {
  return document.getElementById(aId);
}

function $xml(aNode, aId, aXML) {
  var node = $(aId);
  if (node) node.parentNode.removeChild(node);
  var xml = (new DOMParser).parseFromString(aXML, "application/xml")
                           .documentElement;
  return aNode.appendChild(xml)
}

$xml($("appcontent"),
     this.id + "-splitter",
     '<splitter xmlns="' + xulns + '" id="' + this.id + '-splitter"' +
     ' orient="vertical" hidden="true">' +
     '<grippy id="' + this.id + '-grippy"' +
     ' oncommand="document.getElementById(\'' + this.id +
     '\').grippy(event);"/></splitter>');

// For a strange reason, the style doesn't automatically apply
// if it's added as an attribute in grippy element above
$(this.id + "-grippy").style.backgroundImage = "url(chrome://global/skin/splitter/grip-bottom.gif)";

$xml($("appcontent"),
     this.id + "-panel",
     '<vbox xmlns="' + xulns + '" id="' + this.id + '-panel"' + 
     ' height="300" hidden="true">' +
     '<toolbox>' +
     '<toolbar align="center">' +
     '<label id="' + this.id + '-label" value="' + this.label +
     '" flex="1" crop="end"/>' +
     '<toolbarbutton class="tabs-closebutton"' +
     ' oncommand="document.getElementById(\'' + this.id + '\').closePanel();"/>' +
     '</toolbar>' +
     '</toolbox>' +
     '<browser id="' + this.id + '-browser" type="content" src="" flex="1"' +
     ' contextmenu="contentAreaContextMenu"' +
     ' contentcontextmenu="contentAreaContextMenu"' +
     ' tooltip="aHTMLTooltip"' +
     ' persist="cachedurl" cachedurl="" clickthrough="never"' +
     ' onclick="return window.parent.contentAreaClick(event, true);"/>' +
     '</vbox>');

this.togglePanel = function() {
   if (this.panel && ($(this.id + "-browser").getAttribute("src") != content.location.href)) {
    $(this.id + "-browser").setAttribute("src", content.location.href);
    $(this.id + "-browser").setAttribute("cachedurl", content.location.href);
  } else {
    this.panel = !this.panel;
    $(this.id + "-browser").setAttribute("src", this.panel ? content.location.href : "");
    $(this.id + "-browser").setAttribute("cachedurl", this.panel ? content.location.href : "");
    $(this.id + "-panel").hidden = !this.panel;
    $(this.id + "-splitter").hidden = !this.panel;
  }
  $(this.id + "-label").value = content.document.title;
}

this.closePanel = function() {
  this.panel = false;
  $(this.id + "-browser").setAttribute("src", "");
  $(this.id + "-browser").setAttribute("cachedurl", "");
  $(this.id + "-panel").hidden = true;
  $(this.id + "-splitter").hidden = true;
}

this.grippy = function(aEvent) {
  aEvent.target.parentNode.nextSibling.collapsed = !aEvent.target.parentNode.nextSibling.collapsed;
  aEvent.target.style.backgroundImage = (aEvent.target.parentNode.getAttribute("state") == "collapsed")
                                          ? "url(chrome://global/skin/splitter/grip-bottom.gif)"
                                          : "url(chrome://global/skin/splitter/grip-top.gif)";
}

this.panel = false;

this.openPanel = function openPanel(aTitle, aURL) {
  this.panel = !this.panel;
  $(this.id + "-browser").setAttribute("src", this.panel ? aURL : "");
  $(this.id + "-browser").setAttribute("cachedurl", this.panel ? aURL : "");
  $(this.id + "-panel").hidden = !this.panel;
  $(this.id + "-splitter").hidden = !this.panel;
  $(this.id + "-label").value = aTitle;
}

var btn = this;
window.setTimeout(function() {
  var jsConsole = document.getElementById("console2-button");
  if (jsConsole) {
    jsConsole.setAttribute("onclick",
      "if(event.button == 1) document.getElementById('" + btn.id + "').openPanel('Error Console', 'chrome://console2/content/console2.xul');");
  }
})

gCBPanel = this;]]></initcode>
  <code><![CDATA[this.togglePanel();]]></code>
  <accelkey><![CDATA[]]></accelkey>
  <help><![CDATA[]]></help>
  <attributes/>
</custombutton>